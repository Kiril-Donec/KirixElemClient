{"version":3,"file":"static/js/main.1c63eefa.js","mappings":"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","sources":["webpack/runtime/chunk loaded","src/services/Crypto.ts","src/services/WebSocket.ts","src/services/api.ts","src/components/ErrorMessage.tsx","src/screens/LoginScreen.tsx","src/components/LetterAvatar.tsx","src/constants/websocket.ts","src/utils/fileUtils.ts","src/services/FileService.ts","src/components/LinkAlert.tsx","src/components/LinkText.tsx","src/components/ProfileModal.tsx","src/components/PostCard.tsx","src/components/CreatePost.tsx","src/components/WebSocketStatus.tsx","src/screens/FeedScreen.tsx","src/screens/ProfileScreen.tsx","src/navigation/index.tsx","App.tsx","index.ts","src/utils/disableWarnings.ts","webpack/bootstrap","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","//    ArrayBuffer  PEM \nexport async function arrayBufferToPem(buffer: ArrayBuffer, type: string): Promise<string> {\n    const binary = String.fromCharCode.apply(null, Array.from(new Uint8Array(buffer)));\n    const base64 = btoa(binary);\n    let pem = `-----BEGIN ${type}-----\\n`;\n    pem += base64.match(/.{1,64}/g)?.join('\\n') || '';\n    pem += `\\n-----END ${type}-----\\n`;\n    return pem;\n}\n\n//   \nexport function importPublicKey(pk: string): ArrayBuffer {\n    const base64String = pk\n        .replace(/-----BEGIN PUBLIC KEY-----/, '')\n        .replace(/-----END PUBLIC KEY-----/, '')\n        .replace(/\\s/g, '');\n    const publicKeyBytes = Uint8Array.from(atob(base64String), c => c.charCodeAt(0));\n    return publicKeyBytes.buffer;\n}\n\n//   \nexport function importPrivateKey(pk: string): ArrayBuffer {\n    const base64String = pk\n        .replace(/-----BEGIN PRIVATE KEY-----/, '')\n        .replace(/-----END PRIVATE KEY-----/, '')\n        .replace(/\\s/g, '');\n    const privateKeyBytes = Uint8Array.from(atob(base64String), c => c.charCodeAt(0));\n    return privateKeyBytes.buffer;\n}\n\n// RSA \nexport async function rsaEncrypt(data: string, pk: string): Promise<Uint8Array> {\n    try {\n        const publicKeyBuffer = importPublicKey(pk);\n        const dataBuffer = new TextEncoder().encode(data);\n        const publicKeyE = await crypto.subtle.importKey(\n            'spki',\n            publicKeyBuffer,\n            { name: 'RSA-OAEP', hash: { name: 'SHA-256' } },\n            true,\n            ['encrypt']\n        );\n        const encryptedDataBuffer = await crypto.subtle.encrypt(\n            { name: 'RSA-OAEP' },\n            publicKeyE,\n            dataBuffer\n        );\n        return new Uint8Array(encryptedDataBuffer);\n    } catch (error) {\n        throw new Error('  : ' + (error as Error).message);\n    }\n}\n\n// RSA \nexport async function rsaDecrypt(data: Uint8Array, privateKey: ArrayBuffer): Promise<string> {\n    try {\n        const privateKeyE = await crypto.subtle.importKey(\n            'pkcs8',\n            privateKey,\n            { name: 'RSA-OAEP', hash: { name: 'SHA-256' } },\n            true,\n            ['decrypt']\n        );\n        const decryptedDataBuffer = await crypto.subtle.decrypt(\n            { name: 'RSA-OAEP' },\n            privateKeyE,\n            data\n        );\n        return new TextDecoder().decode(decryptedDataBuffer);\n    } catch (error) {\n        throw new Error('  : ' + (error as Error).message);\n    }\n}\n\n//   AES (32 ,   Base64)\nexport function generateAESKey(): string {\n    const bytes = crypto.getRandomValues(new Uint8Array(32));\n    return btoa(String.fromCharCode(...Array.from(bytes)));\n}\n\n//  Base64  ArrayBuffer\nexport function base64ToBytes(base64: string): ArrayBuffer {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array([...binaryString].map(char => char.charCodeAt(0)));\n    return bytes.buffer;\n}\n\n// AES \nexport async function aesEncrypt(data: string, key: string): Promise<Uint8Array | null> {\n    const iv = crypto.getRandomValues(new Uint8Array(16));\n    const encodedData = new TextEncoder().encode(data);\n\n    try {\n        const importedKey = await crypto.subtle.importKey(\n            'raw',\n            base64ToBytes(key),\n            { name: 'AES-CBC' },\n            false,\n            ['encrypt']\n        );\n        const encryptedBuffer = await crypto.subtle.encrypt(\n            { name: 'AES-CBC', iv: iv },\n            importedKey,\n            encodedData\n        );\n\n        //  IV      \n        const result = new Uint8Array(iv.byteLength + encryptedBuffer.byteLength);\n        result.set(iv);\n        result.set(new Uint8Array(encryptedBuffer), iv.byteLength);\n        return result;\n    } catch (error) {\n        console.error(\"  :\", error);\n        return null;\n    }\n}\n\n// AES \nexport async function aesDecrypt(data: Uint8Array, key: string): Promise<string> {\n    const iv = data.slice(0, 16);\n    const encrypted = data.slice(16);\n\n    const importedKey = await crypto.subtle.importKey(\n        'raw',\n        base64ToBytes(key),\n        { name: 'AES-CBC' },\n        false,\n        ['decrypt']\n    );\n    const decryptedBuffer = await crypto.subtle.decrypt(\n        { name: 'AES-CBC', iv: iv },\n        importedKey,\n        encrypted\n    );\n    return new TextDecoder().decode(decryptedBuffer);\n}\n\n//  Blob  Uint8Array\nexport async function blobToUint8Array(blob: Blob): Promise<Uint8Array> {\n    const arrayBuffer = await blob.arrayBuffer();\n    return new Uint8Array(arrayBuffer);\n}\n\n//  ArrayBuffer  Base64\nexport function arrayBufferToBase64(buffer: ArrayBuffer): string {\n    const bytes = new Uint8Array(buffer);\n    let binary = '';\n    for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binary);\n}\n\n//  Base64  ArrayBuffer\nexport function base64ToArrayBuffer(base64: string): ArrayBuffer {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; ++i) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n} ","import {\n    arrayBufferToPem,\n    rsaEncrypt,\n    rsaDecrypt,\n    generateAESKey,\n    blobToUint8Array,\n    aesEncrypt,\n    aesDecrypt\n} from './Crypto';\n\nexport interface WebSocketMessage {\n    type: string;\n    action?: string;\n    data?: any;\n    status?: string;\n    message?: string;\n    S_KEY?: string;\n    username?: string;\n    key?: string;\n    accountData?: {\n        id: number;\n        username: string;\n        name: string;\n        avatar: string | null;\n    };\n    posts?: Array<{\n        id: string;\n        author: {\n            id: number;\n            username: string;\n            name: string;\n            avatar: string | null;\n            icons?: string[];\n        };\n        content: string;\n        date: string;\n        likes: number;\n        dislikes: number;\n        comments: number;\n        my_post: boolean;\n        liked: boolean | null;\n        disliked: boolean | null;\n        attachments: Array<{\n            type: 'image' | 'video' | 'file';\n            data: any;\n        }>;\n    }>;\n    post?: {\n        id: string;\n        author: {\n            id: number;\n            username: string;\n            name: string;\n            avatar: string | null;\n            icons?: string[];\n        };\n        content: string;\n        date: string;\n        likes: number;\n        dislikes: number;\n        comments: number;\n        my_post: boolean;\n        liked: boolean | null;\n        disliked: boolean | null;\n        attachments: Array<{\n            type: 'image' | 'video' | 'file';\n            data: any;\n        }>;\n    };\n    posts_type?: 'last' | 'rec' | 'subscribe' | 'profile';\n    target_id?: string;\n    target_type?: number;\n    start_index?: number;\n    post_id?: string;\n    interaction_type?: 'LIKE' | 'DISLIKE' | 'REMOVE_LIKE' | 'REMOVE_DISLIKE';\n}\n\nclass WebSocketService {\n    private url: string;\n    private socket: WebSocket | null;\n    private isConnected: boolean;\n    private rsaPublic: ArrayBuffer | null;\n    private rsaPrivate: ArrayBuffer | null;\n    private rsaPublicServer: string | null;\n    private aesKey: string | null;\n    private aesServerKey: string | null;\n    private keysReady: boolean;\n    private socketReady: boolean;\n    private messageQueue: WebSocketMessage[];\n    private processingMessages: boolean;\n    private messageHandlers: Map<string, (data: WebSocketMessage) => void>;\n\n    constructor() {\n        // URL WebSocket-\n        this.url = 'wss://bypass.wselem.xyz';\n        this.socket = null;\n        this.isConnected = false;\n        this.rsaPublic = null;\n        this.rsaPrivate = null;\n        this.rsaPublicServer = null;\n        this.aesKey = null;\n        this.aesServerKey = null;\n        this.keysReady = false;\n        this.socketReady = false;\n        this.messageQueue = [];\n        this.processingMessages = false;\n        this.messageHandlers = new Map();\n\n        //     \n        this.connect();\n    }\n\n    get connectionStatus(): boolean {\n        return this.isConnected;\n    }\n\n    get ready(): boolean {\n        return this.socketReady && this.keysReady;\n    }\n\n    //  RSA-\n    private async generateKeys(): Promise<boolean> {\n        const keyPair = await window.crypto.subtle.generateKey({\n            name: 'RSA-OAEP',\n            modulusLength: 2048,\n            publicExponent: new Uint8Array([1, 0, 1]),\n            hash: { name: 'SHA-256' }\n        }, true, ['encrypt', 'decrypt']);\n        this.rsaPublic = await window.crypto.subtle.exportKey('spki', keyPair.publicKey);\n        this.rsaPrivate = await window.crypto.subtle.exportKey('pkcs8', keyPair.privateKey);\n        this.keysReady = true;\n        return true;\n    }\n\n    //   \n    private processQueue(): void {\n        if (!this.socketReady || this.processingMessages) return;\n        this.processingMessages = true;\n        while (this.messageQueue.length > 0) {\n            const message = this.messageQueue.shift();\n            if (message) {\n                this.send(message);\n            }\n        }\n        this.processingMessages = false;\n    }\n\n    //  \n    public connect(): void {\n        console.log('  WebSocket...');\n        this.socket = new WebSocket(this.url);\n\n        this.socket.onopen = async () => {\n            console.log('WebSocket ');\n            await this.generateKeys();\n            if (this.rsaPublic) {\n                const publicKeyPem = await arrayBufferToPem(this.rsaPublic, 'PUBLIC KEY');\n                this.socket?.send(JSON.stringify({\n                    type: 'key_exchange',\n                    key: publicKeyPem\n                }));\n                this.isConnected = true;\n                this.processQueue();\n            }\n        };\n\n        this.socket.onmessage = async (event) => {\n            const rawData = event.data;\n\n            if (this.rsaPublicServer) {\n                if (this.aesServerKey && this.aesKey) {\n                    const decryptedStr = await aesDecrypt(\n                        await blobToUint8Array(rawData),\n                        this.aesKey\n                    );\n                    const decryptedData = JSON.parse(decryptedStr) as WebSocketMessage;\n                    console.log(' :', decryptedData);\n                    \n                    if (decryptedData.type) {\n                        const handler = this.messageHandlers.get(decryptedData.type);\n                        if (handler) {\n                            handler(decryptedData);\n                        }\n                    }\n                } else {\n                    const decryptedStr = await rsaDecrypt(\n                        await blobToUint8Array(rawData),\n                        this.rsaPrivate!\n                    );\n                    const decryptedData = JSON.parse(decryptedStr);\n                    if (decryptedData.type === 'aes_key') {\n                        this.aesServerKey = decryptedData.key;\n                        this.socketReady = true;\n                        console.log('WebSocket    ');\n                        this.processQueue();\n                    }\n                }\n            } else {\n                const data = JSON.parse(rawData) as WebSocketMessage;\n                if (data.type === 'key_exchange') {\n                    this.rsaPublicServer = data.key || null;\n                    this.aesKey = await generateAESKey();\n                    console.log('AES  ');\n                    if (this.rsaPublicServer) {\n                        const encryptedMessage = await rsaEncrypt(\n                            JSON.stringify({\n                                type: 'aes_key',\n                                key: this.aesKey\n                            }),\n                            this.rsaPublicServer\n                        );\n                        this.socket?.send(encryptedMessage);\n                    }\n                }\n            }\n        };\n\n        this.socket.onclose = () => {\n            this.disconnect();\n            setTimeout(() => this.connect(), 5000);\n        };\n\n        this.socket.onerror = () => {\n            this.disconnect();\n            setTimeout(() => this.connect(), 5000);\n        };\n    }\n\n    //  \n    public async send(data: WebSocketMessage): Promise<void> {\n        if (!this.isConnected || this.socket?.readyState !== WebSocket.OPEN || !this.socketReady) {\n            console.log('   :', data);\n            this.messageQueue.push(data);\n            return;\n        }\n        const jsonData = JSON.stringify(data);\n        if (this.aesServerKey) {\n            const encrypted = await aesEncrypt(jsonData, this.aesServerKey);\n            if (encrypted) {\n                this.socket?.send(encrypted);\n            }\n        }\n    }\n\n    //  \n    public disconnect(): void {\n        if (this.socket) {\n            if (this.socket.readyState === WebSocket.OPEN) {\n                this.socket.close();\n            }\n            this.socket = null;\n        }\n        this.isConnected = false;\n        this.rsaPublic = null;\n        this.rsaPrivate = null;\n        this.rsaPublicServer = null;\n        this.aesKey = null;\n        this.aesServerKey = null;\n        this.keysReady = false;\n        this.socketReady = false;\n        console.log('WebSocket ');\n    }\n\n    //   \n    public addMessageHandler(type: string, handler: (data: WebSocketMessage) => void): void {\n        this.messageHandlers.set(type, handler);\n    }\n\n    //   \n    public removeMessageHandler(type: string): void {\n        this.messageHandlers.delete(type);\n    }\n}\n\n//      \nconst webSocketService = new WebSocketService();\nexport default webSocketService; ","import axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport webSocketService, { WebSocketMessage } from './WebSocket';\n\nconst AUTH_API_URL = 'https://api.elemsocial.com';\nconst POSTS_API_URL = 'https://elemsocial.com';\nconst SYSTEM_API_URL = 'https://elemsocial.com/System/API';\nconst WS_URL = 'wss://bypass.wselem.xyz'; //wss://wselem.xyz:8880 \n\nconst authApi = axios.create({\n  baseURL: AUTH_API_URL,\n  headers: {\n    'Content-Type': 'multipart/form-data',\n    'api': 'true',\n    'Origin': 'https://elemsocial.com',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\n  }\n});\n\nconst postsApi = axios.create({\n  baseURL: POSTS_API_URL,\n  headers: {\n    'Content-Type': 'multipart/form-data',\n    'api': 'true',\n    'Origin': 'https://elemsocial.com',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\n  }\n});\n\nconst systemApi = axios.create({\n  baseURL: SYSTEM_API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n    'api': 'true',\n    'Origin': 'https://elemsocial.com',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\n  }\n});\n\n// WebSocket connection handler\nexport const connectWebSocket = async (retries = 3) => {\n    let lastError = null;\n    let attemptCount = 0;\n    \n    const connect = async (): Promise<void> => {\n      const sKey = await AsyncStorage.getItem('S-KEY');\n      if (!sKey) {\n        throw new Error('   S-KEY');\n      }\n\n      return new Promise<void>((resolve, reject) => {\n        let isResolved = false;\n\n        //     \n        const connectionTimeout = setTimeout(() => {\n          if (!isResolved) {\n            webSocketService.removeMessageHandler('key_exchange');\n            webSocketService.removeMessageHandler('authorization');\n            reject(new Error(`    ( ${attemptCount + 1}  ${retries})`));\n          }\n        }, 15000);\n\n        //   \n        webSocketService.addMessageHandler('key_exchange', async (data: WebSocketMessage) => {\n          if (data.key) {\n            //    ,  \n            webSocketService.removeMessageHandler('key_exchange');\n            \n            webSocketService.send({\n              type: 'authorization',\n              action: 'connect',\n              S_KEY: sKey\n            });\n          }\n        });\n\n        //  \n        webSocketService.addMessageHandler('authorization', async (data: WebSocketMessage) => {\n          clearTimeout(connectionTimeout);\n          if (!isResolved) {\n            isResolved = true;\n            if (data.status === 'success' && data.accountData) {\n              //   \n              await AsyncStorage.setItem('account_data', JSON.stringify(data.accountData));\n              \n              //   \n              webSocketService.send({\n                type: 'social',\n                action: 'get_profile',\n                username: data.accountData.username\n              });\n              \n              webSocketService.removeMessageHandler('authorization');\n              resolve();\n            } else {\n              webSocketService.removeMessageHandler('authorization');\n              reject(new Error(data.message || `  ( ${attemptCount + 1}  ${retries})`));\n            }\n          }\n        });\n\n        //    \n        webSocketService.send({\n          type: 'key_exchange',\n          key: 'PUBLIC_KEY' //      \n        });\n      });\n    };\n    \n    while (attemptCount < retries) {\n      try {\n        await connect();\n        return;\n      } catch (error: any) {\n        lastError = error;\n        attemptCount++;\n        console.error(`  WebSocket ${attemptCount}  ${retries}  :`, error.message);\n        \n        if (attemptCount === retries) {\n          throw new Error(`${error.message}\\n      VPN`);\n        }\n        \n        //     \n        await new Promise(resolve => setTimeout(resolve, 1000 * attemptCount));\n      }\n    }\n};\n\n// Add interceptor to include S-KEY in requests\nauthApi.interceptors.request.use(async (config) => {\n  const sKey = await AsyncStorage.getItem('S-KEY');\n  if (sKey) {\n    config.headers['S-KEY'] = sKey;\n  }\n  return config;\n});\n\n// Add response error handling\nauthApi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    console.error('API Error:', error?.response?.data || error.message);\n    if (error?.response?.status === 401) {\n      // Handle unauthorized error (invalid or expired S-KEY)\n      await AsyncStorage.removeItem('S-KEY');\n      // You might want to trigger a logout here\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Add interceptor to include S-KEY in requests\npostsApi.interceptors.request.use(async (config) => {\n  const sKey = await AsyncStorage.getItem('S-KEY');\n  if (sKey) {\n    config.headers['S-KEY'] = sKey;\n  }\n  return config;\n});\n\n// Add response error handling\npostsApi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    console.error('API Error:', error?.response?.data || error.message);\n    if (error?.response?.status === 401) {\n      // Handle unauthorized error (invalid or expired S-KEY)\n      await AsyncStorage.removeItem('S-KEY');\n      // You might want to trigger a logout here\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Add interceptor to include S-KEY in requests\nsystemApi.interceptors.request.use(async (config) => {\n  const sKey = await AsyncStorage.getItem('S-KEY');\n  if (sKey) {\n    config.headers['S-KEY'] = sKey;\n  }\n  return config;\n});\n\n// Types\nexport interface LoginResponse {\n  status: 'success' | 'error';\n  S_KEY?: string;\n  accountID?: string;\n  text?: string;\n}\n\nexport interface PostResponse {\n  id: string;\n  author: {\n    id: number;\n    username: string;\n    name: string;\n    avatar: string | null;\n    icons?: string[];\n  };\n  content: string;\n  date: string;\n  likes: number;\n  dislikes: number;\n  comments: number;\n  my_post: boolean;\n  liked: boolean | null;\n  disliked: boolean | null;\n  attachments: Array<{\n    type: 'image' | 'video' | 'file';\n    data: any;\n  }>;\n}\n\nexport interface CommentResponse {\n  Name: string;\n  Username: string;\n  Avatar: string | 'None';\n  UserIcons: string | null;\n  Text: string;\n  Date: string;\n}\n\nexport interface ApiResponse {\n  Type: 'Error' | 'Verify';\n  Content: string;\n}\n\nexport interface ProfileData {\n  id: number;\n  username: string;\n  name: string;\n  avatar: string | null;\n  cover: string | null;\n  description: string | null;\n  posts: number;\n  subscribers: number;\n  subscriptions: number;\n  subscribed: boolean;\n  create_date: string;\n  icons: string[];\n  links_count: number;\n  links: any[];\n  my_profile: boolean;\n  permissions: string[];\n}\n\nexport interface FileInfo {\n  file_id: string;\n  file_name: string;\n  file_size: number;\n  mime_type: string;\n}\n\nexport interface SelectedFile {\n    uri: string;\n    type: string;\n    name: string;\n}\n\n// Helper functions\nexport const getImageUrl = async (path: string | null | undefined): Promise<string> => {\n  if (!path || path === 'None') {\n    return '';\n  }\n  return `https://elemsocial.com/Content/Avatars/${path}`;\n};\n\nexport const getAccountData = async () => {\n  const accountDataStr = await AsyncStorage.getItem('account_data');\n  if (accountDataStr) {\n    return JSON.parse(accountDataStr) as WebSocketMessage['accountData'];\n  }\n  return null;\n};\n\n// Auth API\nexport const authAPI = {\n  login: async (email: string, password: string): Promise<LoginResponse> => {\n    const formData = new FormData();\n    formData.append('email', email);\n    formData.append('password', password);\n    formData.append('device_type', 'browser');\n    formData.append('device', 'Element Web 2.3');\n\n    const response = await fetch(`${AUTH_API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'api': 'true',\n        'Origin': 'https://elemsocial.com',\n      },\n      body: formData\n    });\n\n    const data = await response.json();\n    \n    if (data.status === 'success' && data.S_KEY) {\n      //  S-KEY\n      await AsyncStorage.setItem('S-KEY', data.S_KEY);\n      \n      //   -  \n      connectWebSocket().catch(error => {\n        console.error('WebSocket setup failed after login:', error);\n      });\n    }\n    \n    return data;\n  },\n\n  logout: async (): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('authorization');\n        reject(new Error('Logout timeout'));\n      }, 5000);\n\n      webSocketService.addMessageHandler('authorization', (data: WebSocketMessage) => {\n          clearTimeout(timeout);\n        if (data.status === 'success') {\n          webSocketService.removeMessageHandler('authorization');\n          AsyncStorage.removeItem('S-KEY');\n          resolve();\n          } else {\n          webSocketService.removeMessageHandler('authorization');\n          reject(new Error(data.message || 'Failed to logout'));\n        }\n      });\n\n      webSocketService.send({\n        type: 'authorization',\n        action: 'logout'\n      });\n    });\n  },\n\n  checkAuth: async (): Promise<boolean> => {\n    try {\n      await connectWebSocket();\n      return true;\n    } catch (error) {\n      console.error('Auth check failed:', error);\n      return false;\n    }\n  },\n\n  async getMyProfile(): Promise<ProfileData> {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('profile');\n        reject(new Error('Profile request timeout'));\n      }, 5000);\n\n      webSocketService.addMessageHandler('profile', (data: WebSocketMessage) => {\n        clearTimeout(timeout);\n        if (data.status === 'success' && data.data) {\n          resolve(data.data as ProfileData);\n        } else {\n          reject(new Error('Failed to get profile data'));\n        }\n      });\n\n      webSocketService.send({\n        type: 'profile',\n        action: 'get_my_profile'\n      });\n    });\n  },\n\n  async getProfile(username: string): Promise<ProfileData> {\n      return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('profile');\n          reject(new Error('Profile request timeout'));\n      }, 5000);\n\n      webSocketService.addMessageHandler('profile', (data: WebSocketMessage) => {\n          clearTimeout(timeout);\n        if (data.status === 'success' && data.data) {\n          resolve(data.data as ProfileData);\n          } else {\n          reject(new Error('Failed to get profile data'));\n          }\n      });\n        \n      webSocketService.send({\n        type: 'profile',\n          action: 'get_profile',\n        data: { username }\n      });\n    });\n  },\n\n  updateProfile: async (data: Partial<ProfileData>): Promise<ApiResponse> => {\n    const formData = new FormData();\n    Object.entries(data).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        formData.append(key, String(value));\n      }\n    });\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\n    return response.data;\n  },\n\n  uploadAvatar: async (file: File): Promise<ApiResponse> => {\n    const formData = new FormData();\n    formData.append('avatar', file);\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\n    return response.data;\n  },\n\n  uploadCover: async (file: File): Promise<ApiResponse> => {\n    const formData = new FormData();\n    formData.append('cover', file);\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\n    return response.data;\n  },\n};\n\n// Profile API  WebSocket\nexport const profileAPI = {\n  async getMyProfile(): Promise<ProfileData> {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('social');\n        reject(new Error('    '));\n      }, 5000);\n\n      webSocketService.addMessageHandler('social', (data: WebSocketMessage) => {\n        clearTimeout(timeout);\n        if (data.status === 'success' && data.data) {\n          webSocketService.removeMessageHandler('social');\n          resolve(data.data as ProfileData);\n        } else {\n          webSocketService.removeMessageHandler('social');\n          reject(new Error(data.message || '    '));\n        }\n      });\n\n      webSocketService.send({\n        type: 'social',\n        action: 'get_profile'\n      });\n    });\n  },\n\n  async getProfile(username: string): Promise<ProfileData> {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('social');\n        reject(new Error('    '));\n      }, 5000);\n\n      webSocketService.addMessageHandler('social', (data: WebSocketMessage) => {\n        clearTimeout(timeout);\n        if (data.status === 'success' && data.data) {\n          webSocketService.removeMessageHandler('social');\n          resolve(data.data as ProfileData);\n        } else {\n          webSocketService.removeMessageHandler('social');\n          reject(new Error(data.message || '    '));\n        }\n      });\n\n      webSocketService.send({\n        type: 'social',\n        action: 'get_profile',\n        username: username\n      });\n    });\n  },\n\n  updateProfile: async (data: Partial<ProfileData>): Promise<ApiResponse> => {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('social');\n        reject(new Error('Profile update timeout'));\n      }, 5000);\n\n      webSocketService.addMessageHandler('social', (response: WebSocketMessage) => {\n        clearTimeout(timeout);\n        if (response.status === 'success') {\n          webSocketService.removeMessageHandler('social');\n          resolve({\n            Type: 'Verify',\n            Content: 'Profile updated successfully'\n          });\n        } else {\n          webSocketService.removeMessageHandler('social');\n          resolve({\n            Type: 'Error',\n            Content: response.message || 'Failed to update profile'\n          });\n        }\n      });\n\n      webSocketService.send({\n        type: 'social',\n        action: 'update_profile',\n        data: data\n      });\n    });\n  },\n\n  uploadAvatar: async (file: File): Promise<ApiResponse> => {\n    //   HTTP   \n    const formData = new FormData();\n    formData.append('avatar', file);\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\n    return response.data;\n  },\n\n  uploadCover: async (file: File): Promise<ApiResponse> => {\n    //   HTTP   \n    const formData = new FormData();\n    formData.append('cover', file);\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\n    return response.data;\n  },\n};\n\n// Posts API  WebSocket\nexport const postsAPI = {\n  loadPosts: async (type: 'last' | 'rec' | 'subscribe' | 'profile', startIndex: number = 0, targetId?: string, targetType?: number): Promise<PostResponse[]> => {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('social');\n        reject(new Error('    '));\n      }, 10000);\n\n      webSocketService.addMessageHandler('social', (data: WebSocketMessage) => {\n        if (data.type === 'social' && data.action === 'load_posts') {\n          clearTimeout(timeout);\n          if (data.status === 'success' && data.posts) {\n            webSocketService.removeMessageHandler('social');\n            resolve(data.posts as PostResponse[]);\n          } else {\n            webSocketService.removeMessageHandler('social');\n            reject(new Error(data.message || '   '));\n          }\n        }\n      });\n\n      const message: WebSocketMessage = {\n        type: 'social',\n        action: 'load_posts',\n        posts_type: type,\n        start_index: startIndex\n      };\n\n      if (type === 'profile' && targetId) {\n        message.target_id = targetId;\n        message.target_type = targetType || 0;\n      }\n\n      webSocketService.send(message);\n    });\n  },\n\n  loadProfilePosts: async (userId: string, startIndex: number = 0, targetType: number = 0): Promise<PostResponse[]> => {\n    return postsAPI.loadPosts('profile', startIndex, userId, targetType);\n  },\n\n  loadFeedPosts: async (startIndex: number = 0): Promise<PostResponse[]> => {\n    return postsAPI.loadPosts('last', startIndex);\n  },\n\n  loadRecommendedPosts: async (startIndex: number = 0): Promise<PostResponse[]> => {\n    return postsAPI.loadPosts('rec', startIndex);\n  },\n\n  loadSubscriptionPosts: async (startIndex: number = 0): Promise<PostResponse[]> => {\n    return postsAPI.loadPosts('subscribe', startIndex);\n  },\n\n  //    /  WebSocket\n  likePost: async (postId: string): Promise<PostResponse> => {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('post_interaction');\n        reject(new Error('  '));\n      }, 5000);\n\n      webSocketService.addMessageHandler('post_interaction', (data: WebSocketMessage) => {\n        clearTimeout(timeout);\n        if (data.status === 'success' && data.post) {\n          webSocketService.removeMessageHandler('post_interaction');\n          resolve(data.post as PostResponse);\n        } else {\n          webSocketService.removeMessageHandler('post_interaction');\n          reject(new Error(data.message || '   '));\n        }\n      });\n\n      webSocketService.send({\n        type: 'request',\n        action: 'post_interaction',\n        interaction_type: 'LIKE',\n        post_id: postId\n      });\n    });\n  },\n\n  dislikePost: async (postId: string): Promise<PostResponse> => {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('post_interaction');\n        reject(new Error('  '));\n      }, 5000);\n\n      webSocketService.addMessageHandler('post_interaction', (data: WebSocketMessage) => {\n        clearTimeout(timeout);\n        if (data.status === 'success' && data.post) {\n          webSocketService.removeMessageHandler('post_interaction');\n          resolve(data.post as PostResponse);\n        } else {\n          webSocketService.removeMessageHandler('post_interaction');\n          reject(new Error(data.message || '   '));\n        }\n      });\n\n      webSocketService.send({\n        type: 'request',\n        action: 'post_interaction',\n        interaction_type: 'DISLIKE',\n        post_id: postId\n      });\n    });\n  },\n\n  removeLike: async (postId: string): Promise<PostResponse> => {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('post_interaction');\n        reject(new Error('  '));\n      }, 5000);\n\n      webSocketService.addMessageHandler('post_interaction', (data: WebSocketMessage) => {\n        clearTimeout(timeout);\n        if (data.status === 'success' && data.post) {\n          webSocketService.removeMessageHandler('post_interaction');\n          resolve(data.post as PostResponse);\n        } else {\n          webSocketService.removeMessageHandler('post_interaction');\n          reject(new Error(data.message || '   '));\n        }\n      });\n\n      webSocketService.send({\n        type: 'request',\n        action: 'post_interaction',\n        interaction_type: 'REMOVE_LIKE',\n        post_id: postId\n      });\n    });\n  },\n\n  removeDislike: async (postId: string): Promise<PostResponse> => {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        webSocketService.removeMessageHandler('post_interaction');\n        reject(new Error('  '));\n      }, 5000);\n\n      webSocketService.addMessageHandler('post_interaction', (data: WebSocketMessage) => {\n        clearTimeout(timeout);\n        if (data.status === 'success' && data.post) {\n          webSocketService.removeMessageHandler('post_interaction');\n          resolve(data.post as PostResponse);\n        } else {\n          webSocketService.removeMessageHandler('post_interaction');\n          reject(new Error(data.message || '   '));\n        }\n      });\n\n      webSocketService.send({\n        type: 'request',\n        action: 'post_interaction',\n        interaction_type: 'REMOVE_DISLIKE',\n        post_id: postId\n      });\n    });\n  }\n};\n","import React, { useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  Animated,\n  Dimensions,\n  Platform,\n} from 'react-native';\n\ninterface ErrorMessageProps {\n  message: string;\n  onClose?: () => void;\n}\n\nconst { height } = Dimensions.get('window');\n\nconst ErrorMessage: React.FC<ErrorMessageProps> = ({ message, onClose }) => {\n  const translateY = new Animated.Value(height);\n\n  useEffect(() => {\n    if (message) {\n      //  \n      Animated.spring(translateY, {\n        toValue: 0,\n        useNativeDriver: true,\n        tension: 50,\n        friction: 7,\n      }).start();\n    }\n  }, [message]);\n\n  const handleClose = () => {\n    //  \n    Animated.timing(translateY, {\n      toValue: height,\n      duration: 300,\n      useNativeDriver: true,\n    }).start(() => {\n      if (onClose) onClose();\n    });\n  };\n\n  if (!message) return null;\n\n  return (\n    <Modal\n      transparent\n      visible={!!message}\n      animationType=\"fade\"\n      onRequestClose={handleClose}\n    >\n      <View style={styles.overlay}>\n        <Animated.View\n          style={[\n            styles.container,\n            {\n              transform: [{ translateY }],\n            },\n          ]}\n        >\n          <View style={styles.content}>\n            <Text style={styles.title}></Text>\n            <Text style={styles.text}>{message}</Text>\n            <TouchableOpacity\n              style={styles.button}\n              onPress={handleClose}\n              activeOpacity={0.8}\n            >\n              <Text style={styles.buttonText}>OK</Text>\n            </TouchableOpacity>\n          </View>\n        </Animated.View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    width: '90%',\n    maxWidth: 400,\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    ...(Platform.OS === 'web' ? {\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n    } : {\n      shadowColor: '#000',\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.25,\n      shadowRadius: 3.84,\n      elevation: 5,\n    }),\n  },\n  content: {\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#c62828',\n    marginBottom: 10,\n    textAlign: 'center',\n  },\n  text: {\n    fontSize: 16,\n    color: '#333',\n    marginBottom: 20,\n    textAlign: 'center',\n    lineHeight: 22,\n  },\n  button: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 12,\n    paddingHorizontal: 30,\n    borderRadius: 8,\n    alignSelf: 'center',\n  },\n  buttonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default ErrorMessage; ","import React, { useState, useContext } from 'react';\nimport {\n  View,\n  TextInput,\n  TouchableOpacity,\n  Text,\n  StyleSheet,\n  Alert,\n  ActivityIndicator,\n  Platform,\n} from 'react-native';\nimport { authAPI } from '../services/api';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { CommonActions, useNavigation } from '@react-navigation/native';\nimport { AuthContext } from '../navigation';\nimport HCaptcha from '@hcaptcha/react-hcaptcha';\nimport ErrorMessage from '../components/ErrorMessage';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    padding: 20,\n    backgroundColor: '#fff',\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 30,\n    textAlign: 'center',\n  },\n  input: {\n    height: 50,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 8,\n    paddingHorizontal: 15,\n    marginBottom: 15,\n    fontSize: 16,\n    backgroundColor: '#fff',\n    ...(Platform.OS === 'web' && {\n      outlineStyle: 'none',\n      ':focus': {\n        borderColor: '#007AFF',\n      },\n    }),\n  },\n  buttonContainer: {\n    pointerEvents: 'auto',\n    marginBottom: 15,\n  },\n  button: {\n    height: 50,\n    backgroundColor: '#007AFF',\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...(Platform.OS === 'web' && {\n      cursor: 'pointer',\n      ':hover': {\n        backgroundColor: '#0056b3',\n      },\n    }),\n  },\n  buttonDisabled: {\n    backgroundColor: '#ccc',\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  switchText: {\n    color: '#007AFF',\n    textAlign: 'center',\n    marginTop: 15,\n    fontSize: 16,\n  },\n  stepText: {\n    fontSize: 18,\n    marginBottom: 15,\n    textAlign: 'center',\n  },\n});\n\nconst LoginScreen = () => {\n  const navigation = useNavigation();\n  const { setIsLoggedIn } = useContext(AuthContext);\n  const [isRegistering, setIsRegistering] = useState(false);\n  const [loading, setLoading] = useState(false);\n  \n  // Login state\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loginError, setLoginError] = useState('');\n\n  // Registration state\n  const [name, setName] = useState('');\n  const [username, setUsername] = useState('');\n  const [regEmail, setRegEmail] = useState('');\n  const [regPassword, setRegPassword] = useState('');\n  const [captchaToken, setCaptchaToken] = useState('');\n  const [registrationError, setRegistrationError] = useState('');\n\n  const handleLogin = async () => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!email) {\n      setLoginError(' ');\n      return;\n    }\n    if (!emailRegex.test(email)) {\n      setLoginError('  email ');\n      return;\n    }\n    if (!password) {\n      setLoginError(' ');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await authAPI.login(email.trim(), password);\n      \n      if (response?.status === 'success' && response?.S_KEY) {\n        await AsyncStorage.setItem('S-KEY', response.S_KEY);\n        setIsLoggedIn(true);\n      } else {\n        setLoginError(response?.text || ' email  ');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      setLoginError('-   ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRegister = async () => {\n    setRegistrationError('');\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    \n    // \n    if (!name.trim()) {\n      setRegistrationError(' ');\n      return;\n    }\n    if (!username.trim()) {\n      setRegistrationError('  ');\n      return;\n    }\n    if (!regEmail.trim()) {\n      setRegistrationError(' email');\n      return;\n    }\n    if (!emailRegex.test(regEmail.trim())) {\n      setRegistrationError('  email ');\n      return;\n    }\n    if (!regPassword.trim()) {\n      setRegistrationError(' ');\n      return;\n    }\n    if (!captchaToken) {\n      setRegistrationError(' ');\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const formData = new FormData();\n      formData.append('name', name.trim());\n      formData.append('username', username.trim());\n      formData.append('email', regEmail.trim());\n      formData.append('password', regPassword.trim());\n      formData.append('accept', 'true');\n      formData.append('h_captcha', captchaToken);\n\n      const response = await fetch('https://api.elemsocial.com/auth/register', {\n        method: 'POST',\n        headers: {\n          'api': 'true',\n          'Origin': 'https://elemsocial.com',\n        },\n        body: formData,\n      });\n\n      const data = await response.json();\n      \n      if (data.status === 'success') {\n        await AsyncStorage.setItem('S-KEY', data.S_KEY);\n        setIsLoggedIn(true);\n      } else {\n        setRegistrationError(data.text || '  ');\n      }\n    } catch (error) {\n      console.error('Registration error:', error);\n      setRegistrationError('-   ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onCaptchaVerify = (token: string) => {\n    setCaptchaToken(token);\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Sigma Element Client</Text>\n      \n      {isRegistering ? (\n        <>\n          <TextInput\n            style={styles.input}\n            placeholder=\"\"\n            value={name}\n            onChangeText={setName}\n            editable={!loading}\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\" \"\n            value={username}\n            onChangeText={setUsername}\n            editable={!loading}\n            autoCapitalize=\"none\"\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\"Email\"\n            value={regEmail}\n            onChangeText={setRegEmail}\n            editable={!loading}\n            keyboardType=\"email-address\"\n            autoCapitalize=\"none\"\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\"\"\n            value={regPassword}\n            onChangeText={setRegPassword}\n            secureTextEntry\n            editable={!loading}\n          />\n          <HCaptcha\n            sitekey=\"29c6b1c2-7e78-43ec-8bf8-5de49c58c54a\"\n            onVerify={onCaptchaVerify}\n          />\n          <ErrorMessage \n            message={registrationError} \n            onClose={() => setRegistrationError('')}\n          />\n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[styles.button, loading && styles.buttonDisabled]}\n              onPress={handleRegister}\n              disabled={loading}\n            >\n              {loading ? (\n                <ActivityIndicator color=\"white\" />\n              ) : (\n                <Text style={styles.buttonText}></Text>\n              )}\n            </TouchableOpacity>\n          </View>\n          <TouchableOpacity onPress={() => {\n            setIsRegistering(false);\n            setRegistrationError('');\n            setLoginError('');\n          }}>\n            <Text style={styles.switchText}>  ? </Text>\n          </TouchableOpacity>\n        </>\n      ) : (\n        <>\n          <TextInput\n            style={styles.input}\n            placeholder=\" \"\n            value={email}\n            onChangeText={setEmail}\n            autoCapitalize=\"none\"\n            keyboardType=\"email-address\"\n            editable={!loading}\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\"\"\n            value={password}\n            onChangeText={setPassword}\n            secureTextEntry\n            editable={!loading}\n          />\n          <ErrorMessage \n            message={loginError} \n            onClose={() => setLoginError('')}\n          />\n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[styles.button, loading && styles.buttonDisabled]}\n              onPress={handleLogin}\n              disabled={loading}\n            >\n              {loading ? (\n                <ActivityIndicator color=\"white\" />\n              ) : (\n                <Text style={styles.buttonText}></Text>\n              )}\n            </TouchableOpacity>\n          </View>\n          <TouchableOpacity onPress={() => {\n            setIsRegistering(true);\n            setRegistrationError('');\n            setLoginError('');\n          }}>\n            <Text style={styles.switchText}> ? </Text>\n          </TouchableOpacity>\n        </>\n      )}\n    </View>\n  );\n};\n\nexport default LoginScreen;\n","import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\n\n//    (  )\nconst colorPairs = [\n  { bg: '#FFE5E5', text: '#FF4D4D' }, // \n  { bg: '#E5F1FF', text: '#3399FF' }, // \n  { bg: '#E5FFE5', text: '#33CC33' }, // \n  { bg: '#FFE5FF', text: '#FF33FF' }, // \n  { bg: '#FFF0E5', text: '#FF8533' }, // \n  { bg: '#E5F9FF', text: '#33CCFF' }, // \n  { bg: '#F2E5FF', text: '#9933FF' }, // \n  { bg: '#FFFFE5', text: '#CCCC33' }, // \n];\n\ninterface LetterAvatarProps {\n  name: string;\n  size?: number;\n  style?: any;\n}\n\nconst LetterAvatar: React.FC<LetterAvatarProps> = ({ name, size = 120, style }) => {\n  //    ,     \"?\"\n  const letter = (name?.charAt(0) || '?').toUpperCase();\n  \n  //      \n  const colorIndex = Math.abs(name.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % colorPairs.length;\n  const colors = colorPairs[colorIndex];\n\n  const styles = StyleSheet.create({\n    container: {\n      width: size,\n      height: size,\n      borderRadius: size / 2,\n      backgroundColor: colors.bg,\n      justifyContent: 'center',\n      alignItems: 'center',\n      overflow: 'hidden',\n    },\n    letter: {\n      color: colors.text,\n      fontSize: size * 0.4,\n      fontWeight: '600',\n      textAlign: 'center',\n      textAlignVertical: 'center',\n    },\n  });\n\n  return (\n    <View style={[styles.container, style]}>\n      <Text style={styles.letter}>{letter}</Text>\n    </View>\n  );\n};\n\nexport default LetterAvatar;\n","export const WS_MESSAGE_TYPES = {\n    SOCIAL: 'social',\n    MESSENGER: 'messenger',\n    KEY_EXCHANGE: 'key_exchange',\n    AES_KEY: 'aes_key'\n} as const;\n\nexport const WS_ACTIONS = {\n    GET_ONLINE_USERS: 'get_online_users',\n    USER_STATUS: 'user_status',\n    NEW_POST: 'new_post',\n    UPLOAD_FILE: 'upload_file',\n    DOWNLOAD_FILE: 'download_file'\n} as const;\n\nexport const WS_USER_STATUS = {\n    ONLINE: 'online',\n    OFFLINE: 'offline'\n} as const; ","export const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 ';\n    const k = 1024;\n    const sizes = ['', '', '', '', ''];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;\n};\n\nexport const getFileExtension = (filename: string): string => {\n    return filename.slice((filename.lastIndexOf('.') - 1 >>> 0) + 2);\n};\n\nexport const getMimeType = (filename: string): string => {\n    const ext = getFileExtension(filename).toLowerCase();\n    const mimeTypes: { [key: string]: string } = {\n        'txt': 'text/plain',\n        'pdf': 'application/pdf',\n        'doc': 'application/msword',\n        'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n        'xls': 'application/vnd.ms-excel',\n        'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        'png': 'image/png',\n        'jpg': 'image/jpeg',\n        'jpeg': 'image/jpeg',\n        'gif': 'image/gif',\n        'svg': 'image/svg+xml',\n        'mp3': 'audio/mpeg',\n        'mp4': 'video/mp4',\n        'wav': 'audio/wav',\n        'avi': 'video/x-msvideo',\n        'zip': 'application/zip',\n        'rar': 'application/x-rar-compressed',\n        '7z': 'application/x-7z-compressed'\n    };\n    return mimeTypes[ext] || 'application/octet-stream';\n};\n\nexport const isImageFile = (filename: string): boolean => {\n    const mimeType = getMimeType(filename);\n    return mimeType.startsWith('image/');\n};\n\nexport const generateFileId = (): string => {\n    return Math.random().toString(36).substring(2, 15) + \n           Math.random().toString(36).substring(2, 15);\n};\n\nexport const splitFileIntoChunks = async (file: File, chunkSize: number = 1024 * 1024): Promise<string[]> => {\n    const chunks: string[] = [];\n    const totalChunks = Math.ceil(file.size / chunkSize);\n\n    for (let i = 0; i < totalChunks; i++) {\n        const start = i * chunkSize;\n        const end = Math.min(start + chunkSize, file.size);\n        const chunk = file.slice(start, end);\n        const arrayBuffer = await chunk.arrayBuffer();\n        const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n        chunks.push(base64);\n    }\n\n    return chunks;\n};\n\nexport const assembleChunks = (chunks: string[]): ArrayBuffer => {\n    const binaryString = chunks.map(chunk => atob(chunk)).join('');\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n};\n\nexport const downloadFile = (data: ArrayBuffer, filename: string, mimeType: string): void => {\n    const blob = new Blob([data], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n}; ","import webSocketService from './WebSocket';\nimport { WS_MESSAGE_TYPES, WS_ACTIONS } from '../constants/websocket';\nimport { FileUploadMessage, FileDownloadMessage } from '../types/websocket';\nimport { \n    generateFileId, \n    splitFileIntoChunks, \n    assembleChunks, \n    getMimeType, \n    downloadFile \n} from '../utils/fileUtils';\n\nclass FileService {\n    private static instance: FileService;\n    private ws = webSocketService;\n    private fileDownloadCallbacks: Map<string, (data: ArrayBuffer) => void> = new Map();\n    private fileChunks: Map<string, string[]> = new Map();\n\n    private constructor() {\n        this.setupMessageHandlers();\n    }\n\n    public static getInstance(): FileService {\n        if (!FileService.instance) {\n            FileService.instance = new FileService();\n        }\n        return FileService.instance;\n    }\n\n    private setupMessageHandlers(): void {\n        this.ws.addMessageHandler(WS_MESSAGE_TYPES.MESSENGER, (message) => {\n            if (message.action === WS_ACTIONS.DOWNLOAD_FILE) {\n                const downloadMessage = message as FileDownloadMessage;\n                this.handleFileChunk(downloadMessage);\n            }\n        });\n    }\n\n    private handleFileChunk(message: FileDownloadMessage): void {\n        const { fileId, chunkNumber, totalChunks, chunkData } = message.data;\n        \n        if (!this.fileChunks.has(fileId)) {\n            this.fileChunks.set(fileId, new Array(totalChunks).fill(''));\n        }\n\n        const chunks = this.fileChunks.get(fileId)!;\n        chunks[chunkNumber - 1] = chunkData;\n\n        // ,    \n        if (!chunks.includes('')) {\n            const fileData = assembleChunks(chunks);\n            const callback = this.fileDownloadCallbacks.get(fileId);\n            if (callback) {\n                callback(fileData);\n                this.fileDownloadCallbacks.delete(fileId);\n            }\n            this.fileChunks.delete(fileId);\n        }\n    }\n\n    public async uploadFile(file: File): Promise<string> {\n        const fileId = generateFileId();\n        const chunks = await splitFileIntoChunks(file);\n        \n        //    \n        const uploadMessage: FileUploadMessage = {\n            type: WS_MESSAGE_TYPES.MESSENGER,\n            action: WS_ACTIONS.UPLOAD_FILE,\n            data: {\n                fileId,\n                fileName: file.name,\n                fileSize: file.size,\n                mimeType: getMimeType(file.name)\n            }\n        };\n        await this.ws.send(uploadMessage);\n\n        //   \n        for (let i = 0; i < chunks.length; i++) {\n            const downloadMessage: FileDownloadMessage = {\n                type: WS_MESSAGE_TYPES.MESSENGER,\n                action: WS_ACTIONS.DOWNLOAD_FILE,\n                data: {\n                    fileId,\n                    chunkNumber: i + 1,\n                    totalChunks: chunks.length,\n                    chunkData: chunks[i]\n                }\n            };\n            await this.ws.send(downloadMessage);\n        }\n\n        return fileId;\n    }\n\n    public downloadFile(fileId: string, fileName: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            this.fileDownloadCallbacks.set(fileId, (data: ArrayBuffer) => {\n                try {\n                    downloadFile(data, fileName, getMimeType(fileName));\n                    resolve();\n                } catch (error) {\n                    reject(error);\n                }\n            });\n\n            //  \n            const downloadMessage: FileDownloadMessage = {\n                type: WS_MESSAGE_TYPES.MESSENGER,\n                action: WS_ACTIONS.DOWNLOAD_FILE,\n                data: {\n                    fileId,\n                    chunkNumber: 0,\n                    totalChunks: 0,\n                    chunkData: ''\n                }\n            };\n            this.ws.send(downloadMessage);\n        });\n    }\n}\n\nexport default FileService; ","import React from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Linking,\n} from 'react-native';\n\ninterface LinkAlertProps {\n  visible: boolean;\n  url: string;\n  onClose: () => void;\n}\n\nconst LinkAlert: React.FC<LinkAlertProps> = ({ visible, url, onClose }) => {\n  const handleConfirm = async () => {\n    try {\n      await Linking.openURL(url);\n    } catch (error) {\n      console.error('   :', error);\n    }\n    onClose();\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={onClose}\n    >\n      <View style={styles.overlay}>\n        <View style={styles.container}>\n          <Text style={styles.title}> </Text>\n          <Text style={styles.message}>\n                 :{'\\n'}\n            <Text style={styles.url}>{url}</Text>\n          </Text>\n          <Text style={styles.warning}>\n            ,     . Element+       .\n          </Text>\n          <View style={styles.buttons}>\n            <TouchableOpacity\n              style={[styles.button, styles.cancelButton]}\n              onPress={onClose}\n            >\n              <Text style={styles.cancelButtonText}></Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.button, styles.confirmButton]}\n              onPress={handleConfirm}\n            >\n              <Text style={styles.confirmButtonText}></Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    backgroundColor: 'white',\n    borderRadius: 15,\n    padding: 20,\n    width: '90%',\n    maxWidth: 400,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 15,\n    textAlign: 'center',\n  },\n  message: {\n    fontSize: 16,\n    marginBottom: 10,\n    textAlign: 'center',\n    lineHeight: 22,\n  },\n  url: {\n    color: '#007AFF',\n    fontWeight: '500',\n  },\n  warning: {\n    fontSize: 14,\n    color: '#FF3B30',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  buttons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n  },\n  button: {\n    flex: 1,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: '#f0f0f0',\n  },\n  confirmButton: {\n    backgroundColor: '#007AFF',\n  },\n  cancelButtonText: {\n    color: '#000',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  confirmButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default LinkAlert; ","import React, { useState } from 'react';\nimport { Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport LinkAlert from './LinkAlert';\n\ninterface LinkTextProps {\n  text: string;\n  style?: any;\n}\n\nconst LinkText: React.FC<LinkTextProps> = ({ text, style }) => {\n  const [selectedUrl, setSelectedUrl] = useState<string | null>(null);\n\n  const urlRegex = /(https?:\\/\\/[^\\s]+)|(www\\.[^\\s]+)/g;\n  \n  const renderTextWithLinks = () => {\n    const parts = text.split(urlRegex);\n    return parts.map((part, index) => {\n      if (part?.match(urlRegex)) {\n        const url = part.startsWith('www.') ? `https://${part}` : part;\n        return (\n          <TouchableOpacity\n            key={index}\n            onPress={() => setSelectedUrl(url)}\n          >\n            <Text style={[style, styles.link]}>{part}</Text>\n          </TouchableOpacity>\n        );\n      }\n      return <Text key={index} style={style}>{part}</Text>;\n    });\n  };\n\n  return (\n    <>\n      {renderTextWithLinks()}\n      <LinkAlert\n        visible={!!selectedUrl}\n        url={selectedUrl || ''}\n        onClose={() => setSelectedUrl(null)}\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  link: {\n    color: '#007AFF',\n    textDecorationLine: 'underline',\n  },\n});\n\nexport default LinkText; ","import React, { useEffect, useState } from 'react';\nimport {\n  View,\n  Text,\n  Modal,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  ActivityIndicator,\n  Dimensions\n} from 'react-native';\nimport { profileAPI, ProfileData } from '../services/api';\nimport LetterAvatar from './LetterAvatar';\nimport LinkText from './LinkText';\n\ninterface ProfileModalProps {\n  visible: boolean;\n  username: string;\n  onClose: () => void;\n}\n\nconst ProfileModal: React.FC<ProfileModalProps> = ({ visible, username, onClose }) => {\n  const [profile, setProfile] = useState<ProfileData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (visible) {\n      loadProfile();\n    } else {\n      setProfile(null);\n      setError('');\n    }\n  }, [visible, username]);\n\n  const loadProfile = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const data = await profileAPI.getProfile(username);\n      \n      //  URL   \n      if (data.avatar) {\n        data.avatar = `https://elemsocial.com/Content/Avatars/${data.avatar}`;\n      }\n      if (data.cover) {\n        data.cover = `https://elemsocial.com/Content/Covers/${data.cover}`;\n      }\n      \n      setProfile(data);\n    } catch (error) {\n      console.error('  :', error);\n      setError('   ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderStats = () => {\n    if (!profile) return null;\n\n    const stats = [\n      { label: '', value: profile.posts },\n      { label: '', value: profile.subscribers },\n      { label: '', value: profile.subscriptions }\n    ];\n\n    return (\n      <View style={styles.stats}>\n        {stats.map((stat) => (\n          <View key={stat.label} style={styles.statItem}>\n            <Text style={styles.statNumber}>\n              {stat.value?.toLocaleString() || '0'}\n            </Text>\n            <Text style={styles.statLabel}>{stat.label}</Text>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={styles.modalContent}>\n          <TouchableOpacity style={styles.closeButton} onPress={onClose}>\n            <Text style={styles.closeButtonText}></Text>\n          </TouchableOpacity>\n\n          {loading ? (\n            <ActivityIndicator size=\"large\" color=\"#007AFF\" style={styles.loader} />\n          ) : error ? (\n            <Text style={styles.errorText}>{error}</Text>\n          ) : profile ? (\n            <View style={styles.profileContent}>\n              <View style={styles.coverContainer}>\n                {profile.cover ? (\n                  <Image \n                    source={{ uri: profile.cover }} \n                    style={styles.coverImage}\n                    resizeMode=\"cover\"\n                  />\n                ) : (\n                  <View style={styles.defaultCover} />\n                )}\n              </View>\n\n              <View style={[styles.avatarContainer, styles.avatarWithCover]}>\n                {profile.avatar && profile.avatar !== 'None' ? (\n                  <Image \n                    source={{ uri: profile.avatar }} \n                    style={styles.avatar}\n                  />\n                ) : (\n                  <LetterAvatar \n                    name={profile.name || profile.username} \n                    size={80}\n                  />\n                )}\n              </View>\n\n              <View style={styles.nameRow}>\n                <Text style={styles.name}>{profile.name}</Text>\n                {profile.icons && profile.icons.includes('VERIFY') && (\n                  <Image\n                    source={require('../assets/verify.png')}\n                    style={styles.verifiedBadge}\n                  />\n                )}\n              </View>\n              <Text style={styles.username}>@{profile.username}</Text>\n              \n              {profile.description && (\n                <LinkText text={profile.description} style={styles.description} />\n              )}\n\n              {renderStats()}\n\n              {profile.icons && profile.icons.length > 0 && (\n                <View style={styles.iconsContainer}>\n                  {profile.icons.filter(icon => icon !== 'VERIFY').map((icon, index) => (\n                    <Image\n                      key={index}\n                      source={{ uri: `https://elemsocial.com/Content/Icons/${icon}` }}\n                      style={styles.icon}\n                    />\n                  ))}\n                </View>\n              )}\n            </View>\n          ) : null}\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: 'white',\n    borderRadius: 15,\n    width: '90%',\n    maxHeight: '80%',\n    overflow: 'hidden',\n  },\n  closeButton: {\n    position: 'absolute',\n    right: 15,\n    top: 15,\n    zIndex: 2,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    width: 30,\n    height: 30,\n    borderRadius: 15,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    fontSize: 20,\n    color: '#fff',\n    fontWeight: 'bold',\n  },\n  loader: {\n    padding: 20,\n  },\n  profileContent: {\n    alignItems: 'center',\n  },\n  coverContainer: {\n    width: '100%',\n    height: 150,\n    backgroundColor: '#f0f0f0',\n  },\n  coverImage: {\n    width: '100%',\n    height: '100%',\n  },\n  defaultCover: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: '#f0f0f0',\n  },\n  avatarContainer: {\n    width: 80,\n    height: 80,\n    marginTop: -40,\n    marginBottom: 10,\n    borderRadius: 40,\n    borderWidth: 4,\n    borderColor: '#fff',\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n  },\n  avatarWithCover: {\n    marginTop: -40,\n  },\n  avatar: {\n    width: '100%',\n    height: '100%',\n  },\n  nameRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 4,\n  },\n  name: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  username: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 10,\n  },\n  description: {\n    fontSize: 14,\n    color: '#444',\n    textAlign: 'center',\n    marginHorizontal: 20,\n    marginBottom: 15,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    width: '100%',\n    paddingVertical: 15,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: '#eee',\n  },\n  statItem: {\n    alignItems: 'center',\n    flex: 1,\n  },\n  statNumber: {\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  iconsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    padding: 10,\n    gap: 8,\n  },\n  icon: {\n    width: 24,\n    height: 24,\n  },\n  verifiedBadge: {\n    width: 20,\n    height: 20,\n  },\n  errorText: {\n    color: 'red',\n    textAlign: 'center',\n    padding: 20,\n  },\n});\n\nexport default ProfileModal; ","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  Animated,\n  Modal,\n  Alert,\n  Platform,\n  ActivityIndicator,\n  Dimensions,\n} from 'react-native';\nimport {\n  PostResponse, postsAPI, getImageUrl\n} from '../services/api';\nimport LetterAvatar from './LetterAvatar';\nimport { format } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { Video, ResizeMode } from 'expo-av';\nimport FileService from '../services/FileService';\nimport { formatFileSize } from '../utils/fileUtils';\nimport ProfileModal from './ProfileModal';\nimport LinkText from './LinkText';\n\ninterface PostCardProps {\n  post: PostResponse;\n  onUpdate: () => void;\n}\n\ninterface MediaContent {\n  Image?: {\n    simple_image?: string;\n    file_name: string;\n    width: number;\n    height: number;\n    orig_name?: string;\n  };\n  Video?: {\n    file_name: string;\n    width: number;\n    height: number;\n    orig_name?: string;\n  };\n  File?: {\n    file_id: string;\n    file_name: string;\n    file_size: number;\n    mime_type: string;\n  };\n}\n\ninterface MediaViewerProps {\n  url: string;\n  type: 'image' | 'video' | 'file';\n  onClose: () => void;\n  onDownload: (url: string, filename: string, fileId?: string) => void;\n  filename: string;\n  fileSize?: number;\n  fileId?: string;\n}\n\nconst PostCard: React.FC<PostCardProps> = ({ post, onUpdate }) => {\n  const [loadingAction, setLoadingAction] = useState<'LIKE' | 'DISLIKE' | null>(null);\n  const [localPost, setLocalPost] = useState<PostResponse>(post);\n  const [scaleAnim] = useState(new Animated.Value(1));\n  const [modalVisible, setModalVisible] = useState(false);\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const [mediaViewerProps, setMediaViewerProps] = useState<MediaViewerProps | null>(null);\n  const videoRef = useRef(null);\n  const [showProfile, setShowProfile] = useState(false);\n\n  useEffect(() => {\n    setLocalPost(post);\n  }, [post]);\n\n  const handleDownload = async (url: string, filename: string, fileId?: string) => {\n    try {\n      if (fileId) {\n        //   ,  FileService  \n        const fileService = FileService.getInstance();\n        await fileService.downloadFile(fileId, filename);\n      } else {\n        //       \n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      }\n    } catch (error) {\n      console.error('Error downloading file:', error);\n      Alert.alert('', '   ');\n    }\n  };\n\n  const openModal = (props: MediaViewerProps) => {\n    setMediaViewerProps(props);\n    setModalVisible(true);\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 300,\n      useNativeDriver: true,\n    }).start();\n  };\n\n  const closeModal = () => {\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 300,\n      useNativeDriver: true,\n    }).start(() => {\n      setModalVisible(false);\n      setMediaViewerProps(null);\n    });\n  };\n\n  const formatDate = useCallback((dateString: string) => {\n    const date = new Date(dateString);\n    return format(date, 'dd MMMM, HH:mm', { locale: ru });\n  }, []);\n\n  const handleInteraction = async (action: 'LIKE' | 'DISLIKE') => {\n    if (loadingAction) return;\n    \n    try {\n      setLoadingAction(action);\n      \n      let updatedPost: PostResponse;\n      \n      if (action === 'LIKE') {\n        if (localPost.liked) {\n          updatedPost = await postsAPI.removeLike(post.id);\n        } else {\n          updatedPost = await postsAPI.likePost(post.id);\n        }\n      } else {\n        if (localPost.disliked) {\n          updatedPost = await postsAPI.removeDislike(post.id);\n        } else {\n          updatedPost = await postsAPI.dislikePost(post.id);\n        }\n      }\n      \n      setLocalPost(updatedPost);\n      onUpdate();\n    } catch (error) {\n      console.error('Error interacting with post:', error);\n      Alert.alert('', '   ');\n    } finally {\n      setLoadingAction(null);\n    }\n  };\n\n  const handleReactionPress = useCallback((type: 'like' | 'dislike') => {\n    //  \n    Animated.sequence([\n      Animated.timing(scaleAnim, {\n        toValue: 0.95,\n        duration: 100,\n        useNativeDriver: false,\n      }),\n      Animated.spring(scaleAnim, {\n        toValue: 1,\n        friction: 4,\n        useNativeDriver: false,\n      }),\n    ]).start();\n\n    if (type === 'like') {\n      handleInteraction('LIKE');\n    } else {\n      handleInteraction('DISLIKE');\n    }\n  }, [scaleAnim, handleInteraction]);\n\n  const renderFileContent = (file: MediaContent['File']) => {\n    if (!file) return null;\n\n    return (\n      <TouchableOpacity\n        onPress={() => handleDownload('', file.file_name, file.file_id)}\n        style={styles.fileContainer}\n      >\n        <Image\n          source={require('../assets/file.png')}\n          style={styles.fileIcon}\n        />\n        <View style={styles.fileInfo}>\n          <Text style={styles.fileName}>{file.file_name}</Text>\n          <Text style={styles.fileSize}>{formatFileSize(file.file_size)}</Text>\n        </View>\n        <Icon name=\"download\" size={24} color=\"#666\" />\n      </TouchableOpacity>\n    );\n  };\n\n  const renderMediaContent = () => {\n    if (!localPost.attachments || localPost.attachments.length === 0) return null;\n\n    const attachment = localPost.attachments[0]; //     \n    const screenWidth = Dimensions.get('window').width - 30;\n\n    switch (attachment.type) {\n      case 'image': {\n        const imageData = attachment.data;\n        const aspectRatio = imageData.width / imageData.height;\n        const imageHeight = screenWidth / aspectRatio;\n        const maxHeight = screenWidth * 0.8;\n\n        const imageUrl = imageData.simple_image\n          ? `https://elemsocial.com/Content/Simple/${imageData.simple_image}`\n          : `https://elemsocial.com/Content/Posts/Images/${imageData.file_name}`;\n        \n        const filename = imageData.orig_name || imageData.file_name;\n\n        return (\n          <TouchableOpacity\n            onPress={() => openModal({\n              url: imageUrl,\n              type: 'image',\n              filename,\n              onClose: closeModal,\n              onDownload: handleDownload\n            })}\n            style={[styles.mediaContainer, { height: Math.min(imageHeight, maxHeight) }]}\n          >\n            <Image\n              source={{ uri: imageUrl }}\n              style={styles.mediaContent}\n              resizeMode=\"contain\"\n            />\n          </TouchableOpacity>\n        );\n      }\n\n      case 'video': {\n        const videoData = attachment.data;\n        const aspectRatio = videoData.width / videoData.height;\n        const videoHeight = screenWidth / aspectRatio;\n        const maxHeight = screenWidth * 0.8;\n        const videoUrl = `https://elemsocial.com/Content/Posts/Video/${videoData.file_name}`;\n        const filename = videoData.orig_name ?? videoData.file_name;\n\n        return (\n          <TouchableOpacity\n            onPress={() => openModal({\n              url: videoUrl,\n              type: 'video',\n              filename,\n              onClose: closeModal,\n              onDownload: handleDownload\n            })}\n            style={[styles.mediaContainer, { height: Math.min(videoHeight, maxHeight) }]}\n          >\n            <Video\n              ref={videoRef}\n              source={{ uri: videoUrl }}\n              style={styles.mediaContent}\n              resizeMode={ResizeMode.CONTAIN}\n              useNativeControls\n              shouldPlay={false}\n              isLooping\n            />\n          </TouchableOpacity>\n        );\n      }\n\n      case 'file': {\n        const fileData = attachment.data;\n        return (\n          <TouchableOpacity\n            onPress={() => handleDownload('', fileData.file_name, fileData.file_id)}\n            style={styles.fileContainer}\n          >\n            <Image\n              source={require('../assets/file.png')}\n              style={styles.fileIcon}\n            />\n            <View style={styles.fileInfo}>\n              <Text style={styles.fileName}>{fileData.file_name}</Text>\n              <Text style={styles.fileSize}>{formatFileSize(fileData.file_size)}</Text>\n            </View>\n            <Icon name=\"download\" size={24} color=\"#666\" />\n          </TouchableOpacity>\n        );\n      }\n\n      default:\n        return null;\n    }\n  };\n\n  const renderMediaViewer = () => {\n    if (!mediaViewerProps) return null;\n\n    return (\n      <Modal\n        transparent\n        visible={modalVisible}\n        onRequestClose={closeModal}\n      >\n        <Animated.View \n          style={[\n            styles.modalOverlay,\n            {\n              opacity: fadeAnim,\n            },\n          ]}\n        >\n          <TouchableOpacity\n            style={styles.modalContent}\n            activeOpacity={1}\n            onPress={closeModal}\n          >\n            {mediaViewerProps.type === 'image' ? (\n              <Image\n                source={{ uri: mediaViewerProps.url }}\n                style={styles.fullScreenMedia}\n                resizeMode=\"contain\"\n              />\n            ) : (\n              <Video\n                ref={videoRef}\n                source={{ uri: mediaViewerProps.url }}\n                style={styles.fullScreenMedia}\n                resizeMode={ResizeMode.CONTAIN}\n                useNativeControls\n                shouldPlay={true}\n                isLooping\n              />\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.closeButton}\n            onPress={closeModal}\n          >\n            <Text style={styles.closeButtonText}></Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.downloadButton}\n            onPress={() => mediaViewerProps.onDownload(mediaViewerProps.url, mediaViewerProps.filename, mediaViewerProps.fileId)}\n          >\n            <Image\n              source={require('../assets/download.png')}\n              style={styles.downloadIcon}\n            />\n          </TouchableOpacity>\n        </Animated.View>\n      </Modal>\n    );\n  };\n\n  useEffect(() => {\n    if (post.author.avatar && post.author.avatar !== 'None') {\n      const avatarUrl = `https://elemsocial.com/Content/Avatars/${post.author.avatar}`;\n      setLocalPost(prev => ({ ...prev, author: { ...prev.author, avatar: avatarUrl } }));\n    }\n  }, [post.author.avatar]);\n\n  const handleProfilePress = () => {\n    setShowProfile(true);\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <TouchableOpacity \n          style={styles.userInfo}\n          onPress={handleProfilePress}\n        >\n          <View style={styles.avatarContainer}>\n            {localPost.author.avatar && localPost.author.avatar !== 'None' ? (\n              <Image \n                source={{ uri: localPost.author.avatar }} \n                style={styles.avatar}\n              />\n            ) : (\n              <LetterAvatar \n                name={localPost.author.name || localPost.author.username} \n                size={40}\n              />\n            )}\n          </View>\n\n          <View style={styles.userTextInfo}>\n            <View style={styles.nameContainer}>\n              <Text style={styles.name}>{localPost.author.name}</Text>\n              {localPost.author.icons?.includes('VERIFY') && (\n                <Image\n                  source={require('../assets/verify.png')}\n                  style={styles.verifiedBadge}\n                />\n              )}\n            </View>\n            <Text style={styles.username}>@{localPost.author.username}</Text>\n          </View>\n        </TouchableOpacity>\n        <Text style={styles.date}>{formatDate(localPost.date)}</Text>\n      </View>\n\n      <LinkText text={localPost.content} style={styles.text} />\n\n      {renderMediaContent()}\n      {renderMediaViewer()}\n\n      <View style={styles.footer}>\n        <Animated.View style={[\n          styles.reactions, \n          { transform: [{ scale: scaleAnim }] },\n          loadingAction ? styles.pointerEventsNone : styles.pointerEventsAuto\n        ]}>\n          <TouchableOpacity\n            style={[styles.reactionButton, localPost.liked && styles.reactionButtonActive]}\n            onPress={() => handleReactionPress('like')}\n          >\n            <Image\n              source={require('../assets/like.png')}\n              style={styles.reactionIcon}\n              tintColor={localPost.liked ? '#007AFF' : '#666'}\n              resizeMode=\"contain\"\n            />\n            <Text style={[styles.reactionCount, localPost.liked && styles.reactionCountActive]}>\n              {localPost.likes}\n            </Text>\n            {loadingAction === 'LIKE' && (\n              <ActivityIndicator size=\"small\" color={localPost.liked ? '#007AFF' : '#666'} />\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.reactionButton, localPost.disliked && styles.dislikeButtonActive]}\n            onPress={() => handleReactionPress('dislike')}\n          >\n            <Image\n              source={require('../assets/dislike.png')}\n              style={styles.reactionIcon}\n              tintColor={localPost.disliked ? '#FF3B30' : '#666'}\n              resizeMode=\"contain\"\n            />\n            <Text style={[styles.reactionCount, localPost.disliked && styles.dislikeCountActive]}>\n              {localPost.dislikes}\n            </Text>\n            {loadingAction === 'DISLIKE' && (\n              <ActivityIndicator size=\"small\" color={localPost.disliked ? '#FF3B30' : '#666'} />\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity style={styles.reactionButton}>\n            <Image\n              source={require('../assets/comment.png')}\n              style={styles.reactionIcon}\n              tintColor=\"#666\"\n              resizeMode=\"contain\"\n            />\n            <Text style={styles.reactionCount}>\n              {localPost.comments}\n            </Text>\n          </TouchableOpacity>\n        </Animated.View>\n\n        {localPost.my_post && (\n          <View style={styles.myPostBadge}>\n            <Text style={styles.myPostText}> </Text>\n          </View>\n        )}\n      </View>\n\n      <ProfileModal\n        visible={showProfile}\n        username={localPost.author.username}\n        onClose={() => setShowProfile(false)}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#fff',\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  avatarContainer: {\n    width: 40,\n    height: 40,\n    marginRight: 10,\n    borderRadius: 20,\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n  },\n  avatar: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 20,\n  },\n  userTextInfo: {\n    flex: 1,\n  },\n  nameContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  name: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#000',\n  },\n  verifiedBadge: {\n    width: 16,\n    height: 16,\n    marginLeft: 4,\n  },\n  username: {\n    fontSize: 14,\n    color: '#666',\n  },\n  date: {\n    fontSize: 12,\n    color: '#666',\n  },\n  text: {\n    fontSize: 16,\n    color: '#000',\n    marginBottom: 10,\n    lineHeight: 22,\n  },\n  mediaContainer: {\n    width: '100%',\n    backgroundColor: '#000',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginVertical: 5,\n  },\n  mediaContent: {\n    width: '100%',\n    height: '100%',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  fullScreenMedia: {\n    width: '100%',\n    height: '100%',\n  },\n  closeButton: {\n    position: 'absolute',\n    top: 40,\n    right: 20,\n    zIndex: 2,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    color: '#fff',\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  downloadButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 40,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    borderRadius: 25,\n    padding: 12,\n    zIndex: 1,\n  },\n  downloadIcon: {\n    width: 24,\n    height: 24,\n    tintColor: '#fff',\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  reactions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    gap: 20,\n  },\n  reactionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: '#f8f8f8',\n  },\n  reactionButtonActive: {\n    backgroundColor: '#E3F2FD',\n  },\n  dislikeButtonActive: {\n    backgroundColor: '#FFE5E5',\n  },\n  reactionIcon: {\n    width: 24,\n    height: 24,\n  },\n  reactionIconActive: {\n    tintColor: '#007AFF',\n  },\n  dislikeIconActive: {\n    tintColor: '#FF3B30',\n  },\n  reactionCount: {\n    fontSize: 15,\n    fontWeight: '600',\n    color: '#666',\n    marginLeft: 6,\n  },\n  reactionCountActive: {\n    color: '#007AFF',\n  },\n  dislikeCountActive: {\n    color: '#FF3B30',\n  },\n  reactionLoader: {\n    marginLeft: 4,\n  },\n  pointerEventsAuto: {\n    pointerEvents: 'auto',\n  },\n  pointerEventsNone: {\n    pointerEvents: 'none',\n  },\n  myPostBadge: {\n    backgroundColor: '#E3F2FD',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  myPostText: {\n    fontSize: 12,\n    color: '#007AFF',\n    fontWeight: '500',\n  },\n  videoOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'flex-end',\n    alignItems: 'flex-end',\n    padding: 10,\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  },\n  fileContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 12,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  fileIcon: {\n    width: 40,\n    height: 40,\n    marginRight: 12,\n  },\n  fileInfo: {\n    flex: 1,\n  },\n  fileName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#333',\n    marginBottom: 4,\n  },\n  fileSize: {\n    fontSize: 14,\n    color: '#666',\n  },\n});\n\nexport default PostCard;\n","import React, { useState, useRef } from 'react';\nimport {\n    View,\n    TextInput,\n    TouchableOpacity,\n    StyleSheet,\n    ActivityIndicator,\n    Text,\n    Image,\n    Platform,\n    Animated,\n    Easing\n} from 'react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport { postsAPI, SelectedFile } from '../services/api';\n\ninterface CreatePostProps {\n    onPostCreated: (postId: string) => void;\n}\n\nconst CreatePost: React.FC<CreatePostProps> = ({ onPostCreated }) => {\n    const [text, setText] = useState('');\n    const [files, setFiles] = useState<SelectedFile[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    \n    // \n    const scaleAnim = useRef(new Animated.Value(1)).current;\n    const successOpacityAnim = useRef(new Animated.Value(0)).current;\n\n    const handleAddImage = async () => {\n        try {\n            const result = await ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: true,\n                quality: 1,\n            });\n\n            if (!result.canceled) {\n                const file: SelectedFile = {\n                    uri: result.assets[0].uri,\n                    type: 'image/jpeg',\n                    name: 'photo.jpg'\n                };\n                setFiles([...files, file]);\n            }\n        } catch (error) {\n            console.error('   :', error);\n            setError('   ');\n        }\n    };\n\n    const animateSuccess = () => {\n        //   \n        Animated.sequence([\n            Animated.timing(scaleAnim, {\n                toValue: 0.95,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            //     \n            Animated.timing(successOpacityAnim, {\n                toValue: 1,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            Animated.delay(1000),\n            //   \n            Animated.timing(successOpacityAnim, {\n                toValue: 0,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            //     \n            Animated.timing(scaleAnim, {\n                toValue: 1,\n                duration: 200,\n                useNativeDriver: true,\n            })\n        ]).start();\n    };\n\n    const handleSubmit = async () => {\n        if (!text.trim() && files.length === 0) {\n            setError('   ');\n            return;\n        }\n\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const postId = await postsAPI.createPost(text, files);\n            setText('');\n            setFiles([]);\n            animateSuccess();\n            onPostCreated(postId);\n        } catch (error) {\n            console.error('   :', error);\n            setError(error instanceof Error ? error.message : '   ');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <View style={styles.container}>\n            <Animated.View style={[\n                styles.formContainer,\n                {\n                    transform: [{ scale: scaleAnim }]\n                }\n            ]}>\n                <TextInput\n                    style={styles.input}\n                    placeholder=\"   ?\"\n                    placeholderTextColor=\"#666\"\n                    value={text}\n                    onChangeText={setText}\n                    multiline\n                    maxLength={5000}\n                    editable={!isLoading}\n                />\n                \n                {files.length > 0 && (\n                    <View style={styles.filesContainer}>\n                        {files.map((file, index) => (\n                            <View key={index} style={styles.filePreview}>\n                                <Image \n                                    source={{ uri: file.uri }} \n                                    style={styles.imagePreview} \n                                />\n                                <TouchableOpacity \n                                    style={styles.removeButton}\n                                    onPress={() => setFiles(files.filter((_, i) => i !== index))}\n                                >\n                                    <Text style={styles.removeButtonText}></Text>\n                                </TouchableOpacity>\n                            </View>\n                        ))}\n                    </View>\n                )}\n\n                {error && (\n                    <Text style={styles.errorText}>{error}</Text>\n                )}\n\n                <View style={styles.footer}>\n                    <TouchableOpacity \n                        style={styles.addButton} \n                        onPress={handleAddImage}\n                        disabled={isLoading}\n                    >\n                        <Image \n                            source={require('../assets/addfile.png')} \n                            style={styles.addButtonIcon}\n                        />\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[\n                            styles.submitButton,\n                            (!text.trim() && files.length === 0) && styles.submitButtonDisabled\n                        ]}\n                        onPress={handleSubmit}\n                        disabled={isLoading || (!text.trim() && files.length === 0)}\n                    >\n                        {isLoading ? (\n                            <ActivityIndicator color=\"#fff\" />\n                        ) : (\n                            <Text style={styles.submitButtonText}></Text>\n                        )}\n                    </TouchableOpacity>\n                </View>\n            </Animated.View>\n\n            <Animated.View \n                style={[\n                    styles.successMessage,\n                    { opacity: successOpacityAnim }\n                ]}\n                pointerEvents=\"none\"\n            >\n                <Text style={styles.successText}> !</Text>\n            </Animated.View>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: '#fff',\n        borderRadius: 12,\n        overflow: 'hidden',\n        ...Platform.select({\n            ios: {\n                shadowColor: '#000',\n                shadowOffset: { width: 0, height: 2 },\n                shadowOpacity: 0.1,\n                shadowRadius: 4,\n            },\n            android: {\n                elevation: 3,\n            },\n        }),\n    },\n    formContainer: {\n        width: '100%',\n        backgroundColor: '#fff',\n    },\n    input: {\n        minHeight: 80,\n        padding: 15,\n        fontSize: 16,\n        color: '#000',\n        textAlignVertical: 'top',\n    },\n    filesContainer: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        padding: 10,\n        borderTopWidth: 1,\n        borderTopColor: '#eee',\n    },\n    filePreview: {\n        width: 100,\n        height: 100,\n        margin: 5,\n        borderRadius: 8,\n        overflow: 'hidden',\n        position: 'relative',\n    },\n    imagePreview: {\n        width: '100%',\n        height: '100%',\n    },\n    removeButton: {\n        position: 'absolute',\n        top: 5,\n        right: 5,\n        width: 24,\n        height: 24,\n        borderRadius: 12,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    removeButtonText: {\n        color: '#fff',\n        fontSize: 18,\n        fontWeight: 'bold',\n    },\n    footer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        padding: 10,\n        borderTopWidth: 1,\n        borderTopColor: '#eee',\n    },\n    addButton: {\n        width: 40,\n        height: 40,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginRight: 10,\n    },\n    addButtonIcon: {\n        width: 24,\n        height: 24,\n        tintColor: '#666',\n    },\n    submitButton: {\n        flex: 1,\n        height: 40,\n        backgroundColor: '#007AFF',\n        borderRadius: 20,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    submitButtonDisabled: {\n        backgroundColor: '#ccc',\n    },\n    submitButtonText: {\n        color: '#fff',\n        fontSize: 16,\n        fontWeight: '600',\n    },\n    errorText: {\n        color: '#DC3545',\n        fontSize: 14,\n        marginHorizontal: 15,\n        marginBottom: 10,\n    },\n    successMessage: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    },\n    successText: {\n        color: '#28A745',\n        fontSize: 18,\n        fontWeight: '600',\n    }\n});\n\nexport default CreatePost; ","import React, { useEffect, useState, useRef } from 'react';\nimport { View, Text, StyleSheet, Animated } from 'react-native';\nimport webSocketService from '../services/WebSocket';\n\nconst WebSocketStatus: React.FC = () => {\n    const [status, setStatus] = useState<'connecting' | 'connected' | 'error'>('connecting');\n    const [errorMessage, setErrorMessage] = useState<string | null>(null);\n    const slideAnim = useRef(new Animated.Value(-100)).current;\n    const opacityAnim = useRef(new Animated.Value(0)).current;\n    const wasConnected = useRef(false);\n\n    useEffect(() => {\n        const checkConnection = () => {\n            if (webSocketService.connectionStatus && webSocketService.ready) {\n                if (!wasConnected.current) {\n                    setStatus('connected');\n                    wasConnected.current = true;\n                    //       2 \n                    setTimeout(hideNotification, 2000);\n                }\n            } else if (wasConnected.current) {\n                //       \n                setStatus('error');\n                setErrorMessage(' ');\n                wasConnected.current = false;\n                showNotification();\n            }\n        };\n\n        const showNotification = () => {\n            Animated.parallel([\n                Animated.timing(slideAnim, {\n                    toValue: 0,\n                    duration: 300,\n                    useNativeDriver: true,\n                }),\n                Animated.timing(opacityAnim, {\n                    toValue: 1,\n                    duration: 300,\n                    useNativeDriver: true,\n                }),\n            ]).start();\n        };\n\n        const interval = setInterval(checkConnection, 1000);\n\n        const timeout = setTimeout(() => {\n            if (status === 'connecting' && !wasConnected.current) {\n                setStatus('error');\n                setErrorMessage('   ');\n                showNotification();\n            }\n        }, 15000);\n\n        if (status === 'connecting' && !wasConnected.current) {\n            showNotification();\n        }\n\n        return () => {\n            clearInterval(interval);\n            clearTimeout(timeout);\n        };\n    }, [status]);\n\n    const hideNotification = () => {\n        Animated.parallel([\n            Animated.timing(slideAnim, {\n                toValue: -100,\n                duration: 300,\n                useNativeDriver: true,\n            }),\n            Animated.timing(opacityAnim, {\n                toValue: 0,\n                duration: 300,\n                useNativeDriver: true,\n            }),\n        ]).start();\n    };\n\n    const getMessage = () => {\n        switch (status) {\n            case 'connecting':\n                return ' ...';\n            case 'connected':\n                return ' ';\n            case 'error':\n                return errorMessage || ' ';\n        }\n    };\n\n    if (status === 'connected' && !opacityAnim) return null;\n\n    return (\n        <Animated.View \n            style={[\n                styles.container,\n                {\n                    transform: [{ translateY: slideAnim }],\n                    opacity: opacityAnim,\n                }\n            ]}\n        >\n            <View style={[\n                styles.content,\n                status === 'error' && styles.errorContent,\n                status === 'connected' && styles.successContent\n            ]}>\n                <Text style={styles.text}>{getMessage()}</Text>\n            </View>\n        </Animated.View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        position: 'absolute',\n        top: 10,\n        left: 10,\n        right: 10,\n        zIndex: 1000,\n        borderRadius: 8,\n        overflow: 'hidden',\n    },\n    content: {\n        backgroundColor: '#333',\n        padding: 14,\n        alignItems: 'center',\n        opacity: 0.9,\n        shadowColor: '#000',\n        shadowOffset: {\n            width: 0,\n            height: 2,\n        },\n        shadowOpacity: 0.25,\n        shadowRadius: 3.84,\n        elevation: 5,\n    },\n    errorContent: {\n        backgroundColor: '#DC3545',\n    },\n    successContent: {\n        backgroundColor: '#28A745',\n    },\n    text: {\n        color: '#fff',\n        fontSize: 15,\n        fontWeight: '500',\n    }\n});\n\nexport default WebSocketStatus; ","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  FlatList,\n  StyleSheet,\n  RefreshControl,\n  ActivityIndicator,\n  Text,\n  TouchableOpacity,\n  Animated,\n  Platform,\n} from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { PostResponse, postsAPI } from '../services/api';\nimport PostCard from '../components/PostCard';\nimport { AuthContext } from '../navigation';\nimport CreatePost from '../components/CreatePost';\nimport { connectWebSocket } from '../services/api';\nimport WebSocketStatus from '../components/WebSocketStatus';\nimport ErrorMessage from '../components/ErrorMessage';\n\ntype FeedType = 'LATEST' | 'REC' | 'SUBSCRIPTIONS';\ntype FeedScreenNavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nconst POSTS_PER_PAGE = 25;\nconst RETRY_INTERVAL = 5000;\n\nconst FeedScreen = () => {\n  const navigation = useNavigation<FeedScreenNavigationProp>();\n  const [feedType, setFeedType] = useState<FeedType>('LATEST');\n  const [posts, setPosts] = useState<PostResponse[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMorePosts, setHasMorePosts] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const retryTimeoutRef = useRef<NodeJS.Timeout>();\n  const pageRef = useRef(0);\n  \n  //  \n  const loadingOpacity = useRef(new Animated.Value(0)).current;\n  const contentOpacity = useRef(new Animated.Value(1)).current;\n\n  const { logout } = React.useContext(AuthContext);\n\n  useEffect(() => {\n    //   WebSocket   \n    connectWebSocket().catch(error => {\n      console.error('Failed to connect to WebSocket:', error);\n      setError('   ');\n    });\n\n    loadPosts();\n\n    return () => {\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    };\n  }, [feedType]);\n\n  const loadPosts = async (shouldRefresh = false) => {\n    try {\n      if (shouldRefresh) {\n        setRefreshing(true);\n        pageRef.current = 0;\n      }\n\n      if (!shouldRefresh && loadingMore) return;\n      if (!shouldRefresh) {\n        setLoadingMore(true);\n      }\n\n      setError(null);\n\n      let newPosts: PostResponse[] = [];\n      const startIndex = pageRef.current * POSTS_PER_PAGE;\n\n      switch (feedType) {\n        case 'LATEST':\n          newPosts = await postsAPI.loadFeedPosts(startIndex);\n          break;\n        case 'REC':\n          newPosts = await postsAPI.loadRecommendedPosts(startIndex);\n          break;\n        case 'SUBSCRIPTIONS':\n          newPosts = await postsAPI.loadSubscriptionPosts(startIndex);\n          break;\n      }\n\n      if (newPosts.length < POSTS_PER_PAGE) {\n        setHasMorePosts(false);\n      }\n\n      if (shouldRefresh) {\n        setPosts(newPosts);\n      } else {\n        setPosts(prev => [...prev, ...newPosts]);\n      }\n\n      pageRef.current += 1;\n    } catch (error) {\n      console.error('Error loading posts:', error);\n      setError('   .    .');\n      \n      //    5 \n      retryTimeoutRef.current = setTimeout(() => {\n        loadPosts(shouldRefresh);\n      }, RETRY_INTERVAL);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n      setLoadingMore(false);\n    }\n  };\n\n  const animateLoading = useCallback((show: boolean) => {\n    Animated.parallel([\n      Animated.timing(loadingOpacity, {\n        toValue: show ? 1 : 0,\n        duration: 200,\n        useNativeDriver: false,\n      }),\n      Animated.timing(contentOpacity, {\n        toValue: show ? 0.3 : 1,\n        duration: 200,\n        useNativeDriver: false,\n      }),\n    ]).start();\n  }, []);\n\n  const handleLogin = useCallback(async () => {\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n    }\n    try {\n      //   \n      await logout();\n      \n      //       \n      setPosts([]);\n      setError(null);\n      setLoading(false);\n      setRefreshing(false);\n      setLoadingMore(false);\n    } catch (error) {\n      console.error('Error logging out:', error);\n    }\n  }, [logout]);\n\n  const updateSinglePost = useCallback(async (postId: string) => {\n    try {\n      const updatedPost = await postsAPI.loadPosts('last', 0);\n      if (updatedPost && updatedPost.length > 0) {\n        setPosts(prevPosts => \n          prevPosts.map(post => \n            post.id === postId ? updatedPost[0] : post\n          )\n        );\n      }\n    } catch (error) {\n      console.error('Error updating post:', error);\n    }\n  }, []);\n\n  const handlePostCreated = useCallback(async (postId: string) => {\n    try {\n      const newPost = await postsAPI.loadPosts('last', 0);\n      if (newPost && newPost.length > 0) {\n        setPosts(prevPosts => [newPost[0], ...prevPosts]);\n      }\n    } catch (error) {\n      console.error('Error loading new post:', error);\n    }\n  }, []);\n\n  const handlePostDeleted = useCallback((postId: string) => {\n    setPosts(prevPosts => prevPosts.filter(post => post.id !== postId));\n  }, []);\n\n  const handleRefresh = useCallback(() => {\n    loadPosts(true);\n  }, [feedType]);\n\n  const handleLoadMore = () => {\n    if (!loadingMore && hasMorePosts && !error) {\n      loadPosts();\n    }\n  };\n\n  const handleChangeFeedType = useCallback((type: FeedType) => {\n    if (type === feedType) return;\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n    }\n    console.log('Changing feed type to:', type);\n    setPosts([]);\n    setHasMorePosts(true);\n    pageRef.current = 0;\n    setFeedType(type);\n  }, [feedType]);\n\n  const renderItem = useCallback(({ item }: { item: PostResponse }) => (\n    <PostCard\n      post={item}\n      onUpdate={() => updateSinglePost(item.id)}\n    />\n  ), [updateSinglePost]);\n\n  const renderHeader = useCallback(() => (\n    <View style={styles.header}>\n        <WebSocketStatus />\n        <View style={styles.createPostContainer}>\n            <CreatePost onPostCreated={handlePostCreated} />\n        </View>\n        <View style={styles.feedTypeContainer}>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'LATEST' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('LATEST')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'LATEST' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'REC' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('REC')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'REC' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'SUBSCRIPTIONS' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('SUBSCRIPTIONS')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'SUBSCRIPTIONS' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n        </View>\n    </View>\n  ), [feedType, handleChangeFeedType, handlePostCreated]);\n\n  const renderErrorState = () => {\n    if (!error) return null;\n    \n    return (\n      <View style={styles.errorContainer}>\n        <Text style={styles.errorText}>{error}</Text>\n        <TouchableOpacity style={styles.retryButton} onPress={() => loadPosts(true)}>\n          <Text style={styles.retryButtonText}></Text>\n        </TouchableOpacity>\n      </View>\n    );\n  };\n\n  const renderEmpty = useCallback(() => {\n    if (loading) return null;\n    \n    return (\n      <View style={styles.emptyContainer}>\n        <Text style={styles.emptyText}>\n          {feedType === 'LATEST' ? '   ' :\n           feedType === 'REC' ? ' ' :\n           '    '}\n        </Text>\n      </View>\n    );\n  }, [feedType, loading]);\n\n  const renderFooter = useCallback(() => {\n    if (!loadingMore) return null;\n    return (\n      <View style={styles.footer}>\n        <ActivityIndicator size=\"small\" color=\"#007AFF\" />\n      </View>\n    );\n  }, [loadingMore]);\n\n  if (loading && posts.length === 0) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color=\"#007AFF\" />\n        </View>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {renderHeader()}\n      <FlatList\n        data={posts}\n        renderItem={renderItem}\n        keyExtractor={item => `${feedType}_${item.id}`}\n        onEndReached={handleLoadMore}\n        onEndReachedThreshold={0.5}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={handleRefresh}\n            colors={['#007AFF']}\n            tintColor=\"#007AFF\"\n          />\n        }\n        ListEmptyComponent={renderEmpty}\n        ListFooterComponent={loadingMore ? <ActivityIndicator /> : null}\n      />\n      {renderErrorState()}\n      <WebSocketStatus />\n    </View>\n  );\n};\n\n//       \nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  contentContainer: {\n    flex: 1,\n    position: 'relative',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  header: {\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 1,\n      },\n      android: {\n        elevation: 2,\n      },\n    }),\n  },\n  createPostContainer: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  feedTypeContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    backgroundColor: '#fff',\n    zIndex: 1,\n  },\n  feedTypeButton: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderRadius: 20,\n    marginHorizontal: 4,\n  },\n  activeFeedType: {\n    backgroundColor: '#E3F2FD',\n  },\n  feedTypeText: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: '#666',\n  },\n  activeFeedTypeText: {\n    color: '#007AFF',\n  },\n  content: {\n    flex: 1,\n  },\n  listContent: {\n    flexGrow: 1,\n  },\n  loadingOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.8)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  pointerEventsAuto: {\n    pointerEvents: 'auto',\n  },\n  pointerEventsNone: {\n    pointerEvents: 'none',\n  },\n  footer: {\n    padding: 20,\n    alignItems: 'center',\n  },\n  errorContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    padding: 20,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#eee',\n    alignItems: 'center',\n  },\n  errorText: {\n    fontSize: 14,\n    color: '#FF3B30',\n    textAlign: 'center',\n    marginBottom: 15,\n  },\n  retryButton: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 20,\n    marginBottom: 10,\n  },\n  retryButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  loginButton: {\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n  },\n  loginButtonText: {\n    color: '#007AFF',\n    fontSize: 16,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n  },\n});\n\nexport default FeedScreen;\n","import React, { useEffect, useState, useContext, useRef, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  ActivityIndicator,\n  Platform,\n  Alert,\n  RefreshControl,\n  FlatList,\n  Linking,\n  Dimensions,\n  ScrollView,\n} from 'react-native';\nimport { profileAPI, postsAPI, getImageUrl, getAccountData, ProfileData, PostResponse } from '../services/api';\nimport LetterAvatar from '../components/LetterAvatar';\nimport { AuthContext } from '../navigation';\nimport PostCard from '../components/PostCard';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport ErrorMessage from '../components/ErrorMessage';\n\nconst POSTS_PER_PAGE = 10;\nconst { width } = Dimensions.get('window');\n\ninterface ProfileScreenProps {\n  username?: string;\n}\n\nconst ProfileScreen: React.FC<ProfileScreenProps> = ({ username }) => {\n  const { logout } = useContext(AuthContext);\n  const [profile, setProfile] = useState<ProfileData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [refreshing, setRefreshing] = useState(false);\n  const [posts, setPosts] = useState<PostResponse[]>([]);\n  const [loadingPosts, setLoadingPosts] = useState(true);\n  const [hasMorePosts, setHasMorePosts] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const pageRef = useRef(0);\n\n  useEffect(() => {\n    fetchProfile();\n  }, [username]);\n\n  const fetchProfile = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      let data: ProfileData;\n      \n      if (username) {\n        data = await profileAPI.getProfile(username);\n      } else {\n        //  username  ,      \n        const accountData = await getAccountData();\n        if (accountData) {\n          data = await profileAPI.getProfile(accountData.username);\n        } else {\n          throw new Error('    ');\n        }\n      }\n      \n      //  URL   \n      if (data.avatar) {\n        data.avatar = `https://elemsocial.com/Content/Avatars/${data.avatar}`;\n      }\n      if (data.cover) {\n        data.cover = `https://elemsocial.com/Content/Covers/${data.cover}`;\n      }\n      \n      setProfile(data);\n      loadPosts();\n    } catch (error) {\n      console.error('  :', error);\n      setError('   .        .');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const loadPosts = async (shouldRefresh = false) => {\n    try {\n      if (shouldRefresh) {\n        setLoadingPosts(true);\n        pageRef.current = 0;\n      } else {\n        if (loadingMore) return;\n        setLoadingMore(true);\n      }\n\n      if (!profile) return;\n\n      const startIndex = pageRef.current * POSTS_PER_PAGE;\n      const newPosts = await postsAPI.loadProfilePosts(String(profile.id), startIndex);\n\n      if (newPosts.length < POSTS_PER_PAGE) {\n        setHasMorePosts(false);\n      }\n\n      if (shouldRefresh) {\n        setPosts(newPosts);\n      } else {\n        setPosts(prev => [...prev, ...newPosts]);\n      }\n\n      pageRef.current += 1;\n    } catch (error) {\n      console.error('  :', error);\n      setError('   .    .');\n    } finally {\n      setLoadingPosts(false);\n      setLoadingMore(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchProfile();\n  };\n\n  const handleLoadMore = () => {\n    if (!loadingMore && hasMorePosts && !error) {\n      loadPosts();\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (error) {\n      console.error(' :', error);\n      setError('    ');\n    }\n  };\n\n  const renderItem = useCallback(({ item }: { item: PostResponse }) => (\n    <PostCard\n      post={item}\n      onUpdate={() => loadPosts(true)}\n    />\n  ), []);\n\n  if (loading) {\n    return (\n      <View style={styles.centered}>\n        <ActivityIndicator size=\"large\" color=\"#007AFF\" />\n      </View>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <View style={styles.centered}>\n        <Text>  </Text>\n        <TouchableOpacity \n          style={styles.retryButton}\n          onPress={fetchProfile}\n        >\n          <Text style={styles.retryButtonText}> </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  const renderStats = () => {\n    const stats = [\n      { label: '', value: profile.posts },\n      { label: '', value: profile.subscribers },\n      { label: '', value: profile.subscriptions }\n    ];\n\n    return (\n      <View style={styles.stats}>\n        {stats.map((stat) => (\n          <View key={stat.label} style={styles.statItem}>\n            <Text style={styles.statNumber}>\n              {stat.value?.toLocaleString() || '0'}\n            </Text>\n            <Text style={styles.statLabel}>{stat.label}</Text>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  return (\n    <ScrollView\n      style={styles.container}\n      refreshControl={\n        <RefreshControl refreshing={refreshing} onRefresh={handleRefresh} />\n      }\n    >\n      <ErrorMessage \n        message={error} \n        onClose={() => setError('')}\n      />\n      \n      <View style={styles.profileInfo}>\n        {profile.cover && (\n          <Image \n            source={{ uri: profile.cover }} \n            style={styles.coverImage}\n            resizeMode=\"cover\"\n          />\n        )}\n        \n        <View style={[styles.avatarWrapper, profile.cover ? styles.avatarWithCover : null]}>\n          {profile.avatar ? (\n            <Image \n              source={{ uri: profile.avatar }} \n              style={styles.avatar}\n              resizeMode=\"cover\"\n            />\n          ) : (\n            <LetterAvatar \n              name={profile.name || profile.username} \n              size={100}\n            />\n          )}\n        </View>\n        \n        <View style={styles.nameContainer}>\n          <View style={styles.nameRow}>\n            <Text style={styles.name}>{profile.name}</Text>\n            {profile.icons && profile.icons.includes('VERIFY') && (\n              <Image\n                source={require('../assets/verify.png')}\n                style={styles.verifiedBadge}\n              />\n            )}\n          </View>\n          <Text style={styles.username}>@{profile.username}</Text>\n          \n          {profile.description && (\n            <Text style={styles.description}>{profile.description}</Text>\n          )}\n\n          {profile.icons && profile.icons.length > 0 && (\n            <View style={styles.iconsContainer}>\n              {profile.icons.filter(icon => icon !== 'VERIFY').map((icon, index) => (\n                <Image\n                  key={index}\n                  source={{ uri: `https://elemsocial.com/Content/Icons/${icon}` }}\n                  style={styles.icon}\n                />\n              ))}\n            </View>\n          )}\n        </View>\n        \n        {renderStats()}\n        \n        {profile.my_profile && (\n          <TouchableOpacity\n            style={styles.logoutButton}\n            onPress={handleLogout}\n          >\n            <Text style={styles.logoutButtonText}></Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  profileInfo: {\n    position: 'relative',\n  },\n  coverImage: {\n    width: '100%',\n    height: 200,\n  },\n  avatarWrapper: {\n    alignItems: 'center',\n    marginTop: 20,\n    marginBottom: 10,\n  },\n  avatarWithCover: {\n    marginTop: -50,\n  },\n  avatar: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    borderWidth: 4,\n    borderColor: '#fff',\n    backgroundColor: '#f0f0f0',\n  },\n  nameContainer: {\n    alignItems: 'center',\n    marginBottom: 15,\n    paddingHorizontal: 15,\n  },\n  nameRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 4,\n  },\n  name: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#000',\n    marginBottom: 4,\n  },\n  username: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 8,\n  },\n  description: {\n    fontSize: 14,\n    color: '#444',\n    textAlign: 'center',\n    paddingHorizontal: 20,\n    marginTop: 8,\n  },\n  iconsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    marginTop: 8,\n    gap: 8,\n  },\n  icon: {\n    width: 24,\n    height: 24,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    paddingVertical: 15,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: '#eee',\n    marginVertical: 15,\n    marginHorizontal: 15,\n  },\n  statItem: {\n    alignItems: 'center',\n    flex: 1,\n  },\n  statNumber: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  logoutButton: {\n    backgroundColor: '#007AFF',\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginHorizontal: 15,\n    marginTop: 15,\n    marginBottom: 20,\n  },\n  logoutButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  retryButton: {\n    marginTop: 10,\n    padding: 10,\n    backgroundColor: '#007AFF',\n    borderRadius: 8,\n  },\n  retryButtonText: {\n    color: '#fff',\n    fontSize: 16,\n  },\n  verifiedBadge: {\n    width: 20,\n    height: 20,\n  },\n});\n\nexport default ProfileScreen;\n","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { Ionicons } from '@expo/vector-icons';\nimport LoginScreen from '../screens/LoginScreen';\nimport FeedScreen from '../screens/FeedScreen';\nimport ProfileScreen from '../screens/ProfileScreen';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Image, View, Text, StyleSheet } from 'react-native';\n\nconst Tab = createBottomTabNavigator();\nconst Stack = createNativeStackNavigator();\n\nexport const AuthContext = createContext<{\n  isLoggedIn: boolean;\n  setIsLoggedIn: (value: boolean) => void;\n  logout: () => Promise<void>;\n}>({\n  isLoggedIn: false,\n  setIsLoggedIn: () => {},\n  logout: async () => {},\n});\n\nconst MainTabs = () => {\n  return (\n    <Tab.Navigator\n      screenOptions={{\n        tabBarActiveTintColor: '#007AFF',\n        tabBarInactiveTintColor: '#8E8E93',\n        tabBarStyle: {\n          backgroundColor: '#FFFFFF',\n          borderTopWidth: 1,\n          borderTopColor: '#E5E5EA',\n        },\n        headerStyle: {\n          backgroundColor: '#FFFFFF',\n        },\n        headerTitleStyle: {\n          color: '#000000',\n          fontSize: 17,\n          fontWeight: '600',\n        },\n      }}\n    >\n      <Tab.Screen\n        name=\"Feed\"\n        component={FeedScreen}\n        options={{\n          title: '',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"home-outline\" size={size} color={color} />\n          ),\n          headerTitle: '',\n        }}\n      />\n      <Tab.Screen\n        name=\"Profile\"\n        component={ProfileScreen}\n        options={({ navigation }) => ({\n          title: ' ',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"person-outline\" size={size} color={color} />\n          ),\n          headerTitle: ' ',\n          headerRight: () => {\n            const { logout } = useContext(AuthContext);\n            return (\n              <Ionicons\n                name=\"log-out-outline\"\n                size={24}\n                color=\"#ff3b30\"\n                style={{ marginRight: 15 }}\n                onPress={logout}\n              />\n            );\n          },\n        })}\n      />\n    </Tab.Navigator>\n  );\n};\n\nconst Navigation = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    checkLoginStatus();\n  }, []);\n\n  const checkLoginStatus = async () => {\n    await AsyncStorage.clear();\n    const sKey = await AsyncStorage.getItem('S-KEY');\n    setIsLoggedIn(!!sKey);\n  };\n\n  const logout = async () => {\n    await AsyncStorage.removeItem('S-KEY');\n    setIsLoggedIn(false);\n  };\n\n  if (isLoggedIn) {\n    return (\n      <AuthContext.Provider value={{ isLoggedIn, setIsLoggedIn, logout }}>\n        <NavigationContainer>\n          <Stack.Navigator\n            screenOptions={{\n              headerStyle: {\n                backgroundColor: '#fff',\n              },\n              headerTintColor: '#000',\n              headerTitleStyle: {\n                fontWeight: 'bold',\n              },\n              headerTitle: () => (\n                <View style={styles.headerContainer}>\n                  <Image \n                    source={require('../assets/logo.png')} \n                    style={styles.headerLogo}\n                    resizeMode=\"contain\"\n                  />\n                  <Text style={styles.headerTitle}>Element+</Text>\n                </View>\n              ),\n            }}\n          >\n            <Stack.Screen name=\"Main\" component={MainTabs} />\n          </Stack.Navigator>\n        </NavigationContainer>\n      </AuthContext.Provider>\n    );\n  } else {\n    return (\n      <AuthContext.Provider value={{ isLoggedIn, setIsLoggedIn, logout }}>\n        <NavigationContainer>\n          <Stack.Navigator\n            screenOptions={{\n              headerStyle: {\n                backgroundColor: '#fff',\n              },\n              headerTintColor: '#000',\n              headerTitleStyle: {\n                fontWeight: 'bold',\n              },\n              headerTitle: () => (\n                <View style={styles.headerContainer}>\n                  <Image \n                    source={require('../assets/logo.png')} \n                    style={styles.headerLogo}\n                    resizeMode=\"contain\"\n                  />\n                  <Text style={styles.headerTitle}>Element+</Text>\n                </View>\n              ),\n            }}\n          >\n            <Stack.Screen name=\"Auth\" component={LoginScreen} />\n          </Stack.Navigator>\n        </NavigationContainer>\n      </AuthContext.Provider>\n    );\n  }\n};\n\nconst styles = StyleSheet.create({\n  headerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  headerLogo: {\n    width: 24,\n    height: 24,\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n});\n\nexport default Navigation;\n","import './src/utils/disableWarnings';\nimport React, { useCallback, useEffect } from 'react';\nimport Navigation from './src/navigation';\nimport { StatusBar } from 'expo-status-bar';\nimport { View, StyleSheet } from 'react-native';\n\nexport default function App() {\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      //  localStorage   \n      window.localStorage.clear();\n    }\n  }, []);\n\n  const renderNavigation = useCallback(() => <Navigation />, []);\n\n  return (\n    <View style={styles.container}>\n      <StatusBar style=\"auto\" />\n      {renderNavigation()}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n});\n","import { registerRootComponent } from 'expo';\n\nimport App from './App';\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","const originalConsoleError = console.error;\n\nconsole.error = (...args: any[]) => {\n  if (args[0]?.includes?.('Warning: Encountered two children with the same key')) {\n    return;\n  }\n  originalConsoleError.apply(console, args);\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/KirixElemClient/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [499], () => (__webpack_require__(6835)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","async","rsaEncrypt","data","pk","publicKeyBuffer","base64String","replace","Uint8Array","from","atob","c","charCodeAt","buffer","importPublicKey","dataBuffer","TextEncoder","encode","publicKeyE","crypto","subtle","importKey","name","hash","encryptedDataBuffer","encrypt","error","Error","message","base64ToBytes","base64","binaryString","map","char","blobToUint8Array","blob","arrayBuffer","constructor","this","url","socket","isConnected","rsaPublic","rsaPrivate","rsaPublicServer","aesKey","aesServerKey","keysReady","socketReady","messageQueue","processingMessages","messageHandlers","Map","connect","connectionStatus","ready","generateKeys","keyPair","window","generateKey","modulusLength","publicExponent","exportKey","publicKey","privateKey","processQueue","length","shift","send","WebSocket","onopen","publicKeyPem","type","binary","String","fromCharCode","apply","Array","btoa","pem","match","join","arrayBufferToPem","JSON","stringify","key","onmessage","rawData","event","decryptedStr","iv","slice","encrypted","importedKey","decryptedBuffer","decrypt","TextDecoder","decode","aesDecrypt","decryptedData","parse","handler","get","privateKeyE","decryptedDataBuffer","rsaDecrypt","bytes","getRandomValues","generateAESKey","encryptedMessage","onclose","disconnect","setTimeout","onerror","readyState","OPEN","push","jsonData","encodedData","encryptedBuffer","result","byteLength","set","aesEncrypt","close","addMessageHandler","removeMessageHandler","delete","AUTH_API_URL","authApi","axios","create","baseURL","headers","postsApi","systemApi","connectWebSocket","retries","lastError","attemptCount","sKey","AsyncStorage","getItem","Promise","resolve","reject","isResolved","connectionTimeout","webSocketService","action","S_KEY","clearTimeout","status","accountData","setItem","username","interceptors","request","use","config","response","removeItem","authAPI","login","email","password","formData","FormData","append","fetch","method","body","json","catch","logout","timeout","checkAuth","getMyProfile","getProfile","updateProfile","Object","entries","forEach","value","post","uploadAvatar","file","uploadCover","profileAPI","Type","Content","postsAPI","loadPosts","startIndex","targetId","targetType","posts","posts_type","start_index","target_id","target_type","loadProfilePosts","userId","loadFeedPosts","loadRecommendedPosts","loadSubscriptionPosts","likePost","interaction_type","post_id","postId","dislikePost","removeLike","removeDislike","height","Dimensions","styles","StyleSheet","overlay","flex","backgroundColor","justifyContent","alignItems","container","assign","width","maxWidth","borderRadius","boxShadow","content","padding","title","fontSize","fontWeight","color","marginBottom","textAlign","text","lineHeight","button","paddingVertical","paddingHorizontal","alignSelf","buttonText","ErrorMessage","onClose","translateY","Animated","Value","useEffect","spring","toValue","useNativeDriver","tension","friction","start","handleClose","timing","duration","_jsx","Modal","transparent","visible","animationType","onRequestClose","children","View","style","transform","_jsxs","Text","TouchableOpacity","onPress","activeOpacity","input","borderWidth","borderColor","outlineStyle","buttonContainer","pointerEvents","cursor","buttonDisabled","switchText","marginTop","stepText","LoginScreen","useNavigation","setIsLoggedIn","useContext","AuthContext","isRegistering","setIsRegistering","useState","loading","setLoading","setEmail","setPassword","loginError","setLoginError","setName","setUsername","regEmail","setRegEmail","regPassword","setRegPassword","captchaToken","setCaptchaToken","registrationError","setRegistrationError","_Fragment","TextInput","placeholder","onChangeText","editable","autoCapitalize","keyboardType","secureTextEntry","HCaptcha","sitekey","onVerify","token","trim","test","disabled","ActivityIndicator","colorPairs","bg","LetterAvatar","size","letter","charAt","toUpperCase","colorIndex","Math","abs","split","reduce","acc","colors","overflow","textAlignVertical","WS_MESSAGE_TYPES","WS_ACTIONS","formatFileSize","i","floor","log","parseFloat","pow","toFixed","getMimeType","filename","ext","lastIndexOf","getFileExtension","toLowerCase","FileService","ws","fileDownloadCallbacks","fileChunks","setupMessageHandlers","getInstance","instance","downloadMessage","handleFileChunk","fileId","chunkNumber","totalChunks","chunkData","has","fill","chunks","includes","fileData","chunk","assembleChunks","callback","uploadFile","random","toString","substring","chunkSize","ceil","end","min","splitFileIntoChunks","uploadMessage","fileName","fileSize","mimeType","downloadFile","Blob","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","warning","buttons","flexDirection","gap","cancelButton","confirmButton","cancelButtonText","confirmButtonText","LinkAlert","Linking","openURL","link","textDecorationLine","LinkText","selectedUrl","setSelectedUrl","urlRegex","part","index","startsWith","modalOverlay","modalContent","maxHeight","closeButton","position","right","top","zIndex","closeButtonText","loader","profileContent","coverContainer","coverImage","defaultCover","avatarContainer","avatarWithCover","avatar","nameRow","description","marginHorizontal","stats","borderTopWidth","borderBottomWidth","statItem","statNumber","statLabel","iconsContainer","flexWrap","icon","verifiedBadge","errorText","ProfileModal","profile","setProfile","setError","loadProfile","cover","Image","source","uri","resizeMode","icons","require","renderStats","label","subscribers","subscriptions","stat","toLocaleString","filter","borderBottomColor","header","userInfo","marginRight","userTextInfo","nameContainer","marginLeft","date","mediaContainer","marginVertical","mediaContent","fullScreenMedia","downloadButton","bottom","downloadIcon","tintColor","footer","reactions","reactionButton","reactionButtonActive","dislikeButtonActive","reactionIcon","reactionIconActive","dislikeIconActive","reactionCount","reactionCountActive","dislikeCountActive","reactionLoader","pointerEventsAuto","pointerEventsNone","myPostBadge","myPostText","videoOverlay","left","fileContainer","fileIcon","fileInfo","PostCard","onUpdate","loadingAction","setLoadingAction","localPost","setLocalPost","scaleAnim","modalVisible","setModalVisible","fadeAnim","useRef","current","mediaViewerProps","setMediaViewerProps","videoRef","showProfile","setShowProfile","handleDownload","fileService","Alert","alert","openModal","props","closeModal","formatDate","useCallback","dateString","Date","format","locale","ru","handleInteraction","updatedPost","liked","id","disliked","handleReactionPress","sequence","author","avatarUrl","prev","handleProfilePress","renderMediaContent","attachments","attachment","screenWidth","imageData","imageHeight","imageUrl","simple_image","file_name","orig_name","onDownload","videoData","videoHeight","videoUrl","Video","ref","ResizeMode","CONTAIN","useNativeControls","shouldPlay","isLooping","file_id","file_size","Icon","opacity","scale","likes","dislikes","comments","my_post","undefined","formContainer","minHeight","filesContainer","borderTopColor","filePreview","margin","imagePreview","removeButton","removeButtonText","addButton","addButtonIcon","submitButton","submitButtonDisabled","submitButtonText","successMessage","successText","CreatePost","onPostCreated","setText","files","setFiles","isLoading","setIsLoading","successOpacityAnim","placeholderTextColor","multiline","maxLength","_","ImagePicker","launchImageLibraryAsync","mediaTypes","All","allowsEditing","quality","canceled","assets","createPost","delay","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","errorContent","successContent","WebSocketStatus","setStatus","errorMessage","setErrorMessage","slideAnim","opacityAnim","wasConnected","showNotification","parallel","interval","setInterval","checkConnection","hideNotification","clearInterval","getMessage","contentContainer","loadingContainer","createPostContainer","feedTypeContainer","feedTypeButton","activeFeedType","feedTypeText","activeFeedTypeText","listContent","flexGrow","loadingOverlay","absoluteFillObject","errorContainer","retryButton","retryButtonText","loginButton","loginButtonText","emptyContainer","emptyText","FeedScreen","feedType","setFeedType","setPosts","refreshing","setRefreshing","loadingMore","setLoadingMore","hasMorePosts","setHasMorePosts","retryTimeoutRef","pageRef","loadingOpacity","contentOpacity","React","shouldRefresh","newPosts","updateSinglePost","show","prevPosts","handlePostCreated","newPost","handleRefresh","handleChangeFeedType","renderItem","item","renderHeader","renderEmpty","FlatList","keyExtractor","onEndReached","handleLoadMore","onEndReachedThreshold","refreshControl","RefreshControl","onRefresh","ListEmptyComponent","ListFooterComponent","centered","profileInfo","avatarWrapper","logoutButton","logoutButtonText","ProfileScreen","loadingPosts","setLoadingPosts","fetchProfile","accountDataStr","getAccountData","ScrollView","my_profile","Tab","createBottomTabNavigator","Stack","createNativeStackNavigator","createContext","isLoggedIn","MainTabs","Navigator","screenOptions","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarStyle","headerStyle","headerTitleStyle","Screen","component","options","tabBarIcon","Ionicons","headerTitle","navigation","headerRight","headerContainer","headerLogo","Navigation","checkLoginStatus","clear","Provider","NavigationContainer","headerTintColor","registerRootComponent","localStorage","renderNavigation","StatusBar","originalConsoleError","console","args","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}