(()=>{var e,t={1001:(e,t,n)=>{"use strict";var o=n(2299),a=(n(6664),n(6665)),r=n(5479),s=n(8272),i=n(1119),l=n(8035),c=n(3929),d=n(6773),u=n(5648),f=n(6283),h=n(3668),g=n(530),y=n(7109),m=n(1087);class p{socket=null;isConnected=!1;rsaPublic=null;rsaPrivate=null;rsaPublicServer=null;aesKey=null;aesServerKey=null;messageHandlers=new Map;connectionPromise=null;authPromise=null;requestTimeout=1e4;constructor(e){this.url=e}async initEncryption(){const{publicKey:e,privateKey:t}=await async function(){return await crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}();this.rsaPublic=e,this.rsaPrivate=t;const n=await async function(e,t){const n=await crypto.subtle.exportKey("spki",e),o=String.fromCharCode.apply(null,new Uint8Array(n));return`-----BEGIN ${t}-----\n${btoa(o)}\n-----END ${t}-----`}(this.rsaPublic,"PUBLIC KEY");await this.sendRaw({type:"key_exchange",action:"client_key",key:n})}async sendRaw(e){if(!this.socket)throw new Error("WebSocket not connected");this.socket.send(JSON.stringify(e))}async connect(){return this.connectionPromise||(this.connectionPromise=new Promise(((e,t)=>{try{this.socket=new WebSocket(this.url);const n=setTimeout((()=>{this.isConnected||(this.close(),t(new Error("Connection timeout")))}),this.requestTimeout);this.socket.onopen=async()=>{this.isConnected=!0,clearTimeout(n);try{await this.initEncryption(),e()}catch(e){t(e)}},this.socket.onmessage=async e=>{try{let t=JSON.parse(e.data);if("key_exchange"===t.type)return void("server_key"===t.action&&t.key&&(this.rsaPublicServer=await async function(e){const t=e.substring(26,e.length-24),n=atob(t),o=new Uint8Array(n.length);for(let e=0;e<n.length;e++)o[e]=n.charCodeAt(e);return await crypto.subtle.importKey("spki",o,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])}(t.key)));if(this.aesKey&&t.encrypted){const e=await async function(e,t){const n=e.slice(0,12),o=e.slice(12),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,o);return(new TextDecoder).decode(a)}(new Uint8Array(t.data),this.aesKey);t=JSON.parse(e)}const n=this.messageHandlers.get(`${t.type}:${t.action}`);n&&n(t)}catch(e){}},this.socket.onerror=e=>{this.isConnected=!1,clearTimeout(n),t(e)},this.socket.onclose=()=>{this.isConnected=!1,this.connectionPromise=null,clearTimeout(n)}}catch(e){t(e)}}))),this.connectionPromise}async send(e){this.isConnected&&this.socket||await this.connect();const t=setTimeout((()=>{throw new Error("Send timeout")}),this.requestTimeout);try{let n=e;if(this.aesKey&&"key_exchange"!==e.type){const t=await async function(e,t){const n=(new TextEncoder).encode(e),o=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:o},t,n),r=new Uint8Array(o.length+a.byteLength);return r.set(o),r.set(new Uint8Array(a),o.length),r}(JSON.stringify(e),this.aesKey);n={encrypted:!0,data:Array.from(t)}}await this.sendRaw(n),clearTimeout(t)}catch(e){throw clearTimeout(t),e}}on(e,t,n){this.messageHandlers.set(`${e}:${t}`,n)}off(e,t){this.messageHandlers.delete(`${e}:${t}`)}close(){this.socket&&(this.socket.close(),this.socket=null,this.isConnected=!1,this.connectionPromise=null)}}const A="https://api.elemsocial.com",w="https://elemsocial.com",x=y.default.create({baseURL:A,headers:{"Content-Type":"multipart/form-data",api:"true",Origin:"https://elemsocial.com","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, Accept, Authorization, X-Request-With"}}),C=y.default.create({baseURL:w,headers:{"Content-Type":"multipart/form-data",api:"true",Origin:"https://elemsocial.com","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, Accept, Authorization, X-Request-With"}}),b=y.default.create({baseURL:"https://elemsocial.com/System/API",headers:{"Content-Type":"application/json",api:"true",Origin:"https://elemsocial.com","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, Accept, Authorization, X-Request-With"}});let S=null;const j=async(e=3)=>{S||(S=new p("wss://wselem.xyz:8880"));for(let t=0;t<e;t++)try{await S.connect();const e=await m.default.getItem("S-KEY");if(!e)throw new Error("No S-KEY available");return new Promise(((t,n)=>{const o=setTimeout((()=>{S&&S.off("authorization","connect"),n(new Error("Authorization timeout"))}),5e3);if(!S)return clearTimeout(o),void n(new Error("WebSocket client is null"));S.on("authorization","connect",(e=>{clearTimeout(o),"success"===e.status?t(S):n(new Error(e.message||"Authorization failed"))})),S.send({type:"authorization",action:"connect",S_KEY:e}).catch(n)}))}catch(n){if(t===e-1)throw n;await new Promise((e=>setTimeout(e,1e3*(t+1))))}throw new Error("Failed to connect after retries")};x.interceptors.request.use((async e=>{const t=await m.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e})),x.interceptors.response.use((e=>e),(async e=>(401===e?.response?.status&&await m.default.removeItem("S-KEY"),Promise.reject(e)))),C.interceptors.request.use((async e=>{const t=await m.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e})),C.interceptors.response.use((e=>e),(async e=>(401===e?.response?.status&&await m.default.removeItem("S-KEY"),Promise.reject(e)))),b.interceptors.request.use((async e=>{const t=await m.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e}));const k=async e=>e&&"None"!==e?`https://elemsocial.com/Content/Avatars/${e}`:"",v=async(e,t)=>{const n=new FormData;n.append("email",e),n.append("password",t),n.append("device_type","browser"),n.append("device","Element Web 2.3");const o=await fetch(`${A}/auth/login`,{method:"POST",headers:{api:"true",Origin:"https://elemsocial.com"},body:n}),a=await o.json();if("success"===a.status&&a.S_KEY){await m.default.setItem("S-KEY",a.S_KEY);try{await j()}catch(e){}}return a},T={async getMyProfile(){try{const e=await j();return new Promise(((t,n)=>{const o=setTimeout((()=>{e.off("social","get_profile"),n(new Error("Profile request timeout"))}),1e4);e.on("social","get_profile",(a=>{clearTimeout(o),"success"===a.status&&a.profile?(e.off("social","get_profile"),t(a.profile)):(e.off("social","get_profile"),n(new Error(a.message||"Failed to fetch profile")))})),e.send({type:"social",action:"get_profile"}).catch((e=>{clearTimeout(o),n(e)}))}))}catch(e){throw e}},async getProfile(e){try{const t=await j();return new Promise(((n,o)=>{const a=setTimeout((()=>{t.off("social","get_profile"),o(new Error("Profile request timeout"))}),1e4);t.on("social","get_profile",(e=>{clearTimeout(a),"success"===e.status&&e.profile?(t.off("social","get_profile"),n(e.profile)):(t.off("social","get_profile"),o(new Error(e.message||"Failed to fetch profile")))})),t.send({type:"social",action:"get_profile",username:e}).catch((e=>{clearTimeout(a),o(e)}))}))}catch(e){throw e}},updateProfile:async e=>{const t=new FormData;Object.entries(e).forEach((([e,n])=>{null!=n&&t.append(e,String(n))}));return(await C.post("/System/API/Connect.php",t)).data},uploadAvatar:async e=>{const t=new FormData;t.append("avatar",e);return(await C.post("/System/API/Connect.php",t)).data},uploadCover:async e=>{const t=new FormData;t.append("cover",e);return(await C.post("/System/API/Connect.php",t)).data}},I=async e=>{const t=new FormData;t.append("PostID",e);return(await C.post("/System/API/LoadPost.php",t)).data},E=async(e,t)=>{const n=new FormData;n.append("text",e),t.length>0&&n.append("content",JSON.stringify({File:t[0]}));return(await fetch(`${w}/Posts/API/create`,{method:"POST",headers:{api:"true",Origin:"https://elemsocial.com","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, Accept, Authorization, X-Request-With"},body:n})).json()},F=async e=>{const t=new FormData;t.append("PostID",e);return(await C.post("/System/API/LoadPost.php",t)).data},P=async(e,t)=>{try{const n=new FormData;n.append("StartIndex",t?.toString()||"0");const o=`/System/API/LoadPosts.php?F=${e}`,a=await C.post(o,n),r=Array.isArray(a.data)?a.data:[];return r.map((e=>({ID:String(e.ID||""),AuthorID:String(e.AuthorID||""),Username:String(e.Username||""),Name:String(e.Name||""),Avatar:e.Avatar||"None",UserIcons:e.UserIcons||null,Text:String(e.Text||""),Content:e.Content||null,Date:String(e.Date||""),Likes:Number(e.Likes)||0,Dislikes:Number(e.Dislikes)||0,Liked:e.Liked||null,Disliked:e.Disliked||null,Comments:Number(e.Comments)||0,MyPost:Boolean(e.MyPost)})))}catch(e){return y.default.isAxiosError(e),[]}},B=async(e,t)=>{try{const n=new FormData;n.append("UserID",e),void 0!==t&&n.append("StartIndex",t.toString());const o="/System/API/LoadPosts.php?F=USER",a=await C.post(o,n),r=Array.isArray(a.data)?a.data:[];return r.map((e=>({ID:String(e.ID||""),AuthorID:String(e.AuthorID||""),Username:String(e.Username||""),Name:String(e.Name||""),Avatar:e.Avatar||"None",UserIcons:e.UserIcons||null,Text:String(e.Text||""),Content:e.Content||null,Date:String(e.Date||""),Likes:Number(e.Likes)||0,Dislikes:Number(e.Dislikes)||0,Liked:e.Liked||null,Disliked:e.Disliked||null,Comments:Number(e.Comments)||0,MyPost:Boolean(e.MyPost)})))}catch(e){return[]}},D=async(e,t)=>{const n=new FormData;n.append("PostID",t);return(await C.post(`/System/API/PostInteraction.php?F=${e}`,n)).data};var O=n(3947),R=n(5741),z=n(8264),U=n(8119),K=n(6725),M=n(397);const{height:L}=K.default.get("window"),N=h.default.create({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},container:Object.assign({width:"90%",maxWidth:400,backgroundColor:"#fff",borderRadius:12},{boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}),content:{padding:20},title:{fontSize:20,fontWeight:"bold",color:"#c62828",marginBottom:10,textAlign:"center"},text:{fontSize:16,color:"#333",marginBottom:20,textAlign:"center",lineHeight:22},button:{backgroundColor:"#007AFF",paddingVertical:12,paddingHorizontal:30,borderRadius:8,alignSelf:"center"},buttonText:{color:"#fff",fontSize:16,fontWeight:"600"}}),W=({message:e,onClose:t})=>{const n=new U.default.Value(L);(0,a.useEffect)((()=>{e&&U.default.spring(n,{toValue:0,useNativeDriver:!0,tension:50,friction:7}).start()}),[e]);const o=()=>{U.default.timing(n,{toValue:L,duration:300,useNativeDriver:!0}).start((()=>{t&&t()}))};return e?(0,M.jsx)(z.default,{transparent:!0,visible:!!e,animationType:"fade",onRequestClose:o,children:(0,M.jsx)(c.default,{style:N.overlay,children:(0,M.jsx)(U.default.View,{style:[N.container,{transform:[{translateY:n}]}],children:(0,M.jsxs)(c.default,{style:N.content,children:[(0,M.jsx)(f.default,{style:N.title,children:"Ошибка"}),(0,M.jsx)(f.default,{style:N.text,children:e}),(0,M.jsx)(u.default,{style:N.button,onPress:o,activeOpacity:.8,children:(0,M.jsx)(f.default,{style:N.buttonText,children:"OK"})})]})})})}):null},V=h.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",marginBottom:30,textAlign:"center"},input:Object.assign({height:50,borderWidth:1,borderColor:"#ddd",borderRadius:8,paddingHorizontal:15,marginBottom:15,fontSize:16,backgroundColor:"#fff"},{outlineStyle:"none",":focus":{borderColor:"#007AFF"}}),buttonContainer:{pointerEvents:"auto",marginBottom:15},button:Object.assign({height:50,backgroundColor:"#007AFF",borderRadius:8,justifyContent:"center",alignItems:"center"},{cursor:"pointer",":hover":{backgroundColor:"#0056b3"}}),buttonDisabled:{backgroundColor:"#ccc"},buttonText:{color:"white",fontSize:16,fontWeight:"600"},switchText:{color:"#007AFF",textAlign:"center",marginTop:15,fontSize:16},stepText:{fontSize:18,marginBottom:15,textAlign:"center"}}),H=()=>{(0,O.useNavigation)();const{setIsLoggedIn:e}=(0,a.useContext)(ve),[t,n]=(0,a.useState)(!1),[o,r]=(0,a.useState)(!1),[s,i]=(0,a.useState)(""),[l,h]=(0,a.useState)(""),[y,p]=(0,a.useState)(""),[A,w]=(0,a.useState)(""),[x,C]=(0,a.useState)(""),[b,S]=(0,a.useState)(""),[j,k]=(0,a.useState)(""),[T,I]=(0,a.useState)(""),[E,F]=(0,a.useState)("");return(0,M.jsxs)(c.default,{style:V.container,children:[(0,M.jsx)(f.default,{style:V.title,children:"Sigma Element Client"}),t?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(d.default,{style:V.input,placeholder:"Имя",value:A,onChangeText:w,editable:!o}),(0,M.jsx)(d.default,{style:V.input,placeholder:"Имя пользователя",value:x,onChangeText:C,editable:!o,autoCapitalize:"none"}),(0,M.jsx)(d.default,{style:V.input,placeholder:"Email",value:b,onChangeText:S,editable:!o,keyboardType:"email-address",autoCapitalize:"none"}),(0,M.jsx)(d.default,{style:V.input,placeholder:"Пароль",value:j,onChangeText:k,secureTextEntry:!0,editable:!o}),(0,M.jsx)(R.default,{sitekey:"29c6b1c2-7e78-43ec-8bf8-5de49c58c54a",onVerify:e=>{I(e)}}),(0,M.jsx)(W,{message:E,onClose:()=>F("")}),(0,M.jsx)(c.default,{style:V.buttonContainer,children:(0,M.jsx)(u.default,{style:[V.button,o&&V.buttonDisabled],onPress:async()=>{F("");if(A.trim())if(x.trim())if(b.trim())if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.trim()))if(j.trim())if(T)try{r(!0);const t=new FormData;t.append("name",A.trim()),t.append("username",x.trim()),t.append("email",b.trim()),t.append("password",j.trim()),t.append("accept","true"),t.append("h_captcha",T);const n=await fetch("https://api.elemsocial.com/auth/register",{method:"POST",headers:{api:"true",Origin:"https://elemsocial.com"},body:t}),o=await n.json();"success"===o.status?(await m.default.setItem("S-KEY",o.S_KEY),e(!0)):F(o.text||"Не удалось зарегистрироваться")}catch(e){F("Что-то пошло не так")}finally{r(!1)}else F("Пройдите капчу");else F("Введите пароль");else F("Введите корректный email адрес");else F("Введите email");else F("Введите имя пользователя");else F("Введите имя")},disabled:o,children:o?(0,M.jsx)(g.default,{color:"white"}):(0,M.jsx)(f.default,{style:V.buttonText,children:"Зарегистрироваться"})})}),(0,M.jsx)(u.default,{onPress:()=>{n(!1),F(""),p("")},children:(0,M.jsx)(f.default,{style:V.switchText,children:"Уже есть аккаунт? Войти"})})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(d.default,{style:V.input,placeholder:"Электронная почта",value:s,onChangeText:i,autoCapitalize:"none",keyboardType:"email-address",editable:!o}),(0,M.jsx)(d.default,{style:V.input,placeholder:"Пароль",value:l,onChangeText:h,secureTextEntry:!0,editable:!o}),(0,M.jsx)(W,{message:y,onClose:()=>p("")}),(0,M.jsx)(c.default,{style:V.buttonContainer,children:(0,M.jsx)(u.default,{style:[V.button,o&&V.buttonDisabled],onPress:async()=>{if(s)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))if(l)try{r(!0);const t=await v(s.trim(),l);"success"===t?.status&&t?.S_KEY?(await m.default.setItem("S-KEY",t.S_KEY),e(!0)):p(t?.text||"Неверный email или пароль")}catch(e){p("Что-то пошло не так")}finally{r(!1)}else p("Введите пароль");else p("Введите корректный email адрес");else p("Введите почту")},disabled:o,children:o?(0,M.jsx)(g.default,{color:"white"}):(0,M.jsx)(f.default,{style:V.buttonText,children:"Войти"})})}),(0,M.jsx)(u.default,{onPress:()=>{n(!0),F(""),p("")},children:(0,M.jsx)(f.default,{style:V.switchText,children:"Нет аккаунта? Зарегистрироваться"})})]})]})};var Q=n(932),Y=n(2660),G=n(484),J=n(1690);const q=[{bg:"#FFE5E5",text:"#FF4D4D"},{bg:"#E5F1FF",text:"#3399FF"},{bg:"#E5FFE5",text:"#33CC33"},{bg:"#FFE5FF",text:"#FF33FF"},{bg:"#FFF0E5",text:"#FF8533"},{bg:"#E5F9FF",text:"#33CCFF"},{bg:"#F2E5FF",text:"#9933FF"},{bg:"#FFFFE5",text:"#CCCC33"}],Z=({name:e,size:t=120,style:n})=>{const o=(e?.charAt(0)||"?").toUpperCase(),a=Math.abs(e.split("").reduce(((e,t)=>e+t.charCodeAt(0)),0))%q.length,r=q[a],s=h.default.create({container:{width:t,height:t,borderRadius:t/2,backgroundColor:r.bg,justifyContent:"center",alignItems:"center",overflow:"hidden"},letter:{color:r.text,fontSize:.4*t,fontWeight:"600",textAlign:"center",textAlignVertical:"center"}});return(0,M.jsx)(c.default,{style:[s.container,n],children:(0,M.jsx)(f.default,{style:s.letter,children:o})})};var X=n(7827),_=n(5988),$=n(4636),ee=n(5358),te=n(9771);class ne{static async arrayBufferToPem(e,t){return`-----BEGIN ${t}-----\n${btoa(String.fromCharCode(...new Uint8Array(e)))}\n-----END ${t}-----`}static async pemToArrayBuffer(e){const t=e.replace(/-----BEGIN.*-----/,"").replace(/-----END.*-----/,"").replace(/\s/g,""),n=atob(t),o=new Uint8Array(n.length);for(let e=0;e<n.length;e++)o[e]=n.charCodeAt(e);return o.buffer}static async rsaEncrypt(e,t){const n=await this.pemToArrayBuffer(t),o=await window.crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!0,["encrypt"]),a=(new TextEncoder).encode(e);return window.crypto.subtle.encrypt({name:"RSA-OAEP"},o,a)}static async rsaDecrypt(e,t){const n=await window.crypto.subtle.importKey("pkcs8",t,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!0,["decrypt"]),o=await window.crypto.subtle.decrypt({name:"RSA-OAEP"},n,e);return(new TextDecoder).decode(o)}static async aesEncrypt(e,t){const n=(new TextEncoder).encode(e),o=await this.importAESKey(t),a=window.crypto.getRandomValues(new Uint8Array(12)),r=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,n),s=new Uint8Array(a.length+r.byteLength);return s.set(a),s.set(new Uint8Array(r),a.length),s.buffer}static async aesDecrypt(e,t){const n=new Uint8Array(e),o=n.slice(0,12),a=n.slice(12),r=await this.importAESKey(t),s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:o},r,a);return(new TextDecoder).decode(s)}static async generateAESKey(){const e=await window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),t=await window.crypto.subtle.exportKey("raw",e),n=Array.from(new Uint8Array(t));return btoa(String.fromCharCode(...n))}static async importAESKey(e){const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return window.crypto.subtle.importKey("raw",n,{name:"AES-GCM"},!0,["encrypt","decrypt"])}static async blobToUint8Array(e){return new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=n,o.readAsArrayBuffer(e)}))}}const oe="messenger",ae="key_exchange",re="aes_key",se="upload_file",ie="download_file";class le{url="wss://wselem.xyz:8880";socket=null;isConnected=!1;rsaPublic=null;rsaPrivate=null;rsaPublicServer=null;aesKey=null;aesServerKey=null;keysReady=!1;socketReady=!1;messageQueue=[];processingMessages=!1;messageHandlers=new Map;constructor(){this.connect()}static getInstance(){return le.instance||(le.instance=new le),le.instance}async generateKeys(){try{const e=await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]);return this.rsaPublic=await window.crypto.subtle.exportKey("spki",e.publicKey),this.rsaPrivate=await window.crypto.subtle.exportKey("pkcs8",e.privateKey),this.keysReady=!0,!0}catch(e){return!1}}processQueue(){if(this.socketReady&&!this.processingMessages){for(this.processingMessages=!0;this.messageQueue.length>0;){const e=this.messageQueue.shift();e&&this.send(e)}this.processingMessages=!1}}connect(){this.socket=new WebSocket(this.url),this.socket.onopen=async()=>{if(await this.generateKeys(),this.rsaPublic){const e=await ne.arrayBufferToPem(this.rsaPublic,"PUBLIC KEY");this.socket?.send(JSON.stringify({type:ae,key:e})),this.isConnected=!0,this.processQueue()}},this.socket.onmessage=async e=>{const t=e.data;if(this.rsaPublicServer)if(this.aesServerKey&&this.aesKey){const e=await ne.aesDecrypt(await ne.blobToUint8Array(t),this.aesKey),n=JSON.parse(e);if(n.type){const e=this.messageHandlers.get(n.type);e&&e(n)}}else{const e=await ne.rsaDecrypt(await ne.blobToUint8Array(t),this.rsaPrivate),n=JSON.parse(e);n.type===re&&(this.aesServerKey=n.key,this.socketReady=!0,this.processQueue())}else{const e=JSON.parse(t);if(e.type===ae&&(this.rsaPublicServer=e.key,this.aesKey=await ne.generateAESKey(),this.rsaPublicServer)){const e=await ne.rsaEncrypt(JSON.stringify({type:re,key:this.aesKey}),this.rsaPublicServer);this.socket?.send(e)}}},this.socket.onclose=()=>{this.disconnect(),setTimeout((()=>this.connect()),5e3)},this.socket.onerror=()=>{this.disconnect(),setTimeout((()=>this.connect()),5e3)}}async send(e){if(!this.isConnected||this.socket?.readyState!==WebSocket.OPEN||!this.socketReady)return void this.messageQueue.push(e);const t=JSON.stringify(e);if(this.aesServerKey){const e=await ne.aesEncrypt(t,this.aesServerKey);this.socket?.send(e)}}disconnect(){this.socket&&(this.socket.readyState===WebSocket.OPEN&&this.socket.close(),this.socket=null),this.isConnected=!1,this.rsaPublic=null,this.rsaPrivate=null,this.rsaPublicServer=null,this.aesKey=null,this.aesServerKey=null,this.keysReady=!1,this.socketReady=!1}addMessageHandler(e,t){this.messageHandlers.set(e,t)}removeMessageHandler(e){this.messageHandlers.delete(e)}}const ce=le,de=e=>{if(0===e)return"0 Б";const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${["Б","КБ","МБ","ГБ","ТБ"][t]}`},ue=e=>{const t=(e=>e.slice(2+(e.lastIndexOf(".")-1>>>0)))(e).toLowerCase();return{txt:"text/plain",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",svg:"image/svg+xml",mp3:"audio/mpeg",mp4:"video/mp4",wav:"audio/wav",avi:"video/x-msvideo",zip:"application/zip",rar:"application/x-rar-compressed","7z":"application/x-7z-compressed"}[t]||"application/octet-stream"};class fe{fileDownloadCallbacks=new Map;fileChunks=new Map;constructor(){this.ws=ce.getInstance(),this.setupMessageHandlers()}static getInstance(){return fe.instance||(fe.instance=new fe),fe.instance}setupMessageHandlers(){this.ws.addMessageHandler(oe,(e=>{if(e.action===ie){const t=e;this.handleFileChunk(t)}}))}handleFileChunk(e){const{fileId:t,chunkNumber:n,totalChunks:o,chunkData:a}=e.data;this.fileChunks.has(t)||this.fileChunks.set(t,new Array(o).fill(""));const r=this.fileChunks.get(t);if(r[n-1]=a,!r.includes("")){const e=(e=>{const t=e.map((e=>atob(e))).join(""),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer})(r),n=this.fileDownloadCallbacks.get(t);n&&(n(e),this.fileDownloadCallbacks.delete(t)),this.fileChunks.delete(t)}}async uploadFile(e){const t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=await(async(e,t=1048576)=>{const n=[],o=Math.ceil(e.size/t);for(let a=0;a<o;a++){const o=a*t,r=Math.min(o+t,e.size),s=e.slice(o,r),i=await s.arrayBuffer(),l=btoa(String.fromCharCode(...new Uint8Array(i)));n.push(l)}return n})(e),o={type:oe,action:se,data:{fileId:t,fileName:e.name,fileSize:e.size,mimeType:ue(e.name)}};await this.ws.send(o);for(let e=0;e<n.length;e++){const o={type:oe,action:ie,data:{fileId:t,chunkNumber:e+1,totalChunks:n.length,chunkData:n[e]}};await this.ws.send(o)}return t}downloadFile(e,t){return new Promise(((n,o)=>{this.fileDownloadCallbacks.set(e,(e=>{try{((e,t,n)=>{const o=new Blob([e],{type:n}),a=URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)})(e,t,ue(t)),n()}catch(e){o(e)}}));const a={type:oe,action:ie,data:{fileId:e,chunkNumber:0,totalChunks:0,chunkData:""}};this.ws.send(a)}))}}const he=fe,ge=h.default.create({container:{backgroundColor:"#fff",padding:15,borderBottomWidth:1,borderBottomColor:"#eee"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},userInfo:{flexDirection:"row",alignItems:"center",flex:1},avatarContainer:{width:40,height:40,marginRight:10,borderRadius:20,overflow:"hidden",backgroundColor:"#f0f0f0"},avatar:{width:"100%",height:"100%"},userTextInfo:{flex:1},nameContainer:{flexDirection:"row",alignItems:"center",gap:4},name:{fontSize:16,fontWeight:"600",color:"#000"},verifiedBadge:{width:16,height:16,marginLeft:1},username:{fontSize:14,color:"#666"},date:{fontSize:12,color:"#666"},text:{fontSize:16,color:"#000",marginBottom:10,lineHeight:22},mediaContainer:{width:"100%",backgroundColor:"#000",borderRadius:10,overflow:"hidden",marginVertical:5},mediaContent:{width:"100%",height:"100%"},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.9)",justifyContent:"center",alignItems:"center"},modalContent:{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},fullScreenMedia:{width:"100%",height:"100%"},closeButton:{position:"absolute",top:40,right:20,zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",width:40,height:40,borderRadius:20,justifyContent:"center",alignItems:"center"},closeButtonText:{color:"#fff",fontSize:24,fontWeight:"bold"},downloadButton:{position:"absolute",right:20,bottom:40,backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:25,padding:12,zIndex:1},downloadIcon:{width:24,height:24,tintColor:"#fff"},footer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},reactions:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:20},reactionButton:{flexDirection:"row",alignItems:"center",padding:8,borderRadius:20,backgroundColor:"#f8f8f8"},reactionButtonActive:{backgroundColor:"#E3F2FD"},dislikeButtonActive:{backgroundColor:"#FFE5E5"},reactionIcon:{width:24,height:24},reactionIconActive:{tintColor:"#007AFF"},dislikeIconActive:{tintColor:"#FF3B30"},reactionCount:{fontSize:15,fontWeight:"600",color:"#666",marginLeft:6},reactionCountActive:{color:"#007AFF"},dislikeCountActive:{color:"#FF3B30"},reactionLoader:{marginLeft:4},pointerEventsAuto:{pointerEvents:"auto"},pointerEventsNone:{pointerEvents:"none"},myPostBadge:{backgroundColor:"#E3F2FD",paddingHorizontal:8,paddingVertical:4,borderRadius:12},myPostText:{fontSize:12,color:"#007AFF",fontWeight:"500"},videoOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"flex-end",alignItems:"flex-end",padding:10,backgroundColor:"rgba(0, 0, 0, 0.4)"},fileContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"#f5f5f5",padding:12,borderRadius:8,marginTop:8},fileIcon:{width:40,height:40,marginRight:12},fileInfo:{flex:1},fileName:{fontSize:16,fontWeight:"500",color:"#333",marginBottom:4},fileSize:{fontSize:14,color:"#666"}}),ye=({post:e,onUpdate:t})=>{const[o,r]=(0,a.useState)(null),[s,i]=(0,a.useState)(e.Likes),[l,d]=(0,a.useState)(e.Dislikes),[h,y]=(0,a.useState)(e.Liked),[m,p]=(0,a.useState)(e.Disliked),[A,w]=(0,a.useState)(null),[x]=(0,a.useState)(new U.default.Value(1)),[C,b]=(0,a.useState)(!1),S=(0,a.useRef)(new U.default.Value(0)).current,[j,v]=(0,a.useState)(null),T=(0,a.useRef)(null),I=async(e,t,n)=>{try{if(n){const e=he.getInstance();await e.downloadFile(n,t)}else{const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}catch(e){J.default.alert("Ошибка","Не удалось скачать файл")}},E=e=>{v(e),b(!0),U.default.timing(S,{toValue:1,duration:300,useNativeDriver:!0}).start()},F=()=>{U.default.timing(S,{toValue:0,duration:300,useNativeDriver:!0}).start((()=>{b(!1),v(null)}))},P=(0,a.useCallback)((e=>{const t=new Date(e);return(0,X.format)(t,"dd MMMM, HH:mm",{locale:_.ru})}),[]),B=async n=>{if(!o)try{r(n),"LIKE"===n?h?(i((e=>e-1)),y(null)):(i((e=>e+1)),y("Liked"),m&&(d((e=>e-1)),p(null))):m?(d((e=>e-1)),p(null)):(d((e=>e+1)),p("Liked"),h&&(i((e=>e-1)),y(null))),await D(n,e.ID),t()}catch(t){i(e.Likes),d(e.Dislikes),y(e.Liked),p(e.Disliked),J.default.alert("Ошибка","Не удалось выполнить действие")}finally{r(null)}},O=(0,a.useCallback)((e=>{U.default.sequence([U.default.timing(x,{toValue:.95,duration:100,useNativeDriver:!1}),U.default.spring(x,{toValue:1,friction:4,useNativeDriver:!1})]).start(),B("like"===e?"LIKE":"DISLIKE")}),[x,B]);(0,a.useEffect)((()=>{e.Avatar&&"None"!==e.Avatar&&R()}),[e.Avatar]);const R=async()=>{try{if(e.Avatar&&"None"!==e.Avatar){const t=await k(e.Avatar);w(t)}}catch(e){}};return(0,M.jsxs)(c.default,{style:ge.container,children:[(0,M.jsxs)(c.default,{style:ge.header,children:[(0,M.jsxs)(u.default,{style:ge.userInfo,children:[(0,M.jsx)(c.default,{style:ge.avatarContainer,children:A?(0,M.jsx)(G.default,{source:{uri:A},style:ge.avatar}):(0,M.jsx)(Z,{name:e.Name||e.Username,size:40})}),(0,M.jsxs)(c.default,{style:ge.userTextInfo,children:[(0,M.jsxs)(c.default,{style:ge.nameContainer,children:[(0,M.jsx)(f.default,{style:ge.name,children:e.Name}),e.UserIcons&&e.UserIcons.includes("VERIFY")&&(0,M.jsx)(G.default,{source:n(3507),style:ge.verifiedBadge})]}),(0,M.jsxs)(f.default,{style:ge.username,children:["@",e.Username]})]})]}),(0,M.jsx)(f.default,{style:ge.date,children:P(e.Date)})]}),(0,M.jsx)(f.default,{style:ge.text,children:e.Text}),(()=>{if(!e.Content)return null;try{const o=JSON.parse(e.Content),a=K.default.get("window").width-30;if(o.File)return(t=o.File)?(0,M.jsxs)(u.default,{onPress:()=>I("",t.file_name,t.file_id),style:ge.fileContainer,children:[(0,M.jsx)(G.default,{source:n(7030),style:ge.fileIcon}),(0,M.jsxs)(c.default,{style:ge.fileInfo,children:[(0,M.jsx)(f.default,{style:ge.fileName,children:t.file_name}),(0,M.jsx)(f.default,{style:ge.fileSize,children:de(t.file_size)})]}),(0,M.jsx)($.default,{name:"download",size:24,color:"#666"})]}):null;if(o.Image){const e=a/(o.Image.width/o.Image.height),t=.8*a,n=o.Image.simple_image?`https://elemsocial.com/Content/Simple/${o.Image.simple_image}`:`https://elemsocial.com/Content/Posts/Images/${o.Image.file_name}`,r=o.Image.orig_name||o.Image.file_name;return(0,M.jsx)(u.default,{onPress:()=>E({url:n,type:"image",filename:r,onClose:F,onDownload:I}),style:[ge.mediaContainer,{height:Math.min(e,t)}],children:(0,M.jsx)(G.default,{source:{uri:n},style:ge.mediaContent,resizeMode:"contain"})})}if(o.Video){const e=a/(o.Video.width/o.Video.height),t=.8*a,n=`https://elemsocial.com/Content/Posts/Video/${o.Video.file_name}`,r=o.Video.orig_name??o.Video.file_name;return(0,M.jsx)(u.default,{onPress:()=>{o.Video&&E({url:n,type:"video",filename:r,onClose:F,onDownload:I})},style:[ge.mediaContainer,{height:Math.min(e,t)}],children:(0,M.jsx)(ee.default,{ref:T,source:{uri:n},style:ge.mediaContent,resizeMode:te.ResizeMode.CONTAIN,useNativeControls:!0,shouldPlay:!1,isLooping:!0})})}}catch(e){return null}var t;return null})(),j?(0,M.jsx)(z.default,{transparent:!0,visible:C,onRequestClose:F,children:(0,M.jsxs)(U.default.View,{style:[ge.modalOverlay,{opacity:S}],children:[(0,M.jsx)(u.default,{style:ge.modalContent,activeOpacity:1,onPress:F,children:"image"===j.type?(0,M.jsx)(G.default,{source:{uri:j.url},style:ge.fullScreenMedia,resizeMode:"contain"}):(0,M.jsx)(ee.default,{ref:T,source:{uri:j.url},style:ge.fullScreenMedia,resizeMode:te.ResizeMode.CONTAIN,useNativeControls:!0,shouldPlay:!0,isLooping:!0})}),(0,M.jsx)(u.default,{style:ge.closeButton,onPress:F,children:(0,M.jsx)(f.default,{style:ge.closeButtonText,children:"✕"})}),(0,M.jsx)(u.default,{style:ge.downloadButton,onPress:()=>j.onDownload(j.url,j.filename,j.fileId),children:(0,M.jsx)(G.default,{source:n(852),style:ge.downloadIcon})})]})}):null,(0,M.jsxs)(c.default,{style:ge.footer,children:[(0,M.jsxs)(U.default.View,{style:[ge.reactions,{transform:[{scale:x}]},o?ge.pointerEventsNone:ge.pointerEventsAuto],children:[(0,M.jsxs)(u.default,{style:[ge.reactionButton,h&&ge.reactionButtonActive],onPress:()=>O("like"),children:[(0,M.jsx)(G.default,{source:n(5613),style:ge.reactionIcon,tintColor:h?"#007AFF":"#666",resizeMode:"contain"}),(0,M.jsx)(f.default,{style:[ge.reactionCount,h&&ge.reactionCountActive],children:s}),"LIKE"===o&&(0,M.jsx)(U.default.View,{style:ge.reactionLoader,children:(0,M.jsx)(g.default,{size:"small",color:h?"#007AFF":"#666"})})]}),(0,M.jsxs)(u.default,{style:[ge.reactionButton,m&&ge.dislikeButtonActive],onPress:()=>O("dislike"),children:[(0,M.jsx)(G.default,{source:n(9955),style:ge.reactionIcon,tintColor:m?"#FF3B30":"#666",resizeMode:"contain"}),(0,M.jsx)(f.default,{style:[ge.reactionCount,m&&ge.dislikeCountActive],children:l}),"DISLIKE"===o&&(0,M.jsx)(U.default.View,{style:ge.reactionLoader,children:(0,M.jsx)(g.default,{size:"small",color:m?"#FF3B30":"#666"})})]}),(0,M.jsxs)(u.default,{style:ge.reactionButton,children:[(0,M.jsx)(G.default,{source:n(7909),style:ge.reactionIcon,tintColor:"#666",resizeMode:"contain"}),(0,M.jsx)(f.default,{style:ge.reactionCount,children:e.Comments})]})]}),e.MyPost&&(0,M.jsx)(c.default,{style:ge.myPostBadge,children:(0,M.jsx)(f.default,{style:ge.myPostText,children:"Мой пост"})})]})]})},me=h.default.create({container:Object.assign({backgroundColor:"#fff",borderRadius:12,padding:15,marginBottom:15},{boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}),input:Object.assign({fontSize:16,minHeight:80,textAlignVertical:"top",marginBottom:10},{outlineStyle:"none"}),filesContainer:{marginBottom:10},fileItem:{flexDirection:"row",alignItems:"center",marginBottom:8,backgroundColor:"#f8f8f8",borderRadius:8,padding:8},filePreview:{width:40,height:40,borderRadius:4,marginRight:8},fileIcon:{width:40,height:40,borderRadius:4,backgroundColor:"#eee",justifyContent:"center",alignItems:"center",marginRight:8},fileIconImage:{width:24,height:24},fileInfo:{flex:1},fileName:{fontSize:14,color:"#333",marginBottom:2},fileSize:{fontSize:12,color:"#666",marginBottom:4},progressBar:{height:4,backgroundColor:"#eee",borderRadius:2,overflow:"hidden"},progressFill:{height:"100%",backgroundColor:"#007AFF"},removeButton:{padding:8},removeButtonText:{fontSize:20,color:"#666"},controls:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},addFileButton:{padding:8,borderRadius:8,backgroundColor:"#f0f0f0"},addFileIcon:{width:24,height:24},submitButton:Object.assign({backgroundColor:"#007AFF",paddingHorizontal:20,paddingVertical:10,borderRadius:8},{cursor:"pointer"}),submitButtonDisabled:{backgroundColor:"#ccc"},submitButtonText:{color:"#fff",fontSize:16,fontWeight:"600"}}),pe=({onPostCreated:e})=>{const[t,o]=(0,a.useState)(""),[r,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(!1),[h,y]=(0,a.useState)(""),[m,p]=(0,a.useState)({}),A=(0,a.useRef)(null);return(0,M.jsxs)(c.default,{style:me.container,children:[(0,M.jsx)(W,{message:h,onClose:()=>y("")}),(0,M.jsx)(d.default,{style:me.input,placeholder:"Что у вас нового?",value:t,onChangeText:o,multiline:!0,numberOfLines:3,editable:!i}),r.length>0&&(0,M.jsx)(c.default,{style:me.filesContainer,children:r.map(((e,t)=>{return(0,M.jsxs)(c.default,{style:me.fileItem,children:[(o=e.name,ue(o).startsWith("image/")?(0,M.jsx)(G.default,{source:{uri:URL.createObjectURL(e)},style:me.filePreview}):(0,M.jsx)(c.default,{style:me.fileIcon,children:(0,M.jsx)(G.default,{source:n(7030),style:me.fileIconImage})})),(0,M.jsxs)(c.default,{style:me.fileInfo,children:[(0,M.jsx)(f.default,{style:me.fileName,children:e.name}),(0,M.jsx)(f.default,{style:me.fileSize,children:de(e.size)}),void 0!==m[t]&&(0,M.jsx)(c.default,{style:me.progressBar,children:(0,M.jsx)(c.default,{style:[me.progressFill,{width:`${m[t]}%`}]})})]}),(0,M.jsx)(u.default,{style:me.removeButton,onPress:()=>(e=>{s((t=>t.filter(((t,n)=>n!==e)))),p((t=>{const n=Object.assign({},t);return delete n[e],n}))})(t),disabled:i,children:(0,M.jsx)(f.default,{style:me.removeButtonText,children:"×"})})]},t);var o}))}),(0,M.jsxs)(c.default,{style:me.controls,children:[(0,M.jsx)(u.default,{style:me.addFileButton,onPress:()=>{A.current&&A.current.click()},disabled:i,children:(0,M.jsx)(G.default,{source:n(4601),style:me.addFileIcon})}),(0,M.jsx)(u.default,{style:[me.submitButton,i&&me.submitButtonDisabled],onPress:async()=>{if(t.trim()||0!==r.length)try{l(!0);const n=he.getInstance(),a=[];for(let e=0;e<r.length;e++){const t=r[e];try{const o=await n.uploadFile(t);a.push({file_id:o,file_name:t.name,file_size:t.size,mime_type:t.type}),p((t=>Object.assign({},t,{[e]:100})))}catch(e){return void y(`Ошибка при загрузке файла ${t.name}`)}}const i=await E(t,a);"Verify"===i.Type&&i.Content?(o(""),s([]),p({}),e&&e(i.Content)):y("Не удалось создать пост")}catch(e){y("Произошла ошибка при создании поста")}finally{l(!1)}else y("Добавьте текст или файлы")},disabled:i,children:i?(0,M.jsx)(g.default,{color:"#fff"}):(0,M.jsx)(f.default,{style:me.submitButtonText,children:"Опубликовать"})})]}),(0,M.jsx)("input",{type:"file",ref:A,style:{display:"none"},onChange:e=>{const t=Array.from(e.target.files||[]);t.length>0&&s([t[0]])},multiple:!1,accept:"*/*"})]})},Ae=h.default.create({container:{flex:1,backgroundColor:"#fff"},contentContainer:{flex:1,position:"relative"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},header:{padding:15},feedTypeContainer:Object.assign({flexDirection:"row",paddingHorizontal:15,paddingVertical:10,backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#eee",zIndex:1},void 0),feedTypeButton:{flex:1,paddingVertical:8,alignItems:"center",borderRadius:20,marginHorizontal:4},activeFeedType:{backgroundColor:"#E3F2FD"},feedTypeText:{fontSize:14,fontWeight:"500",color:"#666"},activeFeedTypeText:{color:"#007AFF"},content:{flex:1},listContent:{flexGrow:1},loadingOverlay:Object.assign({},h.default.absoluteFillObject,{backgroundColor:"rgba(255, 255, 255, 0.8)",justifyContent:"center",alignItems:"center"}),pointerEventsAuto:{pointerEvents:"auto"},pointerEventsNone:{pointerEvents:"none"},footer:{padding:20,alignItems:"center"},errorContainer:{position:"absolute",left:0,right:0,bottom:0,padding:20,backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#eee",alignItems:"center"},errorText:{fontSize:14,color:"#FF3B30",textAlign:"center",marginBottom:15},retryButton:{backgroundColor:"#007AFF",paddingVertical:10,paddingHorizontal:20,borderRadius:20,marginBottom:10},retryButtonText:{color:"#fff",fontSize:16,fontWeight:"600"},loginButton:{paddingVertical:10,paddingHorizontal:20},loginButtonText:{color:"#007AFF",fontSize:16},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},emptyText:{fontSize:16,color:"#666",textAlign:"center"}}),we=()=>{(0,O.useNavigation)();const[e,t]=(0,a.useState)("LATEST"),[n,o]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),[i,l]=(0,a.useState)(!1),[d,h]=(0,a.useState)(!1),[y,m]=(0,a.useState)(!0),[p,A]=(0,a.useState)(null),w=(0,a.useRef)(),x=(0,a.useRef)(0),C=(0,a.useRef)(new U.default.Value(0)).current,b=(0,a.useRef)(new U.default.Value(1)).current,{logout:S}=a.useContext(ve);(0,a.useEffect)((()=>{j().catch(console.error),T(!0)}),[e]),(0,a.useEffect)((()=>()=>{w.current&&clearTimeout(w.current)}),[]);const k=(0,a.useCallback)((e=>{U.default.parallel([U.default.timing(C,{toValue:e?1:0,duration:200,useNativeDriver:!1}),U.default.timing(b,{toValue:e?.3:1,duration:200,useNativeDriver:!1})]).start()}),[]),v=(0,a.useCallback)((async()=>{w.current&&clearTimeout(w.current);try{await S(),o([]),A(null),s(!1),l(!1),h(!1)}catch(e){}}),[S]),T=(0,a.useCallback)((async(t=!1)=>{try{if(!t&&d)return;const n=t?0:25*x.current;t?(s(!0),x.current=0,p||i||k(!0)):h(!0);const a=await P(e,n);if("LATEST"===e&&0===a.length&&0===n)throw new Error("Не удалось загрузить ленту");o(t?a:e=>[...e,...a]),m(25===a.length),25===a.length&&(x.current+=1),A(null),w.current&&clearTimeout(w.current)}catch(t){if(A("Ошибка загрузки постов\n\nПопробуйте войти еще раз, перезагрузить страницу или использовать VPN"),"LATEST"===e){w.current&&clearTimeout(w.current);const e=5e3+1e3*Math.random();w.current=setTimeout((()=>{T(!0)}),e)}}finally{p||i||k(!1),s(!1),l(!1),h(!1)}}),[e,d,p,i]),E=(0,a.useCallback)((async e=>{try{const t=await I(e);o((n=>n.map((n=>n.ID===e?t:n))))}catch(e){}}),[]),B=async e=>{try{const t=await F(e);o((e=>[t,...e]))}catch(e){}},D=(0,a.useCallback)((()=>{l(!0),T(!0)}),[T]),R=(0,a.useCallback)((()=>{!y||d||i||T(!1)}),[y,d,i,T]),z=(0,a.useCallback)((n=>{n!==e&&(w.current&&clearTimeout(w.current),o([]),m(!0),x.current=0,t(n))}),[e]),K=(0,a.useCallback)((({item:e})=>(0,M.jsx)(ye,{post:e,onUpdate:()=>E(e.ID)})),[E]),L=(0,a.useCallback)((()=>(0,M.jsxs)(c.default,{style:Ae.header,children:[(0,M.jsx)(pe,{onPostCreated:B}),(0,M.jsxs)(c.default,{style:Ae.feedTypeContainer,children:[(0,M.jsx)(u.default,{style:[Ae.feedTypeButton,"LATEST"===e&&Ae.activeFeedType],onPress:()=>z("LATEST"),children:(0,M.jsx)(f.default,{style:[Ae.feedTypeText,"LATEST"===e&&Ae.activeFeedTypeText],children:"Новые"})}),(0,M.jsx)(u.default,{style:[Ae.feedTypeButton,"REC"===e&&Ae.activeFeedType],onPress:()=>z("REC"),children:(0,M.jsx)(f.default,{style:[Ae.feedTypeText,"REC"===e&&Ae.activeFeedTypeText],children:"Рекомендации"})}),(0,M.jsx)(u.default,{style:[Ae.feedTypeButton,"SUBSCRIPTIONS"===e&&Ae.activeFeedType],onPress:()=>z("SUBSCRIPTIONS"),children:(0,M.jsx)(f.default,{style:[Ae.feedTypeText,"SUBSCRIPTIONS"===e&&Ae.activeFeedTypeText],children:"Подписки"})})]})]})),[e,z]),N=(0,a.useCallback)((()=>p?(0,M.jsxs)(c.default,{style:Ae.errorContainer,children:[(0,M.jsx)(f.default,{style:Ae.errorText,children:p}),(0,M.jsx)(u.default,{style:Ae.retryButton,onPress:()=>T(!0),children:(0,M.jsx)(f.default,{style:Ae.retryButtonText,children:"Повторить"})}),(0,M.jsx)(u.default,{style:Ae.loginButton,onPress:v,children:(0,M.jsx)(f.default,{style:Ae.loginButtonText,children:"Войти заново"})})]}):null),[p,v]),W=(0,a.useCallback)((()=>r?null:(0,M.jsx)(c.default,{style:Ae.emptyContainer,children:(0,M.jsx)(f.default,{style:Ae.emptyText,children:p?"":"Нет постов"})})),[r,p]),V=(0,a.useCallback)((()=>d?(0,M.jsx)(c.default,{style:Ae.footer,children:(0,M.jsx)(g.default,{size:"small",color:"#007AFF"})}):null),[d]);return r&&0===n.length?(0,M.jsx)(c.default,{style:Ae.container,children:(0,M.jsx)(c.default,{style:Ae.loadingContainer,children:(0,M.jsx)(g.default,{size:"large",color:"#007AFF"})})}):(0,M.jsxs)(c.default,{style:Ae.container,children:[(0,M.jsx)(Q.default,{data:n,renderItem:K,keyExtractor:t=>`${e}_${t.ID}`,onEndReached:R,onEndReachedThreshold:.5,refreshControl:(0,M.jsx)(Y.default,{refreshing:i,onRefresh:D,colors:["#007AFF"],tintColor:"#007AFF"}),ListEmptyComponent:W,ListFooterComponent:V,contentContainerStyle:Ae.listContent,ListHeaderComponent:L}),N()]})};var xe=n(2772);const{width:Ce}=K.default.get("window"),be=h.default.create({container:{flex:1,backgroundColor:"#fff"},centered:{flex:1,justifyContent:"center",alignItems:"center"},headerContainer:{width:"100%"},coverContainer:{width:"100%",height:200,backgroundColor:"#f0f0f0"},coverImage:{width:"100%",height:200},defaultCover:{backgroundColor:"#e1e1e1"},profileInfo:{padding:15,marginTop:-50},avatarWrapper:{marginBottom:10,alignItems:"center"},avatar:{width:100,height:100,borderRadius:50,borderWidth:4,borderColor:"#fff"},nameContainer:{alignItems:"center",marginBottom:15},name:{fontSize:24,fontWeight:"bold",color:"#000",marginBottom:4},username:{fontSize:16,color:"#666",marginBottom:8},description:{fontSize:14,color:"#444",textAlign:"center",paddingHorizontal:20},stats:{flexDirection:"row",justifyContent:"space-around",paddingVertical:15,borderTopWidth:1,borderBottomWidth:1,borderColor:"#eee",marginVertical:15},statItem:{alignItems:"center"},statNumber:{fontSize:18,fontWeight:"bold",color:"#000"},statLabel:{fontSize:12,color:"#666",marginTop:4},iconsContainer:{flexDirection:"row",justifyContent:"center",flexWrap:"wrap",marginTop:10},icon:{width:24,height:24,marginHorizontal:4},footer:{padding:10,justifyContent:"center",alignItems:"center"},loader:{flex:1,justifyContent:"center",alignItems:"center"},logoutButton:{backgroundColor:"#007AFF",padding:10,borderRadius:5,alignItems:"center"},logoutButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"},postsContainer:{padding:10},post:{marginBottom:10},postText:{fontSize:16},noPosts:{fontSize:16,textAlign:"center",color:"#666"}}),Se=({username:e})=>{const{logout:t}=(0,a.useContext)(ve),[n,o]=(0,a.useState)(null),[r,s]=(0,a.useState)(!0),[i,l]=(0,a.useState)(""),[d,h]=(0,a.useState)(null),[y,m]=(0,a.useState)(null),[p,A]=(0,a.useState)([]),[w,x]=(0,a.useState)([]),[C,b]=(0,a.useState)(!1),[S,j]=(0,a.useState)(!1),[v,I]=(0,a.useState)(!0);(0,a.useEffect)((()=>{E()}),[e]);const E=async()=>{try{let t;if(s(!0),l(""),t=e?await T.getProfile(e):await T.getMyProfile(),o(t),t.avatar&&"None"!==t.avatar)try{const e=await k(t.avatar);h(e)}catch(e){l("Не удалось загрузить аватар")}if(t.cover&&"None"!==t.cover)try{const e=await k(t.cover);m(e)}catch(e){l("Не удалось загрузить обложку")}t.icons&&t.icons.length>0&&(async e=>{const t=[];for(const n of e)try{const e=await k(n);t.push(e)}catch(e){}A(t)})(t.icons),t.id&&F(!0)}catch(e){l("Не удалось загрузить профиль. Проверьте подключение к интернету или попробуйте войти заново.")}finally{s(!1)}},F=async(e=!1)=>{if(n?.id&&(e||!C))try{b(!0);const t=e?0:w.length,o=await B(n.id.toString(),t);x(e?o:e=>[...e,...o]),I(10===o.length)}catch(e){J.default.alert("Ошибка","Не удалось загрузить посты")}finally{b(!1),j(!1)}};if(r)return(0,M.jsx)(c.default,{style:be.centered,children:(0,M.jsx)(g.default,{size:"large",color:"#007AFF"})});if(!n)return(0,M.jsx)(c.default,{style:be.centered,children:(0,M.jsx)(f.default,{children:"Не удалось загрузить профиль"})});const P=()=>{const e=[{label:"Посты",value:n.posts},{label:"Подписчики",value:n.subscribers},{label:"Подписки",value:n.subscriptions}];return(0,M.jsx)(c.default,{style:be.stats,children:e.map(((e,t)=>(0,M.jsxs)(c.default,{style:be.statItem,children:[(0,M.jsx)(f.default,{style:be.statNumber,children:e.value?.toLocaleString()||"0"}),(0,M.jsx)(f.default,{style:be.statLabel,children:e.label})]},e.label)))})};return(0,M.jsxs)(xe.default,{style:be.container,refreshControl:(0,M.jsx)(Y.default,{refreshing:S,onRefresh:()=>{j(!0),E()}}),children:[(0,M.jsx)(W,{message:i,onClose:()=>l("")}),r?(0,M.jsx)(g.default,{size:"large",color:"#007AFF",style:be.loader}):n?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(c.default,{style:be.coverContainer,children:y&&(0,M.jsx)(G.default,{source:{uri:y},style:be.coverImage})}),(0,M.jsxs)(c.default,{style:be.profileInfo,children:[(0,M.jsx)(c.default,{style:be.avatarWrapper,children:d?(0,M.jsx)(G.default,{source:{uri:d},style:be.avatar}):(0,M.jsx)(Z,{name:n?.name||n?.username||"Пользователь",size:100})}),(0,M.jsx)(f.default,{style:be.name,children:n.name}),(0,M.jsxs)(f.default,{style:be.username,children:["@",n.username]}),n.description&&(0,M.jsx)(f.default,{style:be.description,children:n.description}),P(),n.my_profile&&(0,M.jsx)(u.default,{style:be.logoutButton,onPress:async()=>{try{await t()}catch(e){J.default.alert("Ошибка","Не удалось выйти из аккаунта")}},children:(0,M.jsx)(f.default,{style:be.logoutButtonText,children:"Выйти"})})]}),(0,M.jsx)(c.default,{style:be.postsContainer,children:C?(0,M.jsx)(g.default,{size:"small",color:"#007AFF"}):w.length>0?w.map((e=>(0,M.jsx)(c.default,{style:be.post,children:(0,M.jsx)(f.default,{style:be.postText,children:e.Text})},e.ID))):(0,M.jsx)(f.default,{style:be.noPosts,children:"Нет постов"})})]}):null]})},je=(0,s.createBottomTabNavigator)(),ke=(0,i.createNativeStackNavigator)(),ve=(0,a.createContext)({isLoggedIn:!1,setIsLoggedIn:()=>{},logout:async()=>{}}),Te=()=>(0,M.jsxs)(je.Navigator,{screenOptions:{tabBarActiveTintColor:"#007AFF",tabBarInactiveTintColor:"#8E8E93",tabBarStyle:{backgroundColor:"#FFFFFF",borderTopWidth:1,borderTopColor:"#E5E5EA"},headerStyle:{backgroundColor:"#FFFFFF"},headerTitleStyle:{color:"#000000",fontSize:17,fontWeight:"600"}},children:[(0,M.jsx)(je.Screen,{name:"Feed",component:we,options:{title:"Главная",tabBarIcon:({color:e,size:t})=>(0,M.jsx)(l.default,{name:"home-outline",size:t,color:e}),headerTitle:"Главная"}}),(0,M.jsx)(je.Screen,{name:"Profile",component:Se,options:({navigation:e})=>({title:"Мой профиль",tabBarIcon:({color:e,size:t})=>(0,M.jsx)(l.default,{name:"person-outline",size:t,color:e}),headerTitle:"Мой профиль",headerRight:()=>{const{logout:e}=(0,a.useContext)(ve);return(0,M.jsx)(l.default,{name:"log-out-outline",size:24,color:"#ff3b30",style:{marginRight:15},onPress:e})}})})]}),Ie=()=>{const[e,t]=(0,a.useState)(!1);(0,a.useEffect)((()=>{n()}),[]);const n=async()=>{await m.default.clear();const e=await m.default.getItem("S-KEY");t(!!e)};return(0,M.jsx)(ve.Provider,{value:{isLoggedIn:e,setIsLoggedIn:t,logout:async()=>{await m.default.removeItem("S-KEY"),t(!1)}},children:(0,M.jsx)(r.NavigationContainer,{children:(0,M.jsx)(ke.Navigator,{screenOptions:{headerShown:!1},children:e?(0,M.jsx)(ke.Screen,{name:"Main",component:Te}):(0,M.jsx)(ke.Screen,{name:"Auth",component:H})})})})};var Ee=n(3049);const Fe=h.default.create({container:{flex:1,backgroundColor:"#fff"}});(0,o.default)((function(){(0,a.useEffect)((()=>{window.localStorage.clear()}),[]);const e=(0,a.useCallback)((()=>(0,M.jsx)(Ie,{})),[]);return(0,M.jsxs)(c.default,{style:Fe.container,children:[(0,M.jsx)(Ee.StatusBar,{style:"auto"}),e()]})}))},6664:()=>{const e=console.error;console.error=(...t)=>{t[0]?.includes?.("Warning: Encountered two children with the same key")||e.apply(console,t)}},4601:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVR4nO2WvUoDQRDHf5UIqVNpnVfQBHwC30BI40tY2dkJdjGJH13SGNJJ+iQ+iC9gofae/JPdIMtxt5NdrvIPA/cxMz9mbnb3YKtjYAZ8AUWFvQMXLsYsQT5qAKFd7QOaueBX4KjC7yyA3VhBvl2qrEqHJZXdWUA+yOJb/LHbpkAFcN0UqAD6OUHrmtHPBgrVAs5jc6SAvP5Be2sKXDbxjaKUA9QDxm78ZSOgmxN0ADxVrK1H55MMeo44Uh5SQb2SpGFO2Q9wmgIaRYJk9ymgt4hY/36VAlobQEvLCRtqaGjdQA/n7mZhhHUNw3Cihx3jX9A30HYJtU7q/DU0O6mSF+AzEjZxcVqM2hHKfFSJILsFm0NqjUbYb0G63rTL6xdQQ9p89CF4vAAAAABJRU5ErkJggg=="},7909:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/UlEQVR4nO2ay2sTURTGp4qPnaiL+mhN7kkF34iCCoILdz5w6R9QfCz9AxTiKk3OSUoLbnyBKxfuXFgVfCtFRReKVRGlrzlnUtFua2vryB3aqJ20mWkzj9R88EFIZjLfL/fMzJ1zYxh11VVX8LLtBigUtwPKaUC5rIgfAHIfkAwr4p/a+jUQ9zqfkVxK5eUUkLVN72tErVSOdymUToUyACT2HN2vUDoSaO4MHUDlrKOKpHse4ctakTyDnBwOHgAHdwDK02oDuIz82Cm7quuGvVgRn1fIY4FDUGl0RoHknJG2F1WFoakwsApQ7oQFANOBkLs2tPWvnBeE6ig2AsmbqCDgD0xPc65/3ZwgNmXM1UDyMWoIKJnf6+rwBdHS+WkZkDyJPrxMH5mHuy/aSzyDADFFHRpmMkrGGwTyfiCeiC8IjycKxX2zU9h2QxA3ugBgns86tUnmzWORhySvto7MCKJQ7kUfUDxZEd8uC7GxMLAekH9FHRA8mycSOLTGXVbIJ6MPJ/5GJWe2likrvhZ1MPDvq+XOj1cxCGb7MvLLciMy5HlIiW+1ZAebtPWkLqztwA1SLDciP7x+gT7g1H6pvNkc1nbg9ogLRL+5MECQxXNpIXfpA2rr63lY24HLbLlLi+S1j18ivic7oFyJPBhV4fK7cG6IHcVGPUWOOhx4Nk/ozC6QBTNp1NLNsagDQjWm8c6DVQ1MVRRJd8WecZKsvbE+V5DHdUbDi4C4UPPNB60t6XdLdeul5ttBpQYdyocYQfTMuXXq9H2JX8QCov3rWmM+guzwCkC5WdNN7H+W1vJ8JlQAklGFcrZqywpTSrRZyfBA+FEwCz3OcpvZGjgAOqthhwIBKIH4euDxE577QlsMTWRlc6XmnfPMj5IG4gt68qmIPyuSb06tTy5PK+QvCvm+Xp5WeT6RylpbjTClUK5XKInvQNZBI85KkhyoMBp3/24exFKJdO/yGe/uyG+TZB2PxT8XKgmQ2yeDjygU07ksomRU1tpTcee6/nP9BqNcPi0qc61MAAAAAElFTkSuQmCC"},9955:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADVElEQVR4nO2Zz2sTURDHVyuICqKC1UJpMpMoIoqCB0/+uIkHQfwDvHjTg4i/jkFBtDOJGi8Kooh6kHr2YtWDP0upCP6g0ovadmZbFS9WsSKNvKTRttmkm+xLdgMdGFhCdjaf+b43+zLjIOtjIO1DdludZjYk6UXWHJC8aWqY5BldiSSvDQyS9nec/9zmNKsl52Aiask5ZSJqyG5roYr9r2Zx1lic9BiQPEQSBdZx48jiAssjIDkVzwxt8vuMGA1vBpbT5t5CDB1HkjFTcJC1G0lOQHp4rVUYZP2GJBOT15Wd9EmcdXu5uAl2dwLrU1+x2CRSHyTSusUmjH8nmQCWK+2ZwUXFWOYaSa9WHYuL8fTSjlRuQVUAq9hdAp2yLRCMySbr846zn5a3ZwZXIElPTRA8XZ3YhQ/LfEEYamC5B6S/kHV3YBjSZwYoKAROgfGlDJBenHKTFRjbDqTZihCm6iDJnxnLYxx4eE/JeyZMJ5moWADypdU7A1FUptsTooNdqFRio6gMeL1nkOXkrDdGDsY9Xrqs8m9YH1mI0jIjve+liOtb0ujAvPdQxJybqlifEVhmQPI9MEhEYH54lF79UlNWQoQB0sHSPRLgB4S4Z155La07gbITgjJAcsML5KgFqRuqDLAe9Ci/7gY7WWocTCwt60pACqrIW0uZqv8yI+n1hMhnMC2HrcleZ2WA3EOV/xmSjFp7WL2UIdG2lCwuCzK56Y/YzZx9ZcBrk3v/1dWXVmFsKkPS43TlWmYFyWcuM7Ix32OKmjKkP8tWqrIwrPt897IapAywHHBqMSA9ZxMkiDJAQk7N1pVrQdLbYcMA6XUnl5vnBLJUbj6yXgsNhuSm783tBwZILjcaBkz/KpWb79g2042f2feqFwyQjJqCYB3iH0xaduW7842oZqT9MRpdXTcY7BxaU5wG21QGPBrndZ82mxOA6YUBye/AIGZsQJpNZgcWFuM3VBljcXa3AutAAIiPZvjjFTvZaBhzEjUZrR5Eusz8JHID2kRa9iLJiA8VRsx3/cbFRu6ZopkMI8utChB3aymrybBG5wnS/dNO0CRj5rMgMTEMZYwlWdcDyTvj5tpGTAwNJvt1qXGbMTEsmHoYTj2bVeqoNIMVYLQPSV78BYH4EebaytfUAAAAAElFTkSuQmCC"},852:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyklEQVR4nO2WTQrCQAyFP1T8uZOewsO4c2u9hRs3rgTB1gNVL1EYCYwiQ0szmVFc9MGDWbzJRwKBQL+mwB64Ay5wDRQ+k6yiBeACSyZZbZ24wI8cIKd0sgaQWcPo/mt0a6CJKO463PhanRoBpwygMzDu60oCxwTIFZhpR2iFlcBcC7HCSgskFlalQLSwKgekD3aLgWgXTmCHj/wFWMTUj9ls2bMNsAUmyj8mkEXu56DaP5ZfgKx8bWGozqlU7wQkx5/AXp3l9PvAfAKV7hPWLfRRtQAAAABJRU5ErkJggg=="},7030:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVR4nO2ZQUrEQBBFnwMGPbDoKjhH0IW78TJ6Cp2LDARKArMoZMDprkoqyH9Qm0Cn+pFP0lRACHEN98AeOAITYI11Al6AHUWb/+zY9KU6VEjskzZfJnF0zR+A28b15RKTazx0rC9/EuYquv5QIWGJAjfA269r70tLZApQIWHJAqtL2AICq0rYQgIzq0hEBf56De+WfjtFBfyH8LFCwoICz4Fjx+sWBCKHwdMWBGbugBH47jiOh0m9WUVPk0A7pifgUIQ6MEXIoQh1YIqQQxHqwBQhhyLUgSlCDkWoA1OEEsfrrQyu39w7zDVznSwG4Mn1+8q4aWSuE61xaz/5WurjPI5JITLXaanp3GPM3LwQ/5kfn7GkApTkdIQAAAAASUVORK5CYII="},5613:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3klEQVR4nO2ZS2gTURSG70Kt6ELwQVErk3OTSi0IPhBFBBF3bkVwoaIICuLGlYJgoKAm50zEbtSCouDOpYuurFLrA3zgxoUEQUznnIkoYqFaKtjIbdVWM6kzyTQzA/nhh0AyZ/5v7r1zZm6UaqmlllpqKc6ycrJOI58B5AFN8kYjjwLJuCZ2gfg+EPdY6GzwWy9jOxvNMebYqRoybmqa2oByTxOftmzuCg0gRe5WQH6gSSp+DCiP03l3V6162nZ2A8kT3/XIXCTZUjdAd/b1AiC+ppEn/J70H99YmeVFv+u1k7sYiG/WVQtNBr5iMgWCWGvzco0yVCfAzADPTK3MeVkBKC9CqDfYdcFZ5gsi01tsCwViemo8Nw6rnkYe9DUyGuV6aCedIwNK36wQVqG8rYE10VSnbWd7TRAgeRR1QO3fD72nVKG8PgbhKkGcIemuBiE5F3UwHdCAcrZ6WgVoenExIA94rA9+mzgQkqLX1PoadTAd1MijXiBjyQORb15r5EPkwSio2fXqIS+jDyaBbB59PKYW304cCPItrxE5EXUwHdQox6tAOi+VdeTBKJhTJFYVyOT0Qn6aoNEYUrWURjkUeUDyZ0A5UBNkc19lfhI6PJAUd2Yr82qCTN29nP0JGI29s0JMrxW5G18I7ld+BZfL7UAyHHVoXW1ek3+/SgVROs+bzLNMDMJXfnms7v2tFMnBGABUpuwcUY1osuNHuSGBPAEkp1QYSttyTBP/iAaCT6owpdE9DMjfmwUBJOOmQYcK8QfG5h0auTznECgfZ9sID0WZ3HCH2dOdQ5BX1kU3pZohK/tuIaDkQl03Zj2g9M3cwW+aJv/rQCk1DsKuzsuepgP8BZP7vMRcyQYg7nQUSktVXATo7gOSTwEAvpiGq+KozkJptXmo+/9difvNb1XcBcRHAXnEA2DEfKeSpBSJNfPV2Ww3pQuljEqiMr3FNkC+amw+R52npZZUcP0EmHikhthgrMsAAAAASUVORK5CYII="},3507:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/verify.c35ae86d10b99aec2123.png"}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,a,r)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,a,r]=e[d],i=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,a,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/KirixElemClient/",(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[s,i,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(l)var d=l(o)}for(t&&t(n);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o.O(void 0,[66],(()=>o(1001)));a=o.O(a)})();
//# sourceMappingURL=main.fe26e5af.js.map