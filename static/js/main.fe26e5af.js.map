{"version":3,"file":"static/js/main.fe26e5af.js","mappings":"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","sources":["webpack/runtime/chunk loaded","src/utils/WebSocketClient.ts","src/utils/crypto.ts","src/services/api.ts","src/components/ErrorMessage.tsx","src/screens/LoginScreen.tsx","src/components/LetterAvatar.tsx","src/services/CryptoService.ts","src/constants/websocket.ts","src/services/WebSocketService.ts","src/utils/fileUtils.ts","src/services/FileService.ts","src/components/PostCard.tsx","src/components/CreatePost.tsx","src/screens/FeedScreen.tsx","src/screens/ProfileScreen.tsx","src/navigation/index.tsx","App.tsx","index.ts","src/utils/disableWarnings.ts","webpack/bootstrap","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import { generateRSAKeys, arrayBufferToPem, pemToArrayBuffer, aesEncrypt, aesDecrypt } from './crypto';\n\nexport class WebSocketClient {\n    private url: string;\n    private socket: WebSocket | null = null;\n    private isConnected: boolean = false;\n    private rsaPublic: CryptoKey | null = null;\n    private rsaPrivate: CryptoKey | null = null;\n    private rsaPublicServer: CryptoKey | null = null;\n    private aesKey: CryptoKey | null = null;\n    private aesServerKey: CryptoKey | null = null;\n    private messageHandlers: Map<string, (data: any) => void> = new Map();\n    private connectionPromise: Promise<void> | null = null;\n    private authPromise: Promise<void> | null = null;\n    private requestTimeout: number = 10000; // 10  \n\n    constructor(url: string) {\n        this.url = url;\n    }\n\n    private async initEncryption(): Promise<void> {\n        //  RSA \n        const { publicKey, privateKey } = await generateRSAKeys();\n        this.rsaPublic = publicKey;\n        this.rsaPrivate = privateKey;\n\n        //    \n        const publicKeyPem = await arrayBufferToPem(this.rsaPublic, 'PUBLIC KEY');\n        await this.sendRaw({\n            type: 'key_exchange',\n            action: 'client_key',\n            key: publicKeyPem\n        });\n    }\n\n    private async sendRaw(data: any): Promise<void> {\n        if (!this.socket) {\n            throw new Error('WebSocket not connected');\n        }\n        this.socket.send(JSON.stringify(data));\n    }\n\n    public async connect(): Promise<void> {\n        if (this.connectionPromise) {\n            return this.connectionPromise;\n        }\n\n        this.connectionPromise = new Promise((resolve, reject) => {\n            try {\n                this.socket = new WebSocket(this.url);\n\n                const timeout = setTimeout(() => {\n                    if (!this.isConnected) {\n                        this.close();\n                        reject(new Error('Connection timeout'));\n                    }\n                }, this.requestTimeout);\n\n                this.socket.onopen = async () => {\n                    console.log('WebSocket connected');\n                    this.isConnected = true;\n                    clearTimeout(timeout);\n                    \n                    try {\n                        await this.initEncryption();\n                        resolve();\n                    } catch (error) {\n                        console.error('Encryption initialization failed:', error);\n                        reject(error);\n                    }\n                };\n\n                this.socket.onmessage = async (event) => {\n                    try {\n                        let data = JSON.parse(event.data);\n                        \n                        //   \n                        if (data.type === 'key_exchange') {\n                            if (data.action === 'server_key' && data.key) {\n                                this.rsaPublicServer = await pemToArrayBuffer(data.key);\n                            }\n                            return;\n                        }\n\n                        //     \n                        if (this.aesKey && data.encrypted) {\n                            const decrypted = await aesDecrypt(new Uint8Array(data.data), this.aesKey);\n                            data = JSON.parse(decrypted);\n                        }\n\n                        const handler = this.messageHandlers.get(`${data.type}:${data.action}`);\n                        if (handler) {\n                            handler(data);\n                        }\n                    } catch (error) {\n                        console.error('Error processing message:', error);\n                    }\n                };\n\n                this.socket.onerror = (error) => {\n                    console.error('WebSocket error:', error);\n                    this.isConnected = false;\n                    clearTimeout(timeout);\n                    reject(error);\n                };\n\n                this.socket.onclose = () => {\n                    console.log('WebSocket closed');\n                    this.isConnected = false;\n                    this.connectionPromise = null;\n                    clearTimeout(timeout);\n                };\n            } catch (error) {\n                reject(error);\n            }\n        });\n\n        return this.connectionPromise;\n    }\n\n    public async send(message: any): Promise<void> {\n        if (!this.isConnected || !this.socket) {\n            await this.connect();\n        }\n\n        const timeout = setTimeout(() => {\n            throw new Error('Send timeout');\n        }, this.requestTimeout);\n\n        try {\n            let data = message;\n            \n            //     \n            if (this.aesKey && message.type !== 'key_exchange') {\n                const encrypted = await aesEncrypt(JSON.stringify(message), this.aesKey);\n                data = {\n                    encrypted: true,\n                    data: Array.from(encrypted)\n                };\n            }\n\n            await this.sendRaw(data);\n            clearTimeout(timeout);\n        } catch (error) {\n            clearTimeout(timeout);\n            throw error;\n        }\n    }\n\n    public on(type: string, action: string, handler: (data: any) => void): void {\n        this.messageHandlers.set(`${type}:${action}`, handler);\n    }\n\n    public off(type: string, action: string): void {\n        this.messageHandlers.delete(`${type}:${action}`);\n    }\n\n    public close(): void {\n        if (this.socket) {\n            this.socket.close();\n            this.socket = null;\n            this.isConnected = false;\n            this.connectionPromise = null;\n        }\n    }\n} ","//  AES\nexport async function aesEncrypt(data: string, key: CryptoKey): Promise<Uint8Array> {\n    const encoder = new TextEncoder();\n    const dataBuffer = encoder.encode(data);\n    \n    const iv = crypto.getRandomValues(new Uint8Array(12));\n    const encryptedData = await crypto.subtle.encrypt(\n        {\n            name: \"AES-GCM\",\n            iv: iv\n        },\n        key,\n        dataBuffer\n    );\n    \n    //  IV   \n    const result = new Uint8Array(iv.length + encryptedData.byteLength);\n    result.set(iv);\n    result.set(new Uint8Array(encryptedData), iv.length);\n    \n    return result;\n}\n\n//  AES\nexport async function aesDecrypt(encryptedData: Uint8Array, key: CryptoKey): Promise<string> {\n    const iv = encryptedData.slice(0, 12);\n    const data = encryptedData.slice(12);\n    \n    const decryptedBuffer = await crypto.subtle.decrypt(\n        {\n            name: \"AES-GCM\",\n            iv: iv\n        },\n        key,\n        data\n    );\n    \n    const decoder = new TextDecoder();\n    return decoder.decode(decryptedBuffer);\n}\n\n//  RSA \nexport async function generateRSAKeys(): Promise<CryptoKeyPair> {\n    return await crypto.subtle.generateKey(\n        {\n            name: \"RSA-OAEP\",\n            modulusLength: 2048,\n            publicExponent: new Uint8Array([1, 0, 1]),\n            hash: \"SHA-256\"\n        },\n        true,\n        [\"encrypt\", \"decrypt\"]\n    );\n}\n\n//    PEM \nexport async function arrayBufferToPem(key: CryptoKey, type: string): Promise<string> {\n    const exported = await crypto.subtle.exportKey(\"spki\", key);\n    const exportedAsString = String.fromCharCode.apply(null, new Uint8Array(exported) as any);\n    const exportedAsBase64 = btoa(exportedAsString);\n    return `-----BEGIN ${type}-----\\n${exportedAsBase64}\\n-----END ${type}-----`;\n}\n\n//  PEM  \nexport async function pemToArrayBuffer(pem: string): Promise<CryptoKey> {\n    const pemHeader = \"-----BEGIN PUBLIC KEY-----\";\n    const pemFooter = \"-----END PUBLIC KEY-----\";\n    const pemContents = pem.substring(\n        pemHeader.length,\n        pem.length - pemFooter.length\n    );\n    const binaryDer = atob(pemContents);\n    const arrayBuffer = new Uint8Array(binaryDer.length);\n    for (let i = 0; i < binaryDer.length; i++) {\n        arrayBuffer[i] = binaryDer.charCodeAt(i);\n    }\n    return await crypto.subtle.importKey(\n        \"spki\",\n        arrayBuffer,\n        {\n            name: \"RSA-OAEP\",\n            hash: \"SHA-256\"\n        },\n        true,\n        [\"encrypt\"]\n    );\n} ","import axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { WebSocketClient } from '../utils/WebSocketClient';\n\nconst AUTH_API_URL = 'https://api.elemsocial.com';\nconst POSTS_API_URL = 'https://elemsocial.com';\nconst SYSTEM_API_URL = 'https://elemsocial.com/System/API';\nconst WS_URL = 'wss://wselem.xyz:8880';\n\nconst authApi = axios.create({\n  baseURL: AUTH_API_URL,\n  headers: {\n    'Content-Type': 'multipart/form-data',\n    'api': 'true',\n    'Origin': 'https://elemsocial.com',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\n  }\n});\n\nconst postsApi = axios.create({\n  baseURL: POSTS_API_URL,\n  headers: {\n    'Content-Type': 'multipart/form-data',\n    'api': 'true',\n    'Origin': 'https://elemsocial.com',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\n  }\n});\n\nconst systemApi = axios.create({\n  baseURL: SYSTEM_API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n    'api': 'true',\n    'Origin': 'https://elemsocial.com',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\n  }\n});\n\nlet wsClient: WebSocketClient | null = null;\n\n// WebSocket connection handler\nexport const connectWebSocket = async (retries = 3) => {\n  if (!wsClient) {\n    wsClient = new WebSocketClient(WS_URL);\n  }\n\n  for (let i = 0; i < retries; i++) {\n    try {\n      await wsClient.connect();\n      console.log('WebSocket connected');\n\n      const sKey = await AsyncStorage.getItem('S-KEY');\n      if (!sKey) {\n        throw new Error('No S-KEY available');\n      }\n\n      return new Promise<WebSocketClient>((resolve, reject) => {\n        const authTimeout = setTimeout(() => {\n          if (wsClient) {\n            wsClient.off('authorization', 'connect');\n          }\n          reject(new Error('Authorization timeout'));\n        }, 5000);\n\n        if (!wsClient) {\n          clearTimeout(authTimeout);\n          reject(new Error('WebSocket client is null'));\n          return;\n        }\n\n        wsClient.on('authorization', 'connect', (data) => {\n          clearTimeout(authTimeout);\n          if (data.status === 'success') {\n            console.log('WebSocket authorized successfully');\n            resolve(wsClient!);\n          } else {\n            console.error('WebSocket authorization failed:', data);\n            reject(new Error(data.message || 'Authorization failed'));\n          }\n        });\n\n        wsClient.send({\n          type: 'authorization',\n          action: 'connect',\n          S_KEY: sKey\n        }).catch(reject);\n      });\n    } catch (error) {\n      console.error(`WebSocket connection attempt ${i + 1} failed:`, error);\n      if (i === retries - 1) throw error;\n      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1))); //  \n    }\n  }\n  throw new Error('Failed to connect after retries');\n};\n\n// Add interceptor to include S-KEY in requests\nauthApi.interceptors.request.use(async (config) => {\n  const sKey = await AsyncStorage.getItem('S-KEY');\n  if (sKey) {\n    config.headers['S-KEY'] = sKey;\n  }\n  return config;\n});\n\n// Add response error handling\nauthApi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    console.error('API Error:', error?.response?.data || error.message);\n    if (error?.response?.status === 401) {\n      // Handle unauthorized error (invalid or expired S-KEY)\n      await AsyncStorage.removeItem('S-KEY');\n      // You might want to trigger a logout here\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Add interceptor to include S-KEY in requests\npostsApi.interceptors.request.use(async (config) => {\n  const sKey = await AsyncStorage.getItem('S-KEY');\n  if (sKey) {\n    config.headers['S-KEY'] = sKey;\n  }\n  return config;\n});\n\n// Add response error handling\npostsApi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    console.error('API Error:', error?.response?.data || error.message);\n    if (error?.response?.status === 401) {\n      // Handle unauthorized error (invalid or expired S-KEY)\n      await AsyncStorage.removeItem('S-KEY');\n      // You might want to trigger a logout here\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Add interceptor to include S-KEY in requests\nsystemApi.interceptors.request.use(async (config) => {\n  const sKey = await AsyncStorage.getItem('S-KEY');\n  if (sKey) {\n    config.headers['S-KEY'] = sKey;\n  }\n  return config;\n});\n\n// Types\nexport interface LoginResponse {\n  status: 'success' | 'error';\n  S_KEY?: string;\n  accountID?: string;\n  text?: string;\n}\n\nexport interface PostResponse {\n  ID: string;\n  AuthorID: string;\n  Username: string;\n  Name: string;\n  Avatar: string | 'None';\n  UserIcons: string | null;\n  Text: string;\n  Content: string | null;\n  Date: string;\n  Likes: number;\n  Dislikes: number;\n  Liked: 'Liked' | null;\n  Disliked: 'Liked' | null;\n  Comments: number;\n  MyPost: boolean;\n}\n\nexport interface CommentResponse {\n  Name: string;\n  Username: string;\n  Avatar: string | 'None';\n  UserIcons: string | null;\n  Text: string;\n  Date: string;\n}\n\nexport interface ApiResponse {\n  Type: 'Error' | 'Verify';\n  Content: string;\n}\n\nexport interface ProfileData {\n  id: number;\n  name: string;\n  username: string;\n  avatar: string | null;\n  cover: string | null;\n  description: string | null;\n  posts: number;\n  subscribers: number;\n  subscribed: boolean;\n  create_date: string;\n  icons: string[];\n  subscriptions: number;\n  links_count: number;\n  links: any | null;\n  my_profile: boolean;\n  permissions: {\n    posts: boolean;\n    comments: boolean;\n    new_chats: boolean;\n    music_upload: boolean;\n  };\n}\n\nexport interface FileInfo {\n  file_id: string;\n  file_name: string;\n  file_size: number;\n  mime_type: string;\n}\n\n// Helper functions\nexport const getImageUrl = async (path: string | null | undefined): Promise<string> => {\n  if (!path || path === 'None') {\n    return '';\n  }\n  return `https://elemsocial.com/Content/Avatars/${path}`;\n};\n\n// Auth API\nexport const authAPI = {\n  login: async (email: string, password: string): Promise<LoginResponse> => {\n    const formData = new FormData();\n    formData.append('email', email);\n    formData.append('password', password);\n    formData.append('device_type', 'browser');\n    formData.append('device', 'Element Web 2.3');\n\n    const response = await fetch(`${AUTH_API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'api': 'true',\n        'Origin': 'https://elemsocial.com',\n      },\n      body: formData\n    });\n\n    const data = await response.json();\n    \n    if (data.status === 'success' && data.S_KEY) {\n      //  S-KEY\n      await AsyncStorage.setItem('S-KEY', data.S_KEY);\n      \n      try {\n        //    WebSocket\n        await connectWebSocket();\n        console.log('WebSocket connected and authorized after login');\n      } catch (error) {\n        console.error('WebSocket setup failed after login:', error);\n      }\n    }\n    \n    return data;\n  },\n};\n\n// Profile API  WebSocket\nexport const profileAPI = {\n  async getMyProfile(): Promise<ProfileData> {\n    try {\n      const client = await connectWebSocket();\n      \n      return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n          client.off('social', 'get_profile');\n          reject(new Error('Profile request timeout'));\n        }, 10000);\n\n        const handler = (data: any) => {\n          clearTimeout(timeout);\n          if (data.status === 'success' && data.profile) {\n            client.off('social', 'get_profile');\n            resolve(data.profile);\n          } else {\n            client.off('social', 'get_profile');\n            reject(new Error(data.message || 'Failed to fetch profile'));\n          }\n        };\n\n        client.on('social', 'get_profile', handler);\n        \n        client.send({\n          type: 'social',\n          action: 'get_profile'\n        }).catch(error => {\n          clearTimeout(timeout);\n          reject(error);\n        });\n      });\n    } catch (error) {\n      console.error('Error getting profile:', error);\n      throw error;\n    }\n  },\n\n  async getProfile(username: string): Promise<ProfileData> {\n    try {\n      const client = await connectWebSocket();\n      \n      return new Promise((resolve, reject) => {\n        const timeout = setTimeout(() => {\n          client.off('social', 'get_profile');\n          reject(new Error('Profile request timeout'));\n        }, 10000);\n\n        const handler = (data: any) => {\n          clearTimeout(timeout);\n          if (data.status === 'success' && data.profile) {\n            client.off('social', 'get_profile');\n            resolve(data.profile);\n          } else {\n            client.off('social', 'get_profile');\n            reject(new Error(data.message || 'Failed to fetch profile'));\n          }\n        };\n\n        client.on('social', 'get_profile', handler);\n        \n        client.send({\n          type: 'social',\n          action: 'get_profile',\n          username\n        }).catch(error => {\n          clearTimeout(timeout);\n          reject(error);\n        });\n      });\n    } catch (error) {\n      console.error('getProfile error:', error);\n      throw error;\n    }\n  },\n\n  updateProfile: async (data: Partial<ProfileData>): Promise<ApiResponse> => {\n    const formData = new FormData();\n    Object.entries(data).forEach(([key, value]) => {\n      if (value !== undefined && value !== null) {\n        formData.append(key, String(value));\n      }\n    });\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\n    return response.data;\n  },\n\n  uploadAvatar: async (file: File): Promise<ApiResponse> => {\n    const formData = new FormData();\n    formData.append('avatar', file);\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\n    return response.data;\n  },\n\n  uploadCover: async (file: File): Promise<ApiResponse> => {\n    const formData = new FormData();\n    formData.append('cover', file);\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\n    return response.data;\n  },\n};\n\n// Posts API\nexport const postsAPI = {\n  // Load single post\n  loadPost: async (postId: string): Promise<PostResponse> => {\n    const formData = new FormData();\n    formData.append('PostID', postId);\n\n    const response = await postsApi.post('/System/API/LoadPost.php', formData);\n    return response.data;\n  },\n\n  // Create post\n  createPost: async (text: string, files: FileInfo[]): Promise<ApiResponse> => {\n    const formData = new FormData();\n    formData.append('text', text);\n    \n    if (files.length > 0) {\n      formData.append('content', JSON.stringify({\n        File: files[0] //     \n      }));\n    }\n\n    const response = await fetch(`${POSTS_API_URL}/Posts/API/create`, {\n      method: 'POST',\n      headers: {\n        'api': 'true',\n        'Origin': 'https://elemsocial.com',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\n      },\n      body: formData\n    });\n\n    return response.json();\n  },\n\n  // Get single post\n  getPost: async (postId: string): Promise<PostResponse> => {\n    const formData = new FormData();\n    formData.append('PostID', postId);\n\n    const response = await postsApi.post<PostResponse>('/System/API/LoadPost.php', formData);\n    return response.data;\n  },\n\n  getPosts: async (type: 'LATEST' | 'REC' | 'SUBSCRIPTIONS', startIndex?: number): Promise<PostResponse[]> => {\n    try {\n      const formData = new FormData();\n      formData.append('StartIndex', startIndex?.toString() || '0');\n\n      const url = `/System/API/LoadPosts.php?F=${type}`;\n      console.log('Making request to:', url);\n      console.log('With FormData:', {\n        StartIndex: startIndex?.toString() || '0'\n      });\n\n      const response = await postsApi.post(url, formData);\n      console.log(`${type} posts raw response:`, response.data);\n\n      // Ensure we have an array of posts\n      const postsArray = Array.isArray(response.data) ? response.data : [];\n      console.log('Posts array length:', postsArray.length);\n\n      // Map and validate each post\n      const posts = postsArray.map(post => ({\n        ID: String(post.ID || ''),\n        AuthorID: String(post.AuthorID || ''),\n        Username: String(post.Username || ''),\n        Name: String(post.Name || ''),\n        Avatar: post.Avatar || 'None',\n        UserIcons: post.UserIcons || null,\n        Text: String(post.Text || ''),\n        Content: post.Content || null,\n        Date: String(post.Date || ''),\n        Likes: Number(post.Likes) || 0,\n        Dislikes: Number(post.Dislikes) || 0,\n        Liked: post.Liked || null,\n        Disliked: post.Disliked || null,\n        Comments: Number(post.Comments) || 0,\n        MyPost: Boolean(post.MyPost)\n      }));\n      \n      return posts;\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n      if (axios.isAxiosError(error)) {\n        console.error('Response:', error.response?.data);\n        console.error('Status:', error.response?.status);\n        console.error('Headers:', error.response?.headers);\n      }\n      return [];\n    }\n  },\n\n  getUserPosts: async (userId: string, startIndex?: number): Promise<PostResponse[]> => {\n    try {\n      const formData = new FormData();\n      formData.append('UserID', userId);\n      if (startIndex !== undefined) {\n        formData.append('StartIndex', startIndex.toString());\n      }\n\n      const url = '/System/API/LoadPosts.php?F=USER';\n      console.log('Fetching user posts, UserID:', userId, 'StartIndex:', startIndex);\n      \n      const response = await postsApi.post<any>(url, formData);\n      console.log('User posts raw response:', response.data);\n\n      // Ensure we have an array of posts\n      const postsArray = Array.isArray(response.data) ? response.data : [];\n\n      // Map and validate each post\n      const posts = postsArray.map(post => ({\n        ID: String(post.ID || ''),\n        AuthorID: String(post.AuthorID || ''),\n        Username: String(post.Username || ''),\n        Name: String(post.Name || ''),\n        Avatar: post.Avatar || 'None',\n        UserIcons: post.UserIcons || null,\n        Text: String(post.Text || ''),\n        Content: post.Content || null,\n        Date: String(post.Date || ''),\n        Likes: Number(post.Likes) || 0,\n        Dislikes: Number(post.Dislikes) || 0,\n        Liked: post.Liked || null,\n        Disliked: post.Disliked || null,\n        Comments: Number(post.Comments) || 0,\n        MyPost: Boolean(post.MyPost)\n      }));\n      \n      console.log('User posts processed:', posts);\n      return posts;\n    } catch (error) {\n      console.error('Error fetching user posts:', error);\n      return [];\n    }\n  },\n\n  // Post interactions (like, dislike, delete)\n  interactWithPost: async (\n    action: 'LIKE' | 'DISLIKE' | 'DELETE',\n    postId: string\n  ): Promise<ApiResponse> => {\n    const formData = new FormData();\n    formData.append('PostID', postId);\n\n    const response = await postsApi.post<ApiResponse>(`/System/API/PostInteraction.php?F=${action}`, formData);\n    return response.data;\n  },\n\n  // Add comment to post\n  addComment: async (postId: string, text: string): Promise<ApiResponse> => {\n    const formData = new FormData();\n    formData.append('PostID', postId);\n    formData.append('Text', text);\n\n    const response = await postsApi.post<ApiResponse>('/System/API/PostInteraction.php?F=POST_COMMENT', formData);\n    return response.data;\n  },\n\n  // Get post comments\n  getComments: async (postId: string): Promise<CommentResponse[]> => {\n    const formData = new FormData();\n    formData.append('PostID', postId);\n\n    const response = await postsApi.post<CommentResponse[]>('/System/API/PostInteraction.php?F=LOAD_COMMENT', formData);\n    return response.data;\n  },\n};\n","import React, { useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  Animated,\n  Dimensions,\n  Platform,\n} from 'react-native';\n\ninterface ErrorMessageProps {\n  message: string;\n  onClose?: () => void;\n}\n\nconst { height } = Dimensions.get('window');\n\nconst ErrorMessage: React.FC<ErrorMessageProps> = ({ message, onClose }) => {\n  const translateY = new Animated.Value(height);\n\n  useEffect(() => {\n    if (message) {\n      //  \n      Animated.spring(translateY, {\n        toValue: 0,\n        useNativeDriver: true,\n        tension: 50,\n        friction: 7,\n      }).start();\n    }\n  }, [message]);\n\n  const handleClose = () => {\n    //  \n    Animated.timing(translateY, {\n      toValue: height,\n      duration: 300,\n      useNativeDriver: true,\n    }).start(() => {\n      if (onClose) onClose();\n    });\n  };\n\n  if (!message) return null;\n\n  return (\n    <Modal\n      transparent\n      visible={!!message}\n      animationType=\"fade\"\n      onRequestClose={handleClose}\n    >\n      <View style={styles.overlay}>\n        <Animated.View\n          style={[\n            styles.container,\n            {\n              transform: [{ translateY }],\n            },\n          ]}\n        >\n          <View style={styles.content}>\n            <Text style={styles.title}></Text>\n            <Text style={styles.text}>{message}</Text>\n            <TouchableOpacity\n              style={styles.button}\n              onPress={handleClose}\n              activeOpacity={0.8}\n            >\n              <Text style={styles.buttonText}>OK</Text>\n            </TouchableOpacity>\n          </View>\n        </Animated.View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    width: '90%',\n    maxWidth: 400,\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    ...(Platform.OS === 'web' ? {\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n    } : {\n      shadowColor: '#000',\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.25,\n      shadowRadius: 3.84,\n      elevation: 5,\n    }),\n  },\n  content: {\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#c62828',\n    marginBottom: 10,\n    textAlign: 'center',\n  },\n  text: {\n    fontSize: 16,\n    color: '#333',\n    marginBottom: 20,\n    textAlign: 'center',\n    lineHeight: 22,\n  },\n  button: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 12,\n    paddingHorizontal: 30,\n    borderRadius: 8,\n    alignSelf: 'center',\n  },\n  buttonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default ErrorMessage; ","import React, { useState, useContext } from 'react';\nimport {\n  View,\n  TextInput,\n  TouchableOpacity,\n  Text,\n  StyleSheet,\n  Alert,\n  ActivityIndicator,\n  Platform,\n} from 'react-native';\nimport { authAPI } from '../services/api';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { CommonActions, useNavigation } from '@react-navigation/native';\nimport { AuthContext } from '../navigation';\nimport HCaptcha from '@hcaptcha/react-hcaptcha';\nimport ErrorMessage from '../components/ErrorMessage';\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    padding: 20,\n    backgroundColor: '#fff',\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 30,\n    textAlign: 'center',\n  },\n  input: {\n    height: 50,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 8,\n    paddingHorizontal: 15,\n    marginBottom: 15,\n    fontSize: 16,\n    backgroundColor: '#fff',\n    ...(Platform.OS === 'web' && {\n      outlineStyle: 'none',\n      ':focus': {\n        borderColor: '#007AFF',\n      },\n    }),\n  },\n  buttonContainer: {\n    pointerEvents: 'auto',\n    marginBottom: 15,\n  },\n  button: {\n    height: 50,\n    backgroundColor: '#007AFF',\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    ...(Platform.OS === 'web' && {\n      cursor: 'pointer',\n      ':hover': {\n        backgroundColor: '#0056b3',\n      },\n    }),\n  },\n  buttonDisabled: {\n    backgroundColor: '#ccc',\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  switchText: {\n    color: '#007AFF',\n    textAlign: 'center',\n    marginTop: 15,\n    fontSize: 16,\n  },\n  stepText: {\n    fontSize: 18,\n    marginBottom: 15,\n    textAlign: 'center',\n  },\n});\n\nconst LoginScreen = () => {\n  const navigation = useNavigation();\n  const { setIsLoggedIn } = useContext(AuthContext);\n  const [isRegistering, setIsRegistering] = useState(false);\n  const [loading, setLoading] = useState(false);\n  \n  // Login state\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loginError, setLoginError] = useState('');\n\n  // Registration state\n  const [name, setName] = useState('');\n  const [username, setUsername] = useState('');\n  const [regEmail, setRegEmail] = useState('');\n  const [regPassword, setRegPassword] = useState('');\n  const [captchaToken, setCaptchaToken] = useState('');\n  const [registrationError, setRegistrationError] = useState('');\n\n  const handleLogin = async () => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!email) {\n      setLoginError(' ');\n      return;\n    }\n    if (!emailRegex.test(email)) {\n      setLoginError('  email ');\n      return;\n    }\n    if (!password) {\n      setLoginError(' ');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await authAPI.login(email.trim(), password);\n      \n      if (response?.status === 'success' && response?.S_KEY) {\n        await AsyncStorage.setItem('S-KEY', response.S_KEY);\n        setIsLoggedIn(true);\n      } else {\n        setLoginError(response?.text || ' email  ');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      setLoginError('-   ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRegister = async () => {\n    setRegistrationError('');\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    \n    // \n    if (!name.trim()) {\n      setRegistrationError(' ');\n      return;\n    }\n    if (!username.trim()) {\n      setRegistrationError('  ');\n      return;\n    }\n    if (!regEmail.trim()) {\n      setRegistrationError(' email');\n      return;\n    }\n    if (!emailRegex.test(regEmail.trim())) {\n      setRegistrationError('  email ');\n      return;\n    }\n    if (!regPassword.trim()) {\n      setRegistrationError(' ');\n      return;\n    }\n    if (!captchaToken) {\n      setRegistrationError(' ');\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const formData = new FormData();\n      formData.append('name', name.trim());\n      formData.append('username', username.trim());\n      formData.append('email', regEmail.trim());\n      formData.append('password', regPassword.trim());\n      formData.append('accept', 'true');\n      formData.append('h_captcha', captchaToken);\n\n      const response = await fetch('https://api.elemsocial.com/auth/register', {\n        method: 'POST',\n        headers: {\n          'api': 'true',\n          'Origin': 'https://elemsocial.com',\n        },\n        body: formData,\n      });\n\n      const data = await response.json();\n      \n      if (data.status === 'success') {\n        await AsyncStorage.setItem('S-KEY', data.S_KEY);\n        setIsLoggedIn(true);\n      } else {\n        setRegistrationError(data.text || '  ');\n      }\n    } catch (error) {\n      console.error('Registration error:', error);\n      setRegistrationError('-   ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onCaptchaVerify = (token: string) => {\n    setCaptchaToken(token);\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Sigma Element Client</Text>\n      \n      {isRegistering ? (\n        <>\n          <TextInput\n            style={styles.input}\n            placeholder=\"\"\n            value={name}\n            onChangeText={setName}\n            editable={!loading}\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\" \"\n            value={username}\n            onChangeText={setUsername}\n            editable={!loading}\n            autoCapitalize=\"none\"\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\"Email\"\n            value={regEmail}\n            onChangeText={setRegEmail}\n            editable={!loading}\n            keyboardType=\"email-address\"\n            autoCapitalize=\"none\"\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\"\"\n            value={regPassword}\n            onChangeText={setRegPassword}\n            secureTextEntry\n            editable={!loading}\n          />\n          <HCaptcha\n            sitekey=\"29c6b1c2-7e78-43ec-8bf8-5de49c58c54a\"\n            onVerify={onCaptchaVerify}\n          />\n          <ErrorMessage \n            message={registrationError} \n            onClose={() => setRegistrationError('')}\n          />\n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[styles.button, loading && styles.buttonDisabled]}\n              onPress={handleRegister}\n              disabled={loading}\n            >\n              {loading ? (\n                <ActivityIndicator color=\"white\" />\n              ) : (\n                <Text style={styles.buttonText}></Text>\n              )}\n            </TouchableOpacity>\n          </View>\n          <TouchableOpacity onPress={() => {\n            setIsRegistering(false);\n            setRegistrationError('');\n            setLoginError('');\n          }}>\n            <Text style={styles.switchText}>  ? </Text>\n          </TouchableOpacity>\n        </>\n      ) : (\n        <>\n          <TextInput\n            style={styles.input}\n            placeholder=\" \"\n            value={email}\n            onChangeText={setEmail}\n            autoCapitalize=\"none\"\n            keyboardType=\"email-address\"\n            editable={!loading}\n          />\n          <TextInput\n            style={styles.input}\n            placeholder=\"\"\n            value={password}\n            onChangeText={setPassword}\n            secureTextEntry\n            editable={!loading}\n          />\n          <ErrorMessage \n            message={loginError} \n            onClose={() => setLoginError('')}\n          />\n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[styles.button, loading && styles.buttonDisabled]}\n              onPress={handleLogin}\n              disabled={loading}\n            >\n              {loading ? (\n                <ActivityIndicator color=\"white\" />\n              ) : (\n                <Text style={styles.buttonText}></Text>\n              )}\n            </TouchableOpacity>\n          </View>\n          <TouchableOpacity onPress={() => {\n            setIsRegistering(true);\n            setRegistrationError('');\n            setLoginError('');\n          }}>\n            <Text style={styles.switchText}> ? </Text>\n          </TouchableOpacity>\n        </>\n      )}\n    </View>\n  );\n};\n\nexport default LoginScreen;\n","import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\n\n//    (  )\nconst colorPairs = [\n  { bg: '#FFE5E5', text: '#FF4D4D' }, // \n  { bg: '#E5F1FF', text: '#3399FF' }, // \n  { bg: '#E5FFE5', text: '#33CC33' }, // \n  { bg: '#FFE5FF', text: '#FF33FF' }, // \n  { bg: '#FFF0E5', text: '#FF8533' }, // \n  { bg: '#E5F9FF', text: '#33CCFF' }, // \n  { bg: '#F2E5FF', text: '#9933FF' }, // \n  { bg: '#FFFFE5', text: '#CCCC33' }, // \n];\n\ninterface LetterAvatarProps {\n  name: string;\n  size?: number;\n  style?: any;\n}\n\nconst LetterAvatar: React.FC<LetterAvatarProps> = ({ name, size = 120, style }) => {\n  //    ,     \"?\"\n  const letter = (name?.charAt(0) || '?').toUpperCase();\n  \n  //      \n  const colorIndex = Math.abs(name.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % colorPairs.length;\n  const colors = colorPairs[colorIndex];\n\n  const styles = StyleSheet.create({\n    container: {\n      width: size,\n      height: size,\n      borderRadius: size / 2,\n      backgroundColor: colors.bg,\n      justifyContent: 'center',\n      alignItems: 'center',\n      overflow: 'hidden',\n    },\n    letter: {\n      color: colors.text,\n      fontSize: size * 0.4,\n      fontWeight: '600',\n      textAlign: 'center',\n      textAlignVertical: 'center',\n    },\n  });\n\n  return (\n    <View style={[styles.container, style]}>\n      <Text style={styles.letter}>{letter}</Text>\n    </View>\n  );\n};\n\nexport default LetterAvatar;\n","export class CryptoService {\n    public static async arrayBufferToPem(buffer: ArrayBuffer, type: string): Promise<string> {\n        const base64 = btoa(String.fromCharCode(...new Uint8Array(buffer)));\n        const pem = `-----BEGIN ${type}-----\\n${base64}\\n-----END ${type}-----`;\n        return pem;\n    }\n\n    public static async pemToArrayBuffer(pem: string): Promise<ArrayBuffer> {\n        const base64 = pem\n            .replace(/-----BEGIN.*-----/, '')\n            .replace(/-----END.*-----/, '')\n            .replace(/\\s/g, '');\n        const binary = atob(base64);\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        return bytes.buffer;\n    }\n\n    public static async rsaEncrypt(data: string, publicKeyPem: string): Promise<ArrayBuffer> {\n        const publicKeyBuffer = await this.pemToArrayBuffer(publicKeyPem);\n        const publicKey = await window.crypto.subtle.importKey(\n            'spki',\n            publicKeyBuffer,\n            {\n                name: 'RSA-OAEP',\n                hash: { name: 'SHA-256' }\n            },\n            true,\n            ['encrypt']\n        );\n\n        const encoder = new TextEncoder();\n        const dataBuffer = encoder.encode(data);\n        return window.crypto.subtle.encrypt(\n            { name: 'RSA-OAEP' },\n            publicKey,\n            dataBuffer\n        );\n    }\n\n    public static async rsaDecrypt(data: ArrayBuffer, privateKeyBuffer: ArrayBuffer): Promise<string> {\n        const privateKey = await window.crypto.subtle.importKey(\n            'pkcs8',\n            privateKeyBuffer,\n            {\n                name: 'RSA-OAEP',\n                hash: { name: 'SHA-256' }\n            },\n            true,\n            ['decrypt']\n        );\n\n        const decryptedBuffer = await window.crypto.subtle.decrypt(\n            { name: 'RSA-OAEP' },\n            privateKey,\n            data\n        );\n\n        const decoder = new TextDecoder();\n        return decoder.decode(decryptedBuffer);\n    }\n\n    public static async aesEncrypt(data: string, key: string): Promise<ArrayBuffer> {\n        const encoder = new TextEncoder();\n        const dataBuffer = encoder.encode(data);\n        const keyBuffer = await this.importAESKey(key);\n        const iv = window.crypto.getRandomValues(new Uint8Array(12));\n\n        const encryptedBuffer = await window.crypto.subtle.encrypt(\n            { name: 'AES-GCM', iv },\n            keyBuffer,\n            dataBuffer\n        );\n\n        const result = new Uint8Array(iv.length + encryptedBuffer.byteLength);\n        result.set(iv);\n        result.set(new Uint8Array(encryptedBuffer), iv.length);\n        return result.buffer;\n    }\n\n    public static async aesDecrypt(data: ArrayBuffer, key: string): Promise<string> {\n        const dataArray = new Uint8Array(data);\n        const iv = dataArray.slice(0, 12);\n        const encryptedData = dataArray.slice(12);\n        const keyBuffer = await this.importAESKey(key);\n\n        const decryptedBuffer = await window.crypto.subtle.decrypt(\n            { name: 'AES-GCM', iv },\n            keyBuffer,\n            encryptedData\n        );\n\n        const decoder = new TextDecoder();\n        return decoder.decode(decryptedBuffer);\n    }\n\n    public static async generateAESKey(): Promise<string> {\n        const key = await window.crypto.subtle.generateKey(\n            { name: 'AES-GCM', length: 256 },\n            true,\n            ['encrypt', 'decrypt']\n        );\n\n        const exportedKey = await window.crypto.subtle.exportKey('raw', key);\n        const keyArray = Array.from(new Uint8Array(exportedKey));\n        return btoa(String.fromCharCode(...keyArray));\n    }\n\n    private static async importAESKey(key: string): Promise<CryptoKey> {\n        const binaryKey = atob(key);\n        const keyArray = new Uint8Array(binaryKey.length);\n        for (let i = 0; i < binaryKey.length; i++) {\n            keyArray[i] = binaryKey.charCodeAt(i);\n        }\n\n        return window.crypto.subtle.importKey(\n            'raw',\n            keyArray,\n            { name: 'AES-GCM' },\n            true,\n            ['encrypt', 'decrypt']\n        );\n    }\n\n    public static async blobToUint8Array(blob: Blob): Promise<ArrayBuffer> {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = () => resolve(reader.result as ArrayBuffer);\n            reader.onerror = reject;\n            reader.readAsArrayBuffer(blob);\n        });\n    }\n} ","export const WS_MESSAGE_TYPES = {\n    SOCIAL: 'social',\n    MESSENGER: 'messenger',\n    KEY_EXCHANGE: 'key_exchange',\n    AES_KEY: 'aes_key'\n} as const;\n\nexport const WS_ACTIONS = {\n    GET_ONLINE_USERS: 'get_online_users',\n    USER_STATUS: 'user_status',\n    NEW_POST: 'new_post',\n    UPLOAD_FILE: 'upload_file',\n    DOWNLOAD_FILE: 'download_file'\n} as const;\n\nexport const WS_USER_STATUS = {\n    ONLINE: 'online',\n    OFFLINE: 'offline'\n} as const; ","import { CryptoService } from './CryptoService';\nimport { WebSocketMessage } from '../types/websocket';\nimport { WS_MESSAGE_TYPES } from '../constants/websocket';\n\nclass WebSocketService {\n    private static instance: WebSocketService;\n    private url = 'wss://wselem.xyz:8880';\n    private socket: WebSocket | null = null;\n    private isConnected = false;\n    private rsaPublic: ArrayBuffer | null = null;\n    private rsaPrivate: ArrayBuffer | null = null;\n    private rsaPublicServer: string | null = null;\n    private aesKey: string | null = null;\n    private aesServerKey: string | null = null;\n    private keysReady = false;\n    private socketReady = false;\n    private messageQueue: WebSocketMessage[] = [];\n    private processingMessages = false;\n    private messageHandlers: Map<string, (data: WebSocketMessage) => void> = new Map();\n\n    private constructor() {\n        this.connect();\n    }\n\n    public static getInstance(): WebSocketService {\n        if (!WebSocketService.instance) {\n            WebSocketService.instance = new WebSocketService();\n        }\n        return WebSocketService.instance;\n    }\n\n    private async generateKeys(): Promise<boolean> {\n        try {\n            const keyPair = await window.crypto.subtle.generateKey({\n                name: 'RSA-OAEP',\n                modulusLength: 2048,\n                publicExponent: new Uint8Array([1, 0, 1]),\n                hash: { name: 'SHA-256' }\n            }, true, ['encrypt', 'decrypt']);\n\n            this.rsaPublic = await window.crypto.subtle.exportKey('spki', keyPair.publicKey);\n            this.rsaPrivate = await window.crypto.subtle.exportKey('pkcs8', keyPair.privateKey);\n            this.keysReady = true;\n            return true;\n        } catch (error) {\n            console.error('   :', error);\n            return false;\n        }\n    }\n\n    private processQueue(): void {\n        if (!this.socketReady || this.processingMessages) return;\n        this.processingMessages = true;\n        while (this.messageQueue.length > 0) {\n            const message = this.messageQueue.shift();\n            if (message) {\n                this.send(message);\n            }\n        }\n        this.processingMessages = false;\n    }\n\n    private connect(): void {\n        console.log('  WebSocket...');\n        this.socket = new WebSocket(this.url);\n\n        this.socket.onopen = async () => {\n            console.log('WebSocket ');\n            await this.generateKeys();\n            if (this.rsaPublic) {\n                const publicKeyPem = await CryptoService.arrayBufferToPem(this.rsaPublic, 'PUBLIC KEY');\n                this.socket?.send(JSON.stringify({\n                    type: WS_MESSAGE_TYPES.KEY_EXCHANGE,\n                    key: publicKeyPem\n                }));\n                this.isConnected = true;\n                this.processQueue();\n            }\n        };\n\n        this.socket.onmessage = async (event: MessageEvent) => {\n            const rawData = event.data;\n\n            if (this.rsaPublicServer) {\n                if (this.aesServerKey && this.aesKey) {\n                    const decryptedStr = await CryptoService.aesDecrypt(\n                        await CryptoService.blobToUint8Array(rawData),\n                        this.aesKey\n                    );\n                    const decryptedData = JSON.parse(decryptedStr) as WebSocketMessage;\n                    console.log(' :', decryptedData);\n                    \n                    if (decryptedData.type) {\n                        const handler = this.messageHandlers.get(decryptedData.type);\n                        if (handler) {\n                            handler(decryptedData);\n                        }\n                    }\n                } else {\n                    const decryptedStr = await CryptoService.rsaDecrypt(\n                        await CryptoService.blobToUint8Array(rawData),\n                        this.rsaPrivate!\n                    );\n                    const decryptedData = JSON.parse(decryptedStr);\n                    if (decryptedData.type === WS_MESSAGE_TYPES.AES_KEY) {\n                        this.aesServerKey = decryptedData.key;\n                        this.socketReady = true;\n                        console.log('WebSocket    ');\n                        this.processQueue();\n                    }\n                }\n            } else {\n                const data = JSON.parse(rawData);\n                if (data.type === WS_MESSAGE_TYPES.KEY_EXCHANGE) {\n                    this.rsaPublicServer = data.key;\n                    this.aesKey = await CryptoService.generateAESKey();\n                    console.log('AES  ');\n                    if (this.rsaPublicServer) {\n                        const encryptedMessage = await CryptoService.rsaEncrypt(\n                            JSON.stringify({\n                                type: WS_MESSAGE_TYPES.AES_KEY,\n                                key: this.aesKey\n                            }),\n                            this.rsaPublicServer\n                        );\n                        this.socket?.send(encryptedMessage);\n                    }\n                }\n            }\n        };\n\n        this.socket.onclose = () => {\n            this.disconnect();\n            setTimeout(() => this.connect(), 5000);\n        };\n\n        this.socket.onerror = () => {\n            this.disconnect();\n            setTimeout(() => this.connect(), 5000);\n        };\n    }\n\n    public async send(data: WebSocketMessage): Promise<void> {\n        if (!this.isConnected || this.socket?.readyState !== WebSocket.OPEN || !this.socketReady) {\n            console.log('   :', data);\n            this.messageQueue.push(data);\n            return;\n        }\n        const jsonData = JSON.stringify(data);\n        if (this.aesServerKey) {\n            const encrypted = await CryptoService.aesEncrypt(jsonData, this.aesServerKey);\n            this.socket?.send(encrypted);\n        }\n    }\n\n    private disconnect(): void {\n        if (this.socket) {\n            if (this.socket.readyState === WebSocket.OPEN) {\n                this.socket.close();\n            }\n            this.socket = null;\n        }\n        this.isConnected = false;\n        this.rsaPublic = null;\n        this.rsaPrivate = null;\n        this.rsaPublicServer = null;\n        this.aesKey = null;\n        this.aesServerKey = null;\n        this.keysReady = false;\n        this.socketReady = false;\n        console.log('WebSocket ');\n    }\n\n    public addMessageHandler(type: string, handler: (data: WebSocketMessage) => void): void {\n        this.messageHandlers.set(type, handler);\n    }\n\n    public removeMessageHandler(type: string): void {\n        this.messageHandlers.delete(type);\n    }\n}\n\nexport default WebSocketService; ","export const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 ';\n    const k = 1024;\n    const sizes = ['', '', '', '', ''];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;\n};\n\nexport const getFileExtension = (filename: string): string => {\n    return filename.slice((filename.lastIndexOf('.') - 1 >>> 0) + 2);\n};\n\nexport const getMimeType = (filename: string): string => {\n    const ext = getFileExtension(filename).toLowerCase();\n    const mimeTypes: { [key: string]: string } = {\n        'txt': 'text/plain',\n        'pdf': 'application/pdf',\n        'doc': 'application/msword',\n        'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n        'xls': 'application/vnd.ms-excel',\n        'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        'png': 'image/png',\n        'jpg': 'image/jpeg',\n        'jpeg': 'image/jpeg',\n        'gif': 'image/gif',\n        'svg': 'image/svg+xml',\n        'mp3': 'audio/mpeg',\n        'mp4': 'video/mp4',\n        'wav': 'audio/wav',\n        'avi': 'video/x-msvideo',\n        'zip': 'application/zip',\n        'rar': 'application/x-rar-compressed',\n        '7z': 'application/x-7z-compressed'\n    };\n    return mimeTypes[ext] || 'application/octet-stream';\n};\n\nexport const isImageFile = (filename: string): boolean => {\n    const mimeType = getMimeType(filename);\n    return mimeType.startsWith('image/');\n};\n\nexport const generateFileId = (): string => {\n    return Math.random().toString(36).substring(2, 15) + \n           Math.random().toString(36).substring(2, 15);\n};\n\nexport const splitFileIntoChunks = async (file: File, chunkSize: number = 1024 * 1024): Promise<string[]> => {\n    const chunks: string[] = [];\n    const totalChunks = Math.ceil(file.size / chunkSize);\n\n    for (let i = 0; i < totalChunks; i++) {\n        const start = i * chunkSize;\n        const end = Math.min(start + chunkSize, file.size);\n        const chunk = file.slice(start, end);\n        const arrayBuffer = await chunk.arrayBuffer();\n        const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n        chunks.push(base64);\n    }\n\n    return chunks;\n};\n\nexport const assembleChunks = (chunks: string[]): ArrayBuffer => {\n    const binaryString = chunks.map(chunk => atob(chunk)).join('');\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n};\n\nexport const downloadFile = (data: ArrayBuffer, filename: string, mimeType: string): void => {\n    const blob = new Blob([data], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n}; ","import WebSocketService from './WebSocketService';\nimport { WS_MESSAGE_TYPES, WS_ACTIONS } from '../constants/websocket';\nimport { FileUploadMessage, FileDownloadMessage } from '../types/websocket';\nimport { \n    generateFileId, \n    splitFileIntoChunks, \n    assembleChunks, \n    getMimeType, \n    downloadFile \n} from '../utils/fileUtils';\n\nclass FileService {\n    private static instance: FileService;\n    private ws: WebSocketService;\n    private fileDownloadCallbacks: Map<string, (data: ArrayBuffer) => void> = new Map();\n    private fileChunks: Map<string, string[]> = new Map();\n\n    private constructor() {\n        this.ws = WebSocketService.getInstance();\n        this.setupMessageHandlers();\n    }\n\n    public static getInstance(): FileService {\n        if (!FileService.instance) {\n            FileService.instance = new FileService();\n        }\n        return FileService.instance;\n    }\n\n    private setupMessageHandlers(): void {\n        this.ws.addMessageHandler(WS_MESSAGE_TYPES.MESSENGER, (message) => {\n            if (message.action === WS_ACTIONS.DOWNLOAD_FILE) {\n                const downloadMessage = message as FileDownloadMessage;\n                this.handleFileChunk(downloadMessage);\n            }\n        });\n    }\n\n    private handleFileChunk(message: FileDownloadMessage): void {\n        const { fileId, chunkNumber, totalChunks, chunkData } = message.data;\n        \n        if (!this.fileChunks.has(fileId)) {\n            this.fileChunks.set(fileId, new Array(totalChunks).fill(''));\n        }\n\n        const chunks = this.fileChunks.get(fileId)!;\n        chunks[chunkNumber - 1] = chunkData;\n\n        // ,    \n        if (!chunks.includes('')) {\n            const fileData = assembleChunks(chunks);\n            const callback = this.fileDownloadCallbacks.get(fileId);\n            if (callback) {\n                callback(fileData);\n                this.fileDownloadCallbacks.delete(fileId);\n            }\n            this.fileChunks.delete(fileId);\n        }\n    }\n\n    public async uploadFile(file: File): Promise<string> {\n        const fileId = generateFileId();\n        const chunks = await splitFileIntoChunks(file);\n        \n        //    \n        const uploadMessage: FileUploadMessage = {\n            type: WS_MESSAGE_TYPES.MESSENGER,\n            action: WS_ACTIONS.UPLOAD_FILE,\n            data: {\n                fileId,\n                fileName: file.name,\n                fileSize: file.size,\n                mimeType: getMimeType(file.name)\n            }\n        };\n        await this.ws.send(uploadMessage);\n\n        //   \n        for (let i = 0; i < chunks.length; i++) {\n            const downloadMessage: FileDownloadMessage = {\n                type: WS_MESSAGE_TYPES.MESSENGER,\n                action: WS_ACTIONS.DOWNLOAD_FILE,\n                data: {\n                    fileId,\n                    chunkNumber: i + 1,\n                    totalChunks: chunks.length,\n                    chunkData: chunks[i]\n                }\n            };\n            await this.ws.send(downloadMessage);\n        }\n\n        return fileId;\n    }\n\n    public downloadFile(fileId: string, fileName: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            this.fileDownloadCallbacks.set(fileId, (data: ArrayBuffer) => {\n                try {\n                    downloadFile(data, fileName, getMimeType(fileName));\n                    resolve();\n                } catch (error) {\n                    reject(error);\n                }\n            });\n\n            //  \n            const downloadMessage: FileDownloadMessage = {\n                type: WS_MESSAGE_TYPES.MESSENGER,\n                action: WS_ACTIONS.DOWNLOAD_FILE,\n                data: {\n                    fileId,\n                    chunkNumber: 0,\n                    totalChunks: 0,\n                    chunkData: ''\n                }\n            };\n            this.ws.send(downloadMessage);\n        });\n    }\n}\n\nexport default FileService; ","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  Animated,\n  Modal,\n  Alert,\n  Platform,\n  ActivityIndicator,\n  Dimensions,\n} from 'react-native';\nimport {\n  PostResponse, postsAPI, getImageUrl\n} from '../services/api';\nimport LetterAvatar from './LetterAvatar';\nimport { format } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { Video, ResizeMode } from 'expo-av';\nimport FileService from '../services/FileService';\nimport { formatFileSize } from '../utils/fileUtils';\n\ninterface PostCardProps {\n  post: PostResponse;\n  onUpdate: () => void;\n}\n\ninterface MediaContent {\n  Image?: {\n    simple_image?: string;\n    file_name: string;\n    width: number;\n    height: number;\n    orig_name?: string;\n  };\n  Video?: {\n    file_name: string;\n    width: number;\n    height: number;\n    orig_name?: string;\n  };\n  File?: {\n    file_id: string;\n    file_name: string;\n    file_size: number;\n    mime_type: string;\n  };\n}\n\ninterface MediaViewerProps {\n  url: string;\n  type: 'image' | 'video' | 'file';\n  onClose: () => void;\n  onDownload: (url: string, filename: string, fileId?: string) => void;\n  filename: string;\n  fileSize?: number;\n  fileId?: string;\n}\n\nconst PostCard: React.FC<PostCardProps> = ({ post, onUpdate }) => {\n  const [loadingAction, setLoadingAction] = useState<'LIKE' | 'DISLIKE' | null>(null);\n  const [localLikes, setLocalLikes] = useState(post.Likes);\n  const [localDislikes, setLocalDislikes] = useState(post.Dislikes);\n  const [localLiked, setLocalLiked] = useState(post.Liked);\n  const [localDisliked, setLocalDisliked] = useState(post.Disliked);\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null);\n  const [scaleAnim] = useState(new Animated.Value(1));\n  const [modalVisible, setModalVisible] = useState(false);\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const [mediaViewerProps, setMediaViewerProps] = useState<MediaViewerProps | null>(null);\n  const videoRef = useRef(null);\n\n  const handleDownload = async (url: string, filename: string, fileId?: string) => {\n    try {\n      if (fileId) {\n        //   ,  FileService  \n        const fileService = FileService.getInstance();\n        await fileService.downloadFile(fileId, filename);\n      } else {\n        //       \n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      }\n    } catch (error) {\n      console.error('Error downloading file:', error);\n      Alert.alert('', '   ');\n    }\n  };\n\n  const openModal = (props: MediaViewerProps) => {\n    setMediaViewerProps(props);\n    setModalVisible(true);\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 300,\n      useNativeDriver: true,\n    }).start();\n  };\n\n  const closeModal = () => {\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 300,\n      useNativeDriver: true,\n    }).start(() => {\n      setModalVisible(false);\n      setMediaViewerProps(null);\n    });\n  };\n\n  const formatDate = useCallback((dateString: string) => {\n    const date = new Date(dateString);\n    return format(date, 'dd MMMM, HH:mm', { locale: ru });\n  }, []);\n\n  const handleInteraction = async (action: 'LIKE' | 'DISLIKE') => {\n    if (loadingAction) return;\n    \n    try {\n      setLoadingAction(action);\n      \n      //   UI\n      if (action === 'LIKE') {\n        if (!localLiked) {\n          setLocalLikes(prev => prev + 1);\n          setLocalLiked('Liked');\n          if (localDisliked) {\n            setLocalDislikes(prev => prev - 1);\n            setLocalDisliked(null);\n          }\n        } else {\n          setLocalLikes(prev => prev - 1);\n          setLocalLiked(null);\n        }\n      } else {\n        if (!localDisliked) {\n          setLocalDislikes(prev => prev + 1);\n          setLocalDisliked('Liked');\n          if (localLiked) {\n            setLocalLikes(prev => prev - 1);\n            setLocalLiked(null);\n          }\n        } else {\n          setLocalDislikes(prev => prev - 1);\n          setLocalDisliked(null);\n        }\n      }\n\n      await postsAPI.interactWithPost(action, post.ID);\n      onUpdate();\n    } catch (error) {\n      console.error('Error interacting with post:', error);\n      setLocalLikes(post.Likes);\n      setLocalDislikes(post.Dislikes);\n      setLocalLiked(post.Liked);\n      setLocalDisliked(post.Disliked);\n      Alert.alert('', '   ');\n    } finally {\n      setLoadingAction(null);\n    }\n  };\n\n  const handleReactionPress = useCallback((type: 'like' | 'dislike') => {\n    //  \n    Animated.sequence([\n      Animated.timing(scaleAnim, {\n        toValue: 0.95,\n        duration: 100,\n        useNativeDriver: false,\n      }),\n      Animated.spring(scaleAnim, {\n        toValue: 1,\n        friction: 4,\n        useNativeDriver: false,\n      }),\n    ]).start();\n\n    if (type === 'like') {\n      handleInteraction('LIKE');\n    } else {\n      handleInteraction('DISLIKE');\n    }\n  }, [scaleAnim, handleInteraction]);\n\n  const renderFileContent = (file: MediaContent['File']) => {\n    if (!file) return null;\n\n    return (\n      <TouchableOpacity\n        onPress={() => handleDownload('', file.file_name, file.file_id)}\n        style={styles.fileContainer}\n      >\n        <Image\n          source={require('../assets/file.png')}\n          style={styles.fileIcon}\n        />\n        <View style={styles.fileInfo}>\n          <Text style={styles.fileName}>{file.file_name}</Text>\n          <Text style={styles.fileSize}>{formatFileSize(file.file_size)}</Text>\n        </View>\n        <Icon name=\"download\" size={24} color=\"#666\" />\n      </TouchableOpacity>\n    );\n  };\n\n  const renderMediaContent = () => {\n    if (!post.Content) return null;\n\n    try {\n      const content: MediaContent = JSON.parse(post.Content);\n      const screenWidth = Dimensions.get('window').width - 30;\n\n      if (content.File) {\n        return renderFileContent(content.File);\n      }\n\n      if (content.Image) {\n        const aspectRatio = content.Image.width / content.Image.height;\n        const imageHeight = screenWidth / aspectRatio;\n        const maxHeight = screenWidth * 0.8;\n\n        const imageUrl = content.Image.simple_image\n          ? `https://elemsocial.com/Content/Simple/${content.Image.simple_image}`\n          : `https://elemsocial.com/Content/Posts/Images/${content.Image.file_name}`;\n        \n        const filename = content.Image.orig_name || content.Image.file_name;\n\n        return (\n          <TouchableOpacity\n            onPress={() => openModal({\n              url: imageUrl,\n              type: 'image',\n              filename,\n              onClose: closeModal,\n              onDownload: handleDownload\n            })}\n            style={[styles.mediaContainer, { height: Math.min(imageHeight, maxHeight) }]}\n          >\n            <Image\n              source={{ uri: imageUrl }}\n              style={styles.mediaContent}\n              resizeMode=\"contain\"\n            />\n          </TouchableOpacity>\n        );\n      }\n\n      if (content.Video) {\n        const aspectRatio = content.Video.width / content.Video.height;\n        const videoHeight = screenWidth / aspectRatio;\n        const maxHeight = screenWidth * 0.8;\n        const videoUrl = `https://elemsocial.com/Content/Posts/Video/${content.Video.file_name}`;\n        const filename = content.Video.orig_name ?? content.Video.file_name;\n\n        return (\n          <TouchableOpacity\n            onPress={() => {\n              if (content.Video) {\n                openModal({\n                  url: videoUrl,\n                  type: 'video',\n                  filename,\n                  onClose: closeModal,\n                  onDownload: handleDownload\n                });\n              }\n            }}\n            style={[styles.mediaContainer, { height: Math.min(videoHeight, maxHeight) }]}\n          >\n            <Video\n              ref={videoRef}\n              source={{ uri: videoUrl }}\n              style={styles.mediaContent}\n              resizeMode={ResizeMode.CONTAIN}\n              useNativeControls\n              shouldPlay={false}\n              isLooping\n            />\n          </TouchableOpacity>\n        );\n      }\n    } catch (error) {\n      console.error('Error parsing content:', error);\n      return null;\n    }\n\n    return null;\n  };\n\n  const renderMediaViewer = () => {\n    if (!mediaViewerProps) return null;\n\n    return (\n      <Modal\n        transparent\n        visible={modalVisible}\n        onRequestClose={closeModal}\n      >\n        <Animated.View \n          style={[\n            styles.modalOverlay,\n            {\n              opacity: fadeAnim,\n            },\n          ]}\n        >\n          <TouchableOpacity\n            style={styles.modalContent}\n            activeOpacity={1}\n            onPress={closeModal}\n          >\n            {mediaViewerProps.type === 'image' ? (\n              <Image\n                source={{ uri: mediaViewerProps.url }}\n                style={styles.fullScreenMedia}\n                resizeMode=\"contain\"\n              />\n            ) : (\n              <Video\n                ref={videoRef}\n                source={{ uri: mediaViewerProps.url }}\n                style={styles.fullScreenMedia}\n                resizeMode={ResizeMode.CONTAIN}\n                useNativeControls\n                shouldPlay={true}\n                isLooping\n              />\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.closeButton}\n            onPress={closeModal}\n          >\n            <Text style={styles.closeButtonText}></Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.downloadButton}\n            onPress={() => mediaViewerProps.onDownload(mediaViewerProps.url, mediaViewerProps.filename, mediaViewerProps.fileId)}\n          >\n            <Image\n              source={require('../assets/download.png')}\n              style={styles.downloadIcon}\n            />\n          </TouchableOpacity>\n        </Animated.View>\n      </Modal>\n    );\n  };\n\n  useEffect(() => {\n    if (post.Avatar && post.Avatar !== 'None') {\n      loadAvatar();\n    }\n  }, [post.Avatar]);\n\n  const loadAvatar = async () => {\n    try {\n      if (post.Avatar && post.Avatar !== 'None') {\n        const url = await getImageUrl(post.Avatar);\n        setAvatarUrl(url);\n      }\n    } catch (error) {\n      console.error('Error loading avatar:', error);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <TouchableOpacity style={styles.userInfo}>\n          <View style={styles.avatarContainer}>\n            {avatarUrl ? (\n              <Image\n                source={{ uri: avatarUrl }}\n                style={styles.avatar}\n              />\n            ) : (\n              <LetterAvatar name={post.Name || post.Username} size={40} />\n            )}\n          </View>\n          <View style={styles.userTextInfo}>\n            <View style={styles.nameContainer}>\n              <Text style={styles.name}>{post.Name}</Text>\n              {post.UserIcons && post.UserIcons.includes('VERIFY') && (\n                <Image\n                  source={require('../assets/verify.png')}\n                  style={styles.verifiedBadge}\n                />\n              )}\n            </View>\n            <Text style={styles.username}>@{post.Username}</Text>\n          </View>\n        </TouchableOpacity>\n        <Text style={styles.date}>{formatDate(post.Date)}</Text>\n      </View>\n\n      <Text style={styles.text}>{post.Text}</Text>\n\n      {renderMediaContent()}\n      {renderMediaViewer()}\n\n      <View style={styles.footer}>\n        <Animated.View style={[\n          styles.reactions, \n          { transform: [{ scale: scaleAnim }] },\n          loadingAction ? styles.pointerEventsNone : styles.pointerEventsAuto\n        ]}>\n          <TouchableOpacity\n            style={[styles.reactionButton, localLiked && styles.reactionButtonActive]}\n            onPress={() => handleReactionPress('like')}\n          >\n            <Image\n              source={require('../assets/like.png')}\n              style={styles.reactionIcon}\n              tintColor={localLiked ? '#007AFF' : '#666'}\n              resizeMode=\"contain\"\n            />\n            <Text style={[styles.reactionCount, localLiked && styles.reactionCountActive]}>\n              {localLikes}\n            </Text>\n            {loadingAction === 'LIKE' && (\n              <Animated.View style={styles.reactionLoader}>\n                <ActivityIndicator\n                  size=\"small\"\n                  color={localLiked ? '#007AFF' : '#666'}\n                />\n              </Animated.View>\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.reactionButton, localDisliked && styles.dislikeButtonActive]}\n            onPress={() => handleReactionPress('dislike')}\n          >\n            <Image\n              source={require('../assets/dislike.png')}\n              style={styles.reactionIcon}\n              tintColor={localDisliked ? '#FF3B30' : '#666'}\n              resizeMode=\"contain\"\n            />\n            <Text style={[styles.reactionCount, localDisliked && styles.dislikeCountActive]}>\n              {localDislikes}\n            </Text>\n            {loadingAction === 'DISLIKE' && (\n              <Animated.View style={styles.reactionLoader}>\n                <ActivityIndicator\n                  size=\"small\"\n                  color={localDisliked ? '#FF3B30' : '#666'}\n                />\n              </Animated.View>\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.reactionButton}\n          >\n            <Image\n              source={require('../assets/comment.png')}\n              style={styles.reactionIcon}\n              tintColor=\"#666\"\n              resizeMode=\"contain\"\n            />\n            <Text style={styles.reactionCount}>\n              {post.Comments}\n            </Text>\n          </TouchableOpacity>\n        </Animated.View>\n\n        {post.MyPost && (\n          <View style={styles.myPostBadge}>\n            <Text style={styles.myPostText}> </Text>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#fff',\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  avatarContainer: {\n    width: 40,\n    height: 40,\n    marginRight: 10,\n    borderRadius: 20,\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n  },\n  avatar: {\n    width: '100%',\n    height: '100%',\n  },\n  userTextInfo: {\n    flex: 1,\n  },\n  nameContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  name: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#000',\n  },\n  verifiedBadge: {\n    width: 16,\n    height: 16,\n    marginLeft: 1,\n  },\n  username: {\n    fontSize: 14,\n    color: '#666',\n  },\n  date: {\n    fontSize: 12,\n    color: '#666',\n  },\n  text: {\n    fontSize: 16,\n    color: '#000',\n    marginBottom: 10,\n    lineHeight: 22,\n  },\n  mediaContainer: {\n    width: '100%',\n    backgroundColor: '#000',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginVertical: 5,\n  },\n  mediaContent: {\n    width: '100%',\n    height: '100%',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  fullScreenMedia: {\n    width: '100%',\n    height: '100%',\n  },\n  closeButton: {\n    position: 'absolute',\n    top: 40,\n    right: 20,\n    zIndex: 2,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    color: '#fff',\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  downloadButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 40,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    borderRadius: 25,\n    padding: 12,\n    zIndex: 1,\n  },\n  downloadIcon: {\n    width: 24,\n    height: 24,\n    tintColor: '#fff',\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  reactions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    gap: 20,\n  },\n  reactionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: '#f8f8f8',\n  },\n  reactionButtonActive: {\n    backgroundColor: '#E3F2FD',\n  },\n  dislikeButtonActive: {\n    backgroundColor: '#FFE5E5',\n  },\n  reactionIcon: {\n    width: 24,\n    height: 24,\n  },\n  reactionIconActive: {\n    tintColor: '#007AFF',\n  },\n  dislikeIconActive: {\n    tintColor: '#FF3B30',\n  },\n  reactionCount: {\n    fontSize: 15,\n    fontWeight: '600',\n    color: '#666',\n    marginLeft: 6,\n  },\n  reactionCountActive: {\n    color: '#007AFF',\n  },\n  dislikeCountActive: {\n    color: '#FF3B30',\n  },\n  reactionLoader: {\n    marginLeft: 4,\n  },\n  pointerEventsAuto: {\n    pointerEvents: 'auto',\n  },\n  pointerEventsNone: {\n    pointerEvents: 'none',\n  },\n  myPostBadge: {\n    backgroundColor: '#E3F2FD',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  myPostText: {\n    fontSize: 12,\n    color: '#007AFF',\n    fontWeight: '500',\n  },\n  videoOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'flex-end',\n    alignItems: 'flex-end',\n    padding: 10,\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  },\n  fileContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 12,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  fileIcon: {\n    width: 40,\n    height: 40,\n    marginRight: 12,\n  },\n  fileInfo: {\n    flex: 1,\n  },\n  fileName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#333',\n    marginBottom: 4,\n  },\n  fileSize: {\n    fontSize: 14,\n    color: '#666',\n  },\n});\n\nexport default PostCard;\n","import React, { useState, useRef } from 'react';\nimport {\n  View,\n  TextInput,\n  TouchableOpacity,\n  Text,\n  StyleSheet,\n  Image,\n  Platform,\n  ActivityIndicator,\n} from 'react-native';\nimport { postsAPI, FileInfo } from '../services/api';\nimport ErrorMessage from './ErrorMessage';\nimport FileService from '../services/FileService';\nimport { formatFileSize, isImageFile } from '../utils/fileUtils';\n\ninterface CreatePostProps {\n  onPostCreated?: (postId: string) => void;\n}\n\nconst CreatePost: React.FC<CreatePostProps> = ({ onPostCreated }) => {\n  const [text, setText] = useState('');\n  const [files, setFiles] = useState<File[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [uploadProgress, setUploadProgress] = useState<{ [key: string]: number }>({});\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFiles = Array.from(event.target.files || []);\n    if (selectedFiles.length > 0) {\n      //     \n      setFiles([selectedFiles[0]]);\n    }\n  };\n\n  const removeFile = (index: number) => {\n    setFiles(prev => prev.filter((_, i) => i !== index));\n    //      \n    setUploadProgress(prev => {\n      const newProgress = { ...prev };\n      delete newProgress[index];\n      return newProgress;\n    });\n  };\n\n  const handleSubmit = async () => {\n    if (!text.trim() && files.length === 0) {\n      setError('   ');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const fileService = FileService.getInstance();\n      const uploadedFiles: FileInfo[] = [];\n\n      //    WebSocket\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        try {\n          const fileId = await fileService.uploadFile(file);\n          uploadedFiles.push({\n            file_id: fileId,\n            file_name: file.name,\n            file_size: file.size,\n            mime_type: file.type\n          });\n          setUploadProgress(prev => ({ ...prev, [i]: 100 }));\n        } catch (error) {\n          console.error('Error uploading file:', error);\n          setError(`    ${file.name}`);\n          return;\n        }\n      }\n\n      //     \n      const response = await postsAPI.createPost(text, uploadedFiles);\n      \n      if (response.Type === 'Verify' && response.Content) {\n        setText('');\n        setFiles([]);\n        setUploadProgress({});\n        if (onPostCreated) {\n          onPostCreated(response.Content);\n        }\n      } else {\n        setError('   ');\n      }\n    } catch (error) {\n      console.error('Error creating post:', error);\n      setError('    ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <ErrorMessage \n        message={error}\n        onClose={() => setError('')}\n      />\n      \n      <TextInput\n        style={styles.input}\n        placeholder=\"   ?\"\n        value={text}\n        onChangeText={setText}\n        multiline\n        numberOfLines={3}\n        editable={!loading}\n      />\n\n      {files.length > 0 && (\n        <View style={styles.filesContainer}>\n          {files.map((file, index) => (\n            <View key={index} style={styles.fileItem}>\n              {isImageFile(file.name) ? (\n                <Image\n                  source={{ uri: URL.createObjectURL(file) }}\n                  style={styles.filePreview}\n                />\n              ) : (\n                <View style={styles.fileIcon}>\n                  <Image \n                    source={require('../assets/file.png')}\n                    style={styles.fileIconImage}\n                  />\n                </View>\n              )}\n              <View style={styles.fileInfo}>\n                <Text style={styles.fileName}>{file.name}</Text>\n                <Text style={styles.fileSize}>{formatFileSize(file.size)}</Text>\n                {uploadProgress[index] !== undefined && (\n                  <View style={styles.progressBar}>\n                    <View \n                      style={[\n                        styles.progressFill,\n                        { width: `${uploadProgress[index]}%` }\n                      ]} \n                    />\n                  </View>\n                )}\n              </View>\n              <TouchableOpacity\n                style={styles.removeButton}\n                onPress={() => removeFile(index)}\n                disabled={loading}\n              >\n                <Text style={styles.removeButtonText}></Text>\n              </TouchableOpacity>\n            </View>\n          ))}\n        </View>\n      )}\n\n      <View style={styles.controls}>\n        <TouchableOpacity\n          style={styles.addFileButton}\n          onPress={() => {\n            if (fileInputRef.current) {\n              fileInputRef.current.click();\n            }\n          }}\n          disabled={loading}\n        >\n          <Image \n            source={require('../assets/addfile.png')}\n            style={styles.addFileIcon}\n          />\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          style={[styles.submitButton, loading && styles.submitButtonDisabled]}\n          onPress={handleSubmit}\n          disabled={loading}\n        >\n          {loading ? (\n            <ActivityIndicator color=\"#fff\" />\n          ) : (\n            <Text style={styles.submitButtonText}></Text>\n          )}\n        </TouchableOpacity>\n      </View>\n\n      {Platform.OS === 'web' && (\n        <input\n          type=\"file\"\n          ref={fileInputRef}\n          style={{ display: 'none' }}\n          onChange={handleFileSelect}\n          multiple={false}\n          accept=\"*/*\"\n        />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    padding: 15,\n    marginBottom: 15,\n    ...(Platform.OS === 'web' ? {\n      boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    } : {\n      shadowColor: '#000',\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.1,\n      shadowRadius: 4,\n      elevation: 2,\n    }),\n  },\n  input: {\n    fontSize: 16,\n    minHeight: 80,\n    textAlignVertical: 'top',\n    marginBottom: 10,\n    ...(Platform.OS === 'web' && {\n      outlineStyle: 'none',\n    }),\n  },\n  filesContainer: {\n    marginBottom: 10,\n  },\n  fileItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n    backgroundColor: '#f8f8f8',\n    borderRadius: 8,\n    padding: 8,\n  },\n  filePreview: {\n    width: 40,\n    height: 40,\n    borderRadius: 4,\n    marginRight: 8,\n  },\n  fileIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 4,\n    backgroundColor: '#eee',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 8,\n  },\n  fileIconImage: {\n    width: 24,\n    height: 24,\n  },\n  fileInfo: {\n    flex: 1,\n  },\n  fileName: {\n    fontSize: 14,\n    color: '#333',\n    marginBottom: 2,\n  },\n  fileSize: {\n    fontSize: 12,\n    color: '#666',\n    marginBottom: 4,\n  },\n  progressBar: {\n    height: 4,\n    backgroundColor: '#eee',\n    borderRadius: 2,\n    overflow: 'hidden',\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: '#007AFF',\n  },\n  removeButton: {\n    padding: 8,\n  },\n  removeButtonText: {\n    fontSize: 20,\n    color: '#666',\n  },\n  controls: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  addFileButton: {\n    padding: 8,\n    borderRadius: 8,\n    backgroundColor: '#f0f0f0',\n  },\n  addFileIcon: {\n    width: 24,\n    height: 24,\n  },\n  submitButton: {\n    backgroundColor: '#007AFF',\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 8,\n    ...(Platform.OS === 'web' && {\n      cursor: 'pointer',\n    }),\n  },\n  submitButtonDisabled: {\n    backgroundColor: '#ccc',\n  },\n  submitButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default CreatePost; ","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  FlatList,\n  StyleSheet,\n  RefreshControl,\n  ActivityIndicator,\n  Text,\n  TouchableOpacity,\n  Animated,\n  Platform,\n} from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { PostResponse, postsAPI } from '../services/api';\nimport PostCard from '../components/PostCard';\nimport { AuthContext } from '../navigation';\nimport CreatePost from '../components/CreatePost';\nimport { connectWebSocket } from '../services/api';\n\ntype FeedType = 'LATEST' | 'REC' | 'SUBSCRIPTIONS';\ntype FeedScreenNavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nconst POSTS_PER_PAGE = 25;\nconst RETRY_INTERVAL = 5000;\n\nconst FeedScreen = () => {\n  const navigation = useNavigation<FeedScreenNavigationProp>();\n  const [feedType, setFeedType] = useState<FeedType>('LATEST');\n  const [posts, setPosts] = useState<PostResponse[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMorePosts, setHasMorePosts] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const retryTimeoutRef = useRef<NodeJS.Timeout>();\n  const pageRef = useRef(0);\n  \n  //  \n  const loadingOpacity = useRef(new Animated.Value(0)).current;\n  const contentOpacity = useRef(new Animated.Value(1)).current;\n\n  const { logout } = React.useContext(AuthContext);\n\n  useEffect(() => {\n    //   WebSocket   \n    connectWebSocket().catch(console.error);\n    fetchPosts(true);\n  }, [feedType]);\n\n  useEffect(() => {\n    return () => {\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const animateLoading = useCallback((show: boolean) => {\n    Animated.parallel([\n      Animated.timing(loadingOpacity, {\n        toValue: show ? 1 : 0,\n        duration: 200,\n        useNativeDriver: false,\n      }),\n      Animated.timing(contentOpacity, {\n        toValue: show ? 0.3 : 1,\n        duration: 200,\n        useNativeDriver: false,\n      }),\n    ]).start();\n  }, []);\n\n  const handleLogin = useCallback(async () => {\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n    }\n    try {\n      //   \n      await logout();\n      \n      //       \n      setPosts([]);\n      setError(null);\n      setLoading(false);\n      setRefreshing(false);\n      setLoadingMore(false);\n    } catch (error) {\n      console.error('Error logging out:', error);\n    }\n  }, [logout]);\n\n  const fetchPosts = useCallback(async (refresh = false) => {\n    try {\n      if (!refresh && loadingMore) return;\n\n      const startIndex = refresh ? 0 : pageRef.current * POSTS_PER_PAGE;\n      console.log('Fetching posts:', { feedType, startIndex, refresh });\n\n      if (refresh) {\n        setLoading(true);\n        pageRef.current = 0;\n        //  \n        if (!error && !refreshing) {\n          animateLoading(true);\n        }\n      } else {\n        setLoadingMore(true);\n      }\n\n      const newPosts = await postsAPI.getPosts(feedType, startIndex);\n      console.log('Received posts:', newPosts.length);\n      \n      //   LATEST   -  \n      if (feedType === 'LATEST' && newPosts.length === 0 && startIndex === 0) {\n        throw new Error('   ');\n      }\n      \n      if (refresh) {\n        setPosts(newPosts);\n      } else {\n        setPosts(prev => [...prev, ...newPosts]);\n      }\n      \n      setHasMorePosts(newPosts.length === POSTS_PER_PAGE);\n      if (newPosts.length === POSTS_PER_PAGE) {\n        pageRef.current += 1;\n      }\n      setError(null);\n\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n      setError('  \\n\\n   ,     VPN');\n      \n      //      LATEST  \n      if (feedType === 'LATEST') {\n        if (retryTimeoutRef.current) {\n          clearTimeout(retryTimeoutRef.current);\n        }\n        const delay = RETRY_INTERVAL + Math.random() * 1000;\n        retryTimeoutRef.current = setTimeout(() => {\n          fetchPosts(true);\n        }, delay);\n      }\n    } finally {\n      //           pull-to-refresh\n      if (!error && !refreshing) {\n        animateLoading(false);\n      }\n      setLoading(false);\n      setRefreshing(false);\n      setLoadingMore(false);\n    }\n  }, [feedType, loadingMore, error, refreshing]);\n\n  const updateSinglePost = useCallback(async (postId: string) => {\n    try {\n      const updatedPost = await postsAPI.loadPost(postId);\n      setPosts(prevPosts => \n        prevPosts.map(post => \n          post.ID === postId ? updatedPost : post\n        )\n      );\n    } catch (error) {\n      console.error('Error updating post:', error);\n    }\n  }, []);\n\n  const handlePostCreated = async (postId: string) => {\n    try {\n      const newPost = await postsAPI.getPost(postId);\n      setPosts(prev => [newPost, ...prev]);\n    } catch (error) {\n      console.error('Error loading new post:', error);\n    }\n  };\n\n  const handleRefresh = useCallback(() => {\n    console.log('Refreshing posts...');\n    setRefreshing(true);\n    fetchPosts(true);\n  }, [fetchPosts]);\n\n  const handleLoadMore = useCallback(() => {\n    console.log('Loading more posts...');\n    if (hasMorePosts && !loadingMore && !refreshing) {\n      fetchPosts(false);\n    }\n  }, [hasMorePosts, loadingMore, refreshing, fetchPosts]);\n\n  const handleChangeFeedType = useCallback((type: FeedType) => {\n    if (type === feedType) return;\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n    }\n    console.log('Changing feed type to:', type);\n    setPosts([]);\n    setHasMorePosts(true);\n    pageRef.current = 0;\n    setFeedType(type);\n  }, [feedType]);\n\n  const renderPost = useCallback(({ item }: { item: PostResponse }) => {\n    return (\n      <PostCard\n        post={item}\n        onUpdate={() => updateSinglePost(item.ID)}\n      />\n    );\n  }, [updateSinglePost]);\n\n  const renderHeader = useCallback(() => (\n    <View style={styles.header}>\n      <CreatePost onPostCreated={handlePostCreated} />\n      <View style={styles.feedTypeContainer}>\n        <TouchableOpacity\n          style={[styles.feedTypeButton, feedType === 'LATEST' && styles.activeFeedType]}\n          onPress={() => handleChangeFeedType('LATEST')}\n        >\n          <Text style={[styles.feedTypeText, feedType === 'LATEST' && styles.activeFeedTypeText]}>\n            \n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.feedTypeButton, feedType === 'REC' && styles.activeFeedType]}\n          onPress={() => handleChangeFeedType('REC')}\n        >\n          <Text style={[styles.feedTypeText, feedType === 'REC' && styles.activeFeedTypeText]}>\n            \n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[styles.feedTypeButton, feedType === 'SUBSCRIPTIONS' && styles.activeFeedType]}\n          onPress={() => handleChangeFeedType('SUBSCRIPTIONS')}\n        >\n          <Text style={[styles.feedTypeText, feedType === 'SUBSCRIPTIONS' && styles.activeFeedTypeText]}>\n            \n          </Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  ), [feedType, handleChangeFeedType]);\n\n  const renderError = useCallback(() => {\n    if (!error) return null;\n    return (\n      <View style={styles.errorContainer}>\n        <Text style={styles.errorText}>{error}</Text>\n        <TouchableOpacity style={styles.retryButton} onPress={() => fetchPosts(true)}>\n          <Text style={styles.retryButtonText}></Text>\n        </TouchableOpacity>\n        <TouchableOpacity style={styles.loginButton} onPress={handleLogin}>\n          <Text style={styles.loginButtonText}> </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }, [error, handleLogin]);\n\n  const renderEmpty = useCallback(() => {\n    if (loading) return null;\n    return (\n      <View style={styles.emptyContainer}>\n        <Text style={styles.emptyText}>\n          {error ? '' : ' '}\n        </Text>\n      </View>\n    );\n  }, [loading, error]);\n\n  const renderFooter = useCallback(() => {\n    if (!loadingMore) return null;\n    return (\n      <View style={styles.footer}>\n        <ActivityIndicator size=\"small\" color=\"#007AFF\" />\n      </View>\n    );\n  }, [loadingMore]);\n\n  if (loading && posts.length === 0) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color=\"#007AFF\" />\n        </View>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={posts}\n        renderItem={renderPost}\n        keyExtractor={item => `${feedType}_${item.ID}`}\n        onEndReached={handleLoadMore}\n        onEndReachedThreshold={0.5}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={handleRefresh}\n            colors={['#007AFF']}\n            tintColor=\"#007AFF\"\n          />\n        }\n        ListEmptyComponent={renderEmpty}\n        ListFooterComponent={renderFooter}\n        contentContainerStyle={styles.listContent}\n        ListHeaderComponent={renderHeader}\n      />\n\n      {renderError()}\n    </View>\n  );\n};\n\n//       \nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  contentContainer: {\n    flex: 1,\n    position: 'relative',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  header: {\n    padding: 15,\n  },\n  feedTypeContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    zIndex: 1,\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 1,\n      },\n      android: {\n        elevation: 2,\n      },\n    }),\n  },\n  feedTypeButton: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderRadius: 20,\n    marginHorizontal: 4,\n  },\n  activeFeedType: {\n    backgroundColor: '#E3F2FD',\n  },\n  feedTypeText: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: '#666',\n  },\n  activeFeedTypeText: {\n    color: '#007AFF',\n  },\n  content: {\n    flex: 1,\n  },\n  listContent: {\n    flexGrow: 1,\n  },\n  loadingOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.8)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  pointerEventsAuto: {\n    pointerEvents: 'auto',\n  },\n  pointerEventsNone: {\n    pointerEvents: 'none',\n  },\n  footer: {\n    padding: 20,\n    alignItems: 'center',\n  },\n  errorContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    padding: 20,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#eee',\n    alignItems: 'center',\n  },\n  errorText: {\n    fontSize: 14,\n    color: '#FF3B30',\n    textAlign: 'center',\n    marginBottom: 15,\n  },\n  retryButton: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 20,\n    marginBottom: 10,\n  },\n  retryButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  loginButton: {\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n  },\n  loginButtonText: {\n    color: '#007AFF',\n    fontSize: 16,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n  },\n});\n\nexport default FeedScreen;\n","import React, { useEffect, useState, useContext } from 'react';\nimport {\n  View,\n  Text,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  ActivityIndicator,\n  Platform,\n  Alert,\n  RefreshControl,\n  FlatList,\n  Linking,\n  Dimensions,\n  ScrollView,\n} from 'react-native';\nimport { profileAPI, getImageUrl, postsAPI, ProfileData } from '../services/api';\nimport LetterAvatar from '../components/LetterAvatar';\nimport { AuthContext } from '../navigation';\nimport PostCard from '../components/PostCard';\nimport { PostResponse } from '../services/api';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport ErrorMessage from '../components/ErrorMessage';\n\nconst POSTS_PER_PAGE = 10;\nconst { width } = Dimensions.get('window');\n\ninterface ProfileScreenProps {\n  username?: string;\n}\n\nconst ProfileScreen: React.FC<ProfileScreenProps> = ({ username }) => {\n  const { logout } = useContext(AuthContext);\n  const [profile, setProfile] = useState<ProfileData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null);\n  const [coverUrl, setCoverUrl] = useState<string | null>(null);\n  const [iconUrls, setIconUrls] = useState<string[]>([]);\n  const [posts, setPosts] = useState<PostResponse[]>([]);\n  const [loadingPosts, setLoadingPosts] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [hasMorePosts, setHasMorePosts] = useState(true);\n\n  useEffect(() => {\n    fetchProfile();\n  }, [username]);\n\n  const loadIcons = async (icons: string[]) => {\n    const loadedUrls: string[] = [];\n    for (const icon of icons) {\n      try {\n        const url = await getImageUrl(icon);\n        loadedUrls.push(url);\n      } catch (error) {\n        console.error('Error loading icon:', error);\n      }\n    }\n    setIconUrls(loadedUrls);\n  };\n\n  const fetchProfile = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      let data;\n      \n      if (username) {\n        data = await profileAPI.getProfile(username);\n      } else {\n        data = await profileAPI.getMyProfile();\n      }\n      \n      setProfile(data);\n      \n      if (data.avatar && data.avatar !== 'None') {\n        try {\n          const url = await getImageUrl(data.avatar);\n          setAvatarUrl(url);\n        } catch (error) {\n          console.error('Error loading avatar:', error);\n          setError('   ');\n        }\n      }\n\n      if (data.cover && data.cover !== 'None') {\n        try {\n          const url = await getImageUrl(data.cover);\n          setCoverUrl(url);\n        } catch (error) {\n          console.error('Error loading cover:', error);\n          setError('   ');\n        }\n      }\n\n      if (data.icons && data.icons.length > 0) {\n        loadIcons(data.icons);\n      }\n      \n      if (data.id) {\n        fetchUserPosts(true);\n      }\n    } catch (error) {\n      console.error('Error fetching profile:', error);\n      setError('   .        .');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchUserPosts = async (refresh = false) => {\n    if (!profile?.id || (!refresh && loadingPosts)) return;\n\n    try {\n      setLoadingPosts(true);\n      const startIndex = refresh ? 0 : posts.length;\n      const newPosts = await postsAPI.getUserPosts(profile.id.toString(), startIndex);\n      \n      if (refresh) {\n        setPosts(newPosts);\n      } else {\n        setPosts(prev => [...prev, ...newPosts]);\n      }\n      \n      setHasMorePosts(newPosts.length === POSTS_PER_PAGE);\n    } catch (error) {\n      console.error('Error fetching user posts:', error);\n      Alert.alert('', '   ');\n    } finally {\n      setLoadingPosts(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchProfile();\n  };\n\n  const handleLoadMore = () => {\n    if (hasMorePosts && !loadingPosts) {\n      fetchUserPosts();\n    }\n  };\n\n  const handlePostUpdate = () => {\n    fetchUserPosts(true);\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (error) {\n      console.error('Error logging out:', error);\n      Alert.alert('', '    ');\n    }\n  };\n\n  if (loading) {\n    return (\n      <View style={styles.centered}>\n        <ActivityIndicator size=\"large\" color=\"#007AFF\" />\n      </View>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <View style={styles.centered}>\n        <Text>   </Text>\n      </View>\n    );\n  }\n\n  const renderPost = ({ item }: { item: PostResponse }) => (\n    <PostCard post={item} onUpdate={handlePostUpdate} />\n  );\n\n  const renderFooter = () => {\n    if (!loadingPosts) return null;\n    return (\n      <View style={styles.footer}>\n        <ActivityIndicator size=\"small\" color=\"#007AFF\" />\n      </View>\n    );\n  };\n\n  const renderStats = () => {\n    const stats = [\n      { label: '', value: profile.posts },\n      { label: '', value: profile.subscribers },\n      { label: '', value: profile.subscriptions }\n    ];\n\n    return (\n      <View style={styles.stats}>\n        {stats.map((stat, index) => (\n          <View key={stat.label} style={styles.statItem}>\n            <Text style={styles.statNumber}>\n              {stat.value?.toLocaleString() || '0'}\n            </Text>\n            <Text style={styles.statLabel}>{stat.label}</Text>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  const renderHeader = () => (\n    <View style={styles.headerContainer}>\n      {/* Cover Image */}\n      <View style={styles.coverContainer}>\n        {coverUrl ? (\n          <Image \n            source={{ uri: coverUrl }}\n            style={styles.coverImage}\n            resizeMode=\"cover\"\n          />\n        ) : (\n          <View style={[styles.coverImage, styles.defaultCover]} />\n        )}\n      </View>\n\n      {/* Profile Info */}\n      <View style={styles.profileInfo}>\n        <View style={styles.avatarWrapper}>\n          {avatarUrl ? (\n            <Image \n              source={{ uri: avatarUrl }}\n              style={styles.avatar}\n            />\n          ) : (\n            <LetterAvatar \n              name={profile?.name || profile?.username || ''} \n              size={100}\n            />\n          )}\n        </View>\n\n        <View style={styles.nameContainer}>\n          <Text style={styles.name}>{profile?.name || ' '}</Text>\n          <Text style={styles.username}>@{profile?.username}</Text>\n          {profile?.description && (\n            <Text style={styles.description}>{profile.description}</Text>\n          )}\n        </View>\n\n        {renderStats()}\n\n        {profile?.icons && profile.icons.length > 0 && (\n          <View style={styles.iconsContainer}>\n            {iconUrls.map((iconUrl, index) => (\n              <Image \n                key={index}\n                source={{ uri: iconUrl }}\n                style={styles.icon}\n              />\n            ))}\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  return (\n    <ScrollView\n      style={styles.container}\n      refreshControl={\n        <RefreshControl refreshing={refreshing} onRefresh={handleRefresh} />\n      }\n    >\n      <ErrorMessage \n        message={error} \n        onClose={() => setError('')}\n      />\n      \n      {loading ? (\n        <ActivityIndicator size=\"large\" color=\"#007AFF\" style={styles.loader} />\n      ) : profile ? (\n        <>\n          {/* Profile content */}\n          <View style={styles.coverContainer}>\n            {coverUrl && (\n              <Image source={{ uri: coverUrl }} style={styles.coverImage} />\n            )}\n          </View>\n          \n          <View style={styles.profileInfo}>\n            <View style={styles.avatarWrapper}>\n              {avatarUrl ? (\n                <Image source={{ uri: avatarUrl }} style={styles.avatar} />\n              ) : (\n                <LetterAvatar \n                  name={profile?.name || profile?.username || ''} \n                  size={100}\n                />\n              )}\n            </View>\n            \n            <Text style={styles.name}>{profile.name}</Text>\n            <Text style={styles.username}>@{profile.username}</Text>\n            \n            {profile.description && (\n              <Text style={styles.description}>{profile.description}</Text>\n            )}\n            \n            {renderStats()}\n            \n            {profile.my_profile && (\n              <TouchableOpacity\n                style={styles.logoutButton}\n                onPress={handleLogout}\n              >\n                <Text style={styles.logoutButtonText}></Text>\n              </TouchableOpacity>\n            )}\n          </View>\n          \n          {/* Posts section */}\n          <View style={styles.postsContainer}>\n            {loadingPosts ? (\n              <ActivityIndicator size=\"small\" color=\"#007AFF\" />\n            ) : posts.length > 0 ? (\n              posts.map((post) => (\n                <View key={post.ID} style={styles.post}>\n                  <Text style={styles.postText}>{post.Text}</Text>\n                  {/* Add more post content here */}\n                </View>\n              ))\n            ) : (\n              <Text style={styles.noPosts}> </Text>\n            )}\n          </View>\n        </>\n      ) : null}\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  headerContainer: {\n    width: '100%',\n  },\n  coverContainer: {\n    width: '100%',\n    height: 200,\n    backgroundColor: '#f0f0f0',\n  },\n  coverImage: {\n    width: '100%',\n    height: 200,\n  },\n  defaultCover: {\n    backgroundColor: '#e1e1e1',\n  },\n  profileInfo: {\n    padding: 15,\n    marginTop: -50,\n  },\n  avatarWrapper: {\n    marginBottom: 10,\n    alignItems: 'center',\n  },\n  avatar: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    borderWidth: 4,\n    borderColor: '#fff',\n  },\n  nameContainer: {\n    alignItems: 'center',\n    marginBottom: 15,\n  },\n  name: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#000',\n    marginBottom: 4,\n  },\n  username: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 8,\n  },\n  description: {\n    fontSize: 14,\n    color: '#444',\n    textAlign: 'center',\n    paddingHorizontal: 20,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    paddingVertical: 15,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: '#eee',\n    marginVertical: 15,\n  },\n  statItem: {\n    alignItems: 'center',\n  },\n  statNumber: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  iconsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    marginTop: 10,\n  },\n  icon: {\n    width: 24,\n    height: 24,\n    marginHorizontal: 4,\n  },\n  footer: {\n    padding: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loader: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  logoutButton: {\n    backgroundColor: '#007AFF',\n    padding: 10,\n    borderRadius: 5,\n    alignItems: 'center',\n  },\n  logoutButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  postsContainer: {\n    padding: 10,\n  },\n  post: {\n    marginBottom: 10,\n  },\n  postText: {\n    fontSize: 16,\n  },\n  noPosts: {\n    fontSize: 16,\n    textAlign: 'center',\n    color: '#666',\n  },\n});\n\nexport default ProfileScreen;\n","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { Ionicons } from '@expo/vector-icons';\nimport LoginScreen from '../screens/LoginScreen';\nimport FeedScreen from '../screens/FeedScreen';\nimport ProfileScreen from '../screens/ProfileScreen';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst Tab = createBottomTabNavigator();\nconst Stack = createNativeStackNavigator();\n\nexport const AuthContext = createContext<{\n  isLoggedIn: boolean;\n  setIsLoggedIn: (value: boolean) => void;\n  logout: () => Promise<void>;\n}>({\n  isLoggedIn: false,\n  setIsLoggedIn: () => {},\n  logout: async () => {},\n});\n\nconst MainTabs = () => {\n  return (\n    <Tab.Navigator\n      screenOptions={{\n        tabBarActiveTintColor: '#007AFF',\n        tabBarInactiveTintColor: '#8E8E93',\n        tabBarStyle: {\n          backgroundColor: '#FFFFFF',\n          borderTopWidth: 1,\n          borderTopColor: '#E5E5EA',\n        },\n        headerStyle: {\n          backgroundColor: '#FFFFFF',\n        },\n        headerTitleStyle: {\n          color: '#000000',\n          fontSize: 17,\n          fontWeight: '600',\n        },\n      }}\n    >\n      <Tab.Screen\n        name=\"Feed\"\n        component={FeedScreen}\n        options={{\n          title: '',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"home-outline\" size={size} color={color} />\n          ),\n          headerTitle: '',\n        }}\n      />\n      <Tab.Screen\n        name=\"Profile\"\n        component={ProfileScreen}\n        options={({ navigation }) => ({\n          title: ' ',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"person-outline\" size={size} color={color} />\n          ),\n          headerTitle: ' ',\n          headerRight: () => {\n            const { logout } = useContext(AuthContext);\n            return (\n              <Ionicons\n                name=\"log-out-outline\"\n                size={24}\n                color=\"#ff3b30\"\n                style={{ marginRight: 15 }}\n                onPress={logout}\n              />\n            );\n          },\n        })}\n      />\n    </Tab.Navigator>\n  );\n};\n\nconst Navigation = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    checkLoginStatus();\n  }, []);\n\n  const checkLoginStatus = async () => {\n    await AsyncStorage.clear();\n    const sKey = await AsyncStorage.getItem('S-KEY');\n    setIsLoggedIn(!!sKey);\n  };\n\n  const logout = async () => {\n    await AsyncStorage.removeItem('S-KEY');\n    setIsLoggedIn(false);\n  };\n\n  return (\n    <AuthContext.Provider value={{ isLoggedIn, setIsLoggedIn, logout }}>\n      <NavigationContainer>\n        <Stack.Navigator screenOptions={{ headerShown: false }}>\n          {!isLoggedIn ? (\n            <Stack.Screen name=\"Auth\" component={LoginScreen} />\n          ) : (\n            <Stack.Screen name=\"Main\" component={MainTabs} />\n          )}\n        </Stack.Navigator>\n      </NavigationContainer>\n    </AuthContext.Provider>\n  );\n};\n\nexport default Navigation;\n","import './src/utils/disableWarnings';\nimport React, { useCallback, useEffect } from 'react';\nimport Navigation from './src/navigation';\nimport { StatusBar } from 'expo-status-bar';\nimport { View, StyleSheet } from 'react-native';\n\nexport default function App() {\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      //  localStorage   \n      window.localStorage.clear();\n    }\n  }, []);\n\n  const renderNavigation = useCallback(() => <Navigation />, []);\n\n  return (\n    <View style={styles.container}>\n      <StatusBar style=\"auto\" />\n      {renderNavigation()}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n});\n","import { registerRootComponent } from 'expo';\n\nimport App from './App';\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","const originalConsoleError = console.error;\n\nconsole.error = (...args: any[]) => {\n  if (args[0]?.includes?.('Warning: Encountered two children with the same key')) {\n    return;\n  }\n  originalConsoleError.apply(console, args);\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/KirixElemClient/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [66], () => (__webpack_require__(1001)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","WebSocketClient","socket","isConnected","rsaPublic","rsaPrivate","rsaPublicServer","aesKey","aesServerKey","messageHandlers","Map","connectionPromise","authPromise","requestTimeout","constructor","url","this","initEncryption","publicKey","privateKey","async","crypto","subtle","generateKey","name","modulusLength","publicExponent","Uint8Array","hash","generateRSAKeys","publicKeyPem","key","type","exported","exportKey","exportedAsString","String","fromCharCode","apply","btoa","arrayBufferToPem","sendRaw","action","data","Error","send","JSON","stringify","connect","Promise","resolve","reject","WebSocket","timeout","setTimeout","close","onopen","clearTimeout","error","onmessage","parse","event","pem","pemContents","substring","pemHeader","length","pemFooter","binaryDer","atob","arrayBuffer","i","charCodeAt","importKey","pemToArrayBuffer","encrypted","decrypted","encryptedData","iv","slice","decryptedBuffer","decrypt","TextDecoder","decode","aesDecrypt","handler","get","onerror","onclose","message","dataBuffer","TextEncoder","encode","getRandomValues","encrypt","result","byteLength","set","aesEncrypt","Array","from","on","off","delete","AUTH_API_URL","POSTS_API_URL","authApi","axios","create","baseURL","headers","postsApi","systemApi","wsClient","connectWebSocket","retries","sKey","AsyncStorage","getItem","authTimeout","status","S_KEY","catch","interceptors","request","use","config","response","removeItem","getImageUrl","path","authAPI","email","password","formData","FormData","append","fetch","method","body","json","setItem","profileAPI","getMyProfile","client","profile","getProfile","username","updateProfile","Object","entries","forEach","value","post","uploadAvatar","file","uploadCover","postsAPI","postId","text","files","File","startIndex","toString","postsArray","isArray","map","ID","AuthorID","Username","Name","Avatar","UserIcons","Text","Content","Date","Likes","Number","Dislikes","Liked","Disliked","Comments","MyPost","Boolean","isAxiosError","userId","undefined","height","Dimensions","styles","StyleSheet","overlay","flex","backgroundColor","justifyContent","alignItems","container","assign","width","maxWidth","borderRadius","boxShadow","content","padding","title","fontSize","fontWeight","color","marginBottom","textAlign","lineHeight","button","paddingVertical","paddingHorizontal","alignSelf","buttonText","ErrorMessage","onClose","translateY","Animated","Value","useEffect","spring","toValue","useNativeDriver","tension","friction","start","handleClose","timing","duration","_jsx","Modal","transparent","visible","animationType","onRequestClose","children","View","style","transform","_jsxs","TouchableOpacity","onPress","activeOpacity","input","borderWidth","borderColor","outlineStyle","buttonContainer","pointerEvents","cursor","buttonDisabled","switchText","marginTop","stepText","LoginScreen","useNavigation","setIsLoggedIn","useContext","AuthContext","isRegistering","setIsRegistering","useState","loading","setLoading","setEmail","setPassword","loginError","setLoginError","setName","setUsername","regEmail","setRegEmail","regPassword","setRegPassword","captchaToken","setCaptchaToken","registrationError","setRegistrationError","_Fragment","TextInput","placeholder","onChangeText","editable","autoCapitalize","keyboardType","secureTextEntry","HCaptcha","sitekey","onVerify","token","trim","test","disabled","ActivityIndicator","colorPairs","bg","LetterAvatar","size","letter","charAt","toUpperCase","colorIndex","Math","abs","split","reduce","acc","char","colors","overflow","textAlignVertical","CryptoService","buffer","base64","replace","binary","bytes","rsaEncrypt","publicKeyBuffer","window","rsaDecrypt","privateKeyBuffer","keyBuffer","importAESKey","encryptedBuffer","dataArray","generateAESKey","exportedKey","keyArray","binaryKey","blobToUint8Array","blob","reader","FileReader","onload","readAsArrayBuffer","WS_MESSAGE_TYPES","WS_ACTIONS","WebSocketService","keysReady","socketReady","messageQueue","processingMessages","getInstance","instance","generateKeys","keyPair","processQueue","shift","rawData","decryptedStr","decryptedData","encryptedMessage","disconnect","readyState","OPEN","push","jsonData","addMessageHandler","removeMessageHandler","formatFileSize","floor","log","parseFloat","pow","toFixed","getMimeType","filename","ext","lastIndexOf","getFileExtension","toLowerCase","FileService","fileDownloadCallbacks","fileChunks","ws","setupMessageHandlers","downloadMessage","handleFileChunk","fileId","chunkNumber","totalChunks","chunkData","has","fill","chunks","includes","fileData","binaryString","chunk","join","assembleChunks","callback","uploadFile","random","chunkSize","ceil","end","min","splitFileIntoChunks","uploadMessage","fileName","fileSize","mimeType","downloadFile","Blob","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","borderBottomWidth","borderBottomColor","header","flexDirection","userInfo","avatarContainer","marginRight","avatar","userTextInfo","nameContainer","gap","verifiedBadge","marginLeft","date","mediaContainer","marginVertical","mediaContent","modalOverlay","modalContent","fullScreenMedia","closeButton","position","top","right","zIndex","closeButtonText","downloadButton","bottom","downloadIcon","tintColor","footer","reactions","reactionButton","reactionButtonActive","dislikeButtonActive","reactionIcon","reactionIconActive","dislikeIconActive","reactionCount","reactionCountActive","dislikeCountActive","reactionLoader","pointerEventsAuto","pointerEventsNone","myPostBadge","myPostText","videoOverlay","left","fileContainer","fileIcon","fileInfo","PostCard","onUpdate","loadingAction","setLoadingAction","localLikes","setLocalLikes","localDislikes","setLocalDislikes","localLiked","setLocalLiked","localDisliked","setLocalDisliked","avatarUrl","setAvatarUrl","scaleAnim","modalVisible","setModalVisible","fadeAnim","useRef","current","mediaViewerProps","setMediaViewerProps","videoRef","handleDownload","fileService","Alert","alert","openModal","props","closeModal","formatDate","useCallback","dateString","format","locale","ru","handleInteraction","prev","handleReactionPress","sequence","loadAvatar","Image","source","uri","require","renderMediaContent","screenWidth","file_name","file_id","file_size","Icon","imageHeight","maxHeight","imageUrl","simple_image","orig_name","onDownload","resizeMode","Video","videoHeight","videoUrl","ref","ResizeMode","CONTAIN","useNativeControls","shouldPlay","isLooping","opacity","scale","minHeight","filesContainer","fileItem","filePreview","fileIconImage","progressBar","progressFill","removeButton","removeButtonText","controls","addFileButton","addFileIcon","submitButton","submitButtonDisabled","submitButtonText","CreatePost","onPostCreated","setText","setFiles","setError","uploadProgress","setUploadProgress","fileInputRef","multiline","numberOfLines","index","startsWith","filter","_","newProgress","removeFile","uploadedFiles","mime_type","Type","display","onChange","selectedFiles","target","multiple","accept","contentContainer","loadingContainer","feedTypeContainer","feedTypeButton","marginHorizontal","activeFeedType","feedTypeText","activeFeedTypeText","listContent","flexGrow","loadingOverlay","absoluteFillObject","errorContainer","borderTopWidth","borderTopColor","errorText","retryButton","retryButtonText","loginButton","loginButtonText","emptyContainer","emptyText","FeedScreen","feedType","setFeedType","posts","setPosts","refreshing","setRefreshing","loadingMore","setLoadingMore","hasMorePosts","setHasMorePosts","retryTimeoutRef","pageRef","loadingOpacity","contentOpacity","logout","React","console","fetchPosts","animateLoading","show","parallel","handleLogin","refresh","newPosts","delay","updateSinglePost","updatedPost","prevPosts","handlePostCreated","newPost","handleRefresh","handleLoadMore","handleChangeFeedType","renderPost","item","renderHeader","renderError","renderEmpty","renderFooter","FlatList","renderItem","keyExtractor","onEndReached","onEndReachedThreshold","refreshControl","RefreshControl","onRefresh","ListEmptyComponent","ListFooterComponent","contentContainerStyle","ListHeaderComponent","centered","headerContainer","coverContainer","coverImage","defaultCover","profileInfo","avatarWrapper","description","stats","statItem","statNumber","statLabel","iconsContainer","flexWrap","icon","loader","logoutButton","logoutButtonText","postsContainer","postText","noPosts","ProfileScreen","setProfile","coverUrl","setCoverUrl","iconUrls","setIconUrls","loadingPosts","setLoadingPosts","fetchProfile","cover","icons","loadedUrls","loadIcons","id","fetchUserPosts","renderStats","label","subscribers","subscriptions","stat","toLocaleString","ScrollView","my_profile","Tab","createBottomTabNavigator","Stack","createNativeStackNavigator","createContext","isLoggedIn","MainTabs","Navigator","screenOptions","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarStyle","headerStyle","headerTitleStyle","Screen","component","options","tabBarIcon","Ionicons","headerTitle","navigation","headerRight","Navigation","checkLoginStatus","clear","Provider","NavigationContainer","headerShown","registerRootComponent","localStorage","renderNavigation","StatusBar","originalConsoleError","args","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}