(()=>{var e,t={692:(e,t,a)=>{"use strict";var n=a(2299),o=(a(6664),a(6665)),r=a(5479),s=a(8272),i=a(1119),l=a(1385),d=a(3929),c=a(6773),u=a(5648),f=a(6283),h=a(3668),g=a(530),m=a(7109),p=a(1087);async function y(e,t){try{const a=function(e){const t=e.replace(/-----BEGIN PUBLIC KEY-----/,"").replace(/-----END PUBLIC KEY-----/,"").replace(/\s/g,"");return Uint8Array.from(atob(t),(e=>e.charCodeAt(0))).buffer}(t),n=(new TextEncoder).encode(e),o=await crypto.subtle.importKey("spki",a,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!0,["encrypt"]),r=await crypto.subtle.encrypt({name:"RSA-OAEP"},o,n);return new Uint8Array(r)}catch(e){throw new Error("Ошибка шифрования данных: "+e.message)}}function x(e){const t=atob(e);return new Uint8Array([...t].map((e=>e.charCodeAt(0)))).buffer}async function C(e){const t=await e.arrayBuffer();return new Uint8Array(t)}const A=new class{constructor(){this.url="wss://bypass.wselem.xyz",this.socket=null,this.isConnected=!1,this.rsaPublic=null,this.rsaPrivate=null,this.rsaPublicServer=null,this.aesKey=null,this.aesServerKey=null,this.keysReady=!1,this.socketReady=!1,this.messageQueue=[],this.processingMessages=!1,this.messageHandlers=new Map,this.connect()}get connectionStatus(){return this.isConnected}get ready(){return this.socketReady&&this.keysReady}async generateKeys(){const e=await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]);return this.rsaPublic=await window.crypto.subtle.exportKey("spki",e.publicKey),this.rsaPrivate=await window.crypto.subtle.exportKey("pkcs8",e.privateKey),this.keysReady=!0,!0}processQueue(){if(this.socketReady&&!this.processingMessages){for(this.processingMessages=!0;this.messageQueue.length>0;){const e=this.messageQueue.shift();e&&this.send(e)}this.processingMessages=!1}}connect(){this.socket=new WebSocket(this.url),this.socket.onopen=async()=>{if(await this.generateKeys(),this.rsaPublic){const e=await async function(e,t){const a=String.fromCharCode.apply(null,Array.from(new Uint8Array(e))),n=btoa(a);let o=`-----BEGIN ${t}-----\n`;return o+=n.match(/.{1,64}/g)?.join("\n")||"",o+=`\n-----END ${t}-----\n`,o}(this.rsaPublic,"PUBLIC KEY");this.socket?.send(JSON.stringify({type:"key_exchange",key:e})),this.isConnected=!0,this.processQueue()}},this.socket.onmessage=async e=>{const t=e.data;if(this.rsaPublicServer)if(this.aesServerKey&&this.aesKey){const e=await async function(e,t){const a=e.slice(0,16),n=e.slice(16),o=await crypto.subtle.importKey("raw",x(t),{name:"AES-CBC"},!1,["decrypt"]),r=await crypto.subtle.decrypt({name:"AES-CBC",iv:a},o,n);return(new TextDecoder).decode(r)}(await C(t),this.aesKey),a=JSON.parse(e),n=new CustomEvent("ws_message",{detail:a});if(window.dispatchEvent(n),a.type){const e=this.messageHandlers.get(a.type);e&&e(a)}}else{const e=await async function(e,t){try{const a=await crypto.subtle.importKey("pkcs8",t,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!0,["decrypt"]),n=await crypto.subtle.decrypt({name:"RSA-OAEP"},a,e);return(new TextDecoder).decode(n)}catch(e){throw new Error("Ошибка расшифровки данных: "+e.message)}}(await C(t),this.rsaPrivate),a=JSON.parse(e);"aes_key"===a.type&&(this.aesServerKey=a.key,this.socketReady=!0,this.send({type:"social",action:"get_online_users"}),this.processQueue())}else{const e=JSON.parse(t);if("key_exchange"===e.type&&(this.rsaPublicServer=e.key??null,this.aesKey=await function(){const e=crypto.getRandomValues(new Uint8Array(32));return btoa(String.fromCharCode(...Array.from(e)))}(),this.rsaPublicServer)){const e=await y(JSON.stringify({type:"aes_key",key:this.aesKey}),this.rsaPublicServer);this.socket?.send(e)}}},this.socket.onclose=()=>{this.disconnect(),setTimeout((()=>this.connect()),5e3)},this.socket.onerror=()=>{this.disconnect(),setTimeout((()=>this.connect()),5e3)}}async send(e){if(!this.isConnected||this.socket?.readyState!==WebSocket.OPEN||!this.socketReady)return void this.messageQueue.push(e);const t=JSON.stringify(e);if(this.aesServerKey){const e=await async function(e,t){const a=crypto.getRandomValues(new Uint8Array(16)),n=(new TextEncoder).encode(e);try{const e=await crypto.subtle.importKey("raw",x(t),{name:"AES-CBC"},!1,["encrypt"]),o=await crypto.subtle.encrypt({name:"AES-CBC",iv:a},e,n),r=new Uint8Array(a.byteLength+o.byteLength);return r.set(a),r.set(new Uint8Array(o),a.byteLength),r}catch(e){return null}}(t,this.aesServerKey);e&&this.socket?.send(e)}}disconnect(){this.socket&&(this.socket.readyState===WebSocket.OPEN&&this.socket.close(),this.socket=null),this.isConnected=!1,this.rsaPublic=null,this.rsaPrivate=null,this.rsaPublicServer=null,this.aesKey=null,this.aesServerKey=null,this.keysReady=!1,this.socketReady=!1}addMessageHandler(e,t){this.messageHandlers.set(e,t)}removeMessageHandler(e){this.messageHandlers.delete(e)}},b="https://api.elemsocial.com",w=m.default.create({baseURL:b,headers:{"Content-Type":"multipart/form-data",api:"true",Origin:"https://elemsocial.com","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, Accept, Authorization, X-Request-With"}}),v=m.default.create({baseURL:"https://elemsocial.com",headers:{"Content-Type":"multipart/form-data",api:"true",Origin:"https://elemsocial.com","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, Accept, Authorization, X-Request-With"}}),j=m.default.create({baseURL:"https://elemsocial.com/System/API",headers:{"Content-Type":"application/json",api:"true",Origin:"https://elemsocial.com","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, Accept, Authorization, X-Request-With"}}),S=async(e=3)=>{let t=null,a=0;const n=async()=>{const t=await p.default.getItem("S-KEY");if(!t)throw new Error("Нет доступного ключа S-KEY");return new Promise(((n,o)=>{let r=!1;const s=setTimeout((()=>{r||(A.removeMessageHandler("key_exchange"),A.removeMessageHandler("authorization"),o(new Error(`Превышено время ожидания подключения (попытка ${a+1} из ${e})`)))}),15e3);A.addMessageHandler("key_exchange",(async e=>{e.key&&(A.removeMessageHandler("key_exchange"),A.send({type:"authorization",action:"connect",S_KEY:t}))})),A.addMessageHandler("authorization",(async t=>{clearTimeout(s),r||(r=!0,"success"===t.status&&t.accountData?(await p.default.setItem("account_data",JSON.stringify(t.accountData)),A.send({type:"social",action:"get_profile",username:t.accountData.username}),A.removeMessageHandler("authorization"),n()):(A.removeMessageHandler("authorization"),o(new Error(t.message||`Ошибка авторизации (попытка ${a+1} из ${e})`))))})),A.send({type:"key_exchange",key:"PUBLIC_KEY"})}))};for(;a<e;)try{return void await n()}catch(n){if(t=n,a++,a===e)throw new Error(`${n.message}\nПопробуйте перезайти в аккаунт или использовать VPN`);await new Promise((e=>setTimeout(e,1e3*a)))}};w.interceptors.request.use((async e=>{const t=await p.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e})),w.interceptors.response.use((e=>e),(async e=>(401===e?.response?.status&&await p.default.removeItem("S-KEY"),Promise.reject(e)))),v.interceptors.request.use((async e=>{const t=await p.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e})),v.interceptors.response.use((e=>e),(async e=>(401===e?.response?.status&&await p.default.removeItem("S-KEY"),Promise.reject(e)))),j.interceptors.request.use((async e=>{const t=await p.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e}));const T={login:async(e,t)=>{const a=new FormData;a.append("email",e),a.append("password",t),a.append("device_type","browser"),a.append("device","Element Web 2.3");const n=await fetch(`${b}/auth/login`,{method:"POST",headers:{api:"true",Origin:"https://elemsocial.com"},body:a}),o=await n.json();return"success"===o.status&&o.S_KEY&&(await p.default.setItem("S-KEY",o.S_KEY),S().catch((e=>{}))),o},logout:async()=>new Promise(((e,t)=>{const a=setTimeout((()=>{A.removeMessageHandler("authorization"),t(new Error("Logout timeout"))}),5e3);A.addMessageHandler("authorization",(n=>{clearTimeout(a),"success"===n.status?(A.removeMessageHandler("authorization"),p.default.removeItem("S-KEY"),e()):(A.removeMessageHandler("authorization"),t(new Error(n.message||"Failed to logout")))})),A.send({type:"authorization",action:"logout"})})),checkAuth:async()=>{try{return await S(),!0}catch(e){return!1}},getMyProfile:async()=>new Promise(((e,t)=>{const a=setTimeout((()=>{A.removeMessageHandler("profile"),t(new Error("Profile request timeout"))}),5e3);A.addMessageHandler("profile",(n=>{clearTimeout(a),"success"===n.status&&n.data?e(n.data):t(new Error("Failed to get profile data"))})),A.send({type:"profile",action:"get_my_profile"})})),getProfile:async e=>new Promise(((t,a)=>{const n=setTimeout((()=>{A.removeMessageHandler("profile"),a(new Error("Profile request timeout"))}),5e3);A.addMessageHandler("profile",(e=>{clearTimeout(n),"success"===e.status&&e.data?t(e.data):a(new Error("Failed to get profile data"))})),A.send({type:"profile",action:"get_profile",data:{username:e}})})),updateProfile:async e=>{const t=new FormData;Object.entries(e).forEach((([e,a])=>{null!=a&&t.append(e,String(a))}));return(await v.post("/System/API/Connect.php",t)).data},uploadAvatar:async e=>{const t=new FormData;t.append("avatar",e);return(await v.post("/System/API/Connect.php",t)).data},uploadCover:async e=>{const t=new FormData;t.append("cover",e);return(await v.post("/System/API/Connect.php",t)).data}},I={getMyProfile:async()=>new Promise(((e,t)=>{const a=setTimeout((()=>{A.removeMessageHandler("social"),t(new Error("Превышено время ожидания запроса профиля"))}),5e3);A.addMessageHandler("social",(n=>{clearTimeout(a),"success"===n.status&&n.data?(A.removeMessageHandler("social"),e(n.data)):(A.removeMessageHandler("social"),t(new Error(n.message||"Не удалось получить данные профиля")))})),A.send({type:"social",action:"get_profile"})})),getProfile:async e=>new Promise(((t,a)=>{const n=setTimeout((()=>{A.removeMessageHandler("social"),a(new Error("Превышено время ожидания запроса профиля"))}),5e3);A.addMessageHandler("social",(e=>{clearTimeout(n),"success"===e.status&&e.data?(A.removeMessageHandler("social"),t(e.data)):(A.removeMessageHandler("social"),a(new Error(e.message||"Не удалось получить данные профиля")))})),A.send({type:"social",action:"get_profile",username:e})})),updateProfile:async e=>new Promise(((t,a)=>{const n=setTimeout((()=>{A.removeMessageHandler("social"),a(new Error("Profile update timeout"))}),5e3);A.addMessageHandler("social",(e=>{clearTimeout(n),"success"===e.status?(A.removeMessageHandler("social"),t({Type:"Verify",Content:"Profile updated successfully"})):(A.removeMessageHandler("social"),t({Type:"Error",Content:e.message||"Failed to update profile"}))})),A.send({type:"social",action:"update_profile",data:e})})),uploadAvatar:async e=>{const t=new FormData;t.append("avatar",e);return(await v.post("/System/API/Connect.php",t)).data},uploadCover:async e=>{const t=new FormData;t.append("cover",e);return(await v.post("/System/API/Connect.php",t)).data}},k={loadPost:async e=>{const t=new FormData;t.append("PostID",e);return(await v.post("/System/API/LoadPost.php",t)).data},createPost:async(e,t)=>{const a=new FormData;a.append("Text",e),t.forEach((e=>{a.append("Files[]",{uri:e.uri,type:e.type,name:e.name})}));t.some((e=>e.type.startsWith("image/")))&&(a.append("ClearMetadataIMG","false"),a.append("CensoringIMG","false"));const n=await v.post("/System/API/AddPost.php",a);if("Verify"===n.data.Type)return n.data.Content;throw new Error(n.data.Content)},getPost:async e=>{const t=new FormData;t.append("PostID",e);return(await v.post("/System/API/LoadPost.php",t)).data},getPosts:async(e,t=0,a)=>{try{const n=new FormData;n.append("StartIndex",t.toString()),"USER"===e&&a&&n.append("UserID",a);const o=`/System/API/LoadPosts.php?F=${e}`,r=await v.post(o,n);let s=[];if("string"==typeof r.data)try{s=JSON.parse(r.data)}catch(e){return[]}else Array.isArray(r.data)?s=r.data:r.data&&"object"==typeof r.data&&(s=[r.data]);return s.map((e=>({ID:String(e.ID||""),AuthorID:String(e.AuthorID||""),Username:String(e.Username||""),Name:String(e.Name||""),Avatar:e.Avatar||"None",UserIcons:e.UserIcons||null,Text:String(e.Text||""),Content:e.Content||null,Date:String(e.Date||""),Likes:Number(e.Likes)||0,Dislikes:Number(e.Dislikes)||0,Liked:e.Liked||null,Disliked:e.Disliked||null,Comments:Number(e.Comments)||0,MyPost:Boolean(e.MyPost)})))}catch(e){return m.default.isAxiosError(e),[]}},interactWithPost:async(e,t)=>{const a=new FormData;a.append("PostID",t);return(await v.post(`/System/API/PostInteraction.php?F=${e}`,a)).data},addComment:async(e,t)=>{const a=new FormData;a.append("PostID",e),a.append("Text",t);return(await v.post("/System/API/PostInteraction.php?F=POST_COMMENT",a)).data},getComments:async e=>{const t=new FormData;t.append("PostID",e);return(await v.post("/System/API/PostInteraction.php?F=LOAD_COMMENT",t)).data},getUserPosts:async(e,t=0)=>k.getPosts("USER",t,e)};var F=a(3947),E=a(5741),B=a(8264),P=a(8119),D=a(6725),R=a(397);const{height:z}=D.default.get("window"),M=h.default.create({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},container:Object.assign({width:"90%",maxWidth:400,backgroundColor:"#fff",borderRadius:12},{boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}),content:{padding:20},title:{fontSize:20,fontWeight:"bold",color:"#c62828",marginBottom:10,textAlign:"center"},text:{fontSize:16,color:"#333",marginBottom:20,textAlign:"center",lineHeight:22},button:{backgroundColor:"#007AFF",paddingVertical:12,paddingHorizontal:30,borderRadius:8,alignSelf:"center"},buttonText:{color:"#fff",fontSize:16,fontWeight:"600"}}),V=({message:e,onClose:t})=>{const a=new P.default.Value(z);(0,o.useEffect)((()=>{e&&P.default.spring(a,{toValue:0,useNativeDriver:!0,tension:50,friction:7}).start()}),[e]);const n=()=>{P.default.timing(a,{toValue:z,duration:300,useNativeDriver:!0}).start((()=>{t&&t()}))};return e?(0,R.jsx)(B.default,{transparent:!0,visible:!!e,animationType:"fade",onRequestClose:n,children:(0,R.jsx)(d.default,{style:M.overlay,children:(0,R.jsx)(P.default.View,{style:[M.container,{transform:[{translateY:a}]}],children:(0,R.jsxs)(d.default,{style:M.content,children:[(0,R.jsx)(f.default,{style:M.title,children:"Ошибка"}),(0,R.jsx)(f.default,{style:M.text,children:e}),(0,R.jsx)(u.default,{style:M.button,onPress:n,activeOpacity:.8,children:(0,R.jsx)(f.default,{style:M.buttonText,children:"OK"})})]})})})}):null},O=h.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",marginBottom:30,textAlign:"center"},input:Object.assign({height:50,borderWidth:1,borderColor:"#ddd",borderRadius:8,paddingHorizontal:15,marginBottom:15,fontSize:16,backgroundColor:"#fff"},{outlineStyle:"none",":focus":{borderColor:"#007AFF"}}),buttonContainer:{pointerEvents:"auto",marginBottom:15},button:Object.assign({height:50,backgroundColor:"#007AFF",borderRadius:8,justifyContent:"center",alignItems:"center"},{cursor:"pointer",":hover":{backgroundColor:"#0056b3"}}),buttonDisabled:{backgroundColor:"#ccc"},buttonText:{color:"white",fontSize:16,fontWeight:"600"},switchText:{color:"#007AFF",textAlign:"center",marginTop:15,fontSize:16},stepText:{fontSize:18,marginBottom:15,textAlign:"center"}}),N=()=>{(0,F.useNavigation)();const{setIsLoggedIn:e}=(0,o.useContext)(We),[t,a]=(0,o.useState)(!1),[n,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)(""),[l,h]=(0,o.useState)(""),[m,y]=(0,o.useState)(""),[x,C]=(0,o.useState)(""),[A,b]=(0,o.useState)(""),[w,v]=(0,o.useState)(""),[j,S]=(0,o.useState)(""),[I,k]=(0,o.useState)(""),[B,P]=(0,o.useState)("");return(0,R.jsxs)(d.default,{style:O.container,children:[(0,R.jsx)(f.default,{style:O.title,children:"Sigma Element Client"}),t?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(c.default,{style:O.input,placeholder:"Имя",value:x,onChangeText:C,editable:!n}),(0,R.jsx)(c.default,{style:O.input,placeholder:"Имя пользователя",value:A,onChangeText:b,editable:!n,autoCapitalize:"none"}),(0,R.jsx)(c.default,{style:O.input,placeholder:"Email",value:w,onChangeText:v,editable:!n,keyboardType:"email-address",autoCapitalize:"none"}),(0,R.jsx)(c.default,{style:O.input,placeholder:"Пароль",value:j,onChangeText:S,secureTextEntry:!0,editable:!n}),(0,R.jsx)(E.default,{sitekey:"29c6b1c2-7e78-43ec-8bf8-5de49c58c54a",onVerify:e=>{k(e)}}),(0,R.jsx)(V,{message:B,onClose:()=>P("")}),(0,R.jsx)(d.default,{style:O.buttonContainer,children:(0,R.jsx)(u.default,{style:[O.button,n&&O.buttonDisabled],onPress:async()=>{P("");if(x.trim())if(A.trim())if(w.trim())if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.trim()))if(j.trim())if(I)try{r(!0);const t=new FormData;t.append("name",x.trim()),t.append("username",A.trim()),t.append("email",w.trim()),t.append("password",j.trim()),t.append("accept","true"),t.append("h_captcha",I);const a=await fetch("https://api.elemsocial.com/auth/register",{method:"POST",headers:{api:"true",Origin:"https://elemsocial.com"},body:t}),n=await a.json();"success"===n.status?(await p.default.setItem("S-KEY",n.S_KEY),e(!0)):P(n.text||"Не удалось зарегистрироваться")}catch(e){P("Что-то пошло не так")}finally{r(!1)}else P("Пройдите капчу");else P("Введите пароль");else P("Введите корректный email адрес");else P("Введите email");else P("Введите имя пользователя");else P("Введите имя")},disabled:n,children:n?(0,R.jsx)(g.default,{color:"white"}):(0,R.jsx)(f.default,{style:O.buttonText,children:"Зарегистрироваться"})})}),(0,R.jsx)(u.default,{onPress:()=>{a(!1),P(""),y("")},children:(0,R.jsx)(f.default,{style:O.switchText,children:"Уже есть аккаунт? Войти"})})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(c.default,{style:O.input,placeholder:"Электронная почта",value:s,onChangeText:i,autoCapitalize:"none",keyboardType:"email-address",editable:!n}),(0,R.jsx)(c.default,{style:O.input,placeholder:"Пароль",value:l,onChangeText:h,secureTextEntry:!0,editable:!n}),(0,R.jsx)(V,{message:m,onClose:()=>y("")}),(0,R.jsx)(d.default,{style:O.buttonContainer,children:(0,R.jsx)(u.default,{style:[O.button,n&&O.buttonDisabled],onPress:async()=>{if(s)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))if(l)try{r(!0);const t=await T.login(s.trim(),l);"success"===t?.status&&t?.S_KEY?(await p.default.setItem("S-KEY",t.S_KEY),e(!0)):y(t?.text||"Неверный email или пароль")}catch(e){y("Что-то пошло не так")}finally{r(!1)}else y("Введите пароль");else y("Введите корректный email адрес");else y("Введите почту")},disabled:n,children:n?(0,R.jsx)(g.default,{color:"white"}):(0,R.jsx)(f.default,{style:O.buttonText,children:"Войти"})})}),(0,R.jsx)(u.default,{onPress:()=>{a(!0),P(""),y("")},children:(0,R.jsx)(f.default,{style:O.switchText,children:"Нет аккаунта? Зарегистрироваться"})})]})]})};var W=a(932),U=a(2660),H=a(484),L=a(1690);const K=[{bg:"#FFE5E5",text:"#FF4D4D"},{bg:"#E5F1FF",text:"#3399FF"},{bg:"#E5FFE5",text:"#33CC33"},{bg:"#FFE5FF",text:"#FF33FF"},{bg:"#FFF0E5",text:"#FF8533"},{bg:"#E5F9FF",text:"#33CCFF"},{bg:"#F2E5FF",text:"#9933FF"},{bg:"#FFFFE5",text:"#CCCC33"}],Y=({name:e,size:t=120,style:a})=>{const n=(e?.charAt(0)||"?").toUpperCase(),o=Math.abs(e.split("").reduce(((e,t)=>e+t.charCodeAt(0)),0))%K.length,r=K[o],s=h.default.create({container:{width:t,height:t,borderRadius:t/2,backgroundColor:r.bg,justifyContent:"center",alignItems:"center",overflow:"hidden"},letter:{color:r.text,fontSize:.4*t,fontWeight:"600",textAlign:"center",textAlignVertical:"center"}});return(0,R.jsx)(d.default,{style:[s.container,a],children:(0,R.jsx)(f.default,{style:s.letter,children:n})})};var Q=a(7827),q=a(5988),J=a(4636),G=a(9167),Z=a(9771);const X="messenger",_="upload_file",$="download_file",ee=e=>{if(0===e)return"0 Б";const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${["Б","КБ","МБ","ГБ","ТБ"][t]}`},te=e=>{const t=(e=>e.slice(2+(e.lastIndexOf(".")-1>>>0)))(e).toLowerCase();return{txt:"text/plain",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",svg:"image/svg+xml",mp3:"audio/mpeg",mp4:"video/mp4",wav:"audio/wav",avi:"video/x-msvideo",zip:"application/zip",rar:"application/x-rar-compressed","7z":"application/x-7z-compressed"}[t]||"application/octet-stream"};class ae{ws=A;fileDownloadCallbacks=new Map;fileChunks=new Map;constructor(){this.setupMessageHandlers()}static getInstance(){return ae.instance||(ae.instance=new ae),ae.instance}setupMessageHandlers(){this.ws.addMessageHandler(X,(e=>{if(e.action===$){const t=e;this.handleFileChunk(t)}}))}handleFileChunk(e){const{fileId:t,chunkNumber:a,totalChunks:n,chunkData:o}=e.data;this.fileChunks.has(t)||this.fileChunks.set(t,new Array(n).fill(""));const r=this.fileChunks.get(t);if(r[a-1]=o,!r.includes("")){const e=(e=>{const t=e.map((e=>atob(e))).join(""),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return a.buffer})(r),a=this.fileDownloadCallbacks.get(t);a&&(a(e),this.fileDownloadCallbacks.delete(t)),this.fileChunks.delete(t)}}async uploadFile(e){const t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),a=await(async(e,t=1048576)=>{const a=[],n=Math.ceil(e.size/t);for(let o=0;o<n;o++){const n=o*t,r=Math.min(n+t,e.size),s=e.slice(n,r),i=await s.arrayBuffer(),l=btoa(String.fromCharCode(...new Uint8Array(i)));a.push(l)}return a})(e),n={type:X,action:_,data:{fileId:t,fileName:e.name,fileSize:e.size,mimeType:te(e.name)}};await this.ws.send(n);for(let e=0;e<a.length;e++){const n={type:X,action:$,data:{fileId:t,chunkNumber:e+1,totalChunks:a.length,chunkData:a[e]}};await this.ws.send(n)}return t}downloadFile(e,t){return new Promise(((a,n)=>{this.fileDownloadCallbacks.set(e,(e=>{try{((e,t,a)=>{const n=new Blob([e],{type:a}),o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)})(e,t,te(t)),a()}catch(e){n(e)}}));const o={type:X,action:$,data:{fileId:e,chunkNumber:0,totalChunks:0,chunkData:""}};this.ws.send(o)}))}}const ne=ae;var oe=a(2772),re=a(1950),se=a(9632);const ie=h.default.create({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},content:Object.assign({backgroundColor:"#fff",borderRadius:20,width:Math.min(400,D.default.get("window").width-40),maxWidth:"90%"},void 0),header:{padding:20,paddingBottom:15},title:{fontSize:20,fontWeight:"600",color:"#000",textAlign:"center"},body:{padding:20,paddingTop:0},message:{fontSize:16,color:"#333",marginBottom:10},url:{fontSize:15,color:"#007AFF",marginBottom:12,paddingHorizontal:10,paddingVertical:8,backgroundColor:"#F0F0F0",borderRadius:8},warning:{fontSize:14,color:"#666"},buttons:{flexDirection:"row",padding:15,gap:10},button:{flex:1,paddingVertical:12,borderRadius:12,alignItems:"center"},cancelButton:{backgroundColor:"#F0F0F0"},confirmButton:{backgroundColor:"#007AFF"},cancelButtonText:{color:"#666",fontSize:16,fontWeight:"600"},confirmButtonText:{color:"#fff",fontSize:16,fontWeight:"600"}}),le=({visible:e,url:t,onClose:a})=>{const n=(0,o.useRef)(new P.default.Value(0)).current,r=(0,o.useRef)(new P.default.Value(.9)).current,s=(0,o.useRef)(new P.default.Value(20)).current;(0,o.useEffect)((()=>{e&&(s.setValue(20),r.setValue(.9),n.setValue(0),P.default.parallel([P.default.timing(n,{toValue:1,duration:200,useNativeDriver:!0}),P.default.spring(r,{toValue:1,friction:8,tension:40,useNativeDriver:!0}),P.default.spring(s,{toValue:0,friction:8,tension:40,useNativeDriver:!0})]).start())}),[e]);const i=e=>{P.default.parallel([P.default.timing(n,{toValue:0,duration:150,useNativeDriver:!0}),P.default.spring(r,{toValue:.9,friction:8,tension:40,useNativeDriver:!0}),P.default.spring(s,{toValue:20,friction:8,tension:40,useNativeDriver:!0})]).start((()=>{e&&e()}))};return(0,R.jsx)(B.default,{visible:e,transparent:!0,statusBarTranslucent:!0,animationType:"none",onRequestClose:()=>i(a),children:(0,R.jsxs)(P.default.View,{style:[ie.overlay,{opacity:n}],children:[(0,R.jsx)(u.default,{style:h.default.absoluteFill,onPress:()=>i(a),activeOpacity:1}),(0,R.jsxs)(P.default.View,{style:[ie.content,{opacity:n,transform:[{scale:r},{translateY:s}]}],children:[(0,R.jsx)(d.default,{style:ie.header,children:(0,R.jsx)(f.default,{style:ie.title,children:"Переход по ссылке"})}),(0,R.jsxs)(d.default,{style:ie.body,children:[(0,R.jsx)(f.default,{style:ie.message,children:"Вы собираетесь перейти по внешней ссылке:"}),(0,R.jsx)(f.default,{style:ie.url,numberOfLines:2,children:t}),(0,R.jsx)(f.default,{style:ie.warning,children:"Убедитесь, что вы доверяете этому источнику."})]}),(0,R.jsxs)(d.default,{style:ie.buttons,children:[(0,R.jsx)(u.default,{style:[ie.button,ie.cancelButton],onPress:()=>i(a),children:(0,R.jsx)(f.default,{style:ie.cancelButtonText,children:"Отмена"})}),(0,R.jsx)(u.default,{style:[ie.button,ie.confirmButton],onPress:async()=>{try{await se.default.openURL(t),i((()=>{a()}))}catch(e){a()}},children:(0,R.jsx)(f.default,{style:ie.confirmButtonText,children:"Перейти"})})]})]})]})})},de=h.default.create({link:{color:"#007AFF",fontWeight:"500"}}),ce=({text:e,style:t})=>{const[a,n]=(0,o.useState)(null);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(f.default,{style:[t],children:(e=>{const t=/(https?:\/\/[^\s]+)/g;return e.split(t).map(((e,a)=>e.match(t)?(0,R.jsx)(f.default,{style:de.link,onPress:()=>n(e),children:e},a):(0,R.jsx)(f.default,{children:e},a)))})(e)}),(0,R.jsx)(le,{visible:!!a,url:a||"",onClose:()=>n(null)})]})},{width:ue,height:fe}=D.default.get("window"),he=Math.min(600,ue-40),ge=h.default.create({modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},modalContent:Object.assign({position:"relative",backgroundColor:"white",borderRadius:15,width:he,maxHeight:fe-40,marginHorizontal:20,overflow:"hidden"},void 0),scrollView:{maxHeight:fe-40},closeButton:{position:"absolute",right:15,top:15,zIndex:2,width:30,height:30,borderRadius:15,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},closeButtonText:{fontSize:20,color:"#fff",fontWeight:"bold"},loader:{padding:20},errorText:{color:"red",textAlign:"center",padding:20},profileContent:{alignItems:"center"},coverContainer:{width:"100%",height:Math.min(200,.25*fe),backgroundColor:"#f0f0f0"},coverImage:{width:"100%",height:"100%"},defaultCover:{width:"100%",height:"100%",backgroundColor:"#f0f0f0"},avatarContainer:{width:Math.min(100,.2*ue),height:Math.min(100,.2*ue),marginTop:-Math.min(50,.1*ue),marginBottom:10,borderRadius:Math.min(50,.1*ue),borderWidth:4,borderColor:"#fff",overflow:"hidden",backgroundColor:"#f0f0f0"},avatarWithCover:{marginTop:-Math.min(50,.1*ue)},avatar:{width:"100%",height:"100%"},nameRow:{flexDirection:"row",alignItems:"center",gap:4,marginBottom:4},name:{fontSize:20,fontWeight:"bold",color:"#000"},username:{fontSize:16,color:"#666",marginBottom:10},description:{fontSize:14,color:"#444",textAlign:"center",marginHorizontal:20,marginBottom:15},stats:{flexDirection:"row",justifyContent:"space-around",width:"100%",paddingVertical:15,borderTopWidth:1,borderBottomWidth:1,borderColor:"#eee"},statItem:{alignItems:"center",flex:1},statNumber:{fontSize:18,fontWeight:"bold"},statLabel:{fontSize:12,color:"#666",marginTop:4},iconsContainer:{flexDirection:"row",flexWrap:"wrap",justifyContent:"center",padding:10,gap:8},icon:{width:24,height:24},verifiedBadge:{width:20,height:20}}),me=({visible:e,username:t,onClose:n})=>{const[r,s]=(0,o.useState)(null),[i,l]=(0,o.useState)(!0),[c,m]=(0,o.useState)(""),p=(0,o.useRef)(new P.default.Value(0)).current,y=(0,o.useRef)(new P.default.Value(.9)).current,x=(0,o.useRef)(new P.default.Value(50)).current;(0,o.useEffect)((()=>{e?(l(!0),m(""),A(),P.default.parallel([P.default.timing(p,{toValue:1,duration:300,useNativeDriver:!0}),P.default.timing(y,{toValue:1,duration:300,useNativeDriver:!0}),P.default.timing(x,{toValue:0,duration:300,useNativeDriver:!0})]).start()):P.default.parallel([P.default.timing(p,{toValue:0,duration:250,useNativeDriver:!0}),P.default.timing(y,{toValue:.9,duration:250,useNativeDriver:!0}),P.default.timing(x,{toValue:50,duration:250,useNativeDriver:!0})]).start((()=>{s(null),m("")}))}),[e,t]);const C=()=>{P.default.parallel([P.default.timing(p,{toValue:0,duration:250,useNativeDriver:!0}),P.default.timing(y,{toValue:.9,duration:250,useNativeDriver:!0}),P.default.timing(x,{toValue:50,duration:250,useNativeDriver:!0})]).start((()=>{n()}))},A=async()=>{try{l(!0),m("");const e=await I.getProfile(t);e.avatar&&(e.avatar=`https://elemsocial.com/Content/Avatars/${e.avatar}`),e.cover&&(e.cover=`https://elemsocial.com/Content/Covers/${e.cover}`),s(e)}catch(e){m("Не удалось загрузить профиль")}finally{l(!1)}};return(0,R.jsx)(B.default,{visible:e,transparent:!0,onRequestClose:C,animationType:"none",statusBarTranslucent:!0,children:(0,R.jsxs)(P.default.View,{style:[ge.modalOverlay,{opacity:p}],children:[(0,R.jsx)(re.default,{onPress:C,children:(0,R.jsx)(d.default,{style:h.default.absoluteFill})}),(0,R.jsxs)(P.default.View,{style:[ge.modalContent,{opacity:p,transform:[{scale:y},{translateY:x}]}],children:[(0,R.jsx)(u.default,{style:ge.closeButton,onPress:C,hitSlop:{top:10,right:10,bottom:10,left:10},children:(0,R.jsx)(f.default,{style:ge.closeButtonText,children:"✕"})}),(0,R.jsx)(oe.default,{style:ge.scrollView,bounces:!1,showsVerticalScrollIndicator:!1,children:i?(0,R.jsx)(g.default,{size:"large",color:"#007AFF",style:ge.loader}):c?(0,R.jsx)(f.default,{style:ge.errorText,children:c}):r?(0,R.jsxs)(d.default,{style:ge.profileContent,children:[(0,R.jsx)(d.default,{style:ge.coverContainer,children:r.cover?(0,R.jsx)(H.default,{source:{uri:r.cover},style:ge.coverImage,resizeMode:"cover"}):(0,R.jsx)(d.default,{style:ge.defaultCover})}),(0,R.jsx)(d.default,{style:[ge.avatarContainer,ge.avatarWithCover],children:r.avatar&&"None"!==r.avatar?(0,R.jsx)(H.default,{source:{uri:r.avatar},style:ge.avatar}):(0,R.jsx)(Y,{name:r.name||r.username,size:80})}),(0,R.jsxs)(d.default,{style:ge.nameRow,children:[(0,R.jsx)(f.default,{style:ge.name,children:r.name}),r.icons&&r.icons.includes("VERIFY")&&(0,R.jsx)(H.default,{source:a(3507),style:ge.verifiedBadge})]}),(0,R.jsxs)(f.default,{style:ge.username,children:["@",r.username]}),r.description&&(0,R.jsx)(ce,{text:r.description,style:ge.description}),(()=>{if(!r)return null;const e=[{label:"Посты",value:r.posts},{label:"Подписчики",value:r.subscribers},{label:"Подписки",value:r.subscriptions}];return(0,R.jsx)(d.default,{style:ge.stats,children:e.map((e=>(0,R.jsxs)(d.default,{style:ge.statItem,children:[(0,R.jsx)(f.default,{style:ge.statNumber,children:e.value?.toLocaleString()||"0"}),(0,R.jsx)(f.default,{style:ge.statLabel,children:e.label})]},e.label)))})})(),r.icons&&r.icons.length>0&&(0,R.jsx)(d.default,{style:ge.iconsContainer,children:r.icons.filter((e=>"VERIFY"!==e)).map(((e,t)=>(0,R.jsx)(H.default,{source:{uri:`https://elemsocial.com/Content/Icons/${e}`},style:ge.icon},t)))})]}):null})]})]})})};var pe=a(5708),ye=a(444),xe=a(9149);const{width:Ce,height:Ae}=D.default.get("window"),be=h.default.create({container:{backgroundColor:"#000",overflow:"hidden",borderRadius:12},videoWrapper:{backgroundColor:"#000",overflow:"hidden"},loadingContainer:Object.assign({},h.default.absoluteFillObject,{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)"}),controlsContainer:Object.assign({},h.default.absoluteFillObject,{justifyContent:"space-between",padding:16,backgroundColor:"rgba(0, 0, 0, 0.4)"}),playButton:{alignSelf:"center",flex:1,justifyContent:"center"},playButtonTouchable:{width:80,height:80,borderRadius:40,backgroundColor:"rgba(0, 0, 0, 0.6)",justifyContent:"center",alignItems:"center"},bottomControls:{width:"100%"},progressContainer:{width:"100%",paddingHorizontal:0},progressBar:{height:4,backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:2,overflow:"visible",position:"relative"},progress:{height:"100%",backgroundColor:"#007AFF",borderRadius:2},sliderThumb:Object.assign({width:16,height:16,borderRadius:8,backgroundColor:"#fff",position:"absolute",top:-6,marginLeft:-8},void 0),timeContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:8},timeText:{color:"#fff",fontSize:13,fontWeight:"600",textShadowColor:"rgba(0, 0, 0, 0.5)",textShadowOffset:{width:1,height:1},textShadowRadius:2}}),we=({uri:e,style:t,onPress:a,shouldPlay:n=!1})=>{const[r,s]=(0,o.useState)(!1),[i,l]=(0,o.useState)(0),[c,m]=(0,o.useState)(0),[p,y]=(0,o.useState)(!0),[x,C]=(0,o.useState)(!0),[A,b]=(0,o.useState)(!1),[w,v]=(0,o.useState)(0),[j,S]=(0,o.useState)(0),T=(0,o.useRef)(null),I=(0,o.useRef)(),k=(0,o.useRef)(new P.default.Value(1)).current,F=(0,o.useRef)(new P.default.Value(1)).current,E=(0,o.useRef)(new P.default.Value(0)).current,B=(0,o.useRef)(new P.default.Value(0)).current,D=(0,o.useRef)(ye.default.create({onStartShouldSetPanResponder:()=>!0,onMoveShouldSetPanResponder:()=>!0,onPanResponderGrant:e=>{b(!0)},onPanResponderMove:(e,t)=>{const a=Ce-32,n=Math.max(0,Math.min(1,t.moveX/a));B.setValue(n*a)},onPanResponderRelease:async(e,t)=>{const a=Ce-32,n=Math.max(0,Math.min(1,t.moveX/a)),o=n*i;T.current&&(await T.current.setPositionAsync(o),m(o),E.setValue(n)),b(!1)}})).current;(0,o.useEffect)((()=>(n&&!r&&V(),()=>{I.current&&clearTimeout(I.current)})),[n]);const z=()=>{I.current&&clearTimeout(I.current),r&&(I.current=setTimeout((()=>{P.default.timing(k,{toValue:0,duration:300,useNativeDriver:!0}).start((()=>C(!1)))}),3e3))},M=()=>{C(!0),P.default.timing(k,{toValue:1,duration:200,useNativeDriver:!0}).start(),z()},V=async()=>{T.current&&(P.default.sequence([P.default.timing(F,{toValue:.8,duration:100,useNativeDriver:!0}),P.default.spring(F,{toValue:1,friction:3,tension:40,useNativeDriver:!0})]).start(),r?(await T.current.pauseAsync(),M()):(await T.current.playAsync(),z()),s(!r))},O=e=>{if(!e||isNaN(e))return"0:00";const t=Math.floor(e/1e3),a=t%60;return`${Math.floor(t/60)}:${a<10?"0":""}${a}`},N={width:Ce,height:w&&j?Ce*j/w:9*Ce/16,backgroundColor:"#000"};return(0,R.jsx)(d.default,{style:[be.container,t],children:(0,R.jsxs)(pe.default,{style:[be.videoWrapper,N],onPress:()=>{x||M()},children:[(0,R.jsx)(G.default,{ref:T,source:{uri:e},style:h.default.absoluteFill,resizeMode:Z.ResizeMode.CONTAIN,onPlaybackStatusUpdate:e=>{if(!e.isLoaded||A)return;const t=e.positionMillis/(e.durationMillis||1);m(e.positionMillis||0),E.setValue(t)},onLoad:e=>{e.isLoaded&&(l(e.durationMillis||0),y(!1),e.isLoaded&&e.videoWidth&&e.videoHeight&&(v(e.videoWidth),S(e.videoHeight)))},isLooping:!0,useNativeControls:!1}),p&&(0,R.jsx)(d.default,{style:be.loadingContainer,children:(0,R.jsx)(g.default,{size:"large",color:"#fff"})}),x&&(0,R.jsxs)(P.default.View,{style:[be.controlsContainer,{opacity:k}],children:[(0,R.jsx)(P.default.View,{style:[be.playButton,{transform:[{scale:F}]}],children:(0,R.jsx)(u.default,{onPress:V,style:be.playButtonTouchable,children:(0,R.jsx)(xe.default,{name:r?"pause":"play-arrow",size:50,color:"#fff"})})}),(0,R.jsx)(d.default,{style:be.bottomControls,children:(0,R.jsxs)(d.default,Object.assign({style:be.progressContainer},D.panHandlers,{children:[(0,R.jsxs)(d.default,{style:be.progressBar,children:[(0,R.jsx)(P.default.View,{style:[be.progress,{width:E.interpolate({inputRange:[0,1],outputRange:["0%","100%"]})}]}),(0,R.jsx)(P.default.View,{style:[be.sliderThumb,{transform:[{translateX:B}]}]})]}),(0,R.jsxs)(d.default,{style:be.timeContainer,children:[(0,R.jsx)(f.default,{style:be.timeText,children:O(c)}),(0,R.jsx)(f.default,{style:be.timeText,children:O(i)})]})]}))})]})]})})},ve=h.default.create({container:{backgroundColor:"#fff",padding:15,borderBottomWidth:1,borderBottomColor:"#eee"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},userInfo:{flexDirection:"row",alignItems:"center",flex:1},avatarContainer:{width:40,height:40,marginRight:10,borderRadius:20,overflow:"hidden",backgroundColor:"#f0f0f0"},avatar:{width:"100%",height:"100%",borderRadius:20},userTextInfo:{flex:1},nameContainer:{flexDirection:"row",alignItems:"center",gap:2},name:{fontSize:16,fontWeight:"600",color:"#000"},verifiedBadge:{width:16,height:16},username:{fontSize:14,color:"#666"},date:{fontSize:12,color:"#666"},text:{fontSize:16,color:"#000",marginBottom:10,lineHeight:22},mediaContainer:{width:"100%",backgroundColor:"#000",borderRadius:10,overflow:"hidden",marginVertical:5},mediaContent:{width:"100%",height:"100%"},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.9)",justifyContent:"center",alignItems:"center"},modalContent:{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},fullScreenMedia:{width:"100%",height:"100%"},closeButton:{position:"absolute",top:40,right:20,zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",width:40,height:40,borderRadius:20,justifyContent:"center",alignItems:"center"},closeButtonText:{color:"#fff",fontSize:24,fontWeight:"bold"},downloadButton:{position:"absolute",right:20,bottom:40,backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:25,padding:12,zIndex:1},downloadIcon:{width:24,height:24,tintColor:"#fff"},footer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},reactions:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:20},reactionButton:{flexDirection:"row",alignItems:"center",padding:8,borderRadius:20,backgroundColor:"#f8f8f8"},reactionButtonActive:{backgroundColor:"#E3F2FD"},dislikeButtonActive:{backgroundColor:"#FFE5E5"},reactionIcon:{width:24,height:24},reactionIconActive:{tintColor:"#007AFF"},dislikeIconActive:{tintColor:"#FF3B30"},reactionCount:{fontSize:15,fontWeight:"600",color:"#666",marginLeft:6},reactionCountActive:{color:"#007AFF"},dislikeCountActive:{color:"#FF3B30"},reactionLoader:{marginLeft:4},pointerEventsAuto:{pointerEvents:"auto"},pointerEventsNone:{pointerEvents:"none"},myPostBadge:{backgroundColor:"#E3F2FD",paddingHorizontal:8,paddingVertical:4,borderRadius:12},myPostText:{fontSize:12,color:"#007AFF",fontWeight:"500"},videoOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"flex-end",alignItems:"flex-end",padding:10,backgroundColor:"rgba(0, 0, 0, 0.4)"},fileContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"#f5f5f5",padding:12,borderRadius:8,marginTop:8},fileIcon:{width:40,height:40,marginRight:12},fileInfo:{flex:1},fileName:{fontSize:16,fontWeight:"500",color:"#333",marginBottom:4},fileSize:{fontSize:14,color:"#666"}}),je=({post:e,onUpdate:t})=>{const[n,r]=(0,o.useState)(null),[s,i]=(0,o.useState)(e.Likes),[l,c]=(0,o.useState)(e.Dislikes),[h,m]=(0,o.useState)(e.Liked),[p,y]=(0,o.useState)(e.Disliked),[x,C]=(0,o.useState)(null),[A]=(0,o.useState)(new P.default.Value(1)),[b,w]=(0,o.useState)(!1),v=(0,o.useRef)(new P.default.Value(0)).current,[j,S]=(0,o.useState)(null),T=(0,o.useRef)(null),[I,F]=(0,o.useState)(!1),E=async(e,t,a)=>{try{if(a){const e=ne.getInstance();await e.downloadFile(a,t)}else{const a=document.createElement("a");a.href=e,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}catch(e){L.default.alert("Ошибка","Не удалось скачать файл")}},z=e=>{S(e),w(!0),P.default.timing(v,{toValue:1,duration:300,useNativeDriver:!0}).start()},M=()=>{P.default.timing(v,{toValue:0,duration:300,useNativeDriver:!0}).start((()=>{w(!1),S(null)}))},V=(0,o.useCallback)((e=>{const t=new Date(e);return(0,Q.format)(t,"dd MMMM, HH:mm",{locale:q.ru})}),[]),O=async a=>{if(!n)try{r(a),"LIKE"===a?h?(i((e=>e-1)),m(null)):(i((e=>e+1)),m("Liked"),p&&(c((e=>e-1)),y(null))):p?(c((e=>e-1)),y(null)):(c((e=>e+1)),y("Liked"),h&&(i((e=>e-1)),m(null))),await k.interactWithPost(a,e.ID),t()}catch(t){i(e.Likes),c(e.Dislikes),m(e.Liked),y(e.Disliked),L.default.alert("Ошибка","Не удалось выполнить действие")}finally{r(null)}},N=(0,o.useCallback)((e=>{P.default.sequence([P.default.timing(A,{toValue:.95,duration:100,useNativeDriver:!1}),P.default.spring(A,{toValue:1,friction:4,useNativeDriver:!1})]).start(),O("like"===e?"LIKE":"DISLIKE")}),[A,O]);(0,o.useEffect)((()=>{if(e.Avatar&&"None"!==e.Avatar){const t=`https://elemsocial.com/Content/Avatars/${e.Avatar}`;C(t)}}),[e.Avatar]);return(0,R.jsxs)(d.default,{style:ve.container,children:[(0,R.jsxs)(d.default,{style:ve.header,children:[(0,R.jsxs)(u.default,{style:ve.userInfo,onPress:()=>{F(!0)},children:[(0,R.jsx)(d.default,{style:ve.avatarContainer,children:e.Avatar&&"None"!==e.Avatar?(0,R.jsx)(H.default,{source:{uri:`https://elemsocial.com/Content/Avatars/${e.Avatar}`},style:ve.avatar}):(0,R.jsx)(Y,{name:e.Name||e.Username,size:40})}),(0,R.jsxs)(d.default,{style:ve.userTextInfo,children:[(0,R.jsxs)(d.default,{style:ve.nameContainer,children:[(0,R.jsx)(f.default,{style:ve.name,children:e.Name}),e.UserIcons&&e.UserIcons.includes("VERIFY")&&(0,R.jsx)(H.default,{source:a(3507),style:ve.verifiedBadge})]}),(0,R.jsxs)(f.default,{style:ve.username,children:["@",e.Username]})]})]}),(0,R.jsx)(f.default,{style:ve.date,children:V(e.Date)})]}),(0,R.jsx)(ce,{text:e.Text,style:ve.text}),(()=>{if(!e.Content)return null;try{const n=JSON.parse(e.Content),o=D.default.get("window").width-30;if(n.File)return(t=n.File)?(0,R.jsxs)(u.default,{onPress:()=>E("",t.file_name,t.file_id),style:ve.fileContainer,children:[(0,R.jsx)(H.default,{source:a(7030),style:ve.fileIcon}),(0,R.jsxs)(d.default,{style:ve.fileInfo,children:[(0,R.jsx)(f.default,{style:ve.fileName,children:t.file_name}),(0,R.jsx)(f.default,{style:ve.fileSize,children:ee(t.file_size)})]}),(0,R.jsx)(J.default,{name:"download",size:24,color:"#666"})]}):null;if(n.Image){const e=o/(n.Image.width/n.Image.height),t=.8*o,a=n.Image.simple_image?`https://elemsocial.com/Content/Simple/${n.Image.simple_image}`:`https://elemsocial.com/Content/Posts/Images/${n.Image.file_name}`,r=n.Image.orig_name||n.Image.file_name;return(0,R.jsx)(u.default,{onPress:()=>z({url:a,type:"image",filename:r,onClose:M,onDownload:E}),style:[ve.mediaContainer,{height:Math.min(e,t)}],children:(0,R.jsx)(H.default,{source:{uri:a},style:ve.mediaContent,resizeMode:"contain"})})}if(n.Video){const e=o/(n.Video.width/n.Video.height),t=.8*o,a=`https://elemsocial.com/Content/Posts/Video/${n.Video.file_name}`,r=n.Video.orig_name??n.Video.file_name;return(0,R.jsx)(d.default,{style:[ve.mediaContainer,{height:Math.min(e,t)}],children:(0,R.jsx)(we,{uri:a,style:ve.mediaContent,onPress:()=>{z({url:a,type:"video",filename:r,onClose:M,onDownload:E})}})})}}catch(e){return null}var t;return null})(),j?(0,R.jsx)(B.default,{transparent:!0,visible:b,onRequestClose:M,children:(0,R.jsxs)(P.default.View,{style:[ve.modalOverlay,{opacity:v}],children:[(0,R.jsx)(u.default,{style:ve.modalContent,activeOpacity:1,onPress:M,children:"image"===j.type?(0,R.jsx)(H.default,{source:{uri:j.url},style:ve.fullScreenMedia,resizeMode:"contain"}):(0,R.jsx)(G.default,{ref:T,source:{uri:j.url},style:ve.fullScreenMedia,resizeMode:Z.ResizeMode.CONTAIN,useNativeControls:!0,shouldPlay:!0,isLooping:!0})}),(0,R.jsx)(u.default,{style:ve.closeButton,onPress:M,children:(0,R.jsx)(f.default,{style:ve.closeButtonText,children:"✕"})}),(0,R.jsx)(u.default,{style:ve.downloadButton,onPress:()=>j.onDownload(j.url,j.filename,j.fileId),children:(0,R.jsx)(H.default,{source:a(852),style:ve.downloadIcon})})]})}):null,(0,R.jsxs)(d.default,{style:ve.footer,children:[(0,R.jsxs)(P.default.View,{style:[ve.reactions,{transform:[{scale:A}]},n?ve.pointerEventsNone:ve.pointerEventsAuto],children:[(0,R.jsxs)(u.default,{style:[ve.reactionButton,h&&ve.reactionButtonActive],onPress:()=>N("like"),children:[(0,R.jsx)(H.default,{source:a(5613),style:ve.reactionIcon,tintColor:h?"#007AFF":"#666",resizeMode:"contain"}),(0,R.jsx)(f.default,{style:[ve.reactionCount,h&&ve.reactionCountActive],children:s}),"LIKE"===n&&(0,R.jsx)(P.default.View,{style:ve.reactionLoader,children:(0,R.jsx)(g.default,{size:"small",color:h?"#007AFF":"#666"})})]}),(0,R.jsxs)(u.default,{style:[ve.reactionButton,p&&ve.dislikeButtonActive],onPress:()=>N("dislike"),children:[(0,R.jsx)(H.default,{source:a(9955),style:ve.reactionIcon,tintColor:p?"#FF3B30":"#666",resizeMode:"contain"}),(0,R.jsx)(f.default,{style:[ve.reactionCount,p&&ve.dislikeCountActive],children:l}),"DISLIKE"===n&&(0,R.jsx)(P.default.View,{style:ve.reactionLoader,children:(0,R.jsx)(g.default,{size:"small",color:p?"#FF3B30":"#666"})})]}),(0,R.jsxs)(u.default,{style:ve.reactionButton,children:[(0,R.jsx)(H.default,{source:a(7909),style:ve.reactionIcon,tintColor:"#666",resizeMode:"contain"}),(0,R.jsx)(f.default,{style:ve.reactionCount,children:e.Comments})]})]}),e.MyPost&&(0,R.jsx)(d.default,{style:ve.myPostBadge,children:(0,R.jsx)(f.default,{style:ve.myPostText,children:"Мой пост"})})]}),(0,R.jsx)(me,{visible:I,username:e.Username,onClose:()=>F(!1)})]})};var Se=a(1733),Te=a(9050);const Ie=h.default.create({container:Object.assign({backgroundColor:"#fff",borderRadius:12,overflow:"hidden"},void 0),formContainer:{width:"100%",backgroundColor:"#fff"},input:{minHeight:80,padding:15,fontSize:16,color:"#000",textAlignVertical:"top"},filesContainer:{flexDirection:"row",flexWrap:"wrap",padding:10,borderTopWidth:1,borderTopColor:"#eee"},filePreview:{width:100,height:100,margin:5,borderRadius:8,overflow:"hidden",position:"relative"},imagePreview:{width:"100%",height:"100%"},removeButton:{position:"absolute",top:5,right:5,width:24,height:24,borderRadius:12,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},removeButtonText:{color:"#fff",fontSize:18,fontWeight:"bold"},footer:{flexDirection:"row",alignItems:"center",padding:10,borderTopWidth:1,borderTopColor:"#eee"},addButton:{width:40,height:40,justifyContent:"center",alignItems:"center",marginRight:10},addButtonIcon:{width:24,height:24,tintColor:"#666"},submitButton:{flex:1,height:40,backgroundColor:"#007AFF",borderRadius:20,justifyContent:"center",alignItems:"center"},submitButtonDisabled:{backgroundColor:"#ccc"},submitButtonText:{color:"#fff",fontSize:16,fontWeight:"600"},errorText:{color:"#DC3545",fontSize:14,marginHorizontal:15,marginBottom:10},successMessage:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.9)"},successText:{color:"#28A745",fontSize:18,fontWeight:"600"}}),ke=({onPostCreated:e})=>{const[t,n]=(0,o.useState)(""),[r,s]=(0,o.useState)([]),[i,l]=(0,o.useState)(!1),[h,m]=(0,o.useState)(null),p=(0,o.useRef)(new P.default.Value(1)).current,y=(0,o.useRef)(new P.default.Value(0)).current;return(0,R.jsxs)(d.default,{style:Ie.container,children:[(0,R.jsxs)(P.default.View,{style:[Ie.formContainer,{transform:[{scale:p}]}],children:[(0,R.jsx)(c.default,{style:Ie.input,placeholder:"Что у вас нового?",placeholderTextColor:"#666",value:t,onChangeText:n,multiline:!0,maxLength:5e3,editable:!i}),r.length>0&&(0,R.jsx)(d.default,{style:Ie.filesContainer,children:r.map(((e,t)=>(0,R.jsxs)(d.default,{style:Ie.filePreview,children:[(0,R.jsx)(H.default,{source:{uri:e.uri},style:Ie.imagePreview}),(0,R.jsx)(u.default,{style:Ie.removeButton,onPress:()=>s(r.filter(((e,a)=>a!==t))),children:(0,R.jsx)(f.default,{style:Ie.removeButtonText,children:"×"})})]},t)))}),h&&(0,R.jsx)(f.default,{style:Ie.errorText,children:h}),(0,R.jsxs)(d.default,{style:Ie.footer,children:[(0,R.jsx)(u.default,{style:Ie.addButton,onPress:async()=>{try{const e=await Se.launchImageLibraryAsync({mediaTypes:Te.MediaTypeOptions.All,allowsEditing:!0,quality:1});if(!e.canceled){const t={uri:e.assets[0].uri,type:"image/jpeg",name:"photo.jpg"};s([...r,t])}}catch(e){m("Не удалось загрузить изображение")}},disabled:i,children:(0,R.jsx)(H.default,{source:a(4601),style:Ie.addButtonIcon})}),(0,R.jsx)(u.default,{style:[Ie.submitButton,!t.trim()&&0===r.length&&Ie.submitButtonDisabled],onPress:async()=>{if(t.trim()||0!==r.length){l(!0),m(null);try{const a=await k.createPost(t,r);n(""),s([]),P.default.sequence([P.default.timing(p,{toValue:.95,duration:200,useNativeDriver:!0}),P.default.timing(y,{toValue:1,duration:200,useNativeDriver:!0}),P.default.delay(1e3),P.default.timing(y,{toValue:0,duration:200,useNativeDriver:!0}),P.default.timing(p,{toValue:1,duration:200,useNativeDriver:!0})]).start(),e(a)}catch(e){m(e instanceof Error?e.message:"Не удалось создать пост")}finally{l(!1)}}else m("Добавьте текст или файлы")},disabled:i||!t.trim()&&0===r.length,children:i?(0,R.jsx)(g.default,{color:"#fff"}):(0,R.jsx)(f.default,{style:Ie.submitButtonText,children:"Опубликовать"})})]})]}),(0,R.jsx)(P.default.View,{style:[Ie.successMessage,{opacity:y}],pointerEvents:"none",children:(0,R.jsx)(f.default,{style:Ie.successText,children:"Пост опубликован!"})})]})},Fe=h.default.create({container:{position:"absolute",top:10,left:10,right:10,zIndex:1e3,borderRadius:8,overflow:"hidden"},content:{backgroundColor:"#333",padding:14,alignItems:"center",opacity:.9,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},errorContent:{backgroundColor:"#DC3545"},successContent:{backgroundColor:"#28A745"},text:{color:"#fff",fontSize:15,fontWeight:"500"}}),Ee=()=>{const[e,t]=(0,o.useState)("connecting"),[a,n]=(0,o.useState)(null),r=(0,o.useRef)(new P.default.Value(-100)).current,s=(0,o.useRef)(new P.default.Value(0)).current,i=(0,o.useRef)(!1);(0,o.useEffect)((()=>{const a=()=>{P.default.parallel([P.default.timing(r,{toValue:0,duration:300,useNativeDriver:!0}),P.default.timing(s,{toValue:1,duration:300,useNativeDriver:!0})]).start()},o=setInterval((()=>{A.connectionStatus&&A.ready?i.current||(t("connected"),i.current=!0,setTimeout(l,2e3)):i.current&&(t("error"),n("Соединение потеряно"),i.current=!1,a())}),1e3),d=setTimeout((()=>{"connecting"!==e||i.current||(t("error"),n("Не удалось установить соединение"),a())}),15e3);return"connecting"!==e||i.current||a(),()=>{clearInterval(o),clearTimeout(d)}}),[e]);const l=()=>{P.default.parallel([P.default.timing(r,{toValue:-100,duration:300,useNativeDriver:!0}),P.default.timing(s,{toValue:0,duration:300,useNativeDriver:!0})]).start()};return"connected"!==e||s?(0,R.jsx)(P.default.View,{style:[Fe.container,{transform:[{translateY:r}],opacity:s}],children:(0,R.jsx)(d.default,{style:[Fe.content,"error"===e&&Fe.errorContent,"connected"===e&&Fe.successContent],children:(0,R.jsx)(f.default,{style:Fe.text,children:(()=>{switch(e){case"connecting":return"Устанавливается соединение...";case"connected":return"Соединение установлено";case"error":return a||"Ошибка соединения"}})()})})}):null},Be=h.default.create({container:{marginVertical:10,borderBottomWidth:1,borderBottomColor:"#eee",paddingBottom:15},title:{fontSize:16,fontWeight:"600",marginLeft:15,marginBottom:10},scrollView:{paddingHorizontal:10},userContainer:{alignItems:"center",marginHorizontal:5,width:70},avatarContainer:{position:"relative",width:60,height:60},avatar:{width:60,height:60,borderRadius:30,backgroundColor:"#f0f0f0"},onlineIndicator:{position:"absolute",bottom:0,right:0,width:14,height:14,borderRadius:7,backgroundColor:"#4CAF50",borderWidth:2,borderColor:"#FFFFFF"},username:{fontSize:12,marginTop:5,textAlign:"center"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingHorizontal:20},emptyText:{fontSize:14,color:"#666"}}),Pe=()=>{const[e,t]=(0,o.useState)([]),[a,n]=(0,o.useState)(null),[r,s]=(0,o.useState)(!1),{colors:i}=(0,F.useTheme)();(0,o.useEffect)((()=>(A.addMessageHandler("social",(e=>{if("social"===e.type&&"get_online_users"===e.action&&Array.isArray(e.users)){const a=e.users.map((e=>({ID:e.id.toString(),AuthorID:e.id.toString(),Username:e.username,Name:e.name,Avatar:e.avatar})));t(a)}})),A.send({type:"social",action:"get_online_users"}),()=>{A.removeMessageHandler("social")})),[]);return(0,R.jsxs)(d.default,{style:Be.container,children:[(0,R.jsx)(f.default,{style:[Be.title,{color:i.text}],children:"Сейчас в сети"}),(0,R.jsx)(oe.default,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Be.scrollView,children:e.length>0?e.map((e=>(0,R.jsxs)(u.default,{style:Be.userContainer,onPress:()=>(e=>{n(e),s(!0)})(e),children:[(0,R.jsxs)(d.default,{style:Be.avatarContainer,children:[e.Avatar&&"None"!==e.Avatar?(0,R.jsx)(H.default,{source:{uri:`https://elemsocial.com/Content/Avatars/${e.Avatar}`},style:Be.avatar}):(0,R.jsx)(Y,{name:e.Name||e.Username,size:60}),(0,R.jsx)(d.default,{style:Be.onlineIndicator})]}),(0,R.jsx)(f.default,{style:[Be.username,{color:i.text}],numberOfLines:1,children:e.Name||e.Username})]},e.ID))):(0,R.jsx)(d.default,{style:Be.emptyContainer,children:(0,R.jsx)(f.default,{style:[Be.emptyText,{color:i.text}],children:"Загрузка..."})})}),a&&(0,R.jsx)(me,{visible:r,onClose:()=>s(!1),username:a.Username})]})},De=h.default.create({container:{flex:1,backgroundColor:"#fff"},contentContainer:{flex:1,position:"relative"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},header:Object.assign({backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#eee"},void 0),createPostContainer:{padding:15,borderBottomWidth:1,borderBottomColor:"#eee"},feedTypeContainer:{flexDirection:"row",paddingHorizontal:15,paddingVertical:10,backgroundColor:"#fff",zIndex:1},feedTypeButton:{flex:1,paddingVertical:8,alignItems:"center",borderRadius:20,marginHorizontal:4},activeFeedType:{backgroundColor:"#E3F2FD"},feedTypeText:{fontSize:14,fontWeight:"500",color:"#666"},activeFeedTypeText:{color:"#007AFF"},content:{flex:1},listContent:{flexGrow:1},loadingOverlay:Object.assign({},h.default.absoluteFillObject,{backgroundColor:"rgba(255, 255, 255, 0.8)",justifyContent:"center",alignItems:"center"}),pointerEventsAuto:{pointerEvents:"auto"},pointerEventsNone:{pointerEvents:"none"},footer:{padding:20,alignItems:"center"},errorContainer:{position:"absolute",left:0,right:0,bottom:0,padding:20,backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#eee",alignItems:"center"},errorText:{fontSize:14,color:"#FF3B30",textAlign:"center",marginBottom:15},retryButton:{backgroundColor:"#007AFF",paddingVertical:10,paddingHorizontal:20,borderRadius:20,marginBottom:10},retryButtonText:{color:"#fff",fontSize:16,fontWeight:"600"},loginButton:{paddingVertical:10,paddingHorizontal:20},loginButtonText:{color:"#007AFF",fontSize:16},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},emptyText:{fontSize:16,color:"#666",textAlign:"center"}}),Re=()=>{(0,F.useNavigation)();const[e,t]=(0,o.useState)("LATEST"),[a,n]=(0,o.useState)([]),[r,s]=(0,o.useState)(!0),[i,l]=(0,o.useState)(!1),[c,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!0),[y,x]=(0,o.useState)(null),C=(0,o.useRef)(),A=(0,o.useRef)(0),b=(0,o.useRef)(new P.default.Value(0)).current,w=(0,o.useRef)(new P.default.Value(1)).current,{logout:v}=o.useContext(We);(0,o.useEffect)((()=>{S().catch(console.error),I(!0)}),[e]),(0,o.useEffect)((()=>()=>{C.current&&clearTimeout(C.current)}),[]);const j=(0,o.useCallback)((e=>{P.default.parallel([P.default.timing(b,{toValue:e?1:0,duration:200,useNativeDriver:!1}),P.default.timing(w,{toValue:e?.3:1,duration:200,useNativeDriver:!1})]).start()}),[]),T=(0,o.useCallback)((async()=>{C.current&&clearTimeout(C.current);try{await v(),n([]),x(null),s(!1),l(!1),h(!1)}catch(e){}}),[v]),I=(0,o.useCallback)((async(t=!1)=>{try{if(!t&&c)return;const a=t?0:25*A.current;t?(s(!0),A.current=0,y||i||j(!0)):h(!0);const o=await k.getPosts(e,a);if("LATEST"===e&&0===o.length&&0===a)throw new Error("Не удалось загрузить ленту");n(t?o:e=>[...e,...o]),p(25===o.length),25===o.length&&(A.current+=1),x(null),C.current&&clearTimeout(C.current)}catch(t){if(x("Ошибка загрузки постов\n\nПопробуйте войти еще раз, перезагрузить страницу или использовать VPN"),"LATEST"===e){C.current&&clearTimeout(C.current);const e=5e3+1e3*Math.random();C.current=setTimeout((()=>{I(!0)}),e)}}finally{y||i||j(!1),s(!1),l(!1),h(!1)}}),[e,c,y,i]),E=(0,o.useCallback)((async e=>{try{const t=await k.loadPost(e);n((a=>a.map((a=>a.ID===e?t:a))))}catch(e){}}),[]),B=async e=>{try{const t=await k.getPost(e);n((e=>[t,...e]))}catch(e){}},D=(0,o.useCallback)((()=>{l(!0),I(!0)}),[I]),z=(0,o.useCallback)((()=>{!m||c||i||I(!1)}),[m,c,i,I]),M=(0,o.useCallback)((a=>{a!==e&&(C.current&&clearTimeout(C.current),n([]),p(!0),A.current=0,t(a))}),[e]),V=(0,o.useCallback)((({item:e})=>(0,R.jsx)(je,{post:e,onUpdate:()=>E(e.ID)})),[E]),O=(0,o.useCallback)((()=>(0,R.jsxs)(d.default,{style:De.header,children:[(0,R.jsx)(Ee,{}),(0,R.jsx)(Pe,{}),(0,R.jsx)(d.default,{style:De.createPostContainer,children:(0,R.jsx)(ke,{onPostCreated:B})}),(0,R.jsxs)(d.default,{style:De.feedTypeContainer,children:[(0,R.jsx)(u.default,{style:[De.feedTypeButton,"LATEST"===e&&De.activeFeedType],onPress:()=>M("LATEST"),children:(0,R.jsx)(f.default,{style:[De.feedTypeText,"LATEST"===e&&De.activeFeedTypeText],children:"Новые"})}),(0,R.jsx)(u.default,{style:[De.feedTypeButton,"REC"===e&&De.activeFeedType],onPress:()=>M("REC"),children:(0,R.jsx)(f.default,{style:[De.feedTypeText,"REC"===e&&De.activeFeedTypeText],children:"Рекомендации"})}),(0,R.jsx)(u.default,{style:[De.feedTypeButton,"SUBSCRIPTIONS"===e&&De.activeFeedType],onPress:()=>M("SUBSCRIPTIONS"),children:(0,R.jsx)(f.default,{style:[De.feedTypeText,"SUBSCRIPTIONS"===e&&De.activeFeedTypeText],children:"Подписки"})})]})]})),[e,M,B]),N=(0,o.useCallback)((()=>y?(0,R.jsxs)(d.default,{style:De.errorContainer,children:[(0,R.jsx)(f.default,{style:De.errorText,children:y}),(0,R.jsx)(u.default,{style:De.retryButton,onPress:()=>I(!0),children:(0,R.jsx)(f.default,{style:De.retryButtonText,children:"Повторить"})}),(0,R.jsx)(u.default,{style:De.loginButton,onPress:T,children:(0,R.jsx)(f.default,{style:De.loginButtonText,children:"Войти заново"})})]}):null),[y,T]),H=(0,o.useCallback)((()=>r?null:(0,R.jsx)(d.default,{style:De.emptyContainer,children:(0,R.jsx)(f.default,{style:De.emptyText,children:y?"":"Нет постов"})})),[r,y]),L=(0,o.useCallback)((()=>c?(0,R.jsx)(d.default,{style:De.footer,children:(0,R.jsx)(g.default,{size:"small",color:"#007AFF"})}):null),[c]);return r&&0===a.length?(0,R.jsx)(d.default,{style:De.container,children:(0,R.jsx)(d.default,{style:De.loadingContainer,children:(0,R.jsx)(g.default,{size:"large",color:"#007AFF"})})}):(0,R.jsxs)(d.default,{style:De.container,children:[(0,R.jsx)(W.default,{data:a,renderItem:V,keyExtractor:t=>`${e}_${t.ID}`,onEndReached:z,onEndReachedThreshold:.5,refreshControl:(0,R.jsx)(U.default,{refreshing:i,onRefresh:D,colors:["#007AFF"],tintColor:"#007AFF"}),ListEmptyComponent:H,ListFooterComponent:L,contentContainerStyle:De.listContent,ListHeaderComponent:O}),N()]})},{width:ze}=D.default.get("window"),Me=h.default.create({container:{flex:1,backgroundColor:"#fff"},centered:{flex:1,justifyContent:"center",alignItems:"center",padding:20},profileInfo:{position:"relative"},coverImage:{width:"100%",height:200},avatarWrapper:{alignItems:"center",marginTop:20,marginBottom:10},avatarWithCover:{marginTop:-50},avatar:{width:100,height:100,borderRadius:50,borderWidth:4,borderColor:"#fff",backgroundColor:"#f0f0f0"},nameContainer:{alignItems:"center",marginBottom:15,paddingHorizontal:15},nameRow:{flexDirection:"row",alignItems:"center",gap:8,marginBottom:4},name:{fontSize:24,fontWeight:"bold",color:"#000",marginBottom:4},username:{fontSize:16,color:"#666",marginBottom:8},description:{fontSize:14,color:"#444",textAlign:"center",paddingHorizontal:20,marginTop:8},iconsContainer:{flexDirection:"row",flexWrap:"wrap",justifyContent:"center",marginTop:8,gap:8},icon:{width:24,height:24},stats:{flexDirection:"row",justifyContent:"space-around",paddingVertical:15,borderTopWidth:1,borderBottomWidth:1,borderColor:"#eee",marginVertical:15,marginHorizontal:15},statItem:{alignItems:"center",flex:1},statNumber:{fontSize:18,fontWeight:"bold",color:"#000"},statLabel:{fontSize:12,color:"#666",marginTop:4},logoutButton:{backgroundColor:"#007AFF",padding:12,borderRadius:8,alignItems:"center",marginHorizontal:15,marginTop:15,marginBottom:20},logoutButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"},retryButton:{marginTop:10,padding:10,backgroundColor:"#007AFF",borderRadius:8},retryButtonText:{color:"#fff",fontSize:16},verifiedBadge:{width:20,height:20}}),Ve=({username:e})=>{const{logout:t}=(0,o.useContext)(We),[n,r]=(0,o.useState)(null),[s,i]=(0,o.useState)(!0),[l,c]=(0,o.useState)(""),[h,m]=(0,o.useState)(!1);(0,o.useEffect)((()=>{y()}),[e]);const y=async()=>{try{let t;if(i(!0),c(""),e)t=await I.getProfile(e);else{const e=await(async()=>{const e=await p.default.getItem("account_data");return e?JSON.parse(e):null})();if(!e)throw new Error("Не удалось получить данные аккаунта");t=await I.getProfile(e.username)}t.avatar&&(t.avatar=`https://elemsocial.com/Content/Avatars/${t.avatar}`),t.cover&&(t.cover=`https://elemsocial.com/Content/Covers/${t.cover}`),r(t)}catch(e){c("Не удалось загрузить профиль. Проверьте подключение к интернету или попробуйте войти заново.")}finally{i(!1),m(!1)}};if(s)return(0,R.jsx)(d.default,{style:Me.centered,children:(0,R.jsx)(g.default,{size:"large",color:"#007AFF"})});if(!n)return(0,R.jsxs)(d.default,{style:Me.centered,children:[(0,R.jsx)(f.default,{children:"Профиль не найден"}),(0,R.jsx)(u.default,{style:Me.retryButton,onPress:y,children:(0,R.jsx)(f.default,{style:Me.retryButtonText,children:"Повторить попытку"})})]});return(0,R.jsxs)(oe.default,{style:Me.container,refreshControl:(0,R.jsx)(U.default,{refreshing:h,onRefresh:()=>{m(!0),y()}}),children:[(0,R.jsx)(V,{message:l,onClose:()=>c("")}),(0,R.jsxs)(d.default,{style:Me.profileInfo,children:[n.cover&&(0,R.jsx)(H.default,{source:{uri:n.cover},style:Me.coverImage,resizeMode:"cover"}),(0,R.jsx)(d.default,{style:[Me.avatarWrapper,n.cover?Me.avatarWithCover:null],children:n.avatar?(0,R.jsx)(H.default,{source:{uri:n.avatar},style:Me.avatar,resizeMode:"cover"}):(0,R.jsx)(Y,{name:n.name||n.username,size:100})}),(0,R.jsxs)(d.default,{style:Me.nameContainer,children:[(0,R.jsxs)(d.default,{style:Me.nameRow,children:[(0,R.jsx)(f.default,{style:Me.name,children:n.name}),n.icons&&n.icons.includes("VERIFY")&&(0,R.jsx)(H.default,{source:a(3507),style:Me.verifiedBadge})]}),(0,R.jsxs)(f.default,{style:Me.username,children:["@",n.username]}),n.description&&(0,R.jsx)(f.default,{style:Me.description,children:n.description}),n.icons&&n.icons.length>0&&(0,R.jsx)(d.default,{style:Me.iconsContainer,children:n.icons.filter((e=>"VERIFY"!==e)).map(((e,t)=>(0,R.jsx)(H.default,{source:{uri:`https://elemsocial.com/Content/Icons/${e}`},style:Me.icon},t)))})]}),(()=>{const e=[{label:"Посты",value:n.posts},{label:"Подписчики",value:n.subscribers},{label:"Подписки",value:n.subscriptions}];return(0,R.jsx)(d.default,{style:Me.stats,children:e.map((e=>(0,R.jsxs)(d.default,{style:Me.statItem,children:[(0,R.jsx)(f.default,{style:Me.statNumber,children:e.value?.toLocaleString()||"0"}),(0,R.jsx)(f.default,{style:Me.statLabel,children:e.label})]},e.label)))})})(),n.my_profile&&(0,R.jsx)(u.default,{style:Me.logoutButton,onPress:async()=>{try{await t()}catch(e){c("Не удалось выйти из аккаунта")}},children:(0,R.jsx)(f.default,{style:Me.logoutButtonText,children:"Выйти"})})]})]})},Oe=(0,s.createBottomTabNavigator)(),Ne=(0,i.createNativeStackNavigator)(),We=(0,o.createContext)({isLoggedIn:!1,setIsLoggedIn:()=>{},logout:async()=>{}}),Ue=()=>(0,R.jsxs)(Oe.Navigator,{screenOptions:{tabBarActiveTintColor:"#007AFF",tabBarInactiveTintColor:"#8E8E93",tabBarStyle:{backgroundColor:"#FFFFFF",borderTopWidth:1,borderTopColor:"#E5E5EA"},headerStyle:{backgroundColor:"#FFFFFF"},headerTitleStyle:{color:"#000000",fontSize:17,fontWeight:"600"}},children:[(0,R.jsx)(Oe.Screen,{name:"Feed",component:Re,options:{title:"Главная",tabBarIcon:({color:e,size:t})=>(0,R.jsx)(l.default,{name:"home-outline",size:t,color:e}),headerTitle:"Главная"}}),(0,R.jsx)(Oe.Screen,{name:"Profile",component:Ve,options:({navigation:e})=>({title:"Мой профиль",tabBarIcon:({color:e,size:t})=>(0,R.jsx)(l.default,{name:"person-outline",size:t,color:e}),headerTitle:"Мой профиль",headerRight:()=>{const{logout:e}=(0,o.useContext)(We);return(0,R.jsx)(l.default,{name:"log-out-outline",size:24,color:"#ff3b30",style:{marginRight:15},onPress:e})}})})]}),He=h.default.create({headerContainer:{flexDirection:"row",alignItems:"center",gap:8},headerLogo:{width:24,height:24},headerTitle:{fontSize:18,fontWeight:"bold",color:"#000"}}),Le=()=>{const[e,t]=(0,o.useState)(!1);(0,o.useEffect)((()=>{n()}),[]);const n=async()=>{await p.default.clear();const e=await p.default.getItem("S-KEY");t(!!e)},s=async()=>{await p.default.removeItem("S-KEY"),t(!1)};return e?(0,R.jsx)(We.Provider,{value:{isLoggedIn:e,setIsLoggedIn:t,logout:s},children:(0,R.jsx)(r.NavigationContainer,{children:(0,R.jsx)(Ne.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#fff"},headerTintColor:"#000",headerTitleStyle:{fontWeight:"bold"},headerTitle:()=>(0,R.jsxs)(d.default,{style:He.headerContainer,children:[(0,R.jsx)(H.default,{source:a(3153),style:He.headerLogo,resizeMode:"contain"}),(0,R.jsx)(f.default,{style:He.headerTitle,children:"Element+"})]})},children:(0,R.jsx)(Ne.Screen,{name:"Main",component:Ue})})})}):(0,R.jsx)(We.Provider,{value:{isLoggedIn:e,setIsLoggedIn:t,logout:s},children:(0,R.jsx)(r.NavigationContainer,{children:(0,R.jsx)(Ne.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#fff"},headerTintColor:"#000",headerTitleStyle:{fontWeight:"bold"},headerTitle:()=>(0,R.jsxs)(d.default,{style:He.headerContainer,children:[(0,R.jsx)(H.default,{source:a(3153),style:He.headerLogo,resizeMode:"contain"}),(0,R.jsx)(f.default,{style:He.headerTitle,children:"Element+"})]})},children:(0,R.jsx)(Ne.Screen,{name:"Auth",component:N})})})})};var Ke=a(3049);const Ye=h.default.create({container:{flex:1,backgroundColor:"#fff"}});(0,n.default)((function(){(0,o.useEffect)((()=>{window.localStorage.clear()}),[]);const e=(0,o.useCallback)((()=>(0,R.jsx)(Le,{})),[]);return(0,R.jsxs)(d.default,{style:Ye.container,children:[(0,R.jsx)(Ke.StatusBar,{style:"auto"}),e()]})}))},6664:()=>{const e=console.error;console.error=(...t)=>{t[0]?.includes?.("Warning: Encountered two children with the same key")||e.apply(console,t)}},4601:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVR4nO2WvUoDQRDHf5UIqVNpnVfQBHwC30BI40tY2dkJdjGJH13SGNJJ+iQ+iC9gofae/JPdIMtxt5NdrvIPA/cxMz9mbnb3YKtjYAZ8AUWFvQMXLsYsQT5qAKFd7QOaueBX4KjC7yyA3VhBvl2qrEqHJZXdWUA+yOJb/LHbpkAFcN0UqAD6OUHrmtHPBgrVAs5jc6SAvP5Be2sKXDbxjaKUA9QDxm78ZSOgmxN0ADxVrK1H55MMeo44Uh5SQb2SpGFO2Q9wmgIaRYJk9ymgt4hY/36VAlobQEvLCRtqaGjdQA/n7mZhhHUNw3Cihx3jX9A30HYJtU7q/DU0O6mSF+AzEjZxcVqM2hHKfFSJILsFm0NqjUbYb0G63rTL6xdQQ9p89CF4vAAAAABJRU5ErkJggg=="},7909:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/UlEQVR4nO2ay2sTURTGp4qPnaiL+mhN7kkF34iCCoILdz5w6R9QfCz9AxTiKk3OSUoLbnyBKxfuXFgVfCtFRReKVRGlrzlnUtFua2vryB3aqJ20mWkzj9R88EFIZjLfL/fMzJ1zYxh11VVX8LLtBigUtwPKaUC5rIgfAHIfkAwr4p/a+jUQ9zqfkVxK5eUUkLVN72tErVSOdymUToUyACT2HN2vUDoSaO4MHUDlrKOKpHse4ctakTyDnBwOHgAHdwDK02oDuIz82Cm7quuGvVgRn1fIY4FDUGl0RoHknJG2F1WFoakwsApQ7oQFANOBkLs2tPWvnBeE6ig2AsmbqCDgD0xPc65/3ZwgNmXM1UDyMWoIKJnf6+rwBdHS+WkZkDyJPrxMH5mHuy/aSzyDADFFHRpmMkrGGwTyfiCeiC8IjycKxX2zU9h2QxA3ugBgns86tUnmzWORhySvto7MCKJQ7kUfUDxZEd8uC7GxMLAekH9FHRA8mycSOLTGXVbIJ6MPJ/5GJWe2likrvhZ1MPDvq+XOj1cxCGb7MvLLciMy5HlIiW+1ZAebtPWkLqztwA1SLDciP7x+gT7g1H6pvNkc1nbg9ogLRL+5MECQxXNpIXfpA2rr63lY24HLbLlLi+S1j18ivic7oFyJPBhV4fK7cG6IHcVGPUWOOhx4Nk/ozC6QBTNp1NLNsagDQjWm8c6DVQ1MVRRJd8WecZKsvbE+V5DHdUbDi4C4UPPNB60t6XdLdeul5ttBpQYdyocYQfTMuXXq9H2JX8QCov3rWmM+guzwCkC5WdNN7H+W1vJ8JlQAklGFcrZqywpTSrRZyfBA+FEwCz3OcpvZGjgAOqthhwIBKIH4euDxE577QlsMTWRlc6XmnfPMj5IG4gt68qmIPyuSb06tTy5PK+QvCvm+Xp5WeT6RylpbjTClUK5XKInvQNZBI85KkhyoMBp3/24exFKJdO/yGe/uyG+TZB2PxT8XKgmQ2yeDjygU07ksomRU1tpTcee6/nP9BqNcPi0qc61MAAAAAElFTkSuQmCC"},9955:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADVElEQVR4nO2Zz2sTURDHVyuICqKC1UJpMpMoIoqCB0/+uIkHQfwDvHjTg4i/jkFBtDOJGi8Kooh6kHr2YtWDP0upCP6g0ovadmZbFS9WsSKNvKTRttmkm+xLdgMdGFhCdjaf+b43+zLjIOtjIO1DdludZjYk6UXWHJC8aWqY5BldiSSvDQyS9nec/9zmNKsl52Aiask5ZSJqyG5roYr9r2Zx1lic9BiQPEQSBdZx48jiAssjIDkVzwxt8vuMGA1vBpbT5t5CDB1HkjFTcJC1G0lOQHp4rVUYZP2GJBOT15Wd9EmcdXu5uAl2dwLrU1+x2CRSHyTSusUmjH8nmQCWK+2ZwUXFWOYaSa9WHYuL8fTSjlRuQVUAq9hdAp2yLRCMySbr846zn5a3ZwZXIElPTRA8XZ3YhQ/LfEEYamC5B6S/kHV3YBjSZwYoKAROgfGlDJBenHKTFRjbDqTZihCm6iDJnxnLYxx4eE/JeyZMJ5moWADypdU7A1FUptsTooNdqFRio6gMeL1nkOXkrDdGDsY9Xrqs8m9YH1mI0jIjve+liOtb0ujAvPdQxJybqlifEVhmQPI9MEhEYH54lF79UlNWQoQB0sHSPRLgB4S4Z155La07gbITgjJAcsML5KgFqRuqDLAe9Ci/7gY7WWocTCwt60pACqrIW0uZqv8yI+n1hMhnMC2HrcleZ2WA3EOV/xmSjFp7WL2UIdG2lCwuCzK56Y/YzZx9ZcBrk3v/1dWXVmFsKkPS43TlWmYFyWcuM7Ix32OKmjKkP8tWqrIwrPt897IapAywHHBqMSA9ZxMkiDJAQk7N1pVrQdLbYcMA6XUnl5vnBLJUbj6yXgsNhuSm783tBwZILjcaBkz/KpWb79g2042f2feqFwyQjJqCYB3iH0xaduW7842oZqT9MRpdXTcY7BxaU5wG21QGPBrndZ82mxOA6YUBye/AIGZsQJpNZgcWFuM3VBljcXa3AutAAIiPZvjjFTvZaBhzEjUZrR5Eusz8JHID2kRa9iLJiA8VRsx3/cbFRu6ZopkMI8utChB3aymrybBG5wnS/dNO0CRj5rMgMTEMZYwlWdcDyTvj5tpGTAwNJvt1qXGbMTEsmHoYTj2bVeqoNIMVYLQPSV78BYH4EebaytfUAAAAAElFTkSuQmCC"},852:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyklEQVR4nO2WTQrCQAyFP1T8uZOewsO4c2u9hRs3rgTB1gNVL1EYCYwiQ0szmVFc9MGDWbzJRwKBQL+mwB64Ay5wDRQ+k6yiBeACSyZZbZ24wI8cIKd0sgaQWcPo/mt0a6CJKO463PhanRoBpwygMzDu60oCxwTIFZhpR2iFlcBcC7HCSgskFlalQLSwKgekD3aLgWgXTmCHj/wFWMTUj9ls2bMNsAUmyj8mkEXu56DaP5ZfgKx8bWGozqlU7wQkx5/AXp3l9PvAfAKV7hPWLfRRtQAAAABJRU5ErkJggg=="},7030:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVR4nO2ZQUrEQBBFnwMGPbDoKjhH0IW78TJ6Cp2LDARKArMoZMDprkoqyH9Qm0Cn+pFP0lRACHEN98AeOAITYI11Al6AHUWb/+zY9KU6VEjskzZfJnF0zR+A28b15RKTazx0rC9/EuYquv5QIWGJAjfA269r70tLZApQIWHJAqtL2AICq0rYQgIzq0hEBf56De+WfjtFBfyH8LFCwoICz4Fjx+sWBCKHwdMWBGbugBH47jiOh0m9WUVPk0A7pifgUIQ6MEXIoQh1YIqQQxHqwBQhhyLUgSlCDkWoA1OEEsfrrQyu39w7zDVznSwG4Mn1+8q4aWSuE61xaz/5WurjPI5JITLXaanp3GPM3LwQ/5kfn7GkApTkdIQAAAAASUVORK5CYII="},5613:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3klEQVR4nO2ZS2gTURSG70Kt6ELwQVErk3OTSi0IPhBFBBF3bkVwoaIICuLGlYJgoKAm50zEbtSCouDOpYuurFLrA3zgxoUEQUznnIkoYqFaKtjIbdVWM6kzyTQzA/nhh0AyZ/5v7r1zZm6UaqmlllpqKc6ycrJOI58B5AFN8kYjjwLJuCZ2gfg+EPdY6GzwWy9jOxvNMebYqRoybmqa2oByTxOftmzuCg0gRe5WQH6gSSp+DCiP03l3V6162nZ2A8kT3/XIXCTZUjdAd/b1AiC+ppEn/J70H99YmeVFv+u1k7sYiG/WVQtNBr5iMgWCWGvzco0yVCfAzADPTK3MeVkBKC9CqDfYdcFZ5gsi01tsCwViemo8Nw6rnkYe9DUyGuV6aCedIwNK36wQVqG8rYE10VSnbWd7TRAgeRR1QO3fD72nVKG8PgbhKkGcIemuBiE5F3UwHdCAcrZ6WgVoenExIA94rA9+mzgQkqLX1PoadTAd1MijXiBjyQORb15r5EPkwSio2fXqIS+jDyaBbB59PKYW304cCPItrxE5EXUwHdQox6tAOi+VdeTBKJhTJFYVyOT0Qn6aoNEYUrWURjkUeUDyZ0A5UBNkc19lfhI6PJAUd2Yr82qCTN29nP0JGI29s0JMrxW5G18I7ld+BZfL7UAyHHVoXW1ek3+/SgVROs+bzLNMDMJXfnms7v2tFMnBGABUpuwcUY1osuNHuSGBPAEkp1QYSttyTBP/iAaCT6owpdE9DMjfmwUBJOOmQYcK8QfG5h0auTznECgfZ9sID0WZ3HCH2dOdQ5BX1kU3pZohK/tuIaDkQl03Zj2g9M3cwW+aJv/rQCk1DsKuzsuepgP8BZP7vMRcyQYg7nQUSktVXATo7gOSTwEAvpiGq+KozkJptXmo+/9difvNb1XcBcRHAXnEA2DEfKeSpBSJNfPV2Ww3pQuljEqiMr3FNkC+amw+R52npZZUcP0EmHikhthgrMsAAAAASUVORK5CYII="},3153:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/logo.0983b5b501b91604744b.png"},3507:(e,t,a)=>{"use strict";e.exports=a.p+"static/media/verify.c35ae86d10b99aec2123.png"}},a={};function n(e){var o=a[e];if(void 0!==o)return o.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,o,r)=>{if(!a){var s=1/0;for(c=0;c<e.length;c++){for(var[a,o,r]=e[c],i=!0,l=0;l<a.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((e=>n.O[e](a[l])))?a.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,o,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/KirixElemClient/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,[s,i,l]=a,d=0;if(s.some((t=>0!==e[t]))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var c=l(n)}for(t&&t(a);d<s.length;d++)r=s[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=n.O(void 0,[878],(()=>n(692)));o=n.O(o)})();
//# sourceMappingURL=main.39184c0c.js.map