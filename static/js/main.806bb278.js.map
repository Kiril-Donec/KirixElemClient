{"version":3,"file":"static/js/main.806bb278.js","mappings":"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","sources":["webpack/runtime/chunk loaded","src/services/Crypto.ts","src/services/WebSocket.ts","src/services/api.ts","src/components/ErrorMessage.tsx","src/screens/LoginScreen.tsx","src/components/LetterAvatar.tsx","src/constants/websocket.ts","src/utils/fileUtils.ts","src/services/FileService.ts","src/components/LinkConfirmModal.tsx","src/components/LinkText.tsx","src/components/ProfileModal.tsx","src/components/CustomVideoPlayer.tsx","src/components/PostCard.tsx","src/components/CreatePost.tsx","src/components/WebSocketStatus.tsx","src/components/OnlineUsers.tsx","src/screens/FeedScreen.tsx","src/screens/ProfileScreen.tsx","src/navigation/index.tsx","App.tsx","index.ts","src/utils/disableWarnings.ts","webpack/bootstrap","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","//    ArrayBuffer  PEM \nexport async function arrayBufferToPem(buffer: ArrayBuffer, type: string): Promise<string> {\n    const binary = String.fromCharCode.apply(null, Array.from(new Uint8Array(buffer)));\n    const base64 = btoa(binary);\n    let pem = `-----BEGIN ${type}-----\\n`;\n    pem += base64.match(/.{1,64}/g)?.join('\\n') || '';\n    pem += `\\n-----END ${type}-----\\n`;\n    return pem;\n}\n\n//   \nexport function importPublicKey(pk: string): ArrayBuffer {\n    const base64String = pk\n        .replace(/-----BEGIN PUBLIC KEY-----/, '')\n        .replace(/-----END PUBLIC KEY-----/, '')\n        .replace(/\\s/g, '');\n    const publicKeyBytes = Uint8Array.from(atob(base64String), c => c.charCodeAt(0));\n    return publicKeyBytes.buffer;\n}\n\n//   \nexport function importPrivateKey(pk: string): ArrayBuffer {\n    const base64String = pk\n        .replace(/-----BEGIN PRIVATE KEY-----/, '')\n        .replace(/-----END PRIVATE KEY-----/, '')\n        .replace(/\\s/g, '');\n    const privateKeyBytes = Uint8Array.from(atob(base64String), c => c.charCodeAt(0));\n    return privateKeyBytes.buffer;\n}\n\n// RSA \nexport async function rsaEncrypt(data: string, pk: string): Promise<Uint8Array> {\n    try {\n        const publicKeyBuffer = importPublicKey(pk);\n        const dataBuffer = new TextEncoder().encode(data);\n        const publicKeyE = await crypto.subtle.importKey(\n            'spki',\n            publicKeyBuffer,\n            { name: 'RSA-OAEP', hash: { name: 'SHA-256' } },\n            true,\n            ['encrypt']\n        );\n        const encryptedDataBuffer = await crypto.subtle.encrypt(\n            { name: 'RSA-OAEP' },\n            publicKeyE,\n            dataBuffer\n        );\n        return new Uint8Array(encryptedDataBuffer);\n    } catch (error) {\n        throw new Error('  : ' + (error as Error).message);\n    }\n}\n\n// RSA \nexport async function rsaDecrypt(data: Uint8Array, privateKey: ArrayBuffer): Promise<string> {\n    try {\n        const privateKeyE = await crypto.subtle.importKey(\n            'pkcs8',\n            privateKey,\n            { name: 'RSA-OAEP', hash: { name: 'SHA-256' } },\n            true,\n            ['decrypt']\n        );\n        const decryptedDataBuffer = await crypto.subtle.decrypt(\n            { name: 'RSA-OAEP' },\n            privateKeyE,\n            data\n        );\n        return new TextDecoder().decode(decryptedDataBuffer);\n    } catch (error) {\n        throw new Error('  : ' + (error as Error).message);\n    }\n}\n\n//   AES (32 ,   Base64)\nexport function generateAESKey(): string {\n    const bytes = crypto.getRandomValues(new Uint8Array(32));\n    return btoa(String.fromCharCode(...Array.from(bytes)));\n}\n\n//  Base64  ArrayBuffer\nexport function base64ToBytes(base64: string): ArrayBuffer {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array([...binaryString].map(char => char.charCodeAt(0)));\n    return bytes.buffer;\n}\n\n// AES \nexport async function aesEncrypt(data: string, key: string): Promise<Uint8Array | null> {\n    const iv = crypto.getRandomValues(new Uint8Array(16));\n    const encodedData = new TextEncoder().encode(data);\n\n    try {\n        const importedKey = await crypto.subtle.importKey(\n            'raw',\n            base64ToBytes(key),\n            { name: 'AES-CBC' },\n            false,\n            ['encrypt']\n        );\n        const encryptedBuffer = await crypto.subtle.encrypt(\n            { name: 'AES-CBC', iv: iv },\n            importedKey,\n            encodedData\n        );\n\n        //  IV      \n        const result = new Uint8Array(iv.byteLength + encryptedBuffer.byteLength);\n        result.set(iv);\n        result.set(new Uint8Array(encryptedBuffer), iv.byteLength);\n        return result;\n    } catch (error) {\n        console.error(\"  :\", error);\n        return null;\n    }\n}\n\n// AES \nexport async function aesDecrypt(data: Uint8Array, key: string): Promise<string> {\n    const iv = data.slice(0, 16);\n    const encrypted = data.slice(16);\n\n    const importedKey = await crypto.subtle.importKey(\n        'raw',\n        base64ToBytes(key),\n        { name: 'AES-CBC' },\n        false,\n        ['decrypt']\n    );\n    const decryptedBuffer = await crypto.subtle.decrypt(\n        { name: 'AES-CBC', iv: iv },\n        importedKey,\n        encrypted\n    );\n    return new TextDecoder().decode(decryptedBuffer);\n}\n\n//  Blob  Uint8Array\nexport async function blobToUint8Array(blob: Blob): Promise<Uint8Array> {\n    const arrayBuffer = await blob.arrayBuffer();\n    return new Uint8Array(arrayBuffer);\n}\n\n//  ArrayBuffer  Base64\nexport function arrayBufferToBase64(buffer: ArrayBuffer): string {\n    const bytes = new Uint8Array(buffer);\n    let binary = '';\n    for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binary);\n}\n\n//  Base64  ArrayBuffer\nexport function base64ToArrayBuffer(base64: string): ArrayBuffer {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; ++i) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n} ","import {\r\n    arrayBufferToPem,\r\n    rsaEncrypt,\r\n    rsaDecrypt,\r\n    generateAESKey,\r\n    blobToUint8Array,\r\n    aesEncrypt,\r\n    aesDecrypt\r\n} from './Crypto';\r\n\r\nexport interface WebSocketMessage {\r\n    type: string;\r\n    action?: string;\r\n    data?: any;\r\n    status?: string;\r\n    message?: string;\r\n    S_KEY?: string;\r\n    username?: string;\r\n    key?: string;\r\n    accountData?: {\r\n        id: number;\r\n        username: string;\r\n        name: string;\r\n        avatar: string;\r\n    };\r\n    post?: {\r\n        text: string;\r\n        attachments: Array<{\r\n            type: 'image' | 'file';\r\n            file_id: string;\r\n            file_name: string;\r\n            file_size: number;\r\n        }>;\r\n    };\r\n}\r\n\r\nclass WebSocketService {\r\n    private url: string;\r\n    private socket: WebSocket | null;\r\n    private isConnected: boolean;\r\n    private rsaPublic: ArrayBuffer | null;\r\n    private rsaPrivate: ArrayBuffer | null;\r\n    private rsaPublicServer: string | null;\r\n    private aesKey: string | null;\r\n    private aesServerKey: string | null;\r\n    private keysReady: boolean;\r\n    private socketReady: boolean;\r\n    private messageQueue: WebSocketMessage[];\r\n    private processingMessages: boolean;\r\n    private messageHandlers: Map<string, (data: WebSocketMessage) => void>;\r\n\r\n    constructor() {\r\n        // URL WebSocket-\r\n        this.url = 'wss://ws.elemsocial.com/user_api';\r\n        this.socket = null;\r\n        this.isConnected = false;\r\n        this.rsaPublic = null;\r\n        this.rsaPrivate = null;\r\n        this.rsaPublicServer = null;\r\n        this.aesKey = null;\r\n        this.aesServerKey = null;\r\n        this.keysReady = false;\r\n        this.socketReady = false;\r\n        this.messageQueue = [];\r\n        this.processingMessages = false;\r\n        this.messageHandlers = new Map();\r\n\r\n        //     \r\n        this.connect();\r\n    }\r\n\r\n    get connectionStatus(): boolean {\r\n        return this.isConnected;\r\n    }\r\n\r\n    get ready(): boolean {\r\n        return this.socketReady && this.keysReady;\r\n    }\r\n\r\n    //  RSA-\r\n    private async generateKeys(): Promise<boolean> {\r\n        const keyPair = await window.crypto.subtle.generateKey({\r\n            name: 'RSA-OAEP',\r\n            modulusLength: 2048,\r\n            publicExponent: new Uint8Array([1, 0, 1]),\r\n            hash: { name: 'SHA-256' }\r\n        }, true, ['encrypt', 'decrypt']);\r\n        this.rsaPublic = await window.crypto.subtle.exportKey('spki', keyPair.publicKey);\r\n        this.rsaPrivate = await window.crypto.subtle.exportKey('pkcs8', keyPair.privateKey);\r\n        this.keysReady = true;\r\n        return true;\r\n    }\r\n\r\n    //   \r\n    private processQueue(): void {\r\n        if (!this.socketReady || this.processingMessages) return;\r\n        this.processingMessages = true;\r\n        while (this.messageQueue.length > 0) {\r\n            const message = this.messageQueue.shift();\r\n            if (message) {\r\n                this.send(message);\r\n            }\r\n        }\r\n        this.processingMessages = false;\r\n    }\r\n\r\n    //  \r\n    public connect(): void {\r\n        console.log('  WebSocket...');\r\n        this.socket = new WebSocket(this.url);\r\n\r\n        this.socket.onopen = async () => {\r\n            console.log('WebSocket ');\r\n            await this.generateKeys();\r\n            if (this.rsaPublic) {\r\n                const publicKeyPem = await arrayBufferToPem(this.rsaPublic, 'PUBLIC KEY');\r\n                this.socket?.send(JSON.stringify({\r\n                    type: 'key_exchange',\r\n                    key: publicKeyPem\r\n                }));\r\n                this.isConnected = true;\r\n                this.processQueue();\r\n            }\r\n        };\r\n\r\n        this.socket.onmessage = async (event) => {\r\n            const rawData = event.data;\r\n\r\n            if (this.rsaPublicServer) {\r\n                if (this.aesServerKey && this.aesKey) {\r\n                    const decryptedStr = await aesDecrypt(\r\n                        await blobToUint8Array(rawData),\r\n                        this.aesKey\r\n                    );\r\n                    const decryptedData = JSON.parse(decryptedStr) as WebSocketMessage;\r\n                    console.log(' :', decryptedData);\r\n                    \r\n                    //       WebSocket\r\n                    const wsEvent = new CustomEvent('ws_message', { detail: decryptedData });\r\n                    window.dispatchEvent(wsEvent);\r\n                    \r\n                    if (decryptedData.type) {\r\n                        const handler = this.messageHandlers.get(decryptedData.type);\r\n                        if (handler) {\r\n                            handler(decryptedData);\r\n                        }\r\n                    }\r\n                } else {\r\n                    const decryptedStr = await rsaDecrypt(\r\n                        await blobToUint8Array(rawData),\r\n                        this.rsaPrivate!\r\n                    );\r\n                    const decryptedData = JSON.parse(decryptedStr);\r\n                    if (decryptedData.type === 'aes_key') {\r\n                        this.aesServerKey = decryptedData.key;\r\n                        this.socketReady = true;\r\n                        console.log('WebSocket    ');\r\n                        \r\n                        //       \r\n                        this.send({\r\n                            type: 'social',\r\n                            action: 'get_online_users'\r\n                        });\r\n                        \r\n                        this.processQueue();\r\n                    }\r\n                }\r\n            } else {\r\n                const data = JSON.parse(rawData) as WebSocketMessage;\r\n                if (data.type === 'key_exchange') {\r\n                    this.rsaPublicServer = data.key ?? null;\r\n                    this.aesKey = await generateAESKey();\r\n                    console.log('AES  ');\r\n                    if (this.rsaPublicServer) {\r\n                        const encryptedMessage = await rsaEncrypt(\r\n                            JSON.stringify({\r\n                                type: 'aes_key',\r\n                                key: this.aesKey\r\n                            }),\r\n                            this.rsaPublicServer\r\n                        );\r\n                        this.socket?.send(encryptedMessage);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        this.socket.onclose = () => {\r\n            this.disconnect();\r\n            setTimeout(() => this.connect(), 5000);\r\n        };\r\n\r\n        this.socket.onerror = () => {\r\n            this.disconnect();\r\n            setTimeout(() => this.connect(), 5000);\r\n        };\r\n    }\r\n\r\n    //  \r\n    public async send(data: WebSocketMessage): Promise<void> {\r\n        if (!this.isConnected || this.socket?.readyState !== WebSocket.OPEN || !this.socketReady) {\r\n            console.log('   :', data);\r\n            this.messageQueue.push(data);\r\n            return;\r\n        }\r\n        const jsonData = JSON.stringify(data);\r\n        if (this.aesServerKey) {\r\n            const encrypted = await aesEncrypt(jsonData, this.aesServerKey);\r\n            if (encrypted) {\r\n                this.socket?.send(encrypted);\r\n            }\r\n        }\r\n    }\r\n\r\n    //  \r\n    public disconnect(): void {\r\n        if (this.socket) {\r\n            if (this.socket.readyState === WebSocket.OPEN) {\r\n                this.socket.close();\r\n            }\r\n            this.socket = null;\r\n        }\r\n        this.isConnected = false;\r\n        this.rsaPublic = null;\r\n        this.rsaPrivate = null;\r\n        this.rsaPublicServer = null;\r\n        this.aesKey = null;\r\n        this.aesServerKey = null;\r\n        this.keysReady = false;\r\n        this.socketReady = false;\r\n        console.log('WebSocket ');\r\n    }\r\n\r\n    //   \r\n    public addMessageHandler(type: string, handler: (data: WebSocketMessage) => void): void {\r\n        this.messageHandlers.set(type, handler);\r\n    }\r\n\r\n    //   \r\n    public removeMessageHandler(type: string): void {\r\n        this.messageHandlers.delete(type);\r\n    }\r\n}\r\n\r\n//      \r\nconst webSocketService = new WebSocketService();\r\nexport default webSocketService; \r\n","import axios from 'axios';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Platform } from 'react-native';\r\nimport webSocketService, { WebSocketMessage } from './WebSocket';\r\n\r\nconst AUTH_API_URL = 'https://elemsocial.com';\r\nconst POSTS_API_URL = 'https://elemsocial.com';\r\nconst SYSTEM_API_URL = 'https://elemsocial.com/System/API';\r\nconst WS_URL = 'wss://ws.elemsocial.com/user_api'; //wss://wselem.xyz:8880 proxy\r\nconst WEB_AUTH_API_BASE_URL = process.env.EXPO_PUBLIC_WEB_API_BASE_URL;\r\nconst AUTH_API_BASE =\r\n  Platform.OS === 'web' && WEB_AUTH_API_BASE_URL ? WEB_AUTH_API_BASE_URL : AUTH_API_URL;\r\n\r\nconst authApi = axios.create({\r\n  baseURL: AUTH_API_URL,\r\n  headers: {\r\n    'Content-Type': 'multipart/form-data',\r\n    'api': 'true',\r\n    'Origin': 'https://elemsocial.com',\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\r\n  }\r\n});\r\n\r\nconst postsApi = axios.create({\r\n  baseURL: POSTS_API_URL,\r\n  headers: {\r\n    'Content-Type': 'multipart/form-data',\r\n    'api': 'true',\r\n    'Origin': 'https://elemsocial.com',\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\r\n  }\r\n});\r\n\r\nconst systemApi = axios.create({\r\n  baseURL: SYSTEM_API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'api': 'true',\r\n    'Origin': 'https://elemsocial.com',\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n    'Access-Control-Allow-Headers': 'Origin, Content-Type, Accept, Authorization, X-Request-With'\r\n  }\r\n});\r\n\r\n// WebSocket connection handler\r\nexport const connectWebSocket = async (retries = 3) => {\r\n    let lastError = null;\r\n    let attemptCount = 0;\r\n    \r\n    const connect = async (): Promise<void> => {\r\n      const sKey = await AsyncStorage.getItem('S-KEY');\r\n      if (!sKey) {\r\n        throw new Error('   S-KEY');\r\n      }\r\n\r\n      return new Promise<void>((resolve, reject) => {\r\n        let isResolved = false;\r\n\r\n        //     \r\n        const connectionTimeout = setTimeout(() => {\r\n          if (!isResolved) {\r\n            webSocketService.removeMessageHandler('key_exchange');\r\n            webSocketService.removeMessageHandler('authorization');\r\n            reject(new Error(`    ( ${attemptCount + 1}  ${retries})`));\r\n          }\r\n        }, 15000);\r\n\r\n        //   \r\n        webSocketService.addMessageHandler('key_exchange', async (data: WebSocketMessage) => {\r\n          if (data.key) {\r\n            //    ,  \r\n            webSocketService.removeMessageHandler('key_exchange');\r\n            \r\n            webSocketService.send({\r\n              type: 'authorization',\r\n              action: 'connect',\r\n              S_KEY: sKey\r\n            });\r\n          }\r\n        });\r\n\r\n        //  \r\n        webSocketService.addMessageHandler('authorization', async (data: WebSocketMessage) => {\r\n          clearTimeout(connectionTimeout);\r\n          if (!isResolved) {\r\n            isResolved = true;\r\n            if (data.status === 'success' && data.accountData) {\r\n              //   \r\n              await AsyncStorage.setItem('account_data', JSON.stringify(data.accountData));\r\n              \r\n              //   \r\n              webSocketService.send({\r\n                type: 'social',\r\n                action: 'get_profile',\r\n                username: data.accountData.username\r\n              });\r\n              \r\n              webSocketService.removeMessageHandler('authorization');\r\n              resolve();\r\n            } else {\r\n              webSocketService.removeMessageHandler('authorization');\r\n              reject(new Error(data.message || `  ( ${attemptCount + 1}  ${retries})`));\r\n            }\r\n          }\r\n        });\r\n\r\n        //    \r\n        webSocketService.send({\r\n          type: 'key_exchange',\r\n          key: 'PUBLIC_KEY' //      \r\n        });\r\n      });\r\n    };\r\n    \r\n    while (attemptCount < retries) {\r\n      try {\r\n        await connect();\r\n        return;\r\n      } catch (error: any) {\r\n        lastError = error;\r\n        attemptCount++;\r\n        console.error(`  WebSocket ${attemptCount}  ${retries}  :`, error.message);\r\n        \r\n        if (attemptCount === retries) {\r\n          throw new Error(`${error.message}\\n      VPN`);\r\n        }\r\n        \r\n        //     \r\n        await new Promise(resolve => setTimeout(resolve, 1000 * attemptCount));\r\n      }\r\n    }\r\n};\r\n\r\n// Add interceptor to include S-KEY in requests\r\nauthApi.interceptors.request.use(async (config) => {\r\n  const sKey = await AsyncStorage.getItem('S-KEY');\r\n  if (sKey) {\r\n    config.headers['S-KEY'] = sKey;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Add response error handling\r\nauthApi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    console.error('API Error:', error?.response?.data || error.message);\r\n    if (error?.response?.status === 401) {\r\n      // Handle unauthorized error (invalid or expired S-KEY)\r\n      await AsyncStorage.removeItem('S-KEY');\r\n      // You might want to trigger a logout here\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add interceptor to include S-KEY in requests\r\npostsApi.interceptors.request.use(async (config) => {\r\n  const sKey = await AsyncStorage.getItem('S-KEY');\r\n  if (sKey) {\r\n    config.headers['S-KEY'] = sKey;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Add response error handling\r\npostsApi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    console.error('API Error:', error?.response?.data || error.message);\r\n    if (error?.response?.status === 401) {\r\n      // Handle unauthorized error (invalid or expired S-KEY)\r\n      await AsyncStorage.removeItem('S-KEY');\r\n      // You might want to trigger a logout here\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add interceptor to include S-KEY in requests\r\nsystemApi.interceptors.request.use(async (config) => {\r\n  const sKey = await AsyncStorage.getItem('S-KEY');\r\n  if (sKey) {\r\n    config.headers['S-KEY'] = sKey;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Types\r\nexport interface LoginResponse {\r\n  status: 'success' | 'error';\r\n  S_KEY?: string;\r\n  accountID?: string;\r\n  text?: string;\r\n}\r\n\r\nexport interface PostResponse {\r\n  ID: string;\r\n  AuthorID: string;\r\n  Username: string;\r\n  Name: string;\r\n  Avatar: string | 'None';\r\n  UserIcons: string | null;\r\n  Text: string;\r\n  Content: string | null;\r\n  Date: string;\r\n  Likes: number;\r\n  Dislikes: number;\r\n  Liked: 'Liked' | null;\r\n  Disliked: 'Liked' | null;\r\n  Comments: number;\r\n  MyPost: boolean;\r\n}\r\n\r\nexport interface CommentResponse {\r\n  Name: string;\r\n  Username: string;\r\n  Avatar: string | 'None';\r\n  UserIcons: string | null;\r\n  Text: string;\r\n  Date: string;\r\n}\r\n\r\nexport interface ApiResponse {\r\n  Type: 'Error' | 'Verify';\r\n  Content: string;\r\n}\r\n\r\nexport interface ProfileData {\r\n  id: number;\r\n  username: string;\r\n  name: string;\r\n  avatar: string | null;\r\n  cover: string | null;\r\n  description: string | null;\r\n  posts: number;\r\n  subscribers: number;\r\n  subscriptions: number;\r\n  subscribed: boolean;\r\n  create_date: string;\r\n  icons: string[];\r\n  links_count: number;\r\n  links: any[];\r\n  my_profile: boolean;\r\n  permissions: string[];\r\n}\r\n\r\nexport interface FileInfo {\r\n  file_id: string;\r\n  file_name: string;\r\n  file_size: number;\r\n  mime_type: string;\r\n}\r\n\r\nexport interface SelectedFile {\r\n    uri: string;\r\n    type: string;\r\n    name: string;\r\n}\r\n\r\n// Helper functions\r\nexport const getImageUrl = async (path: string | null | undefined): Promise<string> => {\r\n  if (!path || path === 'None') {\r\n    return '';\r\n  }\r\n  return `https://elemsocial.com/Content/Avatars/${path}`;\r\n};\r\n\r\nexport const getAccountData = async () => {\r\n  const accountDataStr = await AsyncStorage.getItem('account_data');\r\n  if (accountDataStr) {\r\n    return JSON.parse(accountDataStr) as WebSocketMessage['accountData'];\r\n  }\r\n  return null;\r\n};\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  login: async (email: string, password: string): Promise<LoginResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('email', email);\r\n    formData.append('password', password);\r\n    formData.append('device_type', 'browser');\r\n    formData.append('device', 'Element Web 2.3');\r\n\r\n    const response = await fetch(`${AUTH_API_BASE}/auth/login`, {\n      method: 'POST',\r\n      headers: {\r\n        'api': 'true',\r\n        'Origin': 'https://elemsocial.com',\r\n      },\r\n      body: formData\r\n    });\r\n\r\n    const data = await response.json();\r\n    \r\n    if (data.status === 'success' && data.S_KEY) {\r\n      //  S-KEY\r\n      await AsyncStorage.setItem('S-KEY', data.S_KEY);\r\n      \r\n      //   -  \r\n      connectWebSocket().catch(error => {\r\n        console.error('WebSocket setup failed after login:', error);\r\n      });\r\n    }\r\n    \r\n    return data;\r\n  },\r\n\r\n  logout: async (): Promise<void> => {\r\n      return new Promise((resolve, reject) => {\r\n        const timeout = setTimeout(() => {\r\n        webSocketService.removeMessageHandler('authorization');\r\n        reject(new Error('Logout timeout'));\r\n      }, 5000);\r\n\r\n      webSocketService.addMessageHandler('authorization', (data: WebSocketMessage) => {\r\n          clearTimeout(timeout);\r\n        if (data.status === 'success') {\r\n          webSocketService.removeMessageHandler('authorization');\r\n          AsyncStorage.removeItem('S-KEY');\r\n          resolve();\r\n          } else {\r\n          webSocketService.removeMessageHandler('authorization');\r\n          reject(new Error(data.message || 'Failed to logout'));\r\n        }\r\n      });\r\n\r\n      webSocketService.send({\r\n        type: 'authorization',\r\n        action: 'logout'\r\n      });\r\n    });\r\n  },\r\n\r\n  checkAuth: async (): Promise<boolean> => {\r\n    try {\r\n      await connectWebSocket();\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Auth check failed:', error);\r\n      return false;\r\n    }\r\n  },\r\n\r\n  async getMyProfile(): Promise<ProfileData> {\r\n    return new Promise((resolve, reject) => {\r\n      const timeout = setTimeout(() => {\r\n        webSocketService.removeMessageHandler('profile');\r\n        reject(new Error('Profile request timeout'));\r\n      }, 5000);\r\n\r\n      webSocketService.addMessageHandler('profile', (data: WebSocketMessage) => {\r\n        clearTimeout(timeout);\r\n        if (data.status === 'success' && data.data) {\r\n          resolve(data.data as ProfileData);\r\n        } else {\r\n          reject(new Error('Failed to get profile data'));\r\n        }\r\n      });\r\n\r\n      webSocketService.send({\r\n        type: 'profile',\r\n        action: 'get_my_profile'\r\n      });\r\n    });\r\n  },\r\n\r\n  async getProfile(username: string): Promise<ProfileData> {\r\n      return new Promise((resolve, reject) => {\r\n        const timeout = setTimeout(() => {\r\n        webSocketService.removeMessageHandler('profile');\r\n          reject(new Error('Profile request timeout'));\r\n      }, 5000);\r\n\r\n      webSocketService.addMessageHandler('profile', (data: WebSocketMessage) => {\r\n          clearTimeout(timeout);\r\n        if (data.status === 'success' && data.data) {\r\n          resolve(data.data as ProfileData);\r\n          } else {\r\n          reject(new Error('Failed to get profile data'));\r\n          }\r\n      });\r\n        \r\n      webSocketService.send({\r\n        type: 'profile',\r\n          action: 'get_profile',\r\n        data: { username }\r\n      });\r\n    });\r\n  },\r\n\r\n  updateProfile: async (data: Partial<ProfileData>): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    Object.entries(data).forEach(([key, value]) => {\r\n      if (value !== undefined && value !== null) {\r\n        formData.append(key, String(value));\r\n      }\r\n    });\r\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\r\n    return response.data;\r\n  },\r\n\r\n  uploadAvatar: async (file: File): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('avatar', file);\r\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\r\n    return response.data;\r\n  },\r\n\r\n  uploadCover: async (file: File): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('cover', file);\r\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// Profile API  WebSocket\r\nexport const profileAPI = {\r\n  async getMyProfile(): Promise<ProfileData> {\r\n    return new Promise((resolve, reject) => {\r\n      const timeout = setTimeout(() => {\r\n        webSocketService.removeMessageHandler('social');\r\n        reject(new Error('    '));\r\n      }, 5000);\r\n\r\n      webSocketService.addMessageHandler('social', (data: WebSocketMessage) => {\r\n        clearTimeout(timeout);\r\n        if (data.status === 'success' && data.data) {\r\n          webSocketService.removeMessageHandler('social');\r\n          resolve(data.data as ProfileData);\r\n        } else {\r\n          webSocketService.removeMessageHandler('social');\r\n          reject(new Error(data.message || '    '));\r\n        }\r\n      });\r\n\r\n      webSocketService.send({\r\n        type: 'social',\r\n        action: 'get_profile'\r\n      });\r\n    });\r\n  },\r\n\r\n  async getProfile(username: string): Promise<ProfileData> {\r\n    return new Promise((resolve, reject) => {\r\n      const timeout = setTimeout(() => {\r\n        webSocketService.removeMessageHandler('social');\r\n        reject(new Error('    '));\r\n      }, 5000);\r\n\r\n      webSocketService.addMessageHandler('social', (data: WebSocketMessage) => {\r\n        clearTimeout(timeout);\r\n        if (data.status === 'success' && data.data) {\r\n          webSocketService.removeMessageHandler('social');\r\n          resolve(data.data as ProfileData);\r\n        } else {\r\n          webSocketService.removeMessageHandler('social');\r\n          reject(new Error(data.message || '    '));\r\n        }\r\n      });\r\n\r\n      webSocketService.send({\r\n        type: 'social',\r\n        action: 'get_profile',\r\n        username: username\r\n      });\r\n    });\r\n  },\r\n\r\n  updateProfile: async (data: Partial<ProfileData>): Promise<ApiResponse> => {\r\n    return new Promise((resolve, reject) => {\r\n      const timeout = setTimeout(() => {\r\n        webSocketService.removeMessageHandler('social');\r\n        reject(new Error('Profile update timeout'));\r\n      }, 5000);\r\n\r\n      webSocketService.addMessageHandler('social', (response: WebSocketMessage) => {\r\n        clearTimeout(timeout);\r\n        if (response.status === 'success') {\r\n          webSocketService.removeMessageHandler('social');\r\n          resolve({\r\n            Type: 'Verify',\r\n            Content: 'Profile updated successfully'\r\n          });\r\n        } else {\r\n          webSocketService.removeMessageHandler('social');\r\n          resolve({\r\n            Type: 'Error',\r\n            Content: response.message || 'Failed to update profile'\r\n          });\r\n        }\r\n      });\r\n\r\n      webSocketService.send({\r\n        type: 'social',\r\n        action: 'update_profile',\r\n        data: data\r\n      });\r\n    });\r\n  },\r\n\r\n  uploadAvatar: async (file: File): Promise<ApiResponse> => {\r\n    //   HTTP   \r\n    const formData = new FormData();\r\n    formData.append('avatar', file);\r\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\r\n    return response.data;\r\n  },\r\n\r\n  uploadCover: async (file: File): Promise<ApiResponse> => {\r\n    //   HTTP   \r\n    const formData = new FormData();\r\n    formData.append('cover', file);\r\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// Posts API\r\nexport const postsAPI = {\r\n  // Load single post\r\n  loadPost: async (postId: string): Promise<PostResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('PostID', postId);\r\n\r\n    const response = await postsApi.post('/System/API/LoadPost.php', formData);\r\n    return response.data;\r\n  },\r\n\r\n  // Create post\r\n  createPost: async (text: string, files: SelectedFile[]): Promise<string> => {\r\n    const formData = new FormData();\r\n    formData.append('Text', text);\r\n    \r\n    //  ,   \r\n    files.forEach(file => {\r\n        formData.append('Files[]', {\r\n            uri: file.uri,\r\n            type: file.type,\r\n            name: file.name\r\n        } as any);\r\n    });\r\n\r\n    //   ,    \r\n    const hasImages = files.some(file => file.type.startsWith('image/'));\r\n    if (hasImages) {\r\n        formData.append('ClearMetadataIMG', 'false');\r\n        formData.append('CensoringIMG', 'false');\r\n    }\r\n\r\n    const response = await postsApi.post<{Type: string, Content: string}>('/System/API/AddPost.php', formData);\r\n    \r\n    if (response.data.Type === 'Verify') {\r\n        return response.data.Content; // ID  \r\n    } else {\r\n        throw new Error(response.data.Content);\r\n    }\r\n  },\r\n\r\n  // Get single post\r\n  getPost: async (postId: string): Promise<PostResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('PostID', postId);\r\n\r\n    const response = await postsApi.post<PostResponse>('/System/API/LoadPost.php', formData);\r\n    return response.data;\r\n  },\r\n\r\n  getPosts: async (type: 'LATEST' | 'REC' | 'SUBSCRIPTIONS' | 'USER', startIndex: number = 0, userId?: string): Promise<PostResponse[]> => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('StartIndex', startIndex.toString());\r\n      \r\n      if (type === 'USER' && userId) {\r\n        formData.append('UserID', userId);\r\n      }\r\n\r\n      const url = `/System/API/LoadPosts.php?F=${type}`;\r\n      const response = await postsApi.post(url, formData);\r\n      \r\n      //  \r\n      let postsArray: any[] = [];\r\n      \r\n      if (typeof response.data === 'string') {\r\n        try {\r\n          postsArray = JSON.parse(response.data);\r\n        } catch (parseError) {\r\n          console.error('Error parsing posts data:', parseError);\r\n          return [];\r\n        }\r\n      } else if (Array.isArray(response.data)) {\r\n        postsArray = response.data;\r\n      } else if (response.data && typeof response.data === 'object') {\r\n        postsArray = [response.data];\r\n      }\r\n\r\n      //   \r\n      return postsArray.map(post => ({\r\n        ID: String(post.ID || ''),\r\n        AuthorID: String(post.AuthorID || ''),\r\n        Username: String(post.Username || ''),\r\n        Name: String(post.Name || ''),\r\n        Avatar: post.Avatar || 'None',\r\n        UserIcons: post.UserIcons || null,\r\n        Text: String(post.Text || ''),\r\n        Content: post.Content || null,\r\n        Date: String(post.Date || ''),\r\n        Likes: Number(post.Likes) || 0,\r\n        Dislikes: Number(post.Dislikes) || 0,\r\n        Liked: post.Liked || null,\r\n        Disliked: post.Disliked || null,\r\n        Comments: Number(post.Comments) || 0,\r\n        MyPost: Boolean(post.MyPost)\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error fetching posts:', error);\r\n      if (axios.isAxiosError(error)) {\r\n        console.error('Response:', error.response?.data);\r\n      }\r\n      return [];\r\n    }\r\n  },\r\n\r\n  // Post interactions (like, dislike, delete)\r\n  interactWithPost: async (\r\n    action: 'LIKE' | 'DISLIKE' | 'DELETE',\r\n    postId: string\r\n  ): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('PostID', postId);\r\n\r\n    const response = await postsApi.post<ApiResponse>(`/System/API/PostInteraction.php?F=${action}`, formData);\r\n    return response.data;\r\n  },\r\n\r\n  // Add comment to post\r\n  addComment: async (postId: string, text: string): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('PostID', postId);\r\n    formData.append('Text', text);\r\n\r\n    const response = await postsApi.post<ApiResponse>('/System/API/PostInteraction.php?F=POST_COMMENT', formData);\r\n    return response.data;\r\n  },\r\n\r\n  // Get post comments\r\n  getComments: async (postId: string): Promise<CommentResponse[]> => {\r\n    const formData = new FormData();\r\n    formData.append('PostID', postId);\r\n\r\n    const response = await postsApi.post<CommentResponse[]>('/System/API/PostInteraction.php?F=LOAD_COMMENT', formData);\r\n    return response.data;\r\n  },\r\n\r\n  //  getUserPosts,       getPosts\r\n  getUserPosts: async (userId: string, startIndex: number = 0): Promise<PostResponse[]> => {\r\n    return postsAPI.getPosts('USER', startIndex, userId);\r\n  },\r\n};\r\n\r\n","import React, { useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  Animated,\n  Dimensions,\n  Platform,\n} from 'react-native';\n\ninterface ErrorMessageProps {\n  message: string;\n  onClose?: () => void;\n}\n\nconst { height } = Dimensions.get('window');\n\nconst ErrorMessage: React.FC<ErrorMessageProps> = ({ message, onClose }) => {\n  const translateY = new Animated.Value(height);\n\n  useEffect(() => {\n    if (message) {\n      //  \n      Animated.spring(translateY, {\n        toValue: 0,\n        useNativeDriver: true,\n        tension: 50,\n        friction: 7,\n      }).start();\n    }\n  }, [message]);\n\n  const handleClose = () => {\n    //  \n    Animated.timing(translateY, {\n      toValue: height,\n      duration: 300,\n      useNativeDriver: true,\n    }).start(() => {\n      if (onClose) onClose();\n    });\n  };\n\n  if (!message) return null;\n\n  return (\n    <Modal\n      transparent\n      visible={!!message}\n      animationType=\"fade\"\n      onRequestClose={handleClose}\n    >\n      <View style={styles.overlay}>\n        <Animated.View\n          style={[\n            styles.container,\n            {\n              transform: [{ translateY }],\n            },\n          ]}\n        >\n          <View style={styles.content}>\n            <Text style={styles.title}></Text>\n            <Text style={styles.text}>{message}</Text>\n            <TouchableOpacity\n              style={styles.button}\n              onPress={handleClose}\n              activeOpacity={0.8}\n            >\n              <Text style={styles.buttonText}>OK</Text>\n            </TouchableOpacity>\n          </View>\n        </Animated.View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    width: '90%',\n    maxWidth: 400,\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    ...(Platform.OS === 'web' ? {\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n    } : {\n      shadowColor: '#000',\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.25,\n      shadowRadius: 3.84,\n      elevation: 5,\n    }),\n  },\n  content: {\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#c62828',\n    marginBottom: 10,\n    textAlign: 'center',\n  },\n  text: {\n    fontSize: 16,\n    color: '#333',\n    marginBottom: 20,\n    textAlign: 'center',\n    lineHeight: 22,\n  },\n  button: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 12,\n    paddingHorizontal: 30,\n    borderRadius: 8,\n    alignSelf: 'center',\n  },\n  buttonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default ErrorMessage; ","import React, { useState, useContext } from 'react';\r\nimport {\r\n  View,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Text,\r\n  StyleSheet,\r\n  Alert,\r\n  ActivityIndicator,\r\n  Platform,\r\n} from 'react-native';\r\nimport { authAPI } from '../services/api';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { CommonActions, useNavigation } from '@react-navigation/native';\r\nimport { AuthContext } from '../navigation';\r\nimport HCaptcha from '@hcaptcha/react-hcaptcha';\r\nimport ErrorMessage from '../components/ErrorMessage';\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    marginBottom: 30,\r\n    textAlign: 'center',\r\n  },\r\n  input: {\r\n    height: 50,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 8,\r\n    paddingHorizontal: 15,\r\n    marginBottom: 15,\r\n    fontSize: 16,\r\n    backgroundColor: '#fff',\r\n    ...(Platform.OS === 'web' && {\r\n      outlineStyle: 'none',\r\n      ':focus': {\r\n        borderColor: '#007AFF',\r\n      },\r\n    }),\r\n  },\r\n  buttonContainer: {\r\n    pointerEvents: 'auto',\r\n    marginBottom: 15,\r\n  },\r\n  button: {\r\n    height: 50,\r\n    backgroundColor: '#007AFF',\r\n    borderRadius: 8,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    ...(Platform.OS === 'web' && {\r\n      cursor: 'pointer',\r\n      ':hover': {\r\n        backgroundColor: '#0056b3',\r\n      },\r\n    }),\r\n  },\r\n  buttonDisabled: {\r\n    backgroundColor: '#ccc',\r\n  },\r\n  buttonText: {\r\n    color: 'white',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n  switchText: {\r\n    color: '#007AFF',\r\n    textAlign: 'center',\r\n    marginTop: 15,\r\n    fontSize: 16,\r\n  },\r\n  stepText: {\r\n    fontSize: 18,\r\n    marginBottom: 15,\r\n    textAlign: 'center',\r\n  },\r\n});\r\n\r\nconst LoginScreen = () => {\n  const WEB_AUTH_API_BASE_URL = process.env.EXPO_PUBLIC_WEB_API_BASE_URL;\n  const REGISTER_API_BASE =\n    Platform.OS === 'web' && WEB_AUTH_API_BASE_URL ? WEB_AUTH_API_BASE_URL : 'https://elemsocial.com';\n  const navigation = useNavigation();\n  const { setIsLoggedIn } = useContext(AuthContext);\n  const [isRegistering, setIsRegistering] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // Login state\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loginError, setLoginError] = useState('');\r\n\r\n  // Registration state\r\n  const [name, setName] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [regEmail, setRegEmail] = useState('');\r\n  const [regPassword, setRegPassword] = useState('');\r\n  const [captchaToken, setCaptchaToken] = useState('');\r\n  const [registrationError, setRegistrationError] = useState('');\r\n\r\n  const handleLogin = async () => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!email) {\r\n      setLoginError(' ');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(email)) {\r\n      setLoginError('  email ');\r\n      return;\r\n    }\r\n    if (!password) {\r\n      setLoginError(' ');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await authAPI.login(email.trim(), password);\r\n      \r\n      if (response?.status === 'success' && response?.S_KEY) {\r\n        await AsyncStorage.setItem('S-KEY', response.S_KEY);\r\n        setIsLoggedIn(true);\r\n      } else {\r\n        setLoginError(response?.text || ' email  ');\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      setLoginError('-   ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRegister = async () => {\r\n    setRegistrationError('');\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    \r\n    // \r\n    if (!name.trim()) {\r\n      setRegistrationError(' ');\r\n      return;\r\n    }\r\n    if (!username.trim()) {\r\n      setRegistrationError('  ');\r\n      return;\r\n    }\r\n    if (!regEmail.trim()) {\r\n      setRegistrationError(' email');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(regEmail.trim())) {\r\n      setRegistrationError('  email ');\r\n      return;\r\n    }\r\n    if (!regPassword.trim()) {\r\n      setRegistrationError(' ');\r\n      return;\r\n    }\r\n    if (!captchaToken) {\r\n      setRegistrationError(' ');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      const formData = new FormData();\r\n      formData.append('name', name.trim());\r\n      formData.append('username', username.trim());\r\n      formData.append('email', regEmail.trim());\r\n      formData.append('password', regPassword.trim());\r\n      formData.append('accept', 'true');\r\n      formData.append('h_captcha', captchaToken);\r\n\r\n      const response = await fetch(`${REGISTER_API_BASE}/auth/register`, {\n        method: 'POST',\r\n        headers: {\r\n          'api': 'true',\r\n          'Origin': 'https://elemsocial.com',\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.status === 'success') {\r\n        await AsyncStorage.setItem('S-KEY', data.S_KEY);\r\n        setIsLoggedIn(true);\r\n      } else {\r\n        setRegistrationError(data.text || '  ');\r\n      }\r\n    } catch (error) {\r\n      console.error('Registration error:', error);\r\n      setRegistrationError('-   ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onCaptchaVerify = (token: string) => {\r\n    setCaptchaToken(token);\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>Sigma Element Client</Text>\r\n      \r\n      {isRegistering ? (\r\n        <>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"\"\r\n            value={name}\r\n            onChangeText={setName}\r\n            editable={!loading}\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\" \"\r\n            value={username}\r\n            onChangeText={setUsername}\r\n            editable={!loading}\r\n            autoCapitalize=\"none\"\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Email\"\r\n            value={regEmail}\r\n            onChangeText={setRegEmail}\r\n            editable={!loading}\r\n            keyboardType=\"email-address\"\r\n            autoCapitalize=\"none\"\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"\"\r\n            value={regPassword}\r\n            onChangeText={setRegPassword}\r\n            secureTextEntry\r\n            editable={!loading}\r\n          />\r\n          <HCaptcha\r\n            sitekey=\"29c6b1c2-7e78-43ec-8bf8-5de49c58c54a\"\r\n            onVerify={onCaptchaVerify}\r\n          />\r\n          <ErrorMessage \r\n            message={registrationError} \r\n            onClose={() => setRegistrationError('')}\r\n          />\r\n          <View style={styles.buttonContainer}>\r\n            <TouchableOpacity\r\n              style={[styles.button, loading && styles.buttonDisabled]}\r\n              onPress={handleRegister}\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <ActivityIndicator color=\"white\" />\r\n              ) : (\r\n                <Text style={styles.buttonText}></Text>\r\n              )}\r\n            </TouchableOpacity>\r\n          </View>\r\n          <TouchableOpacity onPress={() => {\r\n            setIsRegistering(false);\r\n            setRegistrationError('');\r\n            setLoginError('');\r\n          }}>\r\n            <Text style={styles.switchText}>  ? </Text>\r\n          </TouchableOpacity>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\" \"\r\n            value={email}\r\n            onChangeText={setEmail}\r\n            autoCapitalize=\"none\"\r\n            keyboardType=\"email-address\"\r\n            editable={!loading}\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"\"\r\n            value={password}\r\n            onChangeText={setPassword}\r\n            secureTextEntry\r\n            editable={!loading}\r\n          />\r\n          <ErrorMessage \r\n            message={loginError} \r\n            onClose={() => setLoginError('')}\r\n          />\r\n          <View style={styles.buttonContainer}>\r\n            <TouchableOpacity\r\n              style={[styles.button, loading && styles.buttonDisabled]}\r\n              onPress={handleLogin}\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <ActivityIndicator color=\"white\" />\r\n              ) : (\r\n                <Text style={styles.buttonText}></Text>\r\n              )}\r\n            </TouchableOpacity>\r\n          </View>\r\n          <TouchableOpacity onPress={() => {\r\n            setIsRegistering(true);\r\n            setRegistrationError('');\r\n            setLoginError('');\r\n          }}>\r\n            <Text style={styles.switchText}> ? </Text>\r\n          </TouchableOpacity>\r\n        </>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default LoginScreen;\r\n","import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\n\n//    (  )\nconst colorPairs = [\n  { bg: '#FFE5E5', text: '#FF4D4D' }, // \n  { bg: '#E5F1FF', text: '#3399FF' }, // \n  { bg: '#E5FFE5', text: '#33CC33' }, // \n  { bg: '#FFE5FF', text: '#FF33FF' }, // \n  { bg: '#FFF0E5', text: '#FF8533' }, // \n  { bg: '#E5F9FF', text: '#33CCFF' }, // \n  { bg: '#F2E5FF', text: '#9933FF' }, // \n  { bg: '#FFFFE5', text: '#CCCC33' }, // \n];\n\ninterface LetterAvatarProps {\n  name: string;\n  size?: number;\n  style?: any;\n}\n\nconst LetterAvatar: React.FC<LetterAvatarProps> = ({ name, size = 120, style }) => {\n  //    ,     \"?\"\n  const letter = (name?.charAt(0) || '?').toUpperCase();\n  \n  //      \n  const colorIndex = Math.abs(name.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % colorPairs.length;\n  const colors = colorPairs[colorIndex];\n\n  const styles = StyleSheet.create({\n    container: {\n      width: size,\n      height: size,\n      borderRadius: size / 2,\n      backgroundColor: colors.bg,\n      justifyContent: 'center',\n      alignItems: 'center',\n      overflow: 'hidden',\n    },\n    letter: {\n      color: colors.text,\n      fontSize: size * 0.4,\n      fontWeight: '600',\n      textAlign: 'center',\n      textAlignVertical: 'center',\n    },\n  });\n\n  return (\n    <View style={[styles.container, style]}>\n      <Text style={styles.letter}>{letter}</Text>\n    </View>\n  );\n};\n\nexport default LetterAvatar;\n","export const WS_MESSAGE_TYPES = {\n    SOCIAL: 'social',\n    MESSENGER: 'messenger',\n    KEY_EXCHANGE: 'key_exchange',\n    AES_KEY: 'aes_key'\n} as const;\n\nexport const WS_ACTIONS = {\n    GET_ONLINE_USERS: 'get_online_users',\n    USER_STATUS: 'user_status',\n    NEW_POST: 'new_post',\n    UPLOAD_FILE: 'upload_file',\n    DOWNLOAD_FILE: 'download_file'\n} as const;\n\nexport const WS_USER_STATUS = {\n    ONLINE: 'online',\n    OFFLINE: 'offline'\n} as const; ","export const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 ';\n    const k = 1024;\n    const sizes = ['', '', '', '', ''];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;\n};\n\nexport const getFileExtension = (filename: string): string => {\n    return filename.slice((filename.lastIndexOf('.') - 1 >>> 0) + 2);\n};\n\nexport const getMimeType = (filename: string): string => {\n    const ext = getFileExtension(filename).toLowerCase();\n    const mimeTypes: { [key: string]: string } = {\n        'txt': 'text/plain',\n        'pdf': 'application/pdf',\n        'doc': 'application/msword',\n        'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n        'xls': 'application/vnd.ms-excel',\n        'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        'png': 'image/png',\n        'jpg': 'image/jpeg',\n        'jpeg': 'image/jpeg',\n        'gif': 'image/gif',\n        'svg': 'image/svg+xml',\n        'mp3': 'audio/mpeg',\n        'mp4': 'video/mp4',\n        'wav': 'audio/wav',\n        'avi': 'video/x-msvideo',\n        'zip': 'application/zip',\n        'rar': 'application/x-rar-compressed',\n        '7z': 'application/x-7z-compressed'\n    };\n    return mimeTypes[ext] || 'application/octet-stream';\n};\n\nexport const isImageFile = (filename: string): boolean => {\n    const mimeType = getMimeType(filename);\n    return mimeType.startsWith('image/');\n};\n\nexport const generateFileId = (): string => {\n    return Math.random().toString(36).substring(2, 15) + \n           Math.random().toString(36).substring(2, 15);\n};\n\nexport const splitFileIntoChunks = async (file: File, chunkSize: number = 1024 * 1024): Promise<string[]> => {\n    const chunks: string[] = [];\n    const totalChunks = Math.ceil(file.size / chunkSize);\n\n    for (let i = 0; i < totalChunks; i++) {\n        const start = i * chunkSize;\n        const end = Math.min(start + chunkSize, file.size);\n        const chunk = file.slice(start, end);\n        const arrayBuffer = await chunk.arrayBuffer();\n        const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n        chunks.push(base64);\n    }\n\n    return chunks;\n};\n\nexport const assembleChunks = (chunks: string[]): ArrayBuffer => {\n    const binaryString = chunks.map(chunk => atob(chunk)).join('');\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n};\n\nexport const downloadFile = (data: ArrayBuffer, filename: string, mimeType: string): void => {\n    const blob = new Blob([data], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n}; ","import webSocketService from './WebSocket';\nimport { WS_MESSAGE_TYPES, WS_ACTIONS } from '../constants/websocket';\nimport { FileUploadMessage, FileDownloadMessage } from '../types/websocket';\nimport { \n    generateFileId, \n    splitFileIntoChunks, \n    assembleChunks, \n    getMimeType, \n    downloadFile \n} from '../utils/fileUtils';\n\nclass FileService {\n    private static instance: FileService;\n    private ws = webSocketService;\n    private fileDownloadCallbacks: Map<string, (data: ArrayBuffer) => void> = new Map();\n    private fileChunks: Map<string, string[]> = new Map();\n\n    private constructor() {\n        this.setupMessageHandlers();\n    }\n\n    public static getInstance(): FileService {\n        if (!FileService.instance) {\n            FileService.instance = new FileService();\n        }\n        return FileService.instance;\n    }\n\n    private setupMessageHandlers(): void {\n        this.ws.addMessageHandler(WS_MESSAGE_TYPES.MESSENGER, (message) => {\n            if (message.action === WS_ACTIONS.DOWNLOAD_FILE) {\n                const downloadMessage = message as FileDownloadMessage;\n                this.handleFileChunk(downloadMessage);\n            }\n        });\n    }\n\n    private handleFileChunk(message: FileDownloadMessage): void {\n        const { fileId, chunkNumber, totalChunks, chunkData } = message.data;\n        \n        if (!this.fileChunks.has(fileId)) {\n            this.fileChunks.set(fileId, new Array(totalChunks).fill(''));\n        }\n\n        const chunks = this.fileChunks.get(fileId)!;\n        chunks[chunkNumber - 1] = chunkData;\n\n        // ,    \n        if (!chunks.includes('')) {\n            const fileData = assembleChunks(chunks);\n            const callback = this.fileDownloadCallbacks.get(fileId);\n            if (callback) {\n                callback(fileData);\n                this.fileDownloadCallbacks.delete(fileId);\n            }\n            this.fileChunks.delete(fileId);\n        }\n    }\n\n    public async uploadFile(file: File): Promise<string> {\n        const fileId = generateFileId();\n        const chunks = await splitFileIntoChunks(file);\n        \n        //    \n        const uploadMessage: FileUploadMessage = {\n            type: WS_MESSAGE_TYPES.MESSENGER,\n            action: WS_ACTIONS.UPLOAD_FILE,\n            data: {\n                fileId,\n                fileName: file.name,\n                fileSize: file.size,\n                mimeType: getMimeType(file.name)\n            }\n        };\n        await this.ws.send(uploadMessage);\n\n        //   \n        for (let i = 0; i < chunks.length; i++) {\n            const downloadMessage: FileDownloadMessage = {\n                type: WS_MESSAGE_TYPES.MESSENGER,\n                action: WS_ACTIONS.DOWNLOAD_FILE,\n                data: {\n                    fileId,\n                    chunkNumber: i + 1,\n                    totalChunks: chunks.length,\n                    chunkData: chunks[i]\n                }\n            };\n            await this.ws.send(downloadMessage);\n        }\n\n        return fileId;\n    }\n\n    public downloadFile(fileId: string, fileName: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            this.fileDownloadCallbacks.set(fileId, (data: ArrayBuffer) => {\n                try {\n                    downloadFile(data, fileName, getMimeType(fileName));\n                    resolve();\n                } catch (error) {\n                    reject(error);\n                }\n            });\n\n            //  \n            const downloadMessage: FileDownloadMessage = {\n                type: WS_MESSAGE_TYPES.MESSENGER,\n                action: WS_ACTIONS.DOWNLOAD_FILE,\n                data: {\n                    fileId,\n                    chunkNumber: 0,\n                    totalChunks: 0,\n                    chunkData: ''\n                }\n            };\n            this.ws.send(downloadMessage);\n        });\n    }\n}\n\nexport default FileService; ","import React, { useRef, useEffect } from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Animated,\n  Dimensions,\n  Platform,\n  Linking\n} from 'react-native';\n\ninterface LinkConfirmModalProps {\n  visible: boolean;\n  url: string;\n  onClose: () => void;\n}\n\nconst LinkConfirmModal: React.FC<LinkConfirmModalProps> = ({ visible, url, onClose }) => {\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const scaleAnim = useRef(new Animated.Value(0.9)).current;\n  const translateYAnim = useRef(new Animated.Value(20)).current;\n\n  useEffect(() => {\n    if (visible) {\n      //     \n      translateYAnim.setValue(20);\n      scaleAnim.setValue(0.9);\n      fadeAnim.setValue(0);\n      \n      //  \n      Animated.parallel([\n        Animated.timing(fadeAnim, {\n          toValue: 1,\n          duration: 200,\n          useNativeDriver: true,\n        }),\n        Animated.spring(scaleAnim, {\n          toValue: 1,\n          friction: 8,\n          tension: 40,\n          useNativeDriver: true,\n        }),\n        Animated.spring(translateYAnim, {\n          toValue: 0,\n          friction: 8,\n          tension: 40,\n          useNativeDriver: true,\n        }),\n      ]).start();\n    }\n  }, [visible]);\n\n  const handleClose = (callback?: () => void) => {\n    //  \n    Animated.parallel([\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: 150,\n        useNativeDriver: true,\n      }),\n      Animated.spring(scaleAnim, {\n        toValue: 0.9,\n        friction: 8,\n        tension: 40,\n        useNativeDriver: true,\n      }),\n      Animated.spring(translateYAnim, {\n        toValue: 20,\n        friction: 8,\n        tension: 40,\n        useNativeDriver: true,\n      }),\n    ]).start(() => {\n      if (callback) callback();\n    });\n  };\n\n  const handleConfirm = async () => {\n    try {\n      //   \n      await Linking.openURL(url);\n      //    \n      handleClose(() => {\n        //        \n        onClose();\n      });\n    } catch (error) {\n      console.error('   :', error);\n      onClose();\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      statusBarTranslucent\n      animationType=\"none\"\n      onRequestClose={() => handleClose(onClose)}\n    >\n      <Animated.View \n        style={[\n          styles.overlay,\n          { opacity: fadeAnim }\n        ]}\n      >\n        <TouchableOpacity \n          style={StyleSheet.absoluteFill} \n          onPress={() => handleClose(onClose)}\n          activeOpacity={1}\n        />\n        \n        <Animated.View\n          style={[\n            styles.content,\n            {\n              opacity: fadeAnim,\n              transform: [\n                { scale: scaleAnim },\n                { translateY: translateYAnim }\n              ]\n            }\n          ]}\n        >\n          <View style={styles.header}>\n            <Text style={styles.title}>  </Text>\n          </View>\n\n          <View style={styles.body}>\n            <Text style={styles.message}>\n                   :\n            </Text>\n            <Text style={styles.url} numberOfLines={2}>\n              {url}\n            </Text>\n            <Text style={styles.warning}>\n              ,     .\n            </Text>\n          </View>\n\n          <View style={styles.buttons}>\n            <TouchableOpacity\n              style={[styles.button, styles.cancelButton]}\n              onPress={() => handleClose(onClose)}\n            >\n              <Text style={styles.cancelButtonText}></Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[styles.button, styles.confirmButton]}\n              onPress={handleConfirm}\n            >\n              <Text style={styles.confirmButtonText}></Text>\n            </TouchableOpacity>\n          </View>\n        </Animated.View>\n      </Animated.View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  content: {\n    backgroundColor: '#fff',\n    borderRadius: 20,\n    width: Math.min(400, Dimensions.get('window').width - 40),\n    maxWidth: '90%',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.25,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 5,\n      },\n    }),\n  },\n  header: {\n    padding: 20,\n    paddingBottom: 15,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#000',\n    textAlign: 'center',\n  },\n  body: {\n    padding: 20,\n    paddingTop: 0,\n  },\n  message: {\n    fontSize: 16,\n    color: '#333',\n    marginBottom: 10,\n  },\n  url: {\n    fontSize: 15,\n    color: '#007AFF',\n    marginBottom: 12,\n    paddingHorizontal: 10,\n    paddingVertical: 8,\n    backgroundColor: '#F0F0F0',\n    borderRadius: 8,\n  },\n  warning: {\n    fontSize: 14,\n    color: '#666',\n  },\n  buttons: {\n    flexDirection: 'row',\n    padding: 15,\n    gap: 10,\n  },\n  button: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: '#F0F0F0',\n  },\n  confirmButton: {\n    backgroundColor: '#007AFF',\n  },\n  cancelButtonText: {\n    color: '#666',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  confirmButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default LinkConfirmModal; ","import React, { useState } from 'react';\nimport { Text, StyleSheet, TextStyle } from 'react-native';\nimport LinkConfirmModal from './LinkConfirmModal';\n\ninterface LinkTextProps {\n  text: string;\n  style?: TextStyle;\n}\n\nconst LinkText: React.FC<LinkTextProps> = ({ text, style }) => {\n  const [selectedUrl, setSelectedUrl] = useState<string | null>(null);\n\n  const renderTextWithLinks = (text: string) => {\n    //     \n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n    const parts = text.split(urlRegex);\n\n    return parts.map((part, index) => {\n      if (part.match(urlRegex)) {\n        return (\n          <Text\n            key={index}\n            style={styles.link}\n            onPress={() => setSelectedUrl(part)}\n          >\n            {part}\n          </Text>\n        );\n      }\n      return <Text key={index}>{part}</Text>;\n    });\n  };\n\n  return (\n    <>\n      <Text style={[style]}>\n        {renderTextWithLinks(text)}\n      </Text>\n\n      <LinkConfirmModal\n        visible={!!selectedUrl}\n        url={selectedUrl || ''}\n        onClose={() => setSelectedUrl(null)}\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  link: {\n    color: '#007AFF',\n    fontWeight: '500',\n  },\n});\n\nexport default LinkText; ","import React, { useEffect, useState, useRef } from 'react';\nimport {\n  View,\n  Text,\n  Modal,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  ActivityIndicator,\n  Dimensions,\n  Animated,\n  Platform,\n  ScrollView,\n  TouchableWithoutFeedback\n} from 'react-native';\nimport { profileAPI, ProfileData } from '../services/api';\nimport LetterAvatar from './LetterAvatar';\nimport LinkText from './LinkText';\n\nconst { width: SCREEN_WIDTH, height: SCREEN_HEIGHT } = Dimensions.get('window');\nconst MODAL_PADDING = 20;\nconst MODAL_WIDTH = Platform.select({\n  web: Math.min(600, SCREEN_WIDTH - MODAL_PADDING * 2),\n  default: SCREEN_WIDTH - MODAL_PADDING * 2\n});\n\ninterface ProfileModalProps {\n  visible: boolean;\n  username: string;\n  onClose: () => void;\n}\n\nconst ProfileModal: React.FC<ProfileModalProps> = ({ visible, username, onClose }) => {\n  const [profile, setProfile] = useState<ProfileData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  \n  //  \n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const scaleAnim = useRef(new Animated.Value(0.9)).current;\n  const translateYAnim = useRef(new Animated.Value(50)).current;\n\n  useEffect(() => {\n    if (visible) {\n      setLoading(true);\n      setError('');\n      loadProfile();\n      \n      //   \n      Animated.parallel([\n        Animated.timing(fadeAnim, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: true,\n        }),\n        Animated.timing(scaleAnim, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: true,\n        }),\n        Animated.timing(translateYAnim, {\n          toValue: 0,\n          duration: 300,\n          useNativeDriver: true,\n        })\n      ]).start();\n    } else {\n      //  \n      Animated.parallel([\n        Animated.timing(fadeAnim, {\n          toValue: 0,\n          duration: 250,\n          useNativeDriver: true,\n        }),\n        Animated.timing(scaleAnim, {\n          toValue: 0.9,\n          duration: 250,\n          useNativeDriver: true,\n        }),\n        Animated.timing(translateYAnim, {\n          toValue: 50,\n          duration: 250,\n          useNativeDriver: true,\n        })\n      ]).start(() => {\n        setProfile(null);\n        setError('');\n      });\n    }\n  }, [visible, username]);\n\n  const handleClose = () => {\n    //   \n    Animated.parallel([\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: 250,\n        useNativeDriver: true,\n      }),\n      Animated.timing(scaleAnim, {\n        toValue: 0.9,\n        duration: 250,\n        useNativeDriver: true,\n      }),\n      Animated.timing(translateYAnim, {\n        toValue: 50,\n        duration: 250,\n        useNativeDriver: true,\n      })\n    ]).start(() => {\n      onClose();\n    });\n  };\n\n  const loadProfile = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const data = await profileAPI.getProfile(username);\n      \n      //  URL   \n      if (data.avatar) {\n        data.avatar = `https://elemsocial.com/Content/Avatars/${data.avatar}`;\n      }\n      if (data.cover) {\n        data.cover = `https://elemsocial.com/Content/Covers/${data.cover}`;\n      }\n      \n      setProfile(data);\n    } catch (error) {\n      console.error('  :', error);\n      setError('   ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderStats = () => {\n    if (!profile) return null;\n\n    const stats = [\n      { label: '', value: profile.posts },\n      { label: '', value: profile.subscribers },\n      { label: '', value: profile.subscriptions }\n    ];\n\n    return (\n      <View style={styles.stats}>\n        {stats.map((stat) => (\n          <View key={stat.label} style={styles.statItem}>\n            <Text style={styles.statNumber}>\n              {stat.value?.toLocaleString() || '0'}\n            </Text>\n            <Text style={styles.statLabel}>{stat.label}</Text>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent={true}\n      onRequestClose={handleClose}\n      animationType=\"none\"\n      statusBarTranslucent\n    >\n      <Animated.View \n        style={[\n          styles.modalOverlay,\n          {\n            opacity: fadeAnim,\n          }\n        ]}\n      >\n        <TouchableWithoutFeedback onPress={handleClose}>\n          <View style={StyleSheet.absoluteFill} />\n        </TouchableWithoutFeedback>\n        \n        <Animated.View \n          style={[\n            styles.modalContent,\n            {\n              opacity: fadeAnim,\n              transform: [\n                { scale: scaleAnim },\n                { translateY: translateYAnim }\n              ]\n            }\n          ]}\n        >\n          <TouchableOpacity \n            style={styles.closeButton} \n            onPress={handleClose}\n            hitSlop={{ top: 10, right: 10, bottom: 10, left: 10 }}\n          >\n            <Text style={styles.closeButtonText}></Text>\n          </TouchableOpacity>\n\n          <ScrollView \n            style={styles.scrollView}\n            bounces={false}\n            showsVerticalScrollIndicator={false}\n          >\n            {loading ? (\n              <ActivityIndicator size=\"large\" color=\"#007AFF\" style={styles.loader} />\n            ) : error ? (\n              <Text style={styles.errorText}>{error}</Text>\n            ) : profile ? (\n              <View style={styles.profileContent}>\n                <View style={styles.coverContainer}>\n                  {profile.cover ? (\n                    <Image \n                      source={{ uri: profile.cover }} \n                      style={styles.coverImage}\n                      resizeMode=\"cover\"\n                    />\n                  ) : (\n                    <View style={styles.defaultCover} />\n                  )}\n                </View>\n\n                <View style={[styles.avatarContainer, styles.avatarWithCover]}>\n                  {profile.avatar && profile.avatar !== 'None' ? (\n                    <Image \n                      source={{ uri: profile.avatar }} \n                      style={styles.avatar}\n                    />\n                  ) : (\n                    <LetterAvatar \n                      name={profile.name || profile.username} \n                      size={80}\n                    />\n                  )}\n                </View>\n\n                <View style={styles.nameRow}>\n                  <Text style={styles.name}>{profile.name}</Text>\n                  {profile.icons && profile.icons.includes('VERIFY') && (\n                    <Image\n                      source={require('../assets/verify.png')}\n                      style={styles.verifiedBadge}\n                    />\n                  )}\n                </View>\n                <Text style={styles.username}>@{profile.username}</Text>\n                \n                {profile.description && (\n                  <LinkText text={profile.description} style={styles.description} />\n                )}\n\n                {renderStats()}\n\n                {profile.icons && profile.icons.length > 0 && (\n                  <View style={styles.iconsContainer}>\n                    {profile.icons.filter(icon => icon !== 'VERIFY').map((icon, index) => (\n                      <Image\n                        key={index}\n                        source={{ uri: `https://elemsocial.com/Content/Icons/${icon}` }}\n                        style={styles.icon}\n                      />\n                    ))}\n                  </View>\n                )}\n              </View>\n            ) : null}\n          </ScrollView>\n        </Animated.View>\n      </Animated.View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    position: 'relative',\n    backgroundColor: 'white',\n    borderRadius: 15,\n    width: MODAL_WIDTH,\n    maxHeight: SCREEN_HEIGHT - MODAL_PADDING * 2,\n    marginHorizontal: MODAL_PADDING,\n    overflow: 'hidden',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.25,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 5,\n      },\n    }),\n  },\n  scrollView: {\n    maxHeight: SCREEN_HEIGHT - MODAL_PADDING * 2,\n  },\n  closeButton: {\n    position: 'absolute',\n    right: 15,\n    top: 15,\n    zIndex: 2,\n    width: 30,\n    height: 30,\n    borderRadius: 15,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    fontSize: 20,\n    color: '#fff',\n    fontWeight: 'bold',\n  },\n  loader: {\n    padding: 20,\n  },\n  errorText: {\n    color: 'red',\n    textAlign: 'center',\n    padding: 20,\n  },\n  profileContent: {\n    alignItems: 'center',\n  },\n  coverContainer: {\n    width: '100%',\n    height: Math.min(200, SCREEN_HEIGHT * 0.25),\n    backgroundColor: '#f0f0f0',\n  },\n  coverImage: {\n    width: '100%',\n    height: '100%',\n  },\n  defaultCover: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: '#f0f0f0',\n  },\n  avatarContainer: {\n    width: Math.min(100, SCREEN_WIDTH * 0.2),\n    height: Math.min(100, SCREEN_WIDTH * 0.2),\n    marginTop: -Math.min(50, SCREEN_WIDTH * 0.1),\n    marginBottom: 10,\n    borderRadius: Math.min(50, SCREEN_WIDTH * 0.1),\n    borderWidth: 4,\n    borderColor: '#fff',\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n  },\n  avatarWithCover: {\n    marginTop: -Math.min(50, SCREEN_WIDTH * 0.1),\n  },\n  avatar: {\n    width: '100%',\n    height: '100%',\n  },\n  nameRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    marginBottom: 4,\n  },\n  name: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  username: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 10,\n  },\n  description: {\n    fontSize: 14,\n    color: '#444',\n    textAlign: 'center',\n    marginHorizontal: 20,\n    marginBottom: 15,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    width: '100%',\n    paddingVertical: 15,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: '#eee',\n  },\n  statItem: {\n    alignItems: 'center',\n    flex: 1,\n  },\n  statNumber: {\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  iconsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    padding: 10,\n    gap: 8,\n  },\n  icon: {\n    width: 24,\n    height: 24,\n  },\n  verifiedBadge: {\n    width: 20,\n    height: 20,\n  },\n});\n\nexport default ProfileModal; ","import React, { useState, useRef, useEffect } from 'react';\nimport {\n  View,\n  StyleSheet,\n  TouchableOpacity,\n  Animated,\n  Text,\n  ActivityIndicator,\n  Platform,\n  Dimensions,\n  TouchableWithoutFeedback,\n} from 'react-native';\nimport { Video, ResizeMode, AVPlaybackStatus } from 'expo-av';\nimport { MaterialIcons } from '@expo/vector-icons';\n\ninterface CustomVideoPlayerProps {\n  uri: string;\n  style?: any;\n  onPress?: () => void;\n  shouldPlay?: boolean;\n}\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\nconst CONTROLS_TIMEOUT = 3000;\n\nconst CustomVideoPlayer: React.FC<CustomVideoPlayerProps> = ({\n  uri,\n  style,\n  onPress,\n  shouldPlay = false,\n}) => {\n  const [status, setStatus] = useState<AVPlaybackStatus | null>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isSeeking, setIsSeeking] = useState(false);\n  const [seekPosition, setSeekPosition] = useState(0);\n  \n  const videoRef = useRef<Video>(null);\n  const controlsTimeoutRef = useRef<NodeJS.Timeout>();\n  const controlsOpacity = useRef(new Animated.Value(1)).current;\n  const playButtonScale = useRef(new Animated.Value(1)).current;\n\n  useEffect(() => {\n    return () => {\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (shouldPlay && !isPlaying && status?.isLoaded) {\n      handlePlayPause();\n    }\n  }, [shouldPlay, status]);\n\n  const resetControlsTimeout = () => {\n    if (controlsTimeoutRef.current) {\n      clearTimeout(controlsTimeoutRef.current);\n    }\n\n    if (isPlaying) {\n      controlsTimeoutRef.current = setTimeout(() => {\n        Animated.timing(controlsOpacity, {\n          toValue: 0,\n          duration: 300,\n          useNativeDriver: true,\n        }).start(() => setShowControls(false));\n      }, CONTROLS_TIMEOUT);\n    }\n  };\n\n  const showControlsHandler = () => {\n    setShowControls(true);\n    Animated.timing(controlsOpacity, {\n      toValue: 1,\n      duration: 200,\n      useNativeDriver: true,\n    }).start();\n    resetControlsTimeout();\n  };\n\n  const handleVideoPress = () => {\n    if (!showControls) {\n      showControlsHandler();\n    } else if (onPress) {\n      onPress();\n    }\n  };\n\n  const handlePlayPause = async () => {\n    if (!videoRef.current || !status?.isLoaded) return;\n\n    try {\n      if (isPlaying) {\n        await videoRef.current.pauseAsync();\n        showControlsHandler();\n      } else {\n        await videoRef.current.playAsync();\n        resetControlsTimeout();\n      }\n      setIsPlaying(!isPlaying);\n\n      Animated.sequence([\n        Animated.timing(playButtonScale, {\n          toValue: 0.8,\n          duration: 100,\n          useNativeDriver: true,\n        }),\n        Animated.spring(playButtonScale, {\n          toValue: 1,\n          friction: 3,\n          tension: 40,\n          useNativeDriver: true,\n        }),\n      ]).start();\n    } catch (error) {\n      console.error('Error toggling play state:', error);\n    }\n  };\n\n  const handleVideoStatus = (newStatus: AVPlaybackStatus) => {\n    if (!newStatus.isLoaded) return;\n    \n    setStatus(newStatus);\n    if (!isSeeking) {\n      setSeekPosition(newStatus.positionMillis / (newStatus.durationMillis || 1));\n    }\n  };\n\n  const handleSeekBarPress = (event: any) => {\n    if (!status?.isLoaded) return;\n\n    const { locationX } = event.nativeEvent;\n    const progress = Math.max(0, Math.min(1, locationX / (SCREEN_WIDTH - 32)));\n    setIsSeeking(true);\n    setSeekPosition(progress);\n\n    if (videoRef.current) {\n      videoRef.current.setPositionAsync(progress * (status.durationMillis || 0))\n        .then(() => setIsSeeking(false))\n        .catch(console.error);\n    }\n  };\n\n  const formatTime = (millis: number): string => {\n    if (!millis || isNaN(millis)) return '0:00';\n    const totalSeconds = Math.floor(millis / 1000);\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n  };\n\n  const getCurrentTime = (): string => {\n    if (!status?.isLoaded) return '0:00';\n    return formatTime(status.positionMillis);\n  };\n\n  const getDuration = (): string => {\n    if (!status?.isLoaded) return '0:00';\n    return formatTime(status.durationMillis || 0);\n  };\n\n  return (\n    <View style={[styles.container, style]}>\n      <TouchableWithoutFeedback onPress={handleVideoPress}>\n        <View style={styles.videoContainer}>\n          <Video\n            ref={videoRef}\n            source={{ uri }}\n            style={StyleSheet.absoluteFill}\n            resizeMode={ResizeMode.CONTAIN}\n            onPlaybackStatusUpdate={handleVideoStatus}\n            shouldPlay={shouldPlay}\n            isLooping\n          />\n\n          {(!status?.isLoaded || status?.isBuffering) && (\n            <View style={styles.loadingContainer}>\n              <ActivityIndicator size=\"large\" color=\"#fff\" />\n            </View>\n          )}\n\n          {showControls && (\n            <Animated.View style={[styles.controls, { opacity: controlsOpacity }]}>  \n              <TouchableOpacity\n                style={styles.playButtonContainer}\n                onPress={handlePlayPause}\n              >\n                <Animated.View style={{ transform: [{ scale: playButtonScale }] }}>\n                  <MaterialIcons\n                    name={isPlaying ? 'pause' : 'play-arrow'}\n                    size={50}\n                    color=\"#fff\"\n                  />\n                </Animated.View>\n              </TouchableOpacity>\n\n              <View style={styles.bottomControls}>\n                <TouchableWithoutFeedback onPress={handleSeekBarPress}>\n                  <View style={styles.progressBar}>\n                    <View style={styles.progressBackground} />\n                    <View\n                      style={[\n                        styles.progressFill,\n                        { width: `${seekPosition * 100}%` },\n                      ]}\n                    />\n                    <View\n                      style={[\n                        styles.seekHandle,\n                        { left: `${seekPosition * 100}%` },\n                      ]}\n                    />\n                  </View>\n                </TouchableWithoutFeedback>\n\n                <View style={styles.timeContainer}>\n                  <Text style={styles.timeText}>{getCurrentTime()}</Text>\n                  <Text style={styles.timeText}>{getDuration()}</Text>\n                </View>\n              </View>\n            </Animated.View>\n          )}\n        </View>\n      </TouchableWithoutFeedback>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#000',\n    overflow: 'hidden',\n    borderRadius: 12,\n  },\n  videoContainer: {\n    aspectRatio: 16 / 9,\n    backgroundColor: '#000',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingContainer: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  },\n  controls: {\n    ...StyleSheet.absoluteFillObject,\n    padding: 16,\n    justifyContent: 'space-between',\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  },\n  playButtonContainer: {\n    alignSelf: 'center',\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: 'rgba(0, 0, 0, 0.6)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  bottomControls: {\n    width: '100%',\n  },\n  progressBar: {\n    height: 4,\n    width: '100%',\n    backgroundColor: 'rgba(255, 255, 255, 0.3)',\n    borderRadius: 2,\n    overflow: 'visible',\n    position: 'relative',\n  },\n  progressBackground: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.3)',\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: '#007AFF',\n    borderRadius: 2,\n  },\n  seekHandle: {\n    position: 'absolute',\n    top: -6,\n    marginLeft: -8,\n    width: 16,\n    height: 16,\n    borderRadius: 8,\n    backgroundColor: '#fff',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.25,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 5,\n      },\n    }),\n  },\n  timeContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 8,\n  },\n  timeText: {\n    color: '#fff',\n    fontSize: 12,\n    fontWeight: '600',\n    textShadowColor: 'rgba(0, 0, 0, 0.5)',\n    textShadowOffset: { width: 1, height: 1 },\n    textShadowRadius: 2,\n  },\n});\n\nexport default CustomVideoPlayer;","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  Animated,\n  Modal,\n  Alert,\n  Platform,\n  ActivityIndicator,\n  Dimensions,\n} from 'react-native';\nimport {\n  PostResponse, postsAPI, getImageUrl\n} from '../services/api';\nimport LetterAvatar from './LetterAvatar';\nimport { format } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { Video, ResizeMode } from 'expo-av';\nimport FileService from '../services/FileService';\nimport { formatFileSize } from '../utils/fileUtils';\nimport ProfileModal from './ProfileModal';\nimport LinkText from './LinkText';\nimport CustomVideoPlayer from './CustomVideoPlayer';\n\ninterface PostCardProps {\n  post: PostResponse;\n  onUpdate: () => void;\n}\n\ninterface MediaContent {\n  Image?: {\n    simple_image?: string;\n    file_name: string;\n    width: number;\n    height: number;\n    orig_name?: string;\n  };\n  Video?: {\n    file_name: string;\n    width: number;\n    height: number;\n    orig_name?: string;\n  };\n  File?: {\n    file_id: string;\n    file_name: string;\n    file_size: number;\n    mime_type: string;\n  };\n}\n\ninterface MediaViewerProps {\n  url: string;\n  type: 'image' | 'video' | 'file';\n  onClose: () => void;\n  onDownload: (url: string, filename: string, fileId?: string) => void;\n  filename: string;\n  fileSize?: number;\n  fileId?: string;\n}\n\nconst PostCard: React.FC<PostCardProps> = ({ post, onUpdate }) => {\n  const [loadingAction, setLoadingAction] = useState<'LIKE' | 'DISLIKE' | null>(null);\n  const [localLikes, setLocalLikes] = useState(post.Likes);\n  const [localDislikes, setLocalDislikes] = useState(post.Dislikes);\n  const [localLiked, setLocalLiked] = useState(post.Liked);\n  const [localDisliked, setLocalDisliked] = useState(post.Disliked);\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null);\n  const [scaleAnim] = useState(new Animated.Value(1));\n  const [modalVisible, setModalVisible] = useState(false);\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const [mediaViewerProps, setMediaViewerProps] = useState<MediaViewerProps | null>(null);\n  const videoRef = useRef(null);\n  const [showProfile, setShowProfile] = useState(false);\n\n  const handleDownload = async (url: string, filename: string, fileId?: string) => {\n    try {\n      if (fileId) {\n        //   ,  FileService  \n        const fileService = FileService.getInstance();\n        await fileService.downloadFile(fileId, filename);\n      } else {\n        //       \n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      }\n    } catch (error) {\n      console.error('Error downloading file:', error);\n      Alert.alert('', '   ');\n    }\n  };\n\n  const openModal = (props: MediaViewerProps) => {\n    setMediaViewerProps(props);\n    setModalVisible(true);\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 300,\n      useNativeDriver: true,\n    }).start();\n  };\n\n  const closeModal = () => {\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 300,\n      useNativeDriver: true,\n    }).start(() => {\n      setModalVisible(false);\n      setMediaViewerProps(null);\n    });\n  };\n\n  const formatDate = useCallback((dateString: string) => {\n    const date = new Date(dateString);\n    return format(date, 'dd MMMM, HH:mm', { locale: ru });\n  }, []);\n\n  const handleInteraction = async (action: 'LIKE' | 'DISLIKE') => {\n    if (loadingAction) return;\n    \n    try {\n      setLoadingAction(action);\n      \n      //   UI\n      if (action === 'LIKE') {\n        if (!localLiked) {\n          setLocalLikes(prev => prev + 1);\n          setLocalLiked('Liked');\n          if (localDisliked) {\n            setLocalDislikes(prev => prev - 1);\n            setLocalDisliked(null);\n          }\n        } else {\n          setLocalLikes(prev => prev - 1);\n          setLocalLiked(null);\n        }\n      } else {\n        if (!localDisliked) {\n          setLocalDislikes(prev => prev + 1);\n          setLocalDisliked('Liked');\n          if (localLiked) {\n            setLocalLikes(prev => prev - 1);\n            setLocalLiked(null);\n          }\n        } else {\n          setLocalDislikes(prev => prev - 1);\n          setLocalDisliked(null);\n        }\n      }\n\n      await postsAPI.interactWithPost(action, post.ID);\n      onUpdate();\n    } catch (error) {\n      console.error('Error interacting with post:', error);\n      setLocalLikes(post.Likes);\n      setLocalDislikes(post.Dislikes);\n      setLocalLiked(post.Liked);\n      setLocalDisliked(post.Disliked);\n      Alert.alert('', '   ');\n    } finally {\n      setLoadingAction(null);\n    }\n  };\n\n  const handleReactionPress = useCallback((type: 'like' | 'dislike') => {\n    //  \n    Animated.sequence([\n      Animated.timing(scaleAnim, {\n        toValue: 0.95,\n        duration: 100,\n        useNativeDriver: false,\n      }),\n      Animated.spring(scaleAnim, {\n        toValue: 1,\n        friction: 4,\n        useNativeDriver: false,\n      }),\n    ]).start();\n\n    if (type === 'like') {\n      handleInteraction('LIKE');\n    } else {\n      handleInteraction('DISLIKE');\n    }\n  }, [scaleAnim, handleInteraction]);\n\n  const renderFileContent = (file: MediaContent['File']) => {\n    if (!file) return null;\n\n    return (\n      <TouchableOpacity\n        onPress={() => handleDownload('', file.file_name, file.file_id)}\n        style={styles.fileContainer}\n      >\n        <Image\n          source={require('../assets/file.png')}\n          style={styles.fileIcon}\n        />\n        <View style={styles.fileInfo}>\n          <Text style={styles.fileName}>{file.file_name}</Text>\n          <Text style={styles.fileSize}>{formatFileSize(file.file_size)}</Text>\n        </View>\n        <Icon name=\"download\" size={24} color=\"#666\" />\n      </TouchableOpacity>\n    );\n  };\n\n  const renderMediaContent = () => {\n    if (!post.Content) return null;\n\n    try {\n      const content: MediaContent = JSON.parse(post.Content);\n      const screenWidth = Dimensions.get('window').width - 30;\n\n      if (content.File) {\n        return renderFileContent(content.File);\n      }\n\n      if (content.Image) {\n        const aspectRatio = content.Image.width / content.Image.height;\n        const imageHeight = screenWidth / aspectRatio;\n        const maxHeight = screenWidth * 0.8;\n\n        const imageUrl = content.Image.simple_image\n          ? `https://elemsocial.com/Content/Simple/${content.Image.simple_image}`\n          : `https://elemsocial.com/Content/Posts/Images/${content.Image.file_name}`;\n        \n        const filename = content.Image.orig_name || content.Image.file_name;\n\n        return (\n          <TouchableOpacity\n            onPress={() => openModal({\n              url: imageUrl,\n              type: 'image',\n              filename,\n              onClose: closeModal,\n              onDownload: handleDownload\n            })}\n            style={[styles.mediaContainer, { height: Math.min(imageHeight, maxHeight) }]}\n          >\n            <Image\n              source={{ uri: imageUrl }}\n              style={styles.mediaContent}\n              resizeMode=\"contain\"\n            />\n          </TouchableOpacity>\n        );\n      }\n\n      if (content.Video) {\n        const aspectRatio = content.Video.width / content.Video.height;\n        const videoHeight = screenWidth / aspectRatio;\n        const maxHeight = screenWidth * 0.8;\n        const videoUrl = `https://elemsocial.com/Content/Posts/Video/${content.Video.file_name}`;\n        const filename = content.Video.orig_name ?? content.Video.file_name;\n\n        return (\n          <View \n            style={[\n              styles.mediaContainer, \n              { height: Math.min(videoHeight, maxHeight) }\n            ]}\n          >\n            <CustomVideoPlayer\n              uri={videoUrl}\n              style={styles.mediaContent}\n              onPress={() => {\n                openModal({\n                  url: videoUrl,\n                  type: 'video',\n                  filename,\n                  onClose: closeModal,\n                  onDownload: handleDownload\n                });\n              }}\n            />\n          </View>\n        );\n      }\n    } catch (error) {\n      console.error('Error parsing content:', error);\n      return null;\n    }\n\n    return null;\n  };\n\n  const renderMediaViewer = () => {\n    if (!mediaViewerProps) return null;\n\n    return (\n      <Modal\n        transparent\n        visible={modalVisible}\n        onRequestClose={closeModal}\n      >\n        <Animated.View \n          style={[\n            styles.modalOverlay,\n            {\n              opacity: fadeAnim,\n            },\n          ]}\n        >\n          <TouchableOpacity\n            style={styles.modalContent}\n            activeOpacity={1}\n            onPress={closeModal}\n          >\n            {mediaViewerProps.type === 'image' ? (\n              <Image\n                source={{ uri: mediaViewerProps.url }}\n                style={styles.fullScreenMedia}\n                resizeMode=\"contain\"\n              />\n            ) : (\n              <Video\n                ref={videoRef}\n                source={{ uri: mediaViewerProps.url }}\n                style={styles.fullScreenMedia}\n                resizeMode={ResizeMode.CONTAIN}\n                useNativeControls\n                shouldPlay={true}\n                isLooping\n              />\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.closeButton}\n            onPress={closeModal}\n          >\n            <Text style={styles.closeButtonText}></Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.downloadButton}\n            onPress={() => mediaViewerProps.onDownload(mediaViewerProps.url, mediaViewerProps.filename, mediaViewerProps.fileId)}\n          >\n            <Image\n              source={require('../assets/download.png')}\n              style={styles.downloadIcon}\n            />\n          </TouchableOpacity>\n        </Animated.View>\n      </Modal>\n    );\n  };\n\n  useEffect(() => {\n    if (post.Avatar && post.Avatar !== 'None') {\n      const avatarUrl = `https://elemsocial.com/Content/Avatars/${post.Avatar}`;\n      setAvatarUrl(avatarUrl);\n    }\n  }, [post.Avatar]);\n\n  const handleProfilePress = () => {\n    setShowProfile(true);\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <TouchableOpacity \n          style={styles.userInfo}\n          onPress={handleProfilePress}\n        >\n          <View style={styles.avatarContainer}>\n            {post.Avatar && post.Avatar !== 'None' ? (\n              <Image \n                source={{ uri: `https://elemsocial.com/Content/Avatars/${post.Avatar}` }} \n                style={styles.avatar}\n              />\n            ) : (\n              <LetterAvatar \n                name={post.Name || post.Username} \n                size={40}\n              />\n            )}\n          </View>\n\n          <View style={styles.userTextInfo}>\n            <View style={styles.nameContainer}>\n              <Text style={styles.name}>{post.Name}</Text>\n              {post.UserIcons && post.UserIcons.includes('VERIFY') && (\n                <Image\n                  source={require('../assets/verify.png')}\n                  style={styles.verifiedBadge}\n                />\n              )}\n            </View>\n            <Text style={styles.username}>@{post.Username}</Text>\n          </View>\n        </TouchableOpacity>\n        <Text style={styles.date}>{formatDate(post.Date)}</Text>\n      </View>\n\n      <LinkText text={post.Text} style={styles.text} />\n\n      {renderMediaContent()}\n      {renderMediaViewer()}\n\n      <View style={styles.footer}>\n        <Animated.View style={[\n          styles.reactions, \n          { transform: [{ scale: scaleAnim }] },\n          loadingAction ? styles.pointerEventsNone : styles.pointerEventsAuto\n        ]}>\n          <TouchableOpacity\n            style={[styles.reactionButton, localLiked && styles.reactionButtonActive]}\n            onPress={() => handleReactionPress('like')}\n          >\n            <Image\n              source={require('../assets/like.png')}\n              style={styles.reactionIcon}\n              tintColor={localLiked ? '#007AFF' : '#666'}\n              resizeMode=\"contain\"\n            />\n            <Text style={[styles.reactionCount, localLiked && styles.reactionCountActive]}>\n              {localLikes}\n            </Text>\n            {loadingAction === 'LIKE' && (\n              <Animated.View style={styles.reactionLoader}>\n                <ActivityIndicator\n                  size=\"small\"\n                  color={localLiked ? '#007AFF' : '#666'}\n                />\n              </Animated.View>\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.reactionButton, localDisliked && styles.dislikeButtonActive]}\n            onPress={() => handleReactionPress('dislike')}\n          >\n            <Image\n              source={require('../assets/dislike.png')}\n              style={styles.reactionIcon}\n              tintColor={localDisliked ? '#FF3B30' : '#666'}\n              resizeMode=\"contain\"\n            />\n            <Text style={[styles.reactionCount, localDisliked && styles.dislikeCountActive]}>\n              {localDislikes}\n            </Text>\n            {loadingAction === 'DISLIKE' && (\n              <Animated.View style={styles.reactionLoader}>\n                <ActivityIndicator\n                  size=\"small\"\n                  color={localDisliked ? '#FF3B30' : '#666'}\n                />\n              </Animated.View>\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.reactionButton}\n          >\n            <Image\n              source={require('../assets/comment.png')}\n              style={styles.reactionIcon}\n              tintColor=\"#666\"\n              resizeMode=\"contain\"\n            />\n            <Text style={styles.reactionCount}>\n              {post.Comments}\n            </Text>\n          </TouchableOpacity>\n        </Animated.View>\n\n        {post.MyPost && (\n          <View style={styles.myPostBadge}>\n            <Text style={styles.myPostText}> </Text>\n          </View>\n        )}\n      </View>\n\n      <ProfileModal\n        visible={showProfile}\n        username={post.Username}\n        onClose={() => setShowProfile(false)}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#fff',\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  avatarContainer: {\n    width: 40,\n    height: 40,\n    marginRight: 10,\n    borderRadius: 20,\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n  },\n  avatar: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 20,\n  },\n  userTextInfo: {\n    flex: 1,\n  },\n  nameContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 2,\n  },\n  name: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#000',\n  },\n  verifiedBadge: {\n    width: 16,\n    height: 16,\n  },\n  username: {\n    fontSize: 14,\n    color: '#666',\n  },\n  date: {\n    fontSize: 12,\n    color: '#666',\n  },\n  text: {\n    fontSize: 16,\n    color: '#000',\n    marginBottom: 10,\n    lineHeight: 22,\n  },\n  mediaContainer: {\n    width: '100%',\n    backgroundColor: '#000',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginVertical: 5,\n  },\n  mediaContent: {\n    width: '100%',\n    height: '100%',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  fullScreenMedia: {\n    width: '100%',\n    height: '100%',\n  },\n  closeButton: {\n    position: 'absolute',\n    top: 40,\n    right: 20,\n    zIndex: 2,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    color: '#fff',\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  downloadButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 40,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    borderRadius: 25,\n    padding: 12,\n    zIndex: 1,\n  },\n  downloadIcon: {\n    width: 24,\n    height: 24,\n    tintColor: '#fff',\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  reactions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    gap: 20,\n  },\n  reactionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: '#f8f8f8',\n  },\n  reactionButtonActive: {\n    backgroundColor: '#E3F2FD',\n  },\n  dislikeButtonActive: {\n    backgroundColor: '#FFE5E5',\n  },\n  reactionIcon: {\n    width: 24,\n    height: 24,\n  },\n  reactionIconActive: {\n    tintColor: '#007AFF',\n  },\n  dislikeIconActive: {\n    tintColor: '#FF3B30',\n  },\n  reactionCount: {\n    fontSize: 15,\n    fontWeight: '600',\n    color: '#666',\n    marginLeft: 6,\n  },\n  reactionCountActive: {\n    color: '#007AFF',\n  },\n  dislikeCountActive: {\n    color: '#FF3B30',\n  },\n  reactionLoader: {\n    marginLeft: 4,\n  },\n  pointerEventsAuto: {\n    pointerEvents: 'auto',\n  },\n  pointerEventsNone: {\n    pointerEvents: 'none',\n  },\n  myPostBadge: {\n    backgroundColor: '#E3F2FD',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  myPostText: {\n    fontSize: 12,\n    color: '#007AFF',\n    fontWeight: '500',\n  },\n  videoOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'flex-end',\n    alignItems: 'flex-end',\n    padding: 10,\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  },\n  fileContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 12,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  fileIcon: {\n    width: 40,\n    height: 40,\n    marginRight: 12,\n  },\n  fileInfo: {\n    flex: 1,\n  },\n  fileName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#333',\n    marginBottom: 4,\n  },\n  fileSize: {\n    fontSize: 14,\n    color: '#666',\n  },\n});\n\nexport default PostCard;\n","import React, { useState, useRef } from 'react';\nimport {\n    View,\n    TextInput,\n    TouchableOpacity,\n    StyleSheet,\n    ActivityIndicator,\n    Text,\n    Image,\n    Platform,\n    Animated,\n    Easing\n} from 'react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport { postsAPI, SelectedFile } from '../services/api';\n\ninterface CreatePostProps {\n    onPostCreated: (postId: string) => void;\n}\n\nconst CreatePost: React.FC<CreatePostProps> = ({ onPostCreated }) => {\n    const [text, setText] = useState('');\n    const [files, setFiles] = useState<SelectedFile[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    \n    // \n    const scaleAnim = useRef(new Animated.Value(1)).current;\n    const successOpacityAnim = useRef(new Animated.Value(0)).current;\n\n    const handleAddImage = async () => {\n        try {\n            const result = await ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: true,\n                quality: 1,\n            });\n\n            if (!result.canceled) {\n                const file: SelectedFile = {\n                    uri: result.assets[0].uri,\n                    type: 'image/jpeg',\n                    name: 'photo.jpg'\n                };\n                setFiles([...files, file]);\n            }\n        } catch (error) {\n            console.error('   :', error);\n            setError('   ');\n        }\n    };\n\n    const animateSuccess = () => {\n        //   \n        Animated.sequence([\n            Animated.timing(scaleAnim, {\n                toValue: 0.95,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            //     \n            Animated.timing(successOpacityAnim, {\n                toValue: 1,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            Animated.delay(1000),\n            //   \n            Animated.timing(successOpacityAnim, {\n                toValue: 0,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            //     \n            Animated.timing(scaleAnim, {\n                toValue: 1,\n                duration: 200,\n                useNativeDriver: true,\n            })\n        ]).start();\n    };\n\n    const handleSubmit = async () => {\n        if (!text.trim() && files.length === 0) {\n            setError('   ');\n            return;\n        }\n\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const postId = await postsAPI.createPost(text, files);\n            setText('');\n            setFiles([]);\n            animateSuccess();\n            onPostCreated(postId);\n        } catch (error) {\n            console.error('   :', error);\n            setError(error instanceof Error ? error.message : '   ');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <View style={styles.container}>\n            <Animated.View style={[\n                styles.formContainer,\n                {\n                    transform: [{ scale: scaleAnim }]\n                }\n            ]}>\n                <TextInput\n                    style={styles.input}\n                    placeholder=\"   ?\"\n                    placeholderTextColor=\"#666\"\n                    value={text}\n                    onChangeText={setText}\n                    multiline\n                    maxLength={5000}\n                    editable={!isLoading}\n                />\n                \n                {files.length > 0 && (\n                    <View style={styles.filesContainer}>\n                        {files.map((file, index) => (\n                            <View key={index} style={styles.filePreview}>\n                                <Image \n                                    source={{ uri: file.uri }} \n                                    style={styles.imagePreview} \n                                />\n                                <TouchableOpacity \n                                    style={styles.removeButton}\n                                    onPress={() => setFiles(files.filter((_, i) => i !== index))}\n                                >\n                                    <Text style={styles.removeButtonText}></Text>\n                                </TouchableOpacity>\n                            </View>\n                        ))}\n                    </View>\n                )}\n\n                {error && (\n                    <Text style={styles.errorText}>{error}</Text>\n                )}\n\n                <View style={styles.footer}>\n                    <TouchableOpacity \n                        style={styles.addButton} \n                        onPress={handleAddImage}\n                        disabled={isLoading}\n                    >\n                        <Image \n                            source={require('../assets/addfile.png')} \n                            style={styles.addButtonIcon}\n                        />\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[\n                            styles.submitButton,\n                            (!text.trim() && files.length === 0) && styles.submitButtonDisabled\n                        ]}\n                        onPress={handleSubmit}\n                        disabled={isLoading || (!text.trim() && files.length === 0)}\n                    >\n                        {isLoading ? (\n                            <ActivityIndicator color=\"#fff\" />\n                        ) : (\n                            <Text style={styles.submitButtonText}></Text>\n                        )}\n                    </TouchableOpacity>\n                </View>\n            </Animated.View>\n\n            <Animated.View \n                style={[\n                    styles.successMessage,\n                    { opacity: successOpacityAnim }\n                ]}\n                pointerEvents=\"none\"\n            >\n                <Text style={styles.successText}> !</Text>\n            </Animated.View>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: '#fff',\n        borderRadius: 12,\n        overflow: 'hidden',\n        ...Platform.select({\n            ios: {\n                shadowColor: '#000',\n                shadowOffset: { width: 0, height: 2 },\n                shadowOpacity: 0.1,\n                shadowRadius: 4,\n            },\n            android: {\n                elevation: 3,\n            },\n        }),\n    },\n    formContainer: {\n        width: '100%',\n        backgroundColor: '#fff',\n    },\n    input: {\n        minHeight: 80,\n        padding: 15,\n        fontSize: 16,\n        color: '#000',\n        textAlignVertical: 'top',\n    },\n    filesContainer: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        padding: 10,\n        borderTopWidth: 1,\n        borderTopColor: '#eee',\n    },\n    filePreview: {\n        width: 100,\n        height: 100,\n        margin: 5,\n        borderRadius: 8,\n        overflow: 'hidden',\n        position: 'relative',\n    },\n    imagePreview: {\n        width: '100%',\n        height: '100%',\n    },\n    removeButton: {\n        position: 'absolute',\n        top: 5,\n        right: 5,\n        width: 24,\n        height: 24,\n        borderRadius: 12,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    removeButtonText: {\n        color: '#fff',\n        fontSize: 18,\n        fontWeight: 'bold',\n    },\n    footer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        padding: 10,\n        borderTopWidth: 1,\n        borderTopColor: '#eee',\n    },\n    addButton: {\n        width: 40,\n        height: 40,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginRight: 10,\n    },\n    addButtonIcon: {\n        width: 24,\n        height: 24,\n        tintColor: '#666',\n    },\n    submitButton: {\n        flex: 1,\n        height: 40,\n        backgroundColor: '#007AFF',\n        borderRadius: 20,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    submitButtonDisabled: {\n        backgroundColor: '#ccc',\n    },\n    submitButtonText: {\n        color: '#fff',\n        fontSize: 16,\n        fontWeight: '600',\n    },\n    errorText: {\n        color: '#DC3545',\n        fontSize: 14,\n        marginHorizontal: 15,\n        marginBottom: 10,\n    },\n    successMessage: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    },\n    successText: {\n        color: '#28A745',\n        fontSize: 18,\n        fontWeight: '600',\n    }\n});\n\nexport default CreatePost; ","import React, { useEffect, useState, useRef } from 'react';\nimport { View, Text, StyleSheet, Animated } from 'react-native';\nimport webSocketService from '../services/WebSocket';\n\nconst WebSocketStatus: React.FC = () => {\n    const [status, setStatus] = useState<'connecting' | 'connected' | 'error'>('connecting');\n    const [errorMessage, setErrorMessage] = useState<string | null>(null);\n    const slideAnim = useRef(new Animated.Value(-100)).current;\n    const opacityAnim = useRef(new Animated.Value(0)).current;\n    const wasConnected = useRef(false);\n\n    useEffect(() => {\n        const checkConnection = () => {\n            if (webSocketService.connectionStatus && webSocketService.ready) {\n                if (!wasConnected.current) {\n                    setStatus('connected');\n                    wasConnected.current = true;\n                    //       2 \n                    setTimeout(hideNotification, 2000);\n                }\n            } else if (wasConnected.current) {\n                //       \n                setStatus('error');\n                setErrorMessage(' ');\n                wasConnected.current = false;\n                showNotification();\n            }\n        };\n\n        const showNotification = () => {\n            Animated.parallel([\n                Animated.timing(slideAnim, {\n                    toValue: 0,\n                    duration: 300,\n                    useNativeDriver: true,\n                }),\n                Animated.timing(opacityAnim, {\n                    toValue: 1,\n                    duration: 300,\n                    useNativeDriver: true,\n                }),\n            ]).start();\n        };\n\n        const interval = setInterval(checkConnection, 1000);\n\n        const timeout = setTimeout(() => {\n            if (status === 'connecting' && !wasConnected.current) {\n                setStatus('error');\n                setErrorMessage('   ');\n                showNotification();\n            }\n        }, 15000);\n\n        if (status === 'connecting' && !wasConnected.current) {\n            showNotification();\n        }\n\n        return () => {\n            clearInterval(interval);\n            clearTimeout(timeout);\n        };\n    }, [status]);\n\n    const hideNotification = () => {\n        Animated.parallel([\n            Animated.timing(slideAnim, {\n                toValue: -100,\n                duration: 300,\n                useNativeDriver: true,\n            }),\n            Animated.timing(opacityAnim, {\n                toValue: 0,\n                duration: 300,\n                useNativeDriver: true,\n            }),\n        ]).start();\n    };\n\n    const getMessage = () => {\n        switch (status) {\n            case 'connecting':\n                return ' ...';\n            case 'connected':\n                return ' ';\n            case 'error':\n                return errorMessage || ' ';\n        }\n    };\n\n    if (status === 'connected' && !opacityAnim) return null;\n\n    return (\n        <Animated.View \n            style={[\n                styles.container,\n                {\n                    transform: [{ translateY: slideAnim }],\n                    opacity: opacityAnim,\n                }\n            ]}\n        >\n            <View style={[\n                styles.content,\n                status === 'error' && styles.errorContent,\n                status === 'connected' && styles.successContent\n            ]}>\n                <Text style={styles.text}>{getMessage()}</Text>\n            </View>\n        </Animated.View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        position: 'absolute',\n        top: 10,\n        left: 10,\n        right: 10,\n        zIndex: 1000,\n        borderRadius: 8,\n        overflow: 'hidden',\n    },\n    content: {\n        backgroundColor: '#333',\n        padding: 14,\n        alignItems: 'center',\n        opacity: 0.9,\n        shadowColor: '#000',\n        shadowOffset: {\n            width: 0,\n            height: 2,\n        },\n        shadowOpacity: 0.25,\n        shadowRadius: 3.84,\n        elevation: 5,\n    },\n    errorContent: {\n        backgroundColor: '#DC3545',\n    },\n    successContent: {\n        backgroundColor: '#28A745',\n    },\n    text: {\n        color: '#fff',\n        fontSize: 15,\n        fontWeight: '500',\n    }\n});\n\nexport default WebSocketStatus; ","import React, { useState, useEffect } from 'react';\nimport { View, Text, ScrollView, StyleSheet, Image, TouchableOpacity } from 'react-native';\nimport { useTheme } from '@react-navigation/native';\nimport { OnlineUser } from '../types/websocket';\nimport webSocketService from '../services/WebSocket';\nimport LetterAvatar from './LetterAvatar';\nimport ProfileModal from './ProfileModal';\n\nconst OnlineUsers: React.FC = () => {\n    const [onlineUsers, setOnlineUsers] = useState<OnlineUser[]>([]);\n    const [selectedUser, setSelectedUser] = useState<OnlineUser | null>(null);\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const { colors } = useTheme();\n\n    useEffect(() => {\n        const handleSocialMessage = (data: any) => {\n            if (data.type === 'social' && data.action === 'get_online_users' && Array.isArray(data.users)) {\n                //     \n                const formattedUsers = data.users.map((user: any) => ({\n                    ID: user.id.toString(),\n                    AuthorID: user.id.toString(),\n                    Username: user.username,\n                    Name: user.name,\n                    Avatar: user.avatar\n                }));\n                setOnlineUsers(formattedUsers);\n            }\n        };\n\n        //    \n        webSocketService.addMessageHandler('social', handleSocialMessage);\n\n        //    \n        webSocketService.send({\n            type: 'social',\n            action: 'get_online_users'\n        });\n\n        return () => {\n            webSocketService.removeMessageHandler('social');\n        };\n    }, []);\n\n    const handleUserPress = (user: OnlineUser) => {\n        setSelectedUser(user);\n        setIsModalVisible(true);\n    };\n\n    return (\n        <View style={styles.container}>\n            <Text style={[styles.title, { color: colors.text }]}>  </Text>\n            <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                style={styles.scrollView}\n            >\n                {onlineUsers.length > 0 ? (\n                    onlineUsers.map((user) => (\n                        <TouchableOpacity \n                            key={user.ID} \n                            style={styles.userContainer}\n                            onPress={() => handleUserPress(user)}\n                        >\n                            <View style={styles.avatarContainer}>\n                                {user.Avatar && user.Avatar !== 'None' ? (\n                                    <Image \n                                        source={{ uri: `https://elemsocial.com/Content/Avatars/${user.Avatar}` }} \n                                        style={styles.avatar}\n                                    />\n                                ) : (\n                                    <LetterAvatar \n                                        name={user.Name || user.Username} \n                                        size={60}\n                                    />\n                                )}\n                                <View style={styles.onlineIndicator} />\n                            </View>\n                            <Text style={[styles.username, { color: colors.text }]} numberOfLines={1}>\n                                {user.Name || user.Username}\n                            </Text>\n                        </TouchableOpacity>\n                    ))\n                ) : (\n                    <View style={styles.emptyContainer}>\n                        <Text style={[styles.emptyText, { color: colors.text }]}>\n                            ...\n                        </Text>\n                    </View>\n                )}\n            </ScrollView>\n\n            {selectedUser && (\n                <ProfileModal\n                    visible={isModalVisible}\n                    onClose={() => setIsModalVisible(false)}\n                    username={selectedUser.Username}\n                />\n            )}\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        marginVertical: 10,\n        borderBottomWidth: 1,\n        borderBottomColor: '#eee',\n        paddingBottom: 15,\n    },\n    title: {\n        fontSize: 16,\n        fontWeight: '600',\n        marginLeft: 15,\n        marginBottom: 10,\n    },\n    scrollView: {\n        paddingHorizontal: 10,\n    },\n    userContainer: {\n        alignItems: 'center',\n        marginHorizontal: 5,\n        width: 70,\n    },\n    avatarContainer: {\n        position: 'relative',\n        width: 60,\n        height: 60,\n    },\n    avatar: {\n        width: 60,\n        height: 60,\n        borderRadius: 30,\n        backgroundColor: '#f0f0f0',\n    },\n    onlineIndicator: {\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        width: 14,\n        height: 14,\n        borderRadius: 7,\n        backgroundColor: '#4CAF50',\n        borderWidth: 2,\n        borderColor: '#FFFFFF',\n    },\n    username: {\n        fontSize: 12,\n        marginTop: 5,\n        textAlign: 'center',\n    },\n    emptyContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        paddingHorizontal: 20,\n    },\n    emptyText: {\n        fontSize: 14,\n        color: '#666',\n    },\n});\n\nexport default OnlineUsers; ","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  FlatList,\n  StyleSheet,\n  RefreshControl,\n  ActivityIndicator,\n  Text,\n  TouchableOpacity,\n  Animated,\n  Platform,\n} from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { PostResponse, postsAPI } from '../services/api';\nimport PostCard from '../components/PostCard';\nimport { AuthContext } from '../navigation';\nimport CreatePost from '../components/CreatePost';\nimport { connectWebSocket } from '../services/api';\nimport WebSocketStatus from '../components/WebSocketStatus';\nimport OnlineUsers from '../components/OnlineUsers';\n\ntype FeedType = 'LATEST' | 'REC' | 'SUBSCRIPTIONS';\ntype FeedScreenNavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nconst POSTS_PER_PAGE = 25;\nconst RETRY_INTERVAL = 5000;\n\nconst FeedScreen = () => {\n  const navigation = useNavigation<FeedScreenNavigationProp>();\n  const [feedType, setFeedType] = useState<FeedType>('LATEST');\n  const [posts, setPosts] = useState<PostResponse[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMorePosts, setHasMorePosts] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const retryTimeoutRef = useRef<NodeJS.Timeout>();\n  const pageRef = useRef(0);\n  \n  //  \n  const loadingOpacity = useRef(new Animated.Value(0)).current;\n  const contentOpacity = useRef(new Animated.Value(1)).current;\n\n  const { logout } = React.useContext(AuthContext);\n\n  useEffect(() => {\n    //   WebSocket   \n    connectWebSocket().catch(console.error);\n    fetchPosts(true);\n  }, [feedType]);\n\n  useEffect(() => {\n    return () => {\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const animateLoading = useCallback((show: boolean) => {\n    Animated.parallel([\n      Animated.timing(loadingOpacity, {\n        toValue: show ? 1 : 0,\n        duration: 200,\n        useNativeDriver: false,\n      }),\n      Animated.timing(contentOpacity, {\n        toValue: show ? 0.3 : 1,\n        duration: 200,\n        useNativeDriver: false,\n      }),\n    ]).start();\n  }, []);\n\n  const handleLogin = useCallback(async () => {\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n    }\n    try {\n      //   \n      await logout();\n      \n      //       \n      setPosts([]);\n      setError(null);\n      setLoading(false);\n      setRefreshing(false);\n      setLoadingMore(false);\n    } catch (error) {\n      console.error('Error logging out:', error);\n    }\n  }, [logout]);\n\n  const fetchPosts = useCallback(async (refresh = false) => {\n    try {\n      if (!refresh && loadingMore) return;\n\n      const startIndex = refresh ? 0 : pageRef.current * POSTS_PER_PAGE;\n      console.log('Fetching posts:', { feedType, startIndex, refresh });\n\n      if (refresh) {\n        setLoading(true);\n        pageRef.current = 0;\n        //  \n        if (!error && !refreshing) {\n          animateLoading(true);\n        }\n      } else {\n        setLoadingMore(true);\n      }\n\n      const newPosts = await postsAPI.getPosts(feedType, startIndex);\n      console.log('Received posts:', newPosts.length);\n      \n      //   LATEST   -  \n      if (feedType === 'LATEST' && newPosts.length === 0 && startIndex === 0) {\n        throw new Error('   ');\n      }\n      \n      if (refresh) {\n        setPosts(newPosts);\n      } else {\n        setPosts(prev => [...prev, ...newPosts]);\n      }\n      \n      setHasMorePosts(newPosts.length === POSTS_PER_PAGE);\n      if (newPosts.length === POSTS_PER_PAGE) {\n        pageRef.current += 1;\n      }\n      setError(null);\n\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n      setError('  \\n\\n   ,     VPN');\n      \n      //      LATEST  \n      if (feedType === 'LATEST') {\n        if (retryTimeoutRef.current) {\n          clearTimeout(retryTimeoutRef.current);\n        }\n        const delay = RETRY_INTERVAL + Math.random() * 1000;\n        retryTimeoutRef.current = setTimeout(() => {\n          fetchPosts(true);\n        }, delay);\n      }\n    } finally {\n      //           pull-to-refresh\n      if (!error && !refreshing) {\n        animateLoading(false);\n      }\n      setLoading(false);\n      setRefreshing(false);\n      setLoadingMore(false);\n    }\n  }, [feedType, loadingMore, error, refreshing]);\n\n  const updateSinglePost = useCallback(async (postId: string) => {\n    try {\n      const updatedPost = await postsAPI.loadPost(postId);\n      setPosts(prevPosts => \n        prevPosts.map(post => \n          post.ID === postId ? updatedPost : post\n        )\n      );\n    } catch (error) {\n      console.error('Error updating post:', error);\n    }\n  }, []);\n\n  const handlePostCreated = async (postId: string) => {\n    try {\n      const newPost = await postsAPI.getPost(postId);\n      setPosts(prev => [newPost, ...prev]);\n    } catch (error) {\n      console.error('Error loading new post:', error);\n    }\n  };\n\n  const handleRefresh = useCallback(() => {\n    console.log('Refreshing posts...');\n    setRefreshing(true);\n    fetchPosts(true);\n  }, [fetchPosts]);\n\n  const handleLoadMore = useCallback(() => {\n    console.log('Loading more posts...');\n    if (hasMorePosts && !loadingMore && !refreshing) {\n      fetchPosts(false);\n    }\n  }, [hasMorePosts, loadingMore, refreshing, fetchPosts]);\n\n  const handleChangeFeedType = useCallback((type: FeedType) => {\n    if (type === feedType) return;\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n    }\n    console.log('Changing feed type to:', type);\n    setPosts([]);\n    setHasMorePosts(true);\n    pageRef.current = 0;\n    setFeedType(type);\n  }, [feedType]);\n\n  const renderPost = useCallback(({ item }: { item: PostResponse }) => {\n    return (\n      <PostCard\n        post={item}\n        onUpdate={() => updateSinglePost(item.ID)}\n      />\n    );\n  }, [updateSinglePost]);\n\n  const renderHeader = useCallback(() => (\n    <View style={styles.header}>\n        <WebSocketStatus />\n        <OnlineUsers />\n        <View style={styles.createPostContainer}>\n            <CreatePost onPostCreated={handlePostCreated} />\n        </View>\n        <View style={styles.feedTypeContainer}>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'LATEST' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('LATEST')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'LATEST' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'REC' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('REC')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'REC' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'SUBSCRIPTIONS' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('SUBSCRIPTIONS')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'SUBSCRIPTIONS' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n        </View>\n    </View>\n  ), [feedType, handleChangeFeedType, handlePostCreated]);\n\n  const renderError = useCallback(() => {\n    if (!error) return null;\n    return (\n      <View style={styles.errorContainer}>\n        <Text style={styles.errorText}>{error}</Text>\n        <TouchableOpacity style={styles.retryButton} onPress={() => fetchPosts(true)}>\n          <Text style={styles.retryButtonText}></Text>\n        </TouchableOpacity>\n        <TouchableOpacity style={styles.loginButton} onPress={handleLogin}>\n          <Text style={styles.loginButtonText}> </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }, [error, handleLogin]);\n\n  const renderEmpty = useCallback(() => {\n    if (loading) return null;\n    return (\n      <View style={styles.emptyContainer}>\n        <Text style={styles.emptyText}>\n          {error ? '' : ' '}\n        </Text>\n      </View>\n    );\n  }, [loading, error]);\n\n  const renderFooter = useCallback(() => {\n    if (!loadingMore) return null;\n    return (\n      <View style={styles.footer}>\n        <ActivityIndicator size=\"small\" color=\"#007AFF\" />\n      </View>\n    );\n  }, [loadingMore]);\n\n  if (loading && posts.length === 0) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color=\"#007AFF\" />\n        </View>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={posts}\n        renderItem={renderPost}\n        keyExtractor={item => `${feedType}_${item.ID}`}\n        onEndReached={handleLoadMore}\n        onEndReachedThreshold={0.5}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={handleRefresh}\n            colors={['#007AFF']}\n            tintColor=\"#007AFF\"\n          />\n        }\n        ListEmptyComponent={renderEmpty}\n        ListFooterComponent={renderFooter}\n        contentContainerStyle={styles.listContent}\n        ListHeaderComponent={renderHeader}\n      />\n\n      {renderError()}\n    </View>\n  );\n};\n\n//       \nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  contentContainer: {\n    flex: 1,\n    position: 'relative',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  header: {\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 1,\n      },\n      android: {\n        elevation: 2,\n      },\n    }),\n  },\n  createPostContainer: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  feedTypeContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    backgroundColor: '#fff',\n    zIndex: 1,\n  },\n  feedTypeButton: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderRadius: 20,\n    marginHorizontal: 4,\n  },\n  activeFeedType: {\n    backgroundColor: '#E3F2FD',\n  },\n  feedTypeText: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: '#666',\n  },\n  activeFeedTypeText: {\n    color: '#007AFF',\n  },\n  content: {\n    flex: 1,\n  },\n  listContent: {\n    flexGrow: 1,\n  },\n  loadingOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.8)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  pointerEventsAuto: {\n    pointerEvents: 'auto',\n  },\n  pointerEventsNone: {\n    pointerEvents: 'none',\n  },\n  footer: {\n    padding: 20,\n    alignItems: 'center',\n  },\n  errorContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    padding: 20,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#eee',\n    alignItems: 'center',\n  },\n  errorText: {\n    fontSize: 14,\n    color: '#FF3B30',\n    textAlign: 'center',\n    marginBottom: 15,\n  },\n  retryButton: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 20,\n    marginBottom: 10,\n  },\n  retryButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  loginButton: {\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n  },\n  loginButtonText: {\n    color: '#007AFF',\n    fontSize: 16,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n  },\n});\n\nexport default FeedScreen;\n","import React, { useEffect, useState, useContext } from 'react';\nimport {\n  View,\n  Text,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  ActivityIndicator,\n  Platform,\n  Alert,\n  RefreshControl,\n  FlatList,\n  Linking,\n  Dimensions,\n  ScrollView,\n} from 'react-native';\nimport { profileAPI, getImageUrl, getAccountData, ProfileData } from '../services/api';\nimport LetterAvatar from '../components/LetterAvatar';\nimport { AuthContext } from '../navigation';\nimport PostCard from '../components/PostCard';\nimport { PostResponse } from '../services/api';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport ErrorMessage from '../components/ErrorMessage';\n\nconst POSTS_PER_PAGE = 10;\nconst { width } = Dimensions.get('window');\n\ninterface ProfileScreenProps {\n  username?: string;\n}\n\nconst ProfileScreen: React.FC<ProfileScreenProps> = ({ username }) => {\n  const { logout } = useContext(AuthContext);\n  const [profile, setProfile] = useState<ProfileData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [refreshing, setRefreshing] = useState(false);\n\n  useEffect(() => {\n    fetchProfile();\n  }, [username]);\n\n  const fetchProfile = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      let data: ProfileData;\n      \n      if (username) {\n        data = await profileAPI.getProfile(username);\n      } else {\n        //  username  ,      \n        const accountData = await getAccountData();\n        if (accountData) {\n          data = await profileAPI.getProfile(accountData.username);\n        } else {\n          throw new Error('    ');\n        }\n      }\n      \n      //  URL   \n      if (data.avatar) {\n        data.avatar = `https://elemsocial.com/Content/Avatars/${data.avatar}`;\n      }\n      if (data.cover) {\n        data.cover = `https://elemsocial.com/Content/Covers/${data.cover}`;\n      }\n      \n      setProfile(data);\n    } catch (error) {\n      console.error('  :', error);\n      setError('   .        .');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchProfile();\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (error) {\n      console.error(' :', error);\n      setError('    ');\n    }\n  };\n\n  if (loading) {\n    return (\n      <View style={styles.centered}>\n        <ActivityIndicator size=\"large\" color=\"#007AFF\" />\n      </View>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <View style={styles.centered}>\n        <Text>  </Text>\n        <TouchableOpacity \n          style={styles.retryButton}\n          onPress={fetchProfile}\n        >\n          <Text style={styles.retryButtonText}> </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  const renderStats = () => {\n    const stats = [\n      { label: '', value: profile.posts },\n      { label: '', value: profile.subscribers },\n      { label: '', value: profile.subscriptions }\n    ];\n\n    return (\n      <View style={styles.stats}>\n        {stats.map((stat) => (\n          <View key={stat.label} style={styles.statItem}>\n            <Text style={styles.statNumber}>\n              {stat.value?.toLocaleString() || '0'}\n            </Text>\n            <Text style={styles.statLabel}>{stat.label}</Text>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  return (\n    <ScrollView\n      style={styles.container}\n      refreshControl={\n        <RefreshControl refreshing={refreshing} onRefresh={handleRefresh} />\n      }\n    >\n      <ErrorMessage \n        message={error} \n        onClose={() => setError('')}\n      />\n      \n      <View style={styles.profileInfo}>\n        {profile.cover && (\n          <Image \n            source={{ uri: profile.cover }} \n            style={styles.coverImage}\n            resizeMode=\"cover\"\n          />\n        )}\n        \n        <View style={[styles.avatarWrapper, profile.cover ? styles.avatarWithCover : null]}>\n          {profile.avatar ? (\n            <Image \n              source={{ uri: profile.avatar }} \n              style={styles.avatar}\n              resizeMode=\"cover\"\n            />\n          ) : (\n            <LetterAvatar \n              name={profile.name || profile.username} \n              size={100}\n            />\n          )}\n        </View>\n        \n        <View style={styles.nameContainer}>\n          <View style={styles.nameRow}>\n            <Text style={styles.name}>{profile.name}</Text>\n            {profile.icons && profile.icons.includes('VERIFY') && (\n              <Image\n                source={require('../assets/verify.png')}\n                style={styles.verifiedBadge}\n              />\n            )}\n          </View>\n          <Text style={styles.username}>@{profile.username}</Text>\n          \n          {profile.description && (\n            <Text style={styles.description}>{profile.description}</Text>\n          )}\n\n          {profile.icons && profile.icons.length > 0 && (\n            <View style={styles.iconsContainer}>\n              {profile.icons.filter(icon => icon !== 'VERIFY').map((icon, index) => (\n                <Image\n                  key={index}\n                  source={{ uri: `https://elemsocial.com/Content/Icons/${icon}` }}\n                  style={styles.icon}\n                />\n              ))}\n            </View>\n          )}\n        </View>\n        \n        {renderStats()}\n        \n        {profile.my_profile && (\n          <TouchableOpacity\n            style={styles.logoutButton}\n            onPress={handleLogout}\n          >\n            <Text style={styles.logoutButtonText}></Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  profileInfo: {\n    position: 'relative',\n  },\n  coverImage: {\n    width: '100%',\n    height: 200,\n  },\n  avatarWrapper: {\n    alignItems: 'center',\n    marginTop: 20,\n    marginBottom: 10,\n  },\n  avatarWithCover: {\n    marginTop: -50,\n  },\n  avatar: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    borderWidth: 4,\n    borderColor: '#fff',\n    backgroundColor: '#f0f0f0',\n  },\n  nameContainer: {\n    alignItems: 'center',\n    marginBottom: 15,\n    paddingHorizontal: 15,\n  },\n  nameRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 4,\n  },\n  name: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#000',\n    marginBottom: 4,\n  },\n  username: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 8,\n  },\n  description: {\n    fontSize: 14,\n    color: '#444',\n    textAlign: 'center',\n    paddingHorizontal: 20,\n    marginTop: 8,\n  },\n  iconsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    marginTop: 8,\n    gap: 8,\n  },\n  icon: {\n    width: 24,\n    height: 24,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    paddingVertical: 15,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: '#eee',\n    marginVertical: 15,\n    marginHorizontal: 15,\n  },\n  statItem: {\n    alignItems: 'center',\n    flex: 1,\n  },\n  statNumber: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  logoutButton: {\n    backgroundColor: '#007AFF',\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginHorizontal: 15,\n    marginTop: 15,\n    marginBottom: 20,\n  },\n  logoutButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  retryButton: {\n    marginTop: 10,\n    padding: 10,\n    backgroundColor: '#007AFF',\n    borderRadius: 8,\n  },\n  retryButtonText: {\n    color: '#fff',\n    fontSize: 16,\n  },\n  verifiedBadge: {\n    width: 20,\n    height: 20,\n  },\n});\n\nexport default ProfileScreen;\n","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { Ionicons } from '@expo/vector-icons';\nimport LoginScreen from '../screens/LoginScreen';\nimport FeedScreen from '../screens/FeedScreen';\nimport ProfileScreen from '../screens/ProfileScreen';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Image, View, Text, StyleSheet } from 'react-native';\n\nconst Tab = createBottomTabNavigator();\nconst Stack = createNativeStackNavigator();\n\nexport const AuthContext = createContext<{\n  isLoggedIn: boolean;\n  setIsLoggedIn: (value: boolean) => void;\n  logout: () => Promise<void>;\n}>({\n  isLoggedIn: false,\n  setIsLoggedIn: () => {},\n  logout: async () => {},\n});\n\nconst MainTabs = () => {\n  return (\n    <Tab.Navigator\n      screenOptions={{\n        tabBarActiveTintColor: '#007AFF',\n        tabBarInactiveTintColor: '#8E8E93',\n        tabBarStyle: {\n          backgroundColor: '#FFFFFF',\n          borderTopWidth: 1,\n          borderTopColor: '#E5E5EA',\n        },\n        headerStyle: {\n          backgroundColor: '#FFFFFF',\n        },\n        headerTitleStyle: {\n          color: '#000000',\n          fontSize: 17,\n          fontWeight: '600',\n        },\n      }}\n    >\n      <Tab.Screen\n        name=\"Feed\"\n        component={FeedScreen}\n        options={{\n          title: '',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"home-outline\" size={size} color={color} />\n          ),\n          headerTitle: '',\n        }}\n      />\n      <Tab.Screen\n        name=\"Profile\"\n        component={ProfileScreen}\n        options={({ navigation }) => ({\n          title: ' ',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"person-outline\" size={size} color={color} />\n          ),\n          headerTitle: ' ',\n          headerRight: () => {\n            const { logout } = useContext(AuthContext);\n            return (\n              <Ionicons\n                name=\"log-out-outline\"\n                size={24}\n                color=\"#ff3b30\"\n                style={{ marginRight: 15 }}\n                onPress={logout}\n              />\n            );\n          },\n        })}\n      />\n    </Tab.Navigator>\n  );\n};\n\nconst Navigation = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    checkLoginStatus();\n  }, []);\n\n  const checkLoginStatus = async () => {\n    await AsyncStorage.clear();\n    const sKey = await AsyncStorage.getItem('S-KEY');\n    setIsLoggedIn(!!sKey);\n  };\n\n  const logout = async () => {\n    await AsyncStorage.removeItem('S-KEY');\n    setIsLoggedIn(false);\n  };\n\n  if (isLoggedIn) {\n    return (\n      <AuthContext.Provider value={{ isLoggedIn, setIsLoggedIn, logout }}>\n        <NavigationContainer>\n          <Stack.Navigator\n            screenOptions={{\n              headerStyle: {\n                backgroundColor: '#fff',\n              },\n              headerTintColor: '#000',\n              headerTitleStyle: {\n                fontWeight: 'bold',\n              },\n              headerTitle: () => (\n                <View style={styles.headerContainer}>\n                  <Image \n                    source={require('../assets/logo.png')} \n                    style={styles.headerLogo}\n                    resizeMode=\"contain\"\n                  />\n                  <Text style={styles.headerTitle}>Element+</Text>\n                </View>\n              ),\n            }}\n          >\n            <Stack.Screen name=\"Main\" component={MainTabs} />\n          </Stack.Navigator>\n        </NavigationContainer>\n      </AuthContext.Provider>\n    );\n  } else {\n    return (\n      <AuthContext.Provider value={{ isLoggedIn, setIsLoggedIn, logout }}>\n        <NavigationContainer>\n          <Stack.Navigator\n            screenOptions={{\n              headerStyle: {\n                backgroundColor: '#fff',\n              },\n              headerTintColor: '#000',\n              headerTitleStyle: {\n                fontWeight: 'bold',\n              },\n              headerTitle: () => (\n                <View style={styles.headerContainer}>\n                  <Image \n                    source={require('../assets/logo.png')} \n                    style={styles.headerLogo}\n                    resizeMode=\"contain\"\n                  />\n                  <Text style={styles.headerTitle}>Element+</Text>\n                </View>\n              ),\n            }}\n          >\n            <Stack.Screen name=\"Auth\" component={LoginScreen} />\n          </Stack.Navigator>\n        </NavigationContainer>\n      </AuthContext.Provider>\n    );\n  }\n};\n\nconst styles = StyleSheet.create({\n  headerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  headerLogo: {\n    width: 24,\n    height: 24,\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n});\n\nexport default Navigation;\n","import './src/utils/disableWarnings';\nimport React, { useCallback, useEffect } from 'react';\nimport Navigation from './src/navigation';\nimport { StatusBar } from 'expo-status-bar';\nimport { View, StyleSheet } from 'react-native';\n\nexport default function App() {\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      //  localStorage   \n      window.localStorage.clear();\n    }\n  }, []);\n\n  const renderNavigation = useCallback(() => <Navigation />, []);\n\n  return (\n    <View style={styles.container}>\n      <StatusBar style=\"auto\" />\n      {renderNavigation()}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n});\n","import { registerRootComponent } from 'expo';\n\nimport App from './App';\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","const originalConsoleError = console.error;\n\nconsole.error = (...args: any[]) => {\n  if (args[0]?.includes?.('Warning: Encountered two children with the same key')) {\n    return;\n  }\n  originalConsoleError.apply(console, args);\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/KirixElemClient/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [841], () => (__webpack_require__(692)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","async","rsaEncrypt","data","pk","publicKeyBuffer","base64String","replace","Uint8Array","from","atob","c","charCodeAt","buffer","importPublicKey","dataBuffer","TextEncoder","encode","publicKeyE","crypto","subtle","importKey","name","hash","encryptedDataBuffer","encrypt","error","Error","message","base64ToBytes","base64","binaryString","map","char","blobToUint8Array","blob","arrayBuffer","constructor","this","url","socket","isConnected","rsaPublic","rsaPrivate","rsaPublicServer","aesKey","aesServerKey","keysReady","socketReady","messageQueue","processingMessages","messageHandlers","Map","connect","connectionStatus","ready","generateKeys","keyPair","window","generateKey","modulusLength","publicExponent","exportKey","publicKey","privateKey","processQueue","length","shift","send","WebSocket","onopen","publicKeyPem","type","binary","String","fromCharCode","apply","Array","btoa","pem","match","join","arrayBufferToPem","JSON","stringify","key","onmessage","rawData","event","decryptedStr","iv","slice","encrypted","importedKey","decryptedBuffer","decrypt","TextDecoder","decode","aesDecrypt","decryptedData","parse","wsEvent","CustomEvent","detail","dispatchEvent","handler","get","privateKeyE","decryptedDataBuffer","rsaDecrypt","action","bytes","getRandomValues","generateAESKey","encryptedMessage","onclose","disconnect","setTimeout","onerror","readyState","OPEN","push","jsonData","encodedData","encryptedBuffer","result","byteLength","set","aesEncrypt","close","addMessageHandler","removeMessageHandler","delete","AUTH_API_URL","WEB_AUTH_API_BASE_URL","process","EXPO_PUBLIC_WEB_API_BASE_URL","AUTH_API_BASE","authApi","axios","create","baseURL","headers","postsApi","systemApi","connectWebSocket","retries","lastError","attemptCount","sKey","AsyncStorage","getItem","Promise","resolve","reject","isResolved","connectionTimeout","webSocketService","S_KEY","clearTimeout","status","accountData","setItem","username","interceptors","request","use","config","response","removeItem","authAPI","login","email","password","formData","FormData","append","fetch","method","body","json","catch","logout","timeout","checkAuth","getMyProfile","getProfile","updateProfile","Object","entries","forEach","value","post","uploadAvatar","file","uploadCover","profileAPI","Type","Content","postsAPI","loadPost","postId","createPost","text","files","uri","some","startsWith","getPost","getPosts","startIndex","userId","toString","postsArray","parseError","isArray","ID","AuthorID","Username","Name","Avatar","UserIcons","Text","Date","Likes","Number","Dislikes","Liked","Disliked","Comments","MyPost","Boolean","isAxiosError","interactWithPost","addComment","getComments","getUserPosts","height","Dimensions","styles","StyleSheet","overlay","flex","backgroundColor","justifyContent","alignItems","container","assign","width","maxWidth","borderRadius","boxShadow","content","padding","title","fontSize","fontWeight","color","marginBottom","textAlign","lineHeight","button","paddingVertical","paddingHorizontal","alignSelf","buttonText","ErrorMessage","onClose","translateY","Animated","Value","useEffect","spring","toValue","useNativeDriver","tension","friction","start","handleClose","timing","duration","_jsx","Modal","transparent","visible","animationType","onRequestClose","children","View","style","transform","_jsxs","TouchableOpacity","onPress","activeOpacity","input","borderWidth","borderColor","outlineStyle","buttonContainer","pointerEvents","cursor","buttonDisabled","switchText","marginTop","stepText","LoginScreen","REGISTER_API_BASE","setIsLoggedIn","useNavigation","useContext","AuthContext","isRegistering","setIsRegistering","useState","loading","setLoading","setEmail","setPassword","loginError","setLoginError","setName","setUsername","regEmail","setRegEmail","regPassword","setRegPassword","captchaToken","setCaptchaToken","registrationError","setRegistrationError","_Fragment","TextInput","placeholder","onChangeText","editable","autoCapitalize","keyboardType","secureTextEntry","HCaptcha","sitekey","onVerify","token","trim","test","disabled","ActivityIndicator","colorPairs","bg","LetterAvatar","size","letter","charAt","toUpperCase","colorIndex","Math","abs","split","reduce","acc","colors","overflow","textAlignVertical","WS_MESSAGE_TYPES","WS_ACTIONS","formatFileSize","i","floor","log","parseFloat","pow","toFixed","getMimeType","filename","ext","lastIndexOf","getFileExtension","toLowerCase","FileService","ws","fileDownloadCallbacks","fileChunks","setupMessageHandlers","getInstance","instance","downloadMessage","handleFileChunk","fileId","chunkNumber","totalChunks","chunkData","has","fill","chunks","includes","fileData","chunk","assembleChunks","callback","uploadFile","random","substring","chunkSize","ceil","end","min","splitFileIntoChunks","uploadMessage","fileName","fileSize","mimeType","downloadFile","Blob","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","undefined","header","paddingBottom","paddingTop","warning","buttons","flexDirection","gap","cancelButton","confirmButton","cancelButtonText","confirmButtonText","LinkConfirmModal","fadeAnim","useRef","current","scaleAnim","translateYAnim","setValue","parallel","statusBarTranslucent","opacity","absoluteFill","scale","numberOfLines","Linking","openURL","link","LinkText","selectedUrl","setSelectedUrl","urlRegex","part","index","renderTextWithLinks","SCREEN_WIDTH","SCREEN_HEIGHT","MODAL_WIDTH","MODAL_PADDING","modalOverlay","modalContent","position","maxHeight","marginHorizontal","scrollView","closeButton","right","top","zIndex","closeButtonText","loader","errorText","profileContent","coverContainer","coverImage","defaultCover","avatarContainer","avatarWithCover","avatar","nameRow","description","stats","borderTopWidth","borderBottomWidth","statItem","statNumber","statLabel","iconsContainer","flexWrap","icon","verifiedBadge","ProfileModal","profile","setProfile","setError","loadProfile","cover","TouchableWithoutFeedback","hitSlop","bottom","left","ScrollView","bounces","showsVerticalScrollIndicator","Image","source","resizeMode","icons","require","renderStats","label","posts","subscribers","subscriptions","stat","toLocaleString","filter","videoContainer","aspectRatio","loadingContainer","absoluteFillObject","controls","playButtonContainer","bottomControls","progressBar","progressBackground","progressFill","seekHandle","marginLeft","timeContainer","timeText","textShadowColor","textShadowOffset","textShadowRadius","CustomVideoPlayer","shouldPlay","setStatus","isPlaying","setIsPlaying","showControls","setShowControls","isSeeking","setIsSeeking","seekPosition","setSeekPosition","videoRef","controlsTimeoutRef","controlsOpacity","playButtonScale","isLoaded","handlePlayPause","resetControlsTimeout","showControlsHandler","pauseAsync","playAsync","sequence","formatTime","millis","isNaN","totalSeconds","seconds","handleVideoPress","Video","ref","ResizeMode","CONTAIN","onPlaybackStatusUpdate","newStatus","positionMillis","durationMillis","isLooping","isBuffering","MaterialIcons","locationX","nativeEvent","progress","max","setPositionAsync","then","console","borderBottomColor","userInfo","marginRight","userTextInfo","nameContainer","date","mediaContainer","marginVertical","mediaContent","fullScreenMedia","downloadButton","downloadIcon","tintColor","footer","reactions","reactionButton","reactionButtonActive","dislikeButtonActive","reactionIcon","reactionIconActive","dislikeIconActive","reactionCount","reactionCountActive","dislikeCountActive","reactionLoader","pointerEventsAuto","pointerEventsNone","myPostBadge","myPostText","videoOverlay","fileContainer","fileIcon","fileInfo","PostCard","onUpdate","loadingAction","setLoadingAction","localLikes","setLocalLikes","localDislikes","setLocalDislikes","localLiked","setLocalLiked","localDisliked","setLocalDisliked","avatarUrl","setAvatarUrl","modalVisible","setModalVisible","mediaViewerProps","setMediaViewerProps","showProfile","setShowProfile","handleDownload","fileService","Alert","alert","openModal","props","closeModal","formatDate","useCallback","dateString","format","locale","ru","handleInteraction","prev","handleReactionPress","handleProfilePress","renderMediaContent","screenWidth","File","file_name","file_id","file_size","Icon","imageHeight","imageUrl","simple_image","orig_name","onDownload","videoHeight","videoUrl","useNativeControls","formContainer","minHeight","filesContainer","borderTopColor","filePreview","margin","imagePreview","removeButton","removeButtonText","addButton","addButtonIcon","submitButton","submitButtonDisabled","submitButtonText","successMessage","successText","CreatePost","onPostCreated","setText","setFiles","isLoading","setIsLoading","successOpacityAnim","placeholderTextColor","multiline","maxLength","_","ImagePicker","launchImageLibraryAsync","mediaTypes","All","allowsEditing","quality","canceled","assets","delay","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","errorContent","successContent","WebSocketStatus","errorMessage","setErrorMessage","slideAnim","opacityAnim","wasConnected","showNotification","interval","setInterval","checkConnection","hideNotification","clearInterval","getMessage","userContainer","onlineIndicator","emptyContainer","emptyText","OnlineUsers","onlineUsers","setOnlineUsers","selectedUser","setSelectedUser","isModalVisible","setIsModalVisible","useTheme","users","formattedUsers","user","id","horizontal","showsHorizontalScrollIndicator","handleUserPress","contentContainer","createPostContainer","feedTypeContainer","feedTypeButton","activeFeedType","feedTypeText","activeFeedTypeText","listContent","flexGrow","loadingOverlay","errorContainer","retryButton","retryButtonText","loginButton","loginButtonText","FeedScreen","feedType","setFeedType","setPosts","refreshing","setRefreshing","loadingMore","setLoadingMore","hasMorePosts","setHasMorePosts","retryTimeoutRef","pageRef","loadingOpacity","contentOpacity","React","fetchPosts","animateLoading","show","handleLogin","refresh","newPosts","updateSinglePost","updatedPost","prevPosts","handlePostCreated","newPost","handleRefresh","handleLoadMore","handleChangeFeedType","renderPost","item","renderHeader","renderError","renderEmpty","renderFooter","FlatList","renderItem","keyExtractor","onEndReached","onEndReachedThreshold","refreshControl","RefreshControl","onRefresh","ListEmptyComponent","ListFooterComponent","contentContainerStyle","ListHeaderComponent","centered","profileInfo","avatarWrapper","logoutButton","logoutButtonText","ProfileScreen","fetchProfile","accountDataStr","getAccountData","my_profile","Tab","createBottomTabNavigator","Stack","createNativeStackNavigator","createContext","isLoggedIn","MainTabs","Navigator","screenOptions","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarStyle","headerStyle","headerTitleStyle","Screen","component","options","tabBarIcon","Ionicons","headerTitle","navigation","headerRight","headerContainer","headerLogo","Navigation","checkLoginStatus","clear","Provider","NavigationContainer","headerTintColor","registerRootComponent","localStorage","renderNavigation","StatusBar","originalConsoleError","args","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}