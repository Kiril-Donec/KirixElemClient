(()=>{var e,t={2204:(e,t,n)=>{"use strict";var r=n(2299),a=(n(6664),n(6665)),o=n(5479),i=n(8272),s=n(1119),l=n(1385),c=n(3929),u=n(6773),d=n(5648),f=n(6283),h=n(3668),g=n(530),m=n(7109),y=n(1087);function p(e){if(e instanceof Uint8Array){const t=new Uint8Array(new ArrayBuffer(e.byteLength));return t.set(e),t.buffer}return e.slice(0)}async function x(e,t){try{const n=function(e){const t=e.replace(/-----BEGIN PUBLIC KEY-----/,"").replace(/-----END PUBLIC KEY-----/,"").replace(/\s/g,"");return Uint8Array.from(atob(t),(e=>e.charCodeAt(0))).buffer}(t),r=p("string"==typeof e?(new TextEncoder).encode(e):e instanceof Uint8Array?e:new Uint8Array(e)),a=await crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!0,["encrypt"]),o=await crypto.subtle.encrypt({name:"RSA-OAEP"},a,r);return new Uint8Array(o)}catch(e){throw new Error("Encryption failed: "+e.message)}}async function b(e,t){try{const n=p(e),r=await crypto.subtle.importKey("pkcs8",t,{name:"RSA-OAEP",hash:{name:"SHA-256"}},!0,["decrypt"]),a=await crypto.subtle.decrypt({name:"RSA-OAEP"},r,n);return new Uint8Array(a)}catch(e){throw new Error("Decryption failed: "+e.message)}}function A(e){const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer}async function C(e,t){const n=e.slice(0,16),r=e.slice(16),a=p(n),o=p(r),i=await crypto.subtle.importKey("raw",A(t),{name:"AES-CBC"},!1,["decrypt"]),s=await crypto.subtle.decrypt({name:"AES-CBC",iv:a},i,o);return new Uint8Array(s)}async function w(e){const t=await e.arrayBuffer();return new Uint8Array(t)}var v=n(787),j=n(1332);const S=new class{constructor(){this.url="wss://ws.elemsocial.com/user_api",this.socket=null,this.isConnected=!1,this.rsaPublic=null,this.rsaPrivate=null,this.rsaPublicServer=null,this.aesKey=null,this.aesServerKey=null,this.keysReady=!1,this.socketReady=!1,this.messageQueue=[],this.processingMessages=!1,this.messageHandlers=new Map,this.reconnectTimer=null,this.isConnecting=!1,this.shouldReconnect=!0,this.connect()}get connectionStatus(){return this.isConnected}get ready(){return this.socketReady&&this.keysReady}async generateKeys(){const e=await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]);return this.rsaPublic=await window.crypto.subtle.exportKey("spki",e.publicKey),this.rsaPrivate=await window.crypto.subtle.exportKey("pkcs8",e.privateKey),this.keysReady=!0,!0}processQueue(){if(this.socketReady&&!this.processingMessages){for(this.processingMessages=!0;this.messageQueue.length>0;){const e=this.messageQueue.shift();e&&this.send(e).catch((e=>{}))}this.processingMessages=!1}}generateRayID(){const e=Date.now(),t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let e=0;e<10;e++)n+=t.charAt(Math.floor(62*Math.random()));return`${e}${n}`}connect(){if(this.isConnecting)return;if(this.socket&&(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING))return;this.shouldReconnect=!0,this.isConnecting=!0;const e=new WebSocket(this.url);e.binaryType="blob",this.socket=e,e.onopen=async()=>{if(this.socket!==e)return;if(this.isConnecting=!1,await this.generateKeys(),!this.rsaPublic)return;const t=await async function(e,t){const n=String.fromCharCode(...Array.from(new Uint8Array(e))),r=btoa(n);let a=`-----BEGIN ${t}-----\n`;return a+=r.match(/.{1,64}/g)?.join("\n")||"",a+=`\n-----END ${t}-----\n`,a}(this.rsaPublic,"PUBLIC KEY");e.send(JSON.stringify({type:"key_exchange",key:t})),this.isConnected=!0,this.processQueue()},e.onmessage=async t=>{if(this.socket===e)try{const n=t.data;if(this.rsaPublicServer)if(this.aesServerKey&&this.aesKey){const e=await w(n),t=await C(e,this.aesKey),r=(0,v.decode)(t);if(r.type){const e=this.messageHandlers.get(r.type);e&&e(r)}}else{if(!this.rsaPrivate)return;const e=await w(n),t=await b(e,this.rsaPrivate),r=(0,v.decode)(t);"aes_key"===r.type&&(this.aesServerKey=r.key??null,this.socketReady=!0,this.processQueue())}else{const t=JSON.parse(n);if("key_exchange"===t.type&&(this.rsaPublicServer=t.key??null,this.aesKey=function(){const e=crypto.getRandomValues(new Uint8Array(32));return btoa(String.fromCharCode(...Array.from(e)))}(),this.rsaPublicServer&&this.aesKey)){const t=(0,j.encode)({type:"aes_key",key:this.aesKey}),n=await x(t,this.rsaPublicServer);e.send(n)}}}catch(e){}},e.onclose=()=>{this.socket===e&&(this.isConnecting=!1,this.resetConnectionState(),this.scheduleReconnect())},e.onerror=()=>{this.socket===e&&(this.isConnecting=!1,this.resetConnectionState(),this.scheduleReconnect())}}async send(e){if(!this.isConnected||!this.socket||this.socket.readyState!==WebSocket.OPEN||!this.socketReady)return void this.messageQueue.push(e);if(!this.aesServerKey||!this.aesKey)return;const t=this.generateRayID(),n=(0,j.encode)(Object.assign({ray_id:t},e)),r=await async function(e,t){const n=crypto.getRandomValues(new Uint8Array(16)),r=p("string"==typeof e?(new TextEncoder).encode(e):e instanceof Uint8Array?e:new Uint8Array(e));try{const e=await crypto.subtle.importKey("raw",A(t),{name:"AES-CBC"},!1,["encrypt"]),a=await crypto.subtle.encrypt({name:"AES-CBC",iv:n},e,r),o=new Uint8Array(n.byteLength+a.byteLength);return o.set(n),o.set(new Uint8Array(a),n.byteLength),o}catch(e){return null}}(n,this.aesServerKey);return r?(this.socket.send(r),new Promise(((e,n)=>{const r=setTimeout((()=>{this.socket?.removeEventListener("message",a),n(new Error("WebSocket response timeout"))}),15e3),a=async o=>{try{if(!this.aesKey)return;const n=await w(o.data),i=await C(n,this.aesKey),s=(0,v.decode)(i);s.ray_id===t&&(clearTimeout(r),this.socket?.removeEventListener("message",a),e(s))}catch(e){clearTimeout(r),this.socket?.removeEventListener("message",a),n(e)}};this.socket?.addEventListener("message",a)}))):void 0}disconnect(){this.shouldReconnect=!1,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.socket&&this.socket.readyState===WebSocket.OPEN&&this.socket.close(),this.resetConnectionState()}resetConnectionState(){this.socket=null,this.isConnected=!1,this.rsaPublic=null,this.rsaPrivate=null,this.rsaPublicServer=null,this.aesKey=null,this.aesServerKey=null,this.keysReady=!1,this.socketReady=!1}scheduleReconnect(){this.shouldReconnect&&!this.reconnectTimer&&(this.reconnectTimer=setTimeout((()=>{this.reconnectTimer=null,this.connect()}),3e3))}addMessageHandler(e,t){this.messageHandlers.set(e,t)}removeMessageHandler(e){this.messageHandlers.delete(e)}},I=m.default.create({baseURL:"https://api.elemsocial.com",headers:{"Content-Type":"multipart/form-data",api:"true"}}),k=m.default.create({baseURL:"https://elemsocial.com",headers:{"Content-Type":"multipart/form-data",api:"true"}}),T=m.default.create({baseURL:"https://elemsocial.com/System/API",headers:{"Content-Type":"application/json",api:"true"}}),B=async(e=3,t=!0)=>{let n=0;const r=async(e=15e3)=>{const t=Date.now();for(;!S.ready;){if(Date.now()-t>e)throw new Error("WebSocket handshake timeout");await new Promise((e=>setTimeout(e,250)))}};for(;n<e;)try{const e=await y.default.getItem("S-KEY");if(t&&!e)throw new Error("Нет доступного ключа S-KEY");if(await r(),!t)return;return void await new Promise(((t,n)=>{const r=e,a=setTimeout((()=>{S.removeMessageHandler("authorization"),n(new Error("Authorization timeout"))}),15e3);S.addMessageHandler("authorization",(async e=>{clearTimeout(a),S.removeMessageHandler("authorization"),"success"===e.status&&e.accountData?(await y.default.setItem("account_data",JSON.stringify(e.accountData)),t()):n(new Error(e.message||"Authorization failed"))})),S.send({type:"authorization",action:"connect",S_KEY:r}).catch((e=>{clearTimeout(a),S.removeMessageHandler("authorization"),n(e)}))}))}catch(t){if(n++,n>=e)throw t;await new Promise((e=>setTimeout(e,1e3*n)))}};I.interceptors.request.use((async e=>{const t=await y.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e})),I.interceptors.response.use((e=>e),(async e=>(401===e?.response?.status&&await y.default.removeItem("S-KEY"),Promise.reject(e)))),k.interceptors.request.use((async e=>{const t=await y.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e})),k.interceptors.response.use((e=>e),(async e=>(401===e?.response?.status&&await y.default.removeItem("S-KEY"),Promise.reject(e)))),T.interceptors.request.use((async e=>{const t=await y.default.getItem("S-KEY");return t&&(e.headers["S-KEY"]=t),e}));const E=async(e,t)=>{await B(3,!1);const n=await S.send(Object.assign({type:"social",action:e},t));return"success"===n.status&&n.S_KEY&&await y.default.setItem("S-KEY",n.S_KEY),{status:n.status||"error",S_KEY:n.S_KEY,accountID:n.accountData?String(n.accountData.id):void 0,text:n.message}},F=async(e,t,n=!0)=>{await B(3,n);const r=await S.send(Object.assign({type:"social",action:e},t));if(!r)throw new Error(`No response for action: ${e}`);if("error"===r.status)throw new Error(r.message||`Action failed: ${e}`);return r},D=e=>({ID:String(e?.ID??e?.id??""),AuthorID:String(e?.AuthorID??e?.author_id??e?.authorId??e?.author?.id??""),Username:String(e?.Username??e?.username??e?.author?.username??""),Name:String(e?.Name??e?.name??e?.author?.name??""),Avatar:e?.Avatar??e?.avatar??e?.author_data?.avatar??e?.author?.avatar??"None",UserIcons:e?.UserIcons??e?.user_icons??e?.icons??e?.author?.icons??null,Text:String(e?.Text??e?.text??""),Content:e?.Content??e?.content??null,Date:String(e?.Date??e?.date??e?.create_date??""),Likes:Number(e?.Likes??e?.likes??0),Dislikes:Number(e?.Dislikes??e?.dislikes??0),Liked:e?.Liked??e?.liked??null,Disliked:e?.Disliked??e?.disliked??null,Comments:Number(e?.Comments??e?.comments??0),MyPost:Boolean(e?.MyPost??e?.my_post??!1)}),P=e=>{const t=e.data??e;return Array.isArray(t)?t:Array.isArray(t?.posts)?t.posts:Array.isArray(t?.items)?t.items:Array.isArray(t?.list)?t.list:[]},M=e=>Object.assign({},e,{payload:Object.assign({},e)}),R=async(e,t)=>E("auth/login",{email:e,password:t,device_type:"browser",device:"Element Web 2.3"}),z=async(e,t,n,r,a)=>E("auth/reg",{name:e,username:t,email:n,password:r,accept:!0,h_captcha:a}),N={async getMyProfile(){try{const e=(await T.get("/Connect.php")).data;return{type:"user",id:parseInt(e.ID||"0"),name:e.Name||"",username:e.Username||"",cover:e.Cover||"None",avatar:e.Avatar||"None",description:e.Description||null,posts:parseInt(e.Posts||"0"),subscribers:parseInt(e.Subscribers||"0"),subscribed:"true"===e.Subscribed,create_date:e.CreateDate||"",icons:e.Icons?e.Icons.split(","):[],subscriptions:parseInt(e.Subscriptions||"0"),links_count:parseInt(e.LinksCount||"0"),links:e.Links||null,my_profile:!0,permissions:{posts:"true"===e.Posts_Permission,comments:"true"===e.Comments_Permission,new_chats:"true"===e.NewChats_Permission,music_upload:"true"===e.MusicUpload_Permission}}}catch(e){throw e}},async getProfile(e){try{const t=await F("get_profile",{username:e.replace(/^@+/,"").trim()},!1),n=t.data?.data??t.data??t;if(!n)throw new Error("Failed to fetch profile data");return(e=>{const t=e?.type,n=1===t||"1"===t||"channel"===t?"channel":"user",r=(Array.isArray(e?.icons)?e.icons:[]).map((e=>"string"==typeof e?e:e?.icon_id??e?.id??null)).filter((e=>Boolean(e))),a=e?.permissions??{};return{type:n,id:Number(e?.id??0),name:String(e?.name??""),username:String(e?.username??""),cover:e?.cover??"None",avatar:e?.avatar??"None",description:e?.description??null,posts:Number(e?.posts??0),subscribers:Number(e?.subscribers??0),subscribed:Boolean(e?.subscribed),create_date:String(e?.create_date??""),icons:r,subscriptions:Number(e?.subscriptions??0),links_count:Number(e?.links_count??(Array.isArray(e?.links)?e.links.length:0)),links:e?.links??null,my_profile:Boolean(e?.my_profile),permissions:{posts:Boolean(a?.posts),comments:Boolean(a?.comments),new_chats:Boolean(a?.new_chats),music_upload:Boolean(a?.music_upload)}}})(n)}catch(e){throw e}},updateProfile:async e=>{const t=new FormData;Object.entries(e).forEach((([e,n])=>{null!=n&&t.append(e,String(n))}));return(await k.post("/System/API/Connect.php",t)).data},uploadAvatar:async e=>{const t=new FormData;t.append("avatar",e);return(await k.post("/System/API/Connect.php",t)).data},uploadCover:async e=>{const t=new FormData;t.append("cover",e);return(await k.post("/System/API/Connect.php",t)).data}},V={loadPost:async e=>{const t=(e=>{const t=e.data??e;return t?.post?t.post:t?.ID||t?.id?t:null})(await F("load_post",{pid:Number(e)},!1));if(!t)throw new Error("Не удалось загрузить пост");return D(t)},createPost:async(e,t=[],n=!1,r=!1)=>{const a=new FormData;a.append("Text",e),t.forEach((e=>{a.append("Files[]",{uri:e.uri,type:e.type,name:e.name})})),n&&a.append("ClearMetadataIMG","true"),r&&a.append("CensoringIMG","true");const o=await k.post("/System/API/AddPost.php",a);if("Verify"===o.data.Type)return o.data.Content;throw new Error(o.data.Content||"Failed to create post")},getPost:async e=>V.loadPost(e),getPosts:async(e,t)=>{try{const n={LATEST:"last",REC:"rec",SUBSCRIPTIONS:"subscribe"},r=await F("load_posts",M({posts_type:n[e],start_index:t??0}));return P(r).map(D)}catch(e){return m.default.isAxiosError(e),[]}},getProfilePosts:async(e,t,n=0)=>{if(!await y.default.getItem("S-KEY"))throw new Error("Authorization required to load profile posts");const r=Number(e);if(!Number.isFinite(r)||r<=0)throw new Error("Invalid profile target_id");const a=await F("load_posts",M({posts_type:"profile",target_id:r,target_type:(o=t,1===o||"1"===o||"channel"===o?1:0),start_index:n}),!0);var o;return P(a).map(D)},getProfilePostsByUsername:async(e,t=0)=>{const n=e.replace(/^@+/,"").trim();if(!n)throw new Error("Username is required");const r=await N.getProfile(n);return r.posts?V.getProfilePosts(r.id,r.type,t):[]},getUserPosts:async(e,t)=>{try{const n=new FormData;n.append("UserID",e),void 0!==t&&n.append("StartIndex",t.toString());const r="/System/API/LoadPosts.php?F=USER",a=await k.post(r,n),o=Array.isArray(a.data)?a.data:[];return o.map((e=>({ID:String(e.ID||""),AuthorID:String(e.AuthorID||""),Username:String(e.Username||""),Name:String(e.Name||""),Avatar:e.Avatar||"None",UserIcons:e.UserIcons||null,Text:String(e.Text||""),Content:e.Content||null,Date:String(e.Date||""),Likes:Number(e.Likes)||0,Dislikes:Number(e.Dislikes)||0,Liked:e.Liked||null,Disliked:e.Disliked||null,Comments:Number(e.Comments)||0,MyPost:Boolean(e.MyPost)})))}catch(e){return[]}},interactWithPost:async(e,t)=>{const n=new FormData;n.append("PostID",t);return(await k.post(`/System/API/PostInteraction.php?F=${e}`,n)).data},addComment:async(e,t)=>{const n=new FormData;n.append("PostID",e),n.append("Text",t);return(await k.post("/System/API/PostInteraction.php?F=POST_COMMENT",n)).data},getComments:async e=>{const t=new FormData;t.append("PostID",e);return(await k.post("/System/API/PostInteraction.php?F=LOAD_COMMENT",t)).data}};var U=n(3947),L=n(5741),O=n(8264),W=n(8119),K=n(6725),H=n(397);const{height:Y}=K.default.get("window"),Q=h.default.create({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},container:Object.assign({width:"90%",maxWidth:400,backgroundColor:"#fff",borderRadius:12},{boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}),content:{padding:20},title:{fontSize:20,fontWeight:"bold",color:"#c62828",marginBottom:10,textAlign:"center"},text:{fontSize:16,color:"#333",marginBottom:20,textAlign:"center",lineHeight:22},button:{backgroundColor:"#007AFF",paddingVertical:12,paddingHorizontal:30,borderRadius:8,alignSelf:"center"},buttonText:{color:"#fff",fontSize:16,fontWeight:"600"}}),_=({message:e,onClose:t})=>{const n=new W.default.Value(Y);(0,a.useEffect)((()=>{e&&W.default.spring(n,{toValue:0,useNativeDriver:!0,tension:50,friction:7}).start()}),[e]);const r=()=>{W.default.timing(n,{toValue:Y,duration:300,useNativeDriver:!0}).start((()=>{t&&t()}))};return e?(0,H.jsx)(O.default,{transparent:!0,visible:!!e,animationType:"fade",onRequestClose:r,children:(0,H.jsx)(c.default,{style:Q.overlay,children:(0,H.jsx)(W.default.View,{style:[Q.container,{transform:[{translateY:n}]}],children:(0,H.jsxs)(c.default,{style:Q.content,children:[(0,H.jsx)(f.default,{style:Q.title,children:"Ошибка"}),(0,H.jsx)(f.default,{style:Q.text,children:e}),(0,H.jsx)(d.default,{style:Q.button,onPress:r,activeOpacity:.8,children:(0,H.jsx)(f.default,{style:Q.buttonText,children:"OK"})})]})})})}):null},J=h.default.create({container:{flex:1,justifyContent:"center",padding:20,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",marginBottom:30,textAlign:"center"},input:Object.assign({height:50,borderWidth:1,borderColor:"#ddd",borderRadius:8,paddingHorizontal:15,marginBottom:15,fontSize:16,backgroundColor:"#fff"},{outlineStyle:"none",":focus":{borderColor:"#007AFF"}}),buttonContainer:{pointerEvents:"auto",marginBottom:15},button:Object.assign({height:50,backgroundColor:"#007AFF",borderRadius:8,justifyContent:"center",alignItems:"center"},{cursor:"pointer",":hover":{backgroundColor:"#0056b3"}}),buttonDisabled:{backgroundColor:"#ccc"},buttonText:{color:"white",fontSize:16,fontWeight:"600"},switchText:{color:"#007AFF",textAlign:"center",marginTop:15,fontSize:16},stepText:{fontSize:18,marginBottom:15,textAlign:"center"}}),G=()=>{(0,U.useNavigation)();const{setIsLoggedIn:e}=(0,a.useContext)($e),[t,n]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)(""),[l,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[A,C]=(0,a.useState)(""),[w,v]=(0,a.useState)(""),[j,S]=(0,a.useState)(""),[I,k]=(0,a.useState)(""),[T,B]=(0,a.useState)("");return(0,H.jsxs)(c.default,{style:J.container,children:[(0,H.jsx)(f.default,{style:J.title,children:"Sigma Element Client"}),t?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(u.default,{style:J.input,placeholder:"Имя",value:x,onChangeText:b,editable:!r}),(0,H.jsx)(u.default,{style:J.input,placeholder:"Имя пользователя",value:A,onChangeText:C,editable:!r,autoCapitalize:"none"}),(0,H.jsx)(u.default,{style:J.input,placeholder:"Email",value:w,onChangeText:v,editable:!r,keyboardType:"email-address",autoCapitalize:"none"}),(0,H.jsx)(u.default,{style:J.input,placeholder:"Пароль",value:j,onChangeText:S,secureTextEntry:!0,editable:!r}),(0,H.jsx)(L.default,{sitekey:"29c6b1c2-7e78-43ec-8bf8-5de49c58c54a",onVerify:e=>{k(e)}}),(0,H.jsx)(_,{message:T,onClose:()=>B("")}),(0,H.jsx)(c.default,{style:J.buttonContainer,children:(0,H.jsx)(d.default,{style:[J.button,r&&J.buttonDisabled],onPress:async()=>{B("");if(x.trim())if(A.trim())if(w.trim())if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.trim()))if(j.trim())if(I)try{o(!0);const t=await z(x.trim(),A.trim(),w.trim(),j.trim(),I);"success"===t.status&&t.S_KEY?(await y.default.setItem("S-KEY",t.S_KEY),e(!0)):B(t.text||"Не удалось зарегистрироваться")}catch(e){B("Что-то пошло не так")}finally{o(!1)}else B("Пройдите капчу");else B("Введите пароль");else B("Введите корректный email адрес");else B("Введите email");else B("Введите имя пользователя");else B("Введите имя")},disabled:r,children:r?(0,H.jsx)(g.default,{color:"white"}):(0,H.jsx)(f.default,{style:J.buttonText,children:"Зарегистрироваться"})})}),(0,H.jsx)(d.default,{onPress:()=>{n(!1),B(""),p("")},children:(0,H.jsx)(f.default,{style:J.switchText,children:"Уже есть аккаунт? Войти"})})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(u.default,{style:J.input,placeholder:"Электронная почта",value:i,onChangeText:s,autoCapitalize:"none",keyboardType:"email-address",editable:!r}),(0,H.jsx)(u.default,{style:J.input,placeholder:"Пароль",value:l,onChangeText:h,secureTextEntry:!0,editable:!r}),(0,H.jsx)(_,{message:m,onClose:()=>p("")}),(0,H.jsx)(c.default,{style:J.buttonContainer,children:(0,H.jsx)(d.default,{style:[J.button,r&&J.buttonDisabled],onPress:async()=>{if(i)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))if(l)try{o(!0);const t=await R(i.trim(),l);"success"===t?.status&&t?.S_KEY?(await y.default.setItem("S-KEY",t.S_KEY),e(!0)):p(t?.text||"Неверный email или пароль")}catch(e){p("Что-то пошло не так")}finally{o(!1)}else p("Введите пароль");else p("Введите корректный email адрес");else p("Введите почту")},disabled:r,children:r?(0,H.jsx)(g.default,{color:"white"}):(0,H.jsx)(f.default,{style:J.buttonText,children:"Войти"})})}),(0,H.jsx)(d.default,{onPress:()=>{n(!0),B(""),p("")},children:(0,H.jsx)(f.default,{style:J.switchText,children:"Нет аккаунта? Зарегистрироваться"})})]})]})};var Z=n(932),q=n(2660),X=n(484),$=n(1690),ee=n(7827),te=n(5988),ne=n(4636),re=n(9167),ae=n(9771);const oe="messenger",ie="upload_file",se="download_file",le=e=>{if(0===e)return"0 Б";const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${["Б","КБ","МБ","ГБ","ТБ"][t]}`},ce=e=>{const t=(e=>e.slice(2+(e.lastIndexOf(".")-1>>>0)))(e).toLowerCase();return{txt:"text/plain",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",svg:"image/svg+xml",mp3:"audio/mpeg",mp4:"video/mp4",wav:"audio/wav",avi:"video/x-msvideo",zip:"application/zip",rar:"application/x-rar-compressed","7z":"application/x-7z-compressed"}[t]||"application/octet-stream"};class ue{ws=S;fileDownloadCallbacks=new Map;fileChunks=new Map;constructor(){this.setupMessageHandlers()}static getInstance(){return ue.instance||(ue.instance=new ue),ue.instance}setupMessageHandlers(){this.ws.addMessageHandler(oe,(e=>{if(e.action===se){const t=e;this.handleFileChunk(t)}}))}handleFileChunk(e){const{fileId:t,chunkNumber:n,totalChunks:r,chunkData:a}=e.data;this.fileChunks.has(t)||this.fileChunks.set(t,new Array(r).fill(""));const o=this.fileChunks.get(t);if(o[n-1]=a,!o.includes("")){const e=(e=>{const t=e.map((e=>atob(e))).join(""),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer})(o),n=this.fileDownloadCallbacks.get(t);n&&(n(e),this.fileDownloadCallbacks.delete(t)),this.fileChunks.delete(t)}}async uploadFile(e){const t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=await(async(e,t=1048576)=>{const n=[],r=Math.ceil(e.size/t);for(let a=0;a<r;a++){const r=a*t,o=Math.min(r+t,e.size),i=e.slice(r,o),s=await i.arrayBuffer(),l=btoa(String.fromCharCode(...new Uint8Array(s)));n.push(l)}return n})(e),r={type:oe,action:ie,data:{fileId:t,fileName:e.name,fileSize:e.size,mimeType:ce(e.name)}};await this.ws.send(r);for(let e=0;e<n.length;e++){const r={type:oe,action:se,data:{fileId:t,chunkNumber:e+1,totalChunks:n.length,chunkData:n[e]}};await this.ws.send(r)}return t}downloadFile(e,t){return new Promise(((n,r)=>{this.fileDownloadCallbacks.set(e,(e=>{try{((e,t,n)=>{const r=new Blob([e],{type:n}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)})(e,t,ce(t)),n()}catch(e){r(e)}}));const a={type:oe,action:se,data:{fileId:e,chunkNumber:0,totalChunks:0,chunkData:""}};this.ws.send(a)}))}}const de=ue;var fe=n(2772),he=n(1950),ge=n(9632);const me=h.default.create({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},content:Object.assign({backgroundColor:"#fff",borderRadius:20,width:Math.min(400,K.default.get("window").width-40),maxWidth:"90%"},void 0),header:{padding:20,paddingBottom:15},title:{fontSize:20,fontWeight:"600",color:"#000",textAlign:"center"},body:{padding:20,paddingTop:0},message:{fontSize:16,color:"#333",marginBottom:10},url:{fontSize:15,color:"#007AFF",marginBottom:12,paddingHorizontal:10,paddingVertical:8,backgroundColor:"#F0F0F0",borderRadius:8},warning:{fontSize:14,color:"#666"},buttons:{flexDirection:"row",padding:15,gap:10},button:{flex:1,paddingVertical:12,borderRadius:12,alignItems:"center"},cancelButton:{backgroundColor:"#F0F0F0"},confirmButton:{backgroundColor:"#007AFF"},cancelButtonText:{color:"#666",fontSize:16,fontWeight:"600"},confirmButtonText:{color:"#fff",fontSize:16,fontWeight:"600"}}),ye=({visible:e,url:t,onClose:n})=>{const r=(0,a.useRef)(new W.default.Value(0)).current,o=(0,a.useRef)(new W.default.Value(.9)).current,i=(0,a.useRef)(new W.default.Value(20)).current;(0,a.useEffect)((()=>{e&&(i.setValue(20),o.setValue(.9),r.setValue(0),W.default.parallel([W.default.timing(r,{toValue:1,duration:200,useNativeDriver:!0}),W.default.spring(o,{toValue:1,friction:8,tension:40,useNativeDriver:!0}),W.default.spring(i,{toValue:0,friction:8,tension:40,useNativeDriver:!0})]).start())}),[e]);const s=e=>{W.default.parallel([W.default.timing(r,{toValue:0,duration:150,useNativeDriver:!0}),W.default.spring(o,{toValue:.9,friction:8,tension:40,useNativeDriver:!0}),W.default.spring(i,{toValue:20,friction:8,tension:40,useNativeDriver:!0})]).start((()=>{e&&e()}))};return(0,H.jsx)(O.default,{visible:e,transparent:!0,statusBarTranslucent:!0,animationType:"none",onRequestClose:()=>s(n),children:(0,H.jsxs)(W.default.View,{style:[me.overlay,{opacity:r}],children:[(0,H.jsx)(d.default,{style:h.default.absoluteFill,onPress:()=>s(n),activeOpacity:1}),(0,H.jsxs)(W.default.View,{style:[me.content,{opacity:r,transform:[{scale:o},{translateY:i}]}],children:[(0,H.jsx)(c.default,{style:me.header,children:(0,H.jsx)(f.default,{style:me.title,children:"Переход по ссылке"})}),(0,H.jsxs)(c.default,{style:me.body,children:[(0,H.jsx)(f.default,{style:me.message,children:"Вы собираетесь перейти по внешней ссылке:"}),(0,H.jsx)(f.default,{style:me.url,numberOfLines:2,children:t}),(0,H.jsx)(f.default,{style:me.warning,children:"Убедитесь, что вы доверяете этому источнику."})]}),(0,H.jsxs)(c.default,{style:me.buttons,children:[(0,H.jsx)(d.default,{style:[me.button,me.cancelButton],onPress:()=>s(n),children:(0,H.jsx)(f.default,{style:me.cancelButtonText,children:"Отмена"})}),(0,H.jsx)(d.default,{style:[me.button,me.confirmButton],onPress:async()=>{try{await ge.default.openURL(t),s((()=>{n()}))}catch(e){n()}},children:(0,H.jsx)(f.default,{style:me.confirmButtonText,children:"Перейти"})})]})]})]})})},pe=h.default.create({link:{color:"#007AFF",fontWeight:"500"}}),xe=({text:e,style:t})=>{const[n,r]=(0,a.useState)(null);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(f.default,{style:[t],children:(e=>{const t=/(https?:\/\/[^\s]+)/g;return e.split(t).map(((e,n)=>e.match(t)?(0,H.jsx)(f.default,{style:pe.link,onPress:()=>r(e),children:e},n):(0,H.jsx)(f.default,{children:e},n)))})(e)}),(0,H.jsx)(ye,{visible:!!n,url:n||"",onClose:()=>r(null)})]})};function be(e){return e.replace(/^\/+|\/+$/g,"").toLowerCase()}function Ae(e,t){if(!e)return null;if("string"==typeof e){const n=e.trim();if(!n||"None"===n||"null"===n)return null;if(/^https?:\/\//i.test(n))return{path:"__absolute__",file:n};if(/^\/?files\//i.test(n)){return{path:"__absolute__",file:`https://elemsocial.com/${n.replace(/^\/+/,"")}`}}try{return Ae(JSON.parse(n),t)}catch{try{const e=decodeURIComponent(n);if(e!==n){return Ae(JSON.parse(e),t)}}catch{}return n.startsWith("{")||n.startsWith("[")||n.startsWith("%7B")||n.startsWith("%5B")?null:t?{path:be(t),file:n}:null}}if("object"!=typeof e)return null;const n=e,r=n.avatar&&"object"==typeof n.avatar?n.avatar:null,a=n.path??n.Path??r?.path??r?.Path??t,o=n.file??n.File??r?.file??r?.File,i=n.simple??n.Simple??n.simple_image,s="string"==typeof a&&a?be(a):"",l="string"==typeof o&&o?o:void 0,c="string"==typeof i&&i?i:void 0;return s||l||c?{path:s||be(t||""),file:l,simple:c}:null}function Ce(e){if(!e)return null;if("__absolute__"===e.path&&e.file)return e.file;if(e.simple)return`https://elemsocial.com/Content/Simple/${e.simple}`;if(e.path&&e.file){const t=be(e.path);return/^https?:\/\//i.test(e.file)?e.file:/^\/?files\//i.test(e.file)?`https://elemsocial.com/${e.file.replace(/^\/+/,"")}`:"avatars"===t||"avatar"===t?`https://elemsocial.com/Content/Avatars/${e.file}`:"covers"===t||"cover"===t?`https://elemsocial.com/Content/Covers/${e.file}`:`https://elemsocial.com/files/${t}/${e.file}`}return null}const we="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIHJ4PSIxMDAiIGZpbGw9IiNFMEUwRTAiLz48cGF0aCBkPSJNMTAwIDEwMEM4OS40NTcyIDEwMCA4MSA5MS41NDI4IDgxIDgxQzgxIDcwLjQ1NzIgODkuNDU3MiA2MiAxMDAgNjJDMTEwLjU0MyA2MiAxMTkgNzAuNDU3MiAxMTkgODFDMTE5IDkxLjU0MjggMTEwLjU0MyAxMDAgMTAwIDEwMFpNMTAwIDEwMEM3Mi4zODU4IDEwMCA1MCAxMjIuMzg2IDUwIDE1MEg1MEgxNTBIMTUwQzE1MCAxMjIuMzg2IDEyNy42MTQgMTAwIDEwMCAxMDBaIiBmaWxsPSIjOTA5MDkwIi8+PC9zdmc+",ve=new Map;function je(e){if(!e)return null;if(e instanceof Uint8Array)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(Array.isArray(e)&&e.every((e=>"number"==typeof e)))return new Uint8Array(e);if("object"==typeof e&&null!==e){const t=e.buffer;if(t instanceof ArrayBuffer)return new Uint8Array(t)}return null}function Se(e){const t=(0,a.useMemo)((()=>Ce(e)),[e]),[n,r]=(0,a.useState)(t);return(0,a.useEffect)((()=>{let n=!1;if(!e)return void r(null);if("__absolute__"===e.path)return void r(t);const a=`${e.path}:${e.file??""}:${e.simple??""}`,o=ve.get(a);if(o)r(o);else if(r(t),e.file||e.simple)return S.send({type:"download",action:"image",image:{path:e.path,file:e.file??"",simple:e.simple??""},lossless:!1}).then((e=>{if(n)return;const t=function(e){const t=je(e?.simple);if(t)return t;const n=je(e?.file);return n||null}(e);if(!t||0===t.byteLength)return;const o="string"==typeof e?.mime&&e.mime||"string"==typeof e?.contentType&&e.contentType||"string"==typeof e?.content_type&&e.content_type||"image/*",i=new Blob([t],{type:o}),s=URL.createObjectURL(i);ve.set(a,s),r(s)})).catch((()=>{n||r(t)})),()=>{n=!0}}),[t,e]),n}const{width:Ie,height:ke}=K.default.get("window"),Te=Math.min(600,Ie-40),Be=h.default.create({modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},modalContent:Object.assign({position:"relative",backgroundColor:"white",borderRadius:15,width:Te,maxHeight:ke-40,marginHorizontal:20,overflow:"hidden"},void 0),scrollView:{maxHeight:ke-40},closeButton:{position:"absolute",right:15,top:15,zIndex:2,width:30,height:30,borderRadius:15,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},closeButtonText:{fontSize:20,color:"#fff",fontWeight:"bold"},loader:{padding:20},errorText:{color:"red",textAlign:"center",padding:20},profileContent:{alignItems:"center"},coverContainer:{width:"100%",height:Math.min(200,.25*ke),backgroundColor:"#f0f0f0"},coverImage:{width:"100%",height:"100%"},defaultCover:{width:"100%",height:"100%",backgroundColor:"#f0f0f0"},avatarContainer:{width:Math.min(100,.2*Ie),height:Math.min(100,.2*Ie),marginTop:-Math.min(50,.1*Ie),marginBottom:10,borderRadius:Math.min(50,.1*Ie),borderWidth:4,borderColor:"#fff",overflow:"hidden",backgroundColor:"#f0f0f0"},avatarWithCover:{marginTop:-Math.min(50,.1*Ie)},avatar:{width:"100%",height:"100%"},nameRow:{flexDirection:"row",alignItems:"center",gap:4,marginBottom:4},name:{fontSize:20,fontWeight:"bold",color:"#000"},username:{fontSize:16,color:"#666",marginBottom:10},description:{fontSize:14,color:"#444",textAlign:"center",marginHorizontal:20,marginBottom:15},stats:{flexDirection:"row",justifyContent:"space-around",width:"100%",paddingVertical:15,borderTopWidth:1,borderBottomWidth:1,borderColor:"#eee"},statItem:{alignItems:"center",flex:1},statNumber:{fontSize:18,fontWeight:"bold"},statLabel:{fontSize:12,color:"#666",marginTop:4},iconsContainer:{flexDirection:"row",flexWrap:"wrap",justifyContent:"center",padding:10,gap:8},icon:{width:24,height:24},verifiedBadge:{width:20,height:20}}),Ee=({visible:e,username:t,onClose:r})=>{const[o,i]=(0,a.useState)(null),[s,l]=(0,a.useState)(!0),[u,m]=(0,a.useState)(""),y=(0,a.useRef)(new W.default.Value(0)).current,p=(0,a.useRef)(new W.default.Value(.9)).current,x=(0,a.useRef)(new W.default.Value(50)).current;(0,a.useEffect)((()=>{e?(l(!0),m(""),A(),W.default.parallel([W.default.timing(y,{toValue:1,duration:300,useNativeDriver:!0}),W.default.timing(p,{toValue:1,duration:300,useNativeDriver:!0}),W.default.timing(x,{toValue:0,duration:300,useNativeDriver:!0})]).start()):W.default.parallel([W.default.timing(y,{toValue:0,duration:250,useNativeDriver:!0}),W.default.timing(p,{toValue:.9,duration:250,useNativeDriver:!0}),W.default.timing(x,{toValue:50,duration:250,useNativeDriver:!0})]).start((()=>{i(null),m("")}))}),[e,t]);const b=()=>{W.default.parallel([W.default.timing(y,{toValue:0,duration:250,useNativeDriver:!0}),W.default.timing(p,{toValue:.9,duration:250,useNativeDriver:!0}),W.default.timing(x,{toValue:50,duration:250,useNativeDriver:!0})]).start((()=>{r()}))},A=async()=>{try{l(!0),m("");const e=t.replace(/^@+/,"").trim();if(!e)throw new Error("Не указан username");const n=await N.getProfile(e);i(n)}catch(e){m("Не удалось загрузить профиль")}finally{l(!1)}},C=o?Ae(o.cover,"covers"):null,w=o?Ae(o.avatar,"avatars"):null,v=Ce(C),j=Ce(w),S=Se(C),I=Se(w),k=S||v;return(0,H.jsx)(O.default,{visible:e,transparent:!0,onRequestClose:b,animationType:"none",statusBarTranslucent:!0,children:(0,H.jsxs)(W.default.View,{style:[Be.modalOverlay,{opacity:y}],children:[(0,H.jsx)(he.default,{onPress:b,children:(0,H.jsx)(c.default,{style:h.default.absoluteFill})}),(0,H.jsxs)(W.default.View,{style:[Be.modalContent,{opacity:y,transform:[{scale:p},{translateY:x}]}],children:[(0,H.jsx)(d.default,{style:Be.closeButton,onPress:b,hitSlop:{top:10,right:10,bottom:10,left:10},children:(0,H.jsx)(f.default,{style:Be.closeButtonText,children:"✕"})}),(0,H.jsx)(fe.default,{style:Be.scrollView,bounces:!1,showsVerticalScrollIndicator:!1,children:s?(0,H.jsx)(g.default,{size:"large",color:"#007AFF",style:Be.loader}):u?(0,H.jsx)(f.default,{style:Be.errorText,children:u}):o?(0,H.jsxs)(c.default,{style:Be.profileContent,children:[(0,H.jsx)(c.default,{style:Be.coverContainer,children:k?(0,H.jsx)(X.default,{source:{uri:k},style:Be.coverImage,resizeMode:"cover"}):(0,H.jsx)(c.default,{style:Be.defaultCover})}),(0,H.jsx)(c.default,{style:[Be.avatarContainer,Be.avatarWithCover],children:(0,H.jsx)(X.default,{source:{uri:I||j||we},style:Be.avatar})}),(0,H.jsxs)(c.default,{style:Be.nameRow,children:[(0,H.jsx)(f.default,{style:Be.name,children:o.name}),o.icons&&o.icons.includes("VERIFY")&&(0,H.jsx)(X.default,{source:n(3507),style:Be.verifiedBadge})]}),(0,H.jsxs)(f.default,{style:Be.username,children:["@",o.username]}),o.description&&(0,H.jsx)(xe,{text:o.description,style:Be.description}),(()=>{if(!o)return null;const e=[{label:"Посты",value:o.posts},{label:"Подписчики",value:o.subscribers},{label:"Подписки",value:o.subscriptions}];return(0,H.jsx)(c.default,{style:Be.stats,children:e.map((e=>(0,H.jsxs)(c.default,{style:Be.statItem,children:[(0,H.jsx)(f.default,{style:Be.statNumber,children:e.value?.toLocaleString()||"0"}),(0,H.jsx)(f.default,{style:Be.statLabel,children:e.label})]},e.label)))})})(),o.icons&&o.icons.length>0&&(0,H.jsx)(c.default,{style:Be.iconsContainer,children:o.icons.filter((e=>"VERIFY"!==e)).map(((e,t)=>(0,H.jsx)(X.default,{source:{uri:`https://elemsocial.com/Content/Icons/${e}`},style:Be.icon},t)))})]}):null})]})]})})};var Fe=n(9149);const{width:De}=K.default.get("window"),Pe=h.default.create({container:{backgroundColor:"#000",overflow:"hidden",borderRadius:12},videoContainer:{aspectRatio:16/9,backgroundColor:"#000",justifyContent:"center",alignItems:"center"},loadingContainer:Object.assign({},h.default.absoluteFillObject,{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)"}),controls:Object.assign({},h.default.absoluteFillObject,{padding:16,justifyContent:"space-between",backgroundColor:"rgba(0, 0, 0, 0.4)"}),playButtonContainer:{alignSelf:"center",width:80,height:80,borderRadius:40,backgroundColor:"rgba(0, 0, 0, 0.6)",justifyContent:"center",alignItems:"center"},bottomControls:{width:"100%"},progressBar:{height:4,width:"100%",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:2,overflow:"visible",position:"relative"},progressBackground:Object.assign({},h.default.absoluteFillObject,{backgroundColor:"rgba(255, 255, 255, 0.3)"}),progressFill:{height:"100%",backgroundColor:"#007AFF",borderRadius:2},seekHandle:Object.assign({position:"absolute",top:-6,marginLeft:-8,width:16,height:16,borderRadius:8,backgroundColor:"#fff"},void 0),timeContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:8},timeText:{color:"#fff",fontSize:12,fontWeight:"600",textShadowColor:"rgba(0, 0, 0, 0.5)",textShadowOffset:{width:1,height:1},textShadowRadius:2}}),Me=({uri:e,style:t,onPress:n,shouldPlay:r=!1})=>{const[o,i]=(0,a.useState)(null),[s,l]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!0),[y,p]=(0,a.useState)(!1),[x,b]=(0,a.useState)(0),A=(0,a.useRef)(null),C=(0,a.useRef)(),w=(0,a.useRef)(new W.default.Value(1)).current,v=(0,a.useRef)(new W.default.Value(1)).current;(0,a.useEffect)((()=>()=>{C.current&&clearTimeout(C.current)}),[]),(0,a.useEffect)((()=>{r&&!s&&o?.isLoaded&&I()}),[r,o]);const j=()=>{C.current&&clearTimeout(C.current),s&&(C.current=setTimeout((()=>{W.default.timing(w,{toValue:0,duration:300,useNativeDriver:!0}).start((()=>m(!1)))}),3e3))},S=()=>{m(!0),W.default.timing(w,{toValue:1,duration:200,useNativeDriver:!0}).start(),j()},I=async()=>{if(A.current&&o?.isLoaded)try{s?(await A.current.pauseAsync(),S()):(await A.current.playAsync(),j()),l(!s),W.default.sequence([W.default.timing(v,{toValue:.8,duration:100,useNativeDriver:!0}),W.default.spring(v,{toValue:1,friction:3,tension:40,useNativeDriver:!0})]).start()}catch(e){}},k=e=>{if(!e||isNaN(e))return"0:00";const t=Math.floor(e/1e3),n=t%60;return`${Math.floor(t/60)}:${n<10?"0":""}${n}`};return(0,H.jsx)(c.default,{style:[Pe.container,t],children:(0,H.jsx)(he.default,{onPress:()=>{u?n&&n():S()},children:(0,H.jsxs)(c.default,{style:Pe.videoContainer,children:[(0,H.jsx)(re.default,{ref:A,source:{uri:e},style:h.default.absoluteFill,resizeMode:ae.ResizeMode.CONTAIN,onPlaybackStatusUpdate:e=>{e.isLoaded&&(i(e),y||b(e.positionMillis/(e.durationMillis||1)))},shouldPlay:r,isLooping:!0}),(!o?.isLoaded||o?.isBuffering)&&(0,H.jsx)(c.default,{style:Pe.loadingContainer,children:(0,H.jsx)(g.default,{size:"large",color:"#fff"})}),u&&(0,H.jsxs)(W.default.View,{style:[Pe.controls,{opacity:w}],children:[(0,H.jsx)(d.default,{style:Pe.playButtonContainer,onPress:I,children:(0,H.jsx)(W.default.View,{style:{transform:[{scale:v}]},children:(0,H.jsx)(Fe.default,{name:s?"pause":"play-arrow",size:50,color:"#fff"})})}),(0,H.jsxs)(c.default,{style:Pe.bottomControls,children:[(0,H.jsx)(he.default,{onPress:e=>{if(!o?.isLoaded)return;const{locationX:t}=e.nativeEvent,n=Math.max(0,Math.min(1,t/(De-32)));p(!0),b(n),A.current&&A.current.setPositionAsync(n*(o.durationMillis||0)).then((()=>p(!1))).catch(console.error)},children:(0,H.jsxs)(c.default,{style:Pe.progressBar,children:[(0,H.jsx)(c.default,{style:Pe.progressBackground}),(0,H.jsx)(c.default,{style:[Pe.progressFill,{width:100*x+"%"}]}),(0,H.jsx)(c.default,{style:[Pe.seekHandle,{left:100*x+"%"}]})]})}),(0,H.jsxs)(c.default,{style:Pe.timeContainer,children:[(0,H.jsx)(f.default,{style:Pe.timeText,children:o?.isLoaded?k(o.positionMillis):"0:00"}),(0,H.jsx)(f.default,{style:Pe.timeText,children:o?.isLoaded?k(o.durationMillis||0):"0:00"})]})]})]})]})})})},Re=h.default.create({container:{backgroundColor:"#fff",padding:15,borderBottomWidth:1,borderBottomColor:"#eee"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},userInfo:{flexDirection:"row",alignItems:"center",flex:1},avatarContainer:{width:40,height:40,marginRight:10,borderRadius:20,overflow:"hidden",backgroundColor:"#f0f0f0"},avatar:{width:"100%",height:"100%",borderRadius:20},userTextInfo:{flex:1},nameContainer:{flexDirection:"row",alignItems:"center",gap:2},name:{fontSize:16,fontWeight:"600",color:"#000"},verifiedBadge:{width:16,height:16},username:{fontSize:14,color:"#666"},date:{fontSize:12,color:"#666"},text:{fontSize:16,color:"#000",marginBottom:10,lineHeight:22},mediaContainer:{width:"100%",backgroundColor:"#000",borderRadius:10,overflow:"hidden",marginVertical:5},mediaContent:{width:"100%",height:"100%"},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.9)",justifyContent:"center",alignItems:"center"},modalContent:{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},fullScreenMedia:{width:"100%",height:"100%"},closeButton:{position:"absolute",top:40,right:20,zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",width:40,height:40,borderRadius:20,justifyContent:"center",alignItems:"center"},closeButtonText:{color:"#fff",fontSize:24,fontWeight:"bold"},downloadButton:{position:"absolute",right:20,bottom:40,backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:25,padding:12,zIndex:1},downloadIcon:{width:24,height:24,tintColor:"#fff"},footer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},reactions:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:20},reactionButton:{flexDirection:"row",alignItems:"center",padding:8,borderRadius:20,backgroundColor:"#f8f8f8"},reactionButtonActive:{backgroundColor:"#E3F2FD"},dislikeButtonActive:{backgroundColor:"#FFE5E5"},reactionIcon:{width:24,height:24},reactionIconActive:{tintColor:"#007AFF"},dislikeIconActive:{tintColor:"#FF3B30"},reactionCount:{fontSize:15,fontWeight:"600",color:"#666",marginLeft:6},reactionCountActive:{color:"#007AFF"},dislikeCountActive:{color:"#FF3B30"},reactionLoader:{marginLeft:4},pointerEventsAuto:{pointerEvents:"auto"},pointerEventsNone:{pointerEvents:"none"},myPostBadge:{backgroundColor:"#E3F2FD",paddingHorizontal:8,paddingVertical:4,borderRadius:12},myPostText:{fontSize:12,color:"#007AFF",fontWeight:"500"},videoOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"flex-end",alignItems:"flex-end",padding:10,backgroundColor:"rgba(0, 0, 0, 0.4)"},fileContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"#f5f5f5",padding:12,borderRadius:8,marginTop:8},fileIcon:{width:40,height:40,marginRight:12},fileInfo:{flex:1},fileName:{fontSize:16,fontWeight:"500",color:"#333",marginBottom:4},fileSize:{fontSize:14,color:"#666"}}),ze=({post:e,onUpdate:t})=>{const[r,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(e.Likes),[l,u]=(0,a.useState)(e.Dislikes),[h,m]=(0,a.useState)(e.Liked),[y,p]=(0,a.useState)(e.Disliked),[x]=(0,a.useState)(new W.default.Value(1)),[b,A]=(0,a.useState)(!1),C=(0,a.useRef)(new W.default.Value(0)).current,[w,v]=(0,a.useState)(null),j=(0,a.useRef)(null),[S,I]=(0,a.useState)(!1),k=async(e,t,n)=>{try{if(n){const e=de.getInstance();await e.downloadFile(n,t)}else{const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}catch(e){$.default.alert("Ошибка","Не удалось скачать файл")}},T=e=>{v(e),A(!0),W.default.timing(C,{toValue:1,duration:300,useNativeDriver:!0}).start()},B=()=>{W.default.timing(C,{toValue:0,duration:300,useNativeDriver:!0}).start((()=>{A(!1),v(null)}))},E=(0,a.useCallback)((e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":(0,ee.format)(t,"dd MMMM, HH:mm",{locale:te.ru})}),[]),F=(0,a.useMemo)((()=>Ae(e.Avatar,"avatars")),[e.Avatar]),D=(0,a.useMemo)((()=>Ce(F)),[F]),P=Se(F),M=async n=>{if(!r)try{o(n),"LIKE"===n?h?(s((e=>e-1)),m(null)):(s((e=>e+1)),m("Liked"),y&&(u((e=>e-1)),p(null))):y?(u((e=>e-1)),p(null)):(u((e=>e+1)),p("Liked"),h&&(s((e=>e-1)),m(null))),await V.interactWithPost(n,e.ID),t()}catch(t){s(e.Likes),u(e.Dislikes),m(e.Liked),p(e.Disliked),$.default.alert("Ошибка","Не удалось выполнить действие")}finally{o(null)}},R=(0,a.useCallback)((e=>{W.default.sequence([W.default.timing(x,{toValue:.95,duration:100,useNativeDriver:!1}),W.default.spring(x,{toValue:1,friction:4,useNativeDriver:!1})]).start(),M("like"===e?"LIKE":"DISLIKE")}),[x,M]);return(0,H.jsxs)(c.default,{style:Re.container,children:[(0,H.jsxs)(c.default,{style:Re.header,children:[(0,H.jsxs)(d.default,{style:Re.userInfo,onPress:()=>{I(!0)},children:[(0,H.jsx)(c.default,{style:Re.avatarContainer,children:(0,H.jsx)(X.default,{source:{uri:P||D||we},style:Re.avatar})}),(0,H.jsxs)(c.default,{style:Re.userTextInfo,children:[(0,H.jsxs)(c.default,{style:Re.nameContainer,children:[(0,H.jsx)(f.default,{style:Re.name,children:e.Name}),e.UserIcons&&e.UserIcons.includes("VERIFY")&&(0,H.jsx)(X.default,{source:n(3507),style:Re.verifiedBadge})]}),(0,H.jsxs)(f.default,{style:Re.username,children:["@",e.Username]})]})]}),(0,H.jsx)(f.default,{style:Re.date,children:E(e.Date)})]}),(0,H.jsx)(xe,{text:e.Text,style:Re.text}),(()=>{if(!e.Content)return null;try{const r=JSON.parse(e.Content),a=K.default.get("window").width-30;if(r.File)return(t=r.File)?(0,H.jsxs)(d.default,{onPress:()=>k("",t.file_name,t.file_id),style:Re.fileContainer,children:[(0,H.jsx)(X.default,{source:n(7030),style:Re.fileIcon}),(0,H.jsxs)(c.default,{style:Re.fileInfo,children:[(0,H.jsx)(f.default,{style:Re.fileName,children:t.file_name}),(0,H.jsx)(f.default,{style:Re.fileSize,children:le(t.file_size)})]}),(0,H.jsx)(ne.default,{name:"download",size:24,color:"#666"})]}):null;if(r.Image){const e=a/(r.Image.width/r.Image.height),t=.8*a,n=r.Image.simple_image?`https://elemsocial.com/Content/Simple/${r.Image.simple_image}`:`https://elemsocial.com/Content/Posts/Images/${r.Image.file_name}`,o=r.Image.orig_name||r.Image.file_name;return(0,H.jsx)(d.default,{onPress:()=>T({url:n,type:"image",filename:o,onClose:B,onDownload:k}),style:[Re.mediaContainer,{height:Math.min(e,t)}],children:(0,H.jsx)(X.default,{source:{uri:n},style:Re.mediaContent,resizeMode:"contain"})})}if(r.Video){const e=a/(r.Video.width/r.Video.height),t=.8*a,n=`https://elemsocial.com/Content/Posts/Video/${r.Video.file_name}`,o=r.Video.orig_name??r.Video.file_name;return(0,H.jsx)(c.default,{style:[Re.mediaContainer,{height:Math.min(e,t)}],children:(0,H.jsx)(Me,{uri:n,style:Re.mediaContent,onPress:()=>{T({url:n,type:"video",filename:o,onClose:B,onDownload:k})}})})}}catch(e){return null}var t;return null})(),w?(0,H.jsx)(O.default,{transparent:!0,visible:b,onRequestClose:B,children:(0,H.jsxs)(W.default.View,{style:[Re.modalOverlay,{opacity:C}],children:[(0,H.jsx)(d.default,{style:Re.modalContent,activeOpacity:1,onPress:B,children:"image"===w.type?(0,H.jsx)(X.default,{source:{uri:w.url},style:Re.fullScreenMedia,resizeMode:"contain"}):(0,H.jsx)(re.default,{ref:j,source:{uri:w.url},style:Re.fullScreenMedia,resizeMode:ae.ResizeMode.CONTAIN,useNativeControls:!0,shouldPlay:!0,isLooping:!0})}),(0,H.jsx)(d.default,{style:Re.closeButton,onPress:B,children:(0,H.jsx)(f.default,{style:Re.closeButtonText,children:"✕"})}),(0,H.jsx)(d.default,{style:Re.downloadButton,onPress:()=>w.onDownload(w.url,w.filename,w.fileId),children:(0,H.jsx)(X.default,{source:n(852),style:Re.downloadIcon})})]})}):null,(0,H.jsxs)(c.default,{style:Re.footer,children:[(0,H.jsxs)(W.default.View,{style:[Re.reactions,{transform:[{scale:x}]},r?Re.pointerEventsNone:Re.pointerEventsAuto],children:[(0,H.jsxs)(d.default,{style:[Re.reactionButton,h&&Re.reactionButtonActive],onPress:()=>R("like"),children:[(0,H.jsx)(X.default,{source:n(5613),style:Re.reactionIcon,tintColor:h?"#007AFF":"#666",resizeMode:"contain"}),(0,H.jsx)(f.default,{style:[Re.reactionCount,h&&Re.reactionCountActive],children:i}),"LIKE"===r&&(0,H.jsx)(W.default.View,{style:Re.reactionLoader,children:(0,H.jsx)(g.default,{size:"small",color:h?"#007AFF":"#666"})})]}),(0,H.jsxs)(d.default,{style:[Re.reactionButton,y&&Re.dislikeButtonActive],onPress:()=>R("dislike"),children:[(0,H.jsx)(X.default,{source:n(9955),style:Re.reactionIcon,tintColor:y?"#FF3B30":"#666",resizeMode:"contain"}),(0,H.jsx)(f.default,{style:[Re.reactionCount,y&&Re.dislikeCountActive],children:l}),"DISLIKE"===r&&(0,H.jsx)(W.default.View,{style:Re.reactionLoader,children:(0,H.jsx)(g.default,{size:"small",color:y?"#FF3B30":"#666"})})]}),(0,H.jsxs)(d.default,{style:Re.reactionButton,children:[(0,H.jsx)(X.default,{source:n(7909),style:Re.reactionIcon,tintColor:"#666",resizeMode:"contain"}),(0,H.jsx)(f.default,{style:Re.reactionCount,children:e.Comments})]})]}),e.MyPost&&(0,H.jsx)(c.default,{style:Re.myPostBadge,children:(0,H.jsx)(f.default,{style:Re.myPostText,children:"Мой пост"})})]}),(0,H.jsx)(Ee,{visible:S,username:e.Username,onClose:()=>I(!1)})]})};var Ne=n(1733),Ve=n(9050);const Ue=h.default.create({container:Object.assign({backgroundColor:"#fff",borderRadius:12,overflow:"hidden"},void 0),formContainer:{width:"100%",backgroundColor:"#fff"},input:{minHeight:80,padding:15,fontSize:16,color:"#000",textAlignVertical:"top"},filesContainer:{flexDirection:"row",flexWrap:"wrap",padding:10,borderTopWidth:1,borderTopColor:"#eee"},filePreview:{width:100,height:100,margin:5,borderRadius:8,overflow:"hidden",position:"relative"},imagePreview:{width:"100%",height:"100%"},removeButton:{position:"absolute",top:5,right:5,width:24,height:24,borderRadius:12,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center"},removeButtonText:{color:"#fff",fontSize:18,fontWeight:"bold"},footer:{flexDirection:"row",alignItems:"center",padding:10,borderTopWidth:1,borderTopColor:"#eee"},addButton:{width:40,height:40,justifyContent:"center",alignItems:"center",marginRight:10},addButtonIcon:{width:24,height:24,tintColor:"#666"},submitButton:{flex:1,height:40,backgroundColor:"#007AFF",borderRadius:20,justifyContent:"center",alignItems:"center"},submitButtonDisabled:{backgroundColor:"#ccc"},submitButtonText:{color:"#fff",fontSize:16,fontWeight:"600"},errorText:{color:"#DC3545",fontSize:14,marginHorizontal:15,marginBottom:10},successMessage:{position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.9)"},successText:{color:"#28A745",fontSize:18,fontWeight:"600"}}),Le=({onPostCreated:e})=>{const[t,r]=(0,a.useState)(""),[o,i]=(0,a.useState)([]),[s,l]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null),y=(0,a.useRef)(new W.default.Value(1)).current,p=(0,a.useRef)(new W.default.Value(0)).current;return(0,H.jsxs)(c.default,{style:Ue.container,children:[(0,H.jsxs)(W.default.View,{style:[Ue.formContainer,{transform:[{scale:y}]}],children:[(0,H.jsx)(u.default,{style:Ue.input,placeholder:"Что у вас нового?",placeholderTextColor:"#666",value:t,onChangeText:r,multiline:!0,maxLength:5e3,editable:!s}),o.length>0&&(0,H.jsx)(c.default,{style:Ue.filesContainer,children:o.map(((e,t)=>(0,H.jsxs)(c.default,{style:Ue.filePreview,children:[(0,H.jsx)(X.default,{source:{uri:e.uri},style:Ue.imagePreview}),(0,H.jsx)(d.default,{style:Ue.removeButton,onPress:()=>i(o.filter(((e,n)=>n!==t))),children:(0,H.jsx)(f.default,{style:Ue.removeButtonText,children:"×"})})]},t)))}),h&&(0,H.jsx)(f.default,{style:Ue.errorText,children:h}),(0,H.jsxs)(c.default,{style:Ue.footer,children:[(0,H.jsx)(d.default,{style:Ue.addButton,onPress:async()=>{try{const e=await Ne.launchImageLibraryAsync({mediaTypes:Ve.MediaTypeOptions.All,allowsEditing:!0,quality:1});if(!e.canceled){const t={uri:e.assets[0].uri,type:"image/jpeg",name:"photo.jpg"};i([...o,t])}}catch(e){m("Не удалось загрузить изображение")}},disabled:s,children:(0,H.jsx)(X.default,{source:n(4601),style:Ue.addButtonIcon})}),(0,H.jsx)(d.default,{style:[Ue.submitButton,!t.trim()&&0===o.length&&Ue.submitButtonDisabled],onPress:async()=>{if(t.trim()||0!==o.length){l(!0),m(null);try{const n=await V.createPost(t,o);r(""),i([]),W.default.sequence([W.default.timing(y,{toValue:.95,duration:200,useNativeDriver:!0}),W.default.timing(p,{toValue:1,duration:200,useNativeDriver:!0}),W.default.delay(1e3),W.default.timing(p,{toValue:0,duration:200,useNativeDriver:!0}),W.default.timing(y,{toValue:1,duration:200,useNativeDriver:!0})]).start(),e(n)}catch(e){m(e instanceof Error?e.message:"Не удалось создать пост")}finally{l(!1)}}else m("Добавьте текст или файлы")},disabled:s||!t.trim()&&0===o.length,children:s?(0,H.jsx)(g.default,{color:"#fff"}):(0,H.jsx)(f.default,{style:Ue.submitButtonText,children:"Опубликовать"})})]})]}),(0,H.jsx)(W.default.View,{style:[Ue.successMessage,{opacity:p}],pointerEvents:"none",children:(0,H.jsx)(f.default,{style:Ue.successText,children:"Пост опубликован!"})})]})},Oe=h.default.create({container:{position:"absolute",top:10,left:10,right:10,zIndex:1e3,borderRadius:8,overflow:"hidden"},content:{backgroundColor:"#333",padding:14,alignItems:"center",opacity:.9,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},errorContent:{backgroundColor:"#DC3545"},successContent:{backgroundColor:"#28A745"},text:{color:"#fff",fontSize:15,fontWeight:"500"}}),We=()=>{const[e,t]=(0,a.useState)("connecting"),[n,r]=(0,a.useState)(null),o=(0,a.useRef)(new W.default.Value(-100)).current,i=(0,a.useRef)(new W.default.Value(0)).current,s=(0,a.useRef)(!1);(0,a.useEffect)((()=>{const n=()=>{W.default.parallel([W.default.timing(o,{toValue:0,duration:300,useNativeDriver:!0}),W.default.timing(i,{toValue:1,duration:300,useNativeDriver:!0})]).start()},a=setInterval((()=>{S.connectionStatus&&S.ready?s.current||(t("connected"),s.current=!0,setTimeout(l,2e3)):s.current&&(t("error"),r("Соединение потеряно"),s.current=!1,n())}),1e3),c=setTimeout((()=>{"connecting"!==e||s.current||(t("error"),r("Не удалось установить соединение"),n())}),15e3);return"connecting"!==e||s.current||n(),()=>{clearInterval(a),clearTimeout(c)}}),[e]);const l=()=>{W.default.parallel([W.default.timing(o,{toValue:-100,duration:300,useNativeDriver:!0}),W.default.timing(i,{toValue:0,duration:300,useNativeDriver:!0})]).start()};return"connected"!==e||i?(0,H.jsx)(W.default.View,{style:[Oe.container,{transform:[{translateY:o}],opacity:i}],children:(0,H.jsx)(c.default,{style:[Oe.content,"error"===e&&Oe.errorContent,"connected"===e&&Oe.successContent],children:(0,H.jsx)(f.default,{style:Oe.text,children:(()=>{switch(e){case"connecting":return"Устанавливается соединение...";case"connected":return"Соединение установлено";case"error":return n||"Ошибка соединения"}})()})})}):null},Ke=[{bg:"#FFE5E5",text:"#FF4D4D"},{bg:"#E5F1FF",text:"#3399FF"},{bg:"#E5FFE5",text:"#33CC33"},{bg:"#FFE5FF",text:"#FF33FF"},{bg:"#FFF0E5",text:"#FF8533"},{bg:"#E5F9FF",text:"#33CCFF"},{bg:"#F2E5FF",text:"#9933FF"},{bg:"#FFFFE5",text:"#CCCC33"}],He=({name:e,size:t=120,style:n})=>{const r=(e?.charAt(0)||"?").toUpperCase(),a=Math.abs(e.split("").reduce(((e,t)=>e+t.charCodeAt(0)),0))%Ke.length,o=Ke[a],i=h.default.create({container:{width:t,height:t,borderRadius:t/2,backgroundColor:o.bg,justifyContent:"center",alignItems:"center",overflow:"hidden"},letter:{color:o.text,fontSize:.4*t,fontWeight:"600",textAlign:"center",textAlignVertical:"center"}});return(0,H.jsx)(c.default,{style:[i.container,n],children:(0,H.jsx)(f.default,{style:i.letter,children:r})})},Ye=h.default.create({container:{marginVertical:10,borderBottomWidth:1,borderBottomColor:"#eee",paddingBottom:15},title:{fontSize:16,fontWeight:"600",marginLeft:15,marginBottom:10},scrollView:{paddingHorizontal:10},userContainer:{alignItems:"center",marginHorizontal:5,width:70},avatarContainer:{position:"relative",width:60,height:60},avatar:{width:60,height:60,borderRadius:30,backgroundColor:"#f0f0f0"},onlineIndicator:{position:"absolute",bottom:0,right:0,width:14,height:14,borderRadius:7,backgroundColor:"#4CAF50",borderWidth:2,borderColor:"#FFFFFF"},username:{fontSize:12,marginTop:5,textAlign:"center"},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",paddingHorizontal:20},emptyText:{fontSize:14,color:"#666"}}),Qe=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(null),[o,i]=(0,a.useState)(!1),{colors:s}=(0,U.useTheme)();(0,a.useEffect)((()=>(S.addMessageHandler("social",(e=>{if("social"===e.type&&"get_online_users"===e.action&&Array.isArray(e.users)){const n=e.users.map((e=>({ID:e.id.toString(),AuthorID:e.id.toString(),Username:e.username,Name:e.name,Avatar:e.avatar})));t(n)}})),S.send({type:"social",action:"get_online_users"}),()=>{S.removeMessageHandler("social")})),[]);return(0,H.jsxs)(c.default,{style:Ye.container,children:[(0,H.jsx)(f.default,{style:[Ye.title,{color:s.text}],children:"Сейчас в сети"}),(0,H.jsx)(fe.default,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Ye.scrollView,children:e.length>0?e.map((e=>(0,H.jsxs)(d.default,{style:Ye.userContainer,onPress:()=>(e=>{r(e),i(!0)})(e),children:[(0,H.jsxs)(c.default,{style:Ye.avatarContainer,children:[e.Avatar&&"None"!==e.Avatar?(0,H.jsx)(X.default,{source:{uri:`https://elemsocial.com/Content/Avatars/${e.Avatar}`},style:Ye.avatar}):(0,H.jsx)(He,{name:e.Name||e.Username,size:60}),(0,H.jsx)(c.default,{style:Ye.onlineIndicator})]}),(0,H.jsx)(f.default,{style:[Ye.username,{color:s.text}],numberOfLines:1,children:e.Name||e.Username})]},e.ID))):(0,H.jsx)(c.default,{style:Ye.emptyContainer,children:(0,H.jsx)(f.default,{style:[Ye.emptyText,{color:s.text}],children:"Загрузка..."})})}),n&&(0,H.jsx)(Ee,{visible:o,onClose:()=>i(!1),username:n.Username})]})},_e=h.default.create({container:{flex:1,backgroundColor:"#fff"},contentContainer:{flex:1,position:"relative"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},header:Object.assign({backgroundColor:"#fff",borderBottomWidth:1,borderBottomColor:"#eee"},void 0),createPostContainer:{padding:15,borderBottomWidth:1,borderBottomColor:"#eee"},feedTypeContainer:{flexDirection:"row",paddingHorizontal:15,paddingVertical:10,backgroundColor:"#fff",zIndex:1},feedTypeButton:{flex:1,paddingVertical:8,alignItems:"center",borderRadius:20,marginHorizontal:4},activeFeedType:{backgroundColor:"#E3F2FD"},feedTypeText:{fontSize:14,fontWeight:"500",color:"#666"},activeFeedTypeText:{color:"#007AFF"},content:{flex:1},listContent:{flexGrow:1},loadingOverlay:Object.assign({},h.default.absoluteFillObject,{backgroundColor:"rgba(255, 255, 255, 0.8)",justifyContent:"center",alignItems:"center"}),pointerEventsAuto:{pointerEvents:"auto"},pointerEventsNone:{pointerEvents:"none"},footer:{padding:20,alignItems:"center"},errorContainer:{position:"absolute",left:0,right:0,bottom:0,padding:20,backgroundColor:"#fff",borderTopWidth:1,borderTopColor:"#eee",alignItems:"center"},errorText:{fontSize:14,color:"#FF3B30",textAlign:"center",marginBottom:15},retryButton:{backgroundColor:"#007AFF",paddingVertical:10,paddingHorizontal:20,borderRadius:20,marginBottom:10},retryButtonText:{color:"#fff",fontSize:16,fontWeight:"600"},loginButton:{paddingVertical:10,paddingHorizontal:20},loginButtonText:{color:"#007AFF",fontSize:16},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},emptyText:{fontSize:16,color:"#666",textAlign:"center"}}),Je=()=>{(0,U.useNavigation)();const[e,t]=(0,a.useState)("LATEST"),[n,r]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0),[s,l]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,y]=(0,a.useState)(!0),[p,x]=(0,a.useState)(null),b=(0,a.useRef)(),A=(0,a.useRef)(0),C=(0,a.useRef)(new W.default.Value(0)).current,w=(0,a.useRef)(new W.default.Value(1)).current,{logout:v}=a.useContext($e);(0,a.useEffect)((()=>{B().catch(console.error),I(!0)}),[e]),(0,a.useEffect)((()=>()=>{b.current&&clearTimeout(b.current)}),[]);const j=(0,a.useCallback)((e=>{W.default.parallel([W.default.timing(C,{toValue:e?1:0,duration:200,useNativeDriver:!1}),W.default.timing(w,{toValue:e?.3:1,duration:200,useNativeDriver:!1})]).start()}),[]),S=(0,a.useCallback)((async()=>{b.current&&clearTimeout(b.current);try{await v(),r([]),x(null),i(!1),l(!1),h(!1)}catch(e){}}),[v]),I=(0,a.useCallback)((async(t=!1)=>{try{if(!t&&u)return;const n=t?0:25*A.current;t?(i(!0),A.current=0,p||s||j(!0)):h(!0);const a=await V.getPosts(e,n);if("LATEST"===e&&0===a.length&&0===n)throw new Error("Не удалось загрузить ленту");r(t?a:e=>[...e,...a]),y(25===a.length),25===a.length&&(A.current+=1),x(null),b.current&&clearTimeout(b.current)}catch(t){if(x("Ошибка загрузки постов\n\nПопробуйте войти еще раз, перезагрузить страницу или использовать VPN"),"LATEST"===e){b.current&&clearTimeout(b.current);const e=5e3+1e3*Math.random();b.current=setTimeout((()=>{I(!0)}),e)}}finally{p||s||j(!1),i(!1),l(!1),h(!1)}}),[e,u,p,s]),k=(0,a.useCallback)((async e=>{try{const t=await V.loadPost(e);r((n=>n.map((n=>n.ID===e?t:n))))}catch(e){}}),[]),T=async e=>{try{const t=await V.getPost(e);r((e=>[t,...e]))}catch(e){}},E=(0,a.useCallback)((()=>{l(!0),I(!0)}),[I]),F=(0,a.useCallback)((()=>{!m||u||s||I(!1)}),[m,u,s,I]),D=(0,a.useCallback)((n=>{n!==e&&(b.current&&clearTimeout(b.current),r([]),y(!0),A.current=0,t(n))}),[e]),P=(0,a.useCallback)((({item:e})=>(0,H.jsx)(ze,{post:e,onUpdate:()=>k(e.ID)})),[k]),M=(0,a.useCallback)((()=>(0,H.jsxs)(c.default,{style:_e.header,children:[(0,H.jsx)(We,{}),(0,H.jsx)(Qe,{}),(0,H.jsx)(c.default,{style:_e.createPostContainer,children:(0,H.jsx)(Le,{onPostCreated:T})}),(0,H.jsxs)(c.default,{style:_e.feedTypeContainer,children:[(0,H.jsx)(d.default,{style:[_e.feedTypeButton,"LATEST"===e&&_e.activeFeedType],onPress:()=>D("LATEST"),children:(0,H.jsx)(f.default,{style:[_e.feedTypeText,"LATEST"===e&&_e.activeFeedTypeText],children:"Новые"})}),(0,H.jsx)(d.default,{style:[_e.feedTypeButton,"REC"===e&&_e.activeFeedType],onPress:()=>D("REC"),children:(0,H.jsx)(f.default,{style:[_e.feedTypeText,"REC"===e&&_e.activeFeedTypeText],children:"Рекомендации"})}),(0,H.jsx)(d.default,{style:[_e.feedTypeButton,"SUBSCRIPTIONS"===e&&_e.activeFeedType],onPress:()=>D("SUBSCRIPTIONS"),children:(0,H.jsx)(f.default,{style:[_e.feedTypeText,"SUBSCRIPTIONS"===e&&_e.activeFeedTypeText],children:"Подписки"})})]})]})),[e,D,T]),R=(0,a.useCallback)((()=>p?(0,H.jsxs)(c.default,{style:_e.errorContainer,children:[(0,H.jsx)(f.default,{style:_e.errorText,children:p}),(0,H.jsx)(d.default,{style:_e.retryButton,onPress:()=>I(!0),children:(0,H.jsx)(f.default,{style:_e.retryButtonText,children:"Повторить"})}),(0,H.jsx)(d.default,{style:_e.loginButton,onPress:S,children:(0,H.jsx)(f.default,{style:_e.loginButtonText,children:"Войти заново"})})]}):null),[p,S]),z=(0,a.useCallback)((()=>o?null:(0,H.jsx)(c.default,{style:_e.emptyContainer,children:(0,H.jsx)(f.default,{style:_e.emptyText,children:p?"":"Нет постов"})})),[o,p]),N=(0,a.useCallback)((()=>u?(0,H.jsx)(c.default,{style:_e.footer,children:(0,H.jsx)(g.default,{size:"small",color:"#007AFF"})}):null),[u]);return o&&0===n.length?(0,H.jsx)(c.default,{style:_e.container,children:(0,H.jsx)(c.default,{style:_e.loadingContainer,children:(0,H.jsx)(g.default,{size:"large",color:"#007AFF"})})}):(0,H.jsxs)(c.default,{style:_e.container,children:[(0,H.jsx)(Z.default,{data:n,renderItem:P,keyExtractor:t=>`${e}_${t.ID}`,onEndReached:F,onEndReachedThreshold:.5,refreshControl:(0,H.jsx)(q.default,{refreshing:s,onRefresh:E,colors:["#007AFF"],tintColor:"#007AFF"}),ListEmptyComponent:z,ListFooterComponent:N,contentContainerStyle:_e.listContent,ListHeaderComponent:M}),R()]})},Ge=h.default.create({container:{flex:1,backgroundColor:"#fff"},centered:{flex:1,justifyContent:"center",alignItems:"center",padding:20},profileInfo:{position:"relative"},coverImage:{width:"100%",height:200},avatarWrapper:{alignItems:"center",marginTop:20,marginBottom:10},avatarWithCover:{marginTop:-50},avatar:{width:100,height:100,borderRadius:50,borderWidth:4,borderColor:"#fff",backgroundColor:"#f0f0f0"},nameContainer:{alignItems:"center",marginBottom:15,paddingHorizontal:15},nameRow:{flexDirection:"row",alignItems:"center",gap:8,marginBottom:4},name:{fontSize:24,fontWeight:"bold",color:"#000",marginBottom:4},username:{fontSize:16,color:"#666",marginBottom:8},description:{fontSize:14,color:"#444",textAlign:"center",paddingHorizontal:20,marginTop:8},iconsContainer:{flexDirection:"row",flexWrap:"wrap",justifyContent:"center",marginTop:8,gap:8},icon:{width:24,height:24},stats:{flexDirection:"row",justifyContent:"space-around",paddingVertical:15,borderTopWidth:1,borderBottomWidth:1,borderColor:"#eee",marginVertical:15,marginHorizontal:15},statItem:{alignItems:"center",flex:1},statNumber:{fontSize:18,fontWeight:"bold",color:"#000"},statLabel:{fontSize:12,color:"#666",marginTop:4},logoutButton:{backgroundColor:"#007AFF",padding:12,borderRadius:8,alignItems:"center",marginHorizontal:15,marginTop:15,marginBottom:20},logoutButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"},retryButton:{marginTop:10,padding:10,backgroundColor:"#007AFF",borderRadius:8},retryButtonText:{color:"#fff",fontSize:16},verifiedBadge:{width:20,height:20}}),Ze=({username:e})=>{const{logout:t}=(0,a.useContext)($e),[r,o]=(0,a.useState)(null),[i,s]=(0,a.useState)(!0),[l,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1);(0,a.useEffect)((()=>{j()}),[e]);const p=Ae(r?.cover??null,"covers"),x=Ae(r?.avatar??null,"avatars"),b=Ce(p),A=Ce(x),C=Se(p),w=Se(x),v=C||b,j=async()=>{try{let t;if(s(!0),u(""),e)t=await N.getProfile(e.replace(/^@+/,"").trim());else{const e=await(async()=>{const e=await y.default.getItem("account_data");return e?JSON.parse(e):null})();if(!e)throw new Error("Не удалось получить данные аккаунта");t=await N.getProfile(e.username)}o(t)}catch(e){u("Не удалось загрузить профиль. Проверьте подключение к интернету или попробуйте войти заново.")}finally{s(!1),m(!1)}};if(i)return(0,H.jsx)(c.default,{style:Ge.centered,children:(0,H.jsx)(g.default,{size:"large",color:"#007AFF"})});if(!r)return(0,H.jsxs)(c.default,{style:Ge.centered,children:[(0,H.jsx)(f.default,{children:"Профиль не найден"}),(0,H.jsx)(d.default,{style:Ge.retryButton,onPress:j,children:(0,H.jsx)(f.default,{style:Ge.retryButtonText,children:"Повторить попытку"})})]});return(0,H.jsxs)(fe.default,{style:Ge.container,refreshControl:(0,H.jsx)(q.default,{refreshing:h,onRefresh:()=>{m(!0),j()}}),children:[(0,H.jsx)(_,{message:l,onClose:()=>u("")}),(0,H.jsxs)(c.default,{style:Ge.profileInfo,children:[v&&(0,H.jsx)(X.default,{source:{uri:v},style:Ge.coverImage,resizeMode:"cover"}),(0,H.jsx)(c.default,{style:[Ge.avatarWrapper,v?Ge.avatarWithCover:null],children:(0,H.jsx)(X.default,{source:{uri:w||A||we},style:Ge.avatar,resizeMode:"cover"})}),(0,H.jsxs)(c.default,{style:Ge.nameContainer,children:[(0,H.jsxs)(c.default,{style:Ge.nameRow,children:[(0,H.jsx)(f.default,{style:Ge.name,children:r.name}),r.icons&&r.icons.includes("VERIFY")&&(0,H.jsx)(X.default,{source:n(3507),style:Ge.verifiedBadge})]}),(0,H.jsxs)(f.default,{style:Ge.username,children:["@",r.username]}),r.description&&(0,H.jsx)(f.default,{style:Ge.description,children:r.description}),r.icons&&r.icons.length>0&&(0,H.jsx)(c.default,{style:Ge.iconsContainer,children:r.icons.filter((e=>"VERIFY"!==e)).map(((e,t)=>(0,H.jsx)(X.default,{source:{uri:`https://elemsocial.com/Content/Icons/${e}`},style:Ge.icon},t)))})]}),(()=>{const e=[{label:"Посты",value:r.posts},{label:"Подписчики",value:r.subscribers},{label:"Подписки",value:r.subscriptions}];return(0,H.jsx)(c.default,{style:Ge.stats,children:e.map((e=>(0,H.jsxs)(c.default,{style:Ge.statItem,children:[(0,H.jsx)(f.default,{style:Ge.statNumber,children:e.value?.toLocaleString()||"0"}),(0,H.jsx)(f.default,{style:Ge.statLabel,children:e.label})]},e.label)))})})(),r.my_profile&&(0,H.jsx)(d.default,{style:Ge.logoutButton,onPress:async()=>{try{await t()}catch(e){u("Не удалось выйти из аккаунта")}},children:(0,H.jsx)(f.default,{style:Ge.logoutButtonText,children:"Выйти"})})]})]})},qe=(0,i.createBottomTabNavigator)(),Xe=(0,s.createNativeStackNavigator)(),$e=(0,a.createContext)({isLoggedIn:!1,setIsLoggedIn:()=>{},logout:async()=>{}}),et=()=>(0,H.jsxs)(qe.Navigator,{screenOptions:{tabBarActiveTintColor:"#007AFF",tabBarInactiveTintColor:"#8E8E93",tabBarStyle:{backgroundColor:"#FFFFFF",borderTopWidth:1,borderTopColor:"#E5E5EA"},headerStyle:{backgroundColor:"#FFFFFF"},headerTitleStyle:{color:"#000000",fontSize:17,fontWeight:"600"}},children:[(0,H.jsx)(qe.Screen,{name:"Feed",component:Je,options:{title:"Главная",tabBarIcon:({color:e,size:t})=>(0,H.jsx)(l.default,{name:"home-outline",size:t,color:e}),headerTitle:"Главная"}}),(0,H.jsx)(qe.Screen,{name:"Profile",component:Ze,options:({navigation:e})=>({title:"Мой профиль",tabBarIcon:({color:e,size:t})=>(0,H.jsx)(l.default,{name:"person-outline",size:t,color:e}),headerTitle:"Мой профиль",headerRight:()=>{const{logout:e}=(0,a.useContext)($e);return(0,H.jsx)(l.default,{name:"log-out-outline",size:24,color:"#ff3b30",style:{marginRight:15},onPress:e})}})})]}),tt=h.default.create({headerContainer:{flexDirection:"row",alignItems:"center",gap:8},headerLogo:{width:24,height:24},headerTitle:{fontSize:18,fontWeight:"bold",color:"#000"}}),nt=()=>{const[e,t]=(0,a.useState)(!1);(0,a.useEffect)((()=>{r()}),[]);const r=async()=>{await y.default.clear();const e=await y.default.getItem("S-KEY");t(!!e)},i=async()=>{await y.default.removeItem("S-KEY"),t(!1)};return e?(0,H.jsx)($e.Provider,{value:{isLoggedIn:e,setIsLoggedIn:t,logout:i},children:(0,H.jsx)(o.NavigationContainer,{children:(0,H.jsx)(Xe.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#fff"},headerTintColor:"#000",headerTitleStyle:{fontWeight:"bold"},headerTitle:()=>(0,H.jsxs)(c.default,{style:tt.headerContainer,children:[(0,H.jsx)(X.default,{source:n(3153),style:tt.headerLogo,resizeMode:"contain"}),(0,H.jsx)(f.default,{style:tt.headerTitle,children:"Element+"})]})},children:(0,H.jsx)(Xe.Screen,{name:"Main",component:et})})})}):(0,H.jsx)($e.Provider,{value:{isLoggedIn:e,setIsLoggedIn:t,logout:i},children:(0,H.jsx)(o.NavigationContainer,{children:(0,H.jsx)(Xe.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#fff"},headerTintColor:"#000",headerTitleStyle:{fontWeight:"bold"},headerTitle:()=>(0,H.jsxs)(c.default,{style:tt.headerContainer,children:[(0,H.jsx)(X.default,{source:n(3153),style:tt.headerLogo,resizeMode:"contain"}),(0,H.jsx)(f.default,{style:tt.headerTitle,children:"Element+"})]})},children:(0,H.jsx)(Xe.Screen,{name:"Auth",component:G})})})})};var rt=n(3049);const at=h.default.create({container:{flex:1,backgroundColor:"#fff"}});(0,r.default)((function(){(0,a.useEffect)((()=>{window.localStorage.clear()}),[]);const e=(0,a.useCallback)((()=>(0,H.jsx)(nt,{})),[]);return(0,H.jsxs)(c.default,{style:at.container,children:[(0,H.jsx)(rt.StatusBar,{style:"auto"}),e()]})}))},6664:()=>{const e=console.error;console.error=(...t)=>{t[0]?.includes?.("Warning: Encountered two children with the same key")||e.apply(console,t)}},4601:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVR4nO2WvUoDQRDHf5UIqVNpnVfQBHwC30BI40tY2dkJdjGJH13SGNJJ+iQ+iC9gofae/JPdIMtxt5NdrvIPA/cxMz9mbnb3YKtjYAZ8AUWFvQMXLsYsQT5qAKFd7QOaueBX4KjC7yyA3VhBvl2qrEqHJZXdWUA+yOJb/LHbpkAFcN0UqAD6OUHrmtHPBgrVAs5jc6SAvP5Be2sKXDbxjaKUA9QDxm78ZSOgmxN0ADxVrK1H55MMeo44Uh5SQb2SpGFO2Q9wmgIaRYJk9ymgt4hY/36VAlobQEvLCRtqaGjdQA/n7mZhhHUNw3Cihx3jX9A30HYJtU7q/DU0O6mSF+AzEjZxcVqM2hHKfFSJILsFm0NqjUbYb0G63rTL6xdQQ9p89CF4vAAAAABJRU5ErkJggg=="},7909:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/UlEQVR4nO2ay2sTURTGp4qPnaiL+mhN7kkF34iCCoILdz5w6R9QfCz9AxTiKk3OSUoLbnyBKxfuXFgVfCtFRReKVRGlrzlnUtFua2vryB3aqJ20mWkzj9R88EFIZjLfL/fMzJ1zYxh11VVX8LLtBigUtwPKaUC5rIgfAHIfkAwr4p/a+jUQ9zqfkVxK5eUUkLVN72tErVSOdymUToUyACT2HN2vUDoSaO4MHUDlrKOKpHse4ctakTyDnBwOHgAHdwDK02oDuIz82Cm7quuGvVgRn1fIY4FDUGl0RoHknJG2F1WFoakwsApQ7oQFANOBkLs2tPWvnBeE6ig2AsmbqCDgD0xPc65/3ZwgNmXM1UDyMWoIKJnf6+rwBdHS+WkZkDyJPrxMH5mHuy/aSzyDADFFHRpmMkrGGwTyfiCeiC8IjycKxX2zU9h2QxA3ugBgns86tUnmzWORhySvto7MCKJQ7kUfUDxZEd8uC7GxMLAekH9FHRA8mycSOLTGXVbIJ6MPJ/5GJWe2likrvhZ1MPDvq+XOj1cxCGb7MvLLciMy5HlIiW+1ZAebtPWkLqztwA1SLDciP7x+gT7g1H6pvNkc1nbg9ogLRL+5MECQxXNpIXfpA2rr63lY24HLbLlLi+S1j18ivic7oFyJPBhV4fK7cG6IHcVGPUWOOhx4Nk/ozC6QBTNp1NLNsagDQjWm8c6DVQ1MVRRJd8WecZKsvbE+V5DHdUbDi4C4UPPNB60t6XdLdeul5ttBpQYdyocYQfTMuXXq9H2JX8QCov3rWmM+guzwCkC5WdNN7H+W1vJ8JlQAklGFcrZqywpTSrRZyfBA+FEwCz3OcpvZGjgAOqthhwIBKIH4euDxE577QlsMTWRlc6XmnfPMj5IG4gt68qmIPyuSb06tTy5PK+QvCvm+Xp5WeT6RylpbjTClUK5XKInvQNZBI85KkhyoMBp3/24exFKJdO/yGe/uyG+TZB2PxT8XKgmQ2yeDjygU07ksomRU1tpTcee6/nP9BqNcPi0qc61MAAAAAElFTkSuQmCC"},9955:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADVElEQVR4nO2Zz2sTURDHVyuICqKC1UJpMpMoIoqCB0/+uIkHQfwDvHjTg4i/jkFBtDOJGi8Kooh6kHr2YtWDP0upCP6g0ovadmZbFS9WsSKNvKTRttmkm+xLdgMdGFhCdjaf+b43+zLjIOtjIO1DdludZjYk6UXWHJC8aWqY5BldiSSvDQyS9nec/9zmNKsl52Aiask5ZSJqyG5roYr9r2Zx1lic9BiQPEQSBdZx48jiAssjIDkVzwxt8vuMGA1vBpbT5t5CDB1HkjFTcJC1G0lOQHp4rVUYZP2GJBOT15Wd9EmcdXu5uAl2dwLrU1+x2CRSHyTSusUmjH8nmQCWK+2ZwUXFWOYaSa9WHYuL8fTSjlRuQVUAq9hdAp2yLRCMySbr846zn5a3ZwZXIElPTRA8XZ3YhQ/LfEEYamC5B6S/kHV3YBjSZwYoKAROgfGlDJBenHKTFRjbDqTZihCm6iDJnxnLYxx4eE/JeyZMJ5moWADypdU7A1FUptsTooNdqFRio6gMeL1nkOXkrDdGDsY9Xrqs8m9YH1mI0jIjve+liOtb0ujAvPdQxJybqlifEVhmQPI9MEhEYH54lF79UlNWQoQB0sHSPRLgB4S4Z155La07gbITgjJAcsML5KgFqRuqDLAe9Ci/7gY7WWocTCwt60pACqrIW0uZqv8yI+n1hMhnMC2HrcleZ2WA3EOV/xmSjFp7WL2UIdG2lCwuCzK56Y/YzZx9ZcBrk3v/1dWXVmFsKkPS43TlWmYFyWcuM7Ix32OKmjKkP8tWqrIwrPt897IapAywHHBqMSA9ZxMkiDJAQk7N1pVrQdLbYcMA6XUnl5vnBLJUbj6yXgsNhuSm783tBwZILjcaBkz/KpWb79g2042f2feqFwyQjJqCYB3iH0xaduW7842oZqT9MRpdXTcY7BxaU5wG21QGPBrndZ82mxOA6YUBye/AIGZsQJpNZgcWFuM3VBljcXa3AutAAIiPZvjjFTvZaBhzEjUZrR5Eusz8JHID2kRa9iLJiA8VRsx3/cbFRu6ZopkMI8utChB3aymrybBG5wnS/dNO0CRj5rMgMTEMZYwlWdcDyTvj5tpGTAwNJvt1qXGbMTEsmHoYTj2bVeqoNIMVYLQPSV78BYH4EebaytfUAAAAAElFTkSuQmCC"},852:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyklEQVR4nO2WTQrCQAyFP1T8uZOewsO4c2u9hRs3rgTB1gNVL1EYCYwiQ0szmVFc9MGDWbzJRwKBQL+mwB64Ay5wDRQ+k6yiBeACSyZZbZ24wI8cIKd0sgaQWcPo/mt0a6CJKO463PhanRoBpwygMzDu60oCxwTIFZhpR2iFlcBcC7HCSgskFlalQLSwKgekD3aLgWgXTmCHj/wFWMTUj9ls2bMNsAUmyj8mkEXu56DaP5ZfgKx8bWGozqlU7wQkx5/AXp3l9PvAfAKV7hPWLfRRtQAAAABJRU5ErkJggg=="},7030:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVR4nO2ZQUrEQBBFnwMGPbDoKjhH0IW78TJ6Cp2LDARKArMoZMDprkoqyH9Qm0Cn+pFP0lRACHEN98AeOAITYI11Al6AHUWb/+zY9KU6VEjskzZfJnF0zR+A28b15RKTazx0rC9/EuYquv5QIWGJAjfA269r70tLZApQIWHJAqtL2AICq0rYQgIzq0hEBf56De+WfjtFBfyH8LFCwoICz4Fjx+sWBCKHwdMWBGbugBH47jiOh0m9WUVPk0A7pifgUIQ6MEXIoQh1YIqQQxHqwBQhhyLUgSlCDkWoA1OEEsfrrQyu39w7zDVznSwG4Mn1+8q4aWSuE61xaz/5WurjPI5JITLXaanp3GPM3LwQ/5kfn7GkApTkdIQAAAAASUVORK5CYII="},5613:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3klEQVR4nO2ZS2gTURSG70Kt6ELwQVErk3OTSi0IPhBFBBF3bkVwoaIICuLGlYJgoKAm50zEbtSCouDOpYuurFLrA3zgxoUEQUznnIkoYqFaKtjIbdVWM6kzyTQzA/nhh0AyZ/5v7r1zZm6UaqmlllpqKc6ycrJOI58B5AFN8kYjjwLJuCZ2gfg+EPdY6GzwWy9jOxvNMebYqRoybmqa2oByTxOftmzuCg0gRe5WQH6gSSp+DCiP03l3V6162nZ2A8kT3/XIXCTZUjdAd/b1AiC+ppEn/J70H99YmeVFv+u1k7sYiG/WVQtNBr5iMgWCWGvzco0yVCfAzADPTK3MeVkBKC9CqDfYdcFZ5gsi01tsCwViemo8Nw6rnkYe9DUyGuV6aCedIwNK36wQVqG8rYE10VSnbWd7TRAgeRR1QO3fD72nVKG8PgbhKkGcIemuBiE5F3UwHdCAcrZ6WgVoenExIA94rA9+mzgQkqLX1PoadTAd1MijXiBjyQORb15r5EPkwSio2fXqIS+jDyaBbB59PKYW304cCPItrxE5EXUwHdQox6tAOi+VdeTBKJhTJFYVyOT0Qn6aoNEYUrWURjkUeUDyZ0A5UBNkc19lfhI6PJAUd2Yr82qCTN29nP0JGI29s0JMrxW5G18I7ld+BZfL7UAyHHVoXW1ek3+/SgVROs+bzLNMDMJXfnms7v2tFMnBGABUpuwcUY1osuNHuSGBPAEkp1QYSttyTBP/iAaCT6owpdE9DMjfmwUBJOOmQYcK8QfG5h0auTznECgfZ9sID0WZ3HCH2dOdQ5BX1kU3pZohK/tuIaDkQl03Zj2g9M3cwW+aJv/rQCk1DsKuzsuepgP8BZP7vMRcyQYg7nQUSktVXATo7gOSTwEAvpiGq+KozkJptXmo+/9difvNb1XcBcRHAXnEA2DEfKeSpBSJNfPV2Ww3pQuljEqiMr3FNkC+amw+R52npZZUcP0EmHikhthgrMsAAAAASUVORK5CYII="},3153:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/logo.0983b5b501b91604744b.png"},3507:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/verify.c35ae86d10b99aec2123.png"}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,n,a,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,a,o]=e[u],s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,a,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/KirixElemClient/",(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var u=l(r)}for(t&&t(n);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[346],(()=>r(2204)));a=r.O(a)})();
//# sourceMappingURL=main.9c4d18d9.js.map