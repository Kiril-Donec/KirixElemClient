{"version":3,"file":"static/js/main.9c4d18d9.js","mappings":"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","sources":["webpack/runtime/chunk loaded","src/services/Crypto.ts","src/services/WebSocket.ts","src/services/api.ts","src/components/ErrorMessage.tsx","src/screens/LoginScreen.tsx","src/constants/websocket.ts","src/utils/fileUtils.ts","src/services/FileService.ts","src/components/LinkConfirmModal.tsx","src/components/LinkText.tsx","src/utils/elementImage.ts","src/constants/images.ts","src/hooks/useWsImage.ts","src/components/ProfileModal.tsx","src/components/CustomVideoPlayer.tsx","src/components/PostCard.tsx","src/components/CreatePost.tsx","src/components/WebSocketStatus.tsx","src/components/LetterAvatar.tsx","src/components/OnlineUsers.tsx","src/screens/FeedScreen.tsx","src/screens/ProfileScreen.tsx","src/navigation/index.tsx","App.tsx","index.ts","src/utils/disableWarnings.ts","webpack/bootstrap","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","export async function arrayBufferToPem(buffer: ArrayBuffer, type: string): Promise<string> {\n    const binary = String.fromCharCode(...Array.from(new Uint8Array(buffer)));\n    const base64 = btoa(binary);\n    let pem = `-----BEGIN ${type}-----\\n`;\n    pem += base64.match(/.{1,64}/g)?.join('\\n') || '';\n    pem += `\\n-----END ${type}-----\\n`;\n    return pem;\n}\n\nfunction toStrictArrayBuffer(data: Uint8Array | ArrayBuffer): ArrayBuffer {\n    if (data instanceof Uint8Array) {\n        const copy = new Uint8Array(new ArrayBuffer(data.byteLength));\n        copy.set(data);\n        return copy.buffer;\n    }\n    return data.slice(0);\n}\n\nexport function importPublicKey(pk: string): ArrayBuffer {\n    const base64String = pk\n        .replace(/-----BEGIN PUBLIC KEY-----/, '')\n        .replace(/-----END PUBLIC KEY-----/, '')\n        .replace(/\\s/g, '');\n    const publicKeyBytes = Uint8Array.from(atob(base64String), c => c.charCodeAt(0));\n    return publicKeyBytes.buffer;\n}\n\nexport function importPrivateKey(pk: string): ArrayBuffer {\n    const base64String = pk\n        .replace(/-----BEGIN PRIVATE KEY-----/, '')\n        .replace(/-----END PRIVATE KEY-----/, '')\n        .replace(/\\s/g, '');\n    const privateKeyBytes = Uint8Array.from(atob(base64String), c => c.charCodeAt(0));\n    return privateKeyBytes.buffer;\n}\n\nexport async function rsaEncrypt(data: string | Uint8Array | ArrayBuffer, pk: string): Promise<Uint8Array> {\n    try {\n        const publicKeyBuffer = importPublicKey(pk);\n        const payload =\n            typeof data === 'string'\n                ? new TextEncoder().encode(data)\n                : data instanceof Uint8Array\n                    ? data\n                    : new Uint8Array(data);\n        const payloadBuffer = toStrictArrayBuffer(payload);\n\n        const publicKeyE = await crypto.subtle.importKey(\n            'spki',\n            publicKeyBuffer,\n            { name: 'RSA-OAEP', hash: { name: 'SHA-256' } },\n            true,\n            ['encrypt']\n        );\n        const encryptedDataBuffer = await crypto.subtle.encrypt(\n            { name: 'RSA-OAEP' },\n            publicKeyE,\n            payloadBuffer\n        );\n        return new Uint8Array(encryptedDataBuffer);\n    } catch (error) {\n        throw new Error('Encryption failed: ' + (error as Error).message);\n    }\n}\n\nexport async function rsaDecryptBytes(data: Uint8Array, privateKey: ArrayBuffer): Promise<Uint8Array> {\n    try {\n        const payloadBuffer = toStrictArrayBuffer(data);\n        const privateKeyE = await crypto.subtle.importKey(\n            'pkcs8',\n            privateKey,\n            { name: 'RSA-OAEP', hash: { name: 'SHA-256' } },\n            true,\n            ['decrypt']\n        );\n        const decryptedDataBuffer = await crypto.subtle.decrypt(\n            { name: 'RSA-OAEP' },\n            privateKeyE,\n            payloadBuffer\n        );\n        return new Uint8Array(decryptedDataBuffer);\n    } catch (error) {\n        throw new Error('Decryption failed: ' + (error as Error).message);\n    }\n}\n\nexport async function rsaDecrypt(data: Uint8Array, privateKey: ArrayBuffer): Promise<string> {\n    const decryptedBytes = await rsaDecryptBytes(data, privateKey);\n    return new TextDecoder().decode(decryptedBytes);\n}\n\nexport function generateAESKey(): string {\n    const bytes = crypto.getRandomValues(new Uint8Array(32));\n    return btoa(String.fromCharCode(...Array.from(bytes)));\n}\n\nexport function base64ToBytes(base64: string): ArrayBuffer {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n\nexport async function aesEncrypt(data: string | Uint8Array | ArrayBuffer, key: string): Promise<Uint8Array | null> {\n    const iv = crypto.getRandomValues(new Uint8Array(16));\n    const payload =\n        typeof data === 'string'\n            ? new TextEncoder().encode(data)\n            : data instanceof Uint8Array\n                ? data\n                : new Uint8Array(data);\n    const payloadBuffer = toStrictArrayBuffer(payload);\n\n    try {\n        const importedKey = await crypto.subtle.importKey(\n            'raw',\n            base64ToBytes(key),\n            { name: 'AES-CBC' },\n            false,\n            ['encrypt']\n        );\n        const encryptedBuffer = await crypto.subtle.encrypt(\n            { name: 'AES-CBC', iv: iv },\n            importedKey,\n            payloadBuffer\n        );\n\n        const result = new Uint8Array(iv.byteLength + encryptedBuffer.byteLength);\n        result.set(iv);\n        result.set(new Uint8Array(encryptedBuffer), iv.byteLength);\n        return result;\n    } catch (error) {\n        console.error('AES encryption failed:', error);\n        return null;\n    }\n}\n\nexport async function aesDecryptBytes(data: Uint8Array, key: string): Promise<Uint8Array> {\n    const iv = data.slice(0, 16);\n    const encrypted = data.slice(16);\n    const ivBuffer = toStrictArrayBuffer(iv);\n    const encryptedBuffer = toStrictArrayBuffer(encrypted);\n\n    const importedKey = await crypto.subtle.importKey(\n        'raw',\n        base64ToBytes(key),\n        { name: 'AES-CBC' },\n        false,\n        ['decrypt']\n    );\n    const decryptedBuffer = await crypto.subtle.decrypt(\n        { name: 'AES-CBC', iv: ivBuffer },\n        importedKey,\n        encryptedBuffer\n    );\n    return new Uint8Array(decryptedBuffer);\n}\n\nexport async function aesDecrypt(data: Uint8Array, key: string): Promise<string> {\n    const decryptedBytes = await aesDecryptBytes(data, key);\n    return new TextDecoder().decode(decryptedBytes);\n}\n\nexport async function blobToUint8Array(blob: Blob): Promise<Uint8Array> {\n    const arrayBuffer = await blob.arrayBuffer();\n    return new Uint8Array(arrayBuffer);\n}\n\nexport function arrayBufferToBase64(buffer: ArrayBuffer): string {\n    const bytes = new Uint8Array(buffer);\n    let binary = '';\n    for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binary);\n}\n\nexport function base64ToArrayBuffer(base64: string): ArrayBuffer {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; ++i) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n","import {\n    arrayBufferToPem,\n    rsaEncrypt,\n    rsaDecryptBytes,\n    generateAESKey,\n    blobToUint8Array,\n    aesEncrypt,\n    aesDecryptBytes\n} from './Crypto';\nimport { decode, encode } from '@msgpack/msgpack';\n\nexport interface WebSocketMessage {\n    type: string;\n    action?: string;\n    data?: any;\n    status?: string;\n    message?: string;\n    S_KEY?: string;\n    username?: string;\n    key?: string;\n    ray_id?: string;\n    accountData?: {\n        id: number;\n        username: string;\n        name: string;\n        avatar: string;\n    };\n}\n\nclass WebSocketService {\n    private url: string;\n    private socket: WebSocket | null;\n    private isConnected: boolean;\n    private rsaPublic: ArrayBuffer | null;\n    private rsaPrivate: ArrayBuffer | null;\n    private rsaPublicServer: string | null;\n    private aesKey: string | null;\n    private aesServerKey: string | null;\n    private keysReady: boolean;\n    private socketReady: boolean;\n    private messageQueue: WebSocketMessage[];\n    private processingMessages: boolean;\n    private messageHandlers: Map<string, (data: WebSocketMessage) => void>;\n    private reconnectTimer: ReturnType<typeof setTimeout> | null;\n    private isConnecting: boolean;\n    private shouldReconnect: boolean;\n\n    constructor() {\n        this.url = 'wss://ws.elemsocial.com/user_api';\n        this.socket = null;\n        this.isConnected = false;\n        this.rsaPublic = null;\n        this.rsaPrivate = null;\n        this.rsaPublicServer = null;\n        this.aesKey = null;\n        this.aesServerKey = null;\n        this.keysReady = false;\n        this.socketReady = false;\n        this.messageQueue = [];\n        this.processingMessages = false;\n        this.messageHandlers = new Map();\n        this.reconnectTimer = null;\n        this.isConnecting = false;\n        this.shouldReconnect = true;\n\n        this.connect();\n    }\n\n    get connectionStatus(): boolean {\n        return this.isConnected;\n    }\n\n    get ready(): boolean {\n        return this.socketReady && this.keysReady;\n    }\n\n    private async generateKeys(): Promise<boolean> {\n        const keyPair = await window.crypto.subtle.generateKey({\n            name: 'RSA-OAEP',\n            modulusLength: 2048,\n            publicExponent: new Uint8Array([1, 0, 1]),\n            hash: { name: 'SHA-256' }\n        }, true, ['encrypt', 'decrypt']);\n        this.rsaPublic = await window.crypto.subtle.exportKey('spki', keyPair.publicKey);\n        this.rsaPrivate = await window.crypto.subtle.exportKey('pkcs8', keyPair.privateKey);\n        this.keysReady = true;\n        return true;\n    }\n\n    private processQueue(): void {\n        if (!this.socketReady || this.processingMessages) return;\n        this.processingMessages = true;\n        while (this.messageQueue.length > 0) {\n            const message = this.messageQueue.shift();\n            if (message) {\n                this.send(message).catch((error) => {\n                    console.error('Queued send failed:', error);\n                });\n            }\n        }\n        this.processingMessages = false;\n    }\n\n    private generateRayID(): string {\n        const timestamp = Date.now();\n        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        let randomPart = '';\n        for (let i = 0; i < 10; i++) {\n            randomPart += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return `${timestamp}${randomPart}`;\n    }\n\n    public connect(): void {\n        if (this.isConnecting) return;\n        if (this.socket && (this.socket.readyState === WebSocket.OPEN || this.socket.readyState === WebSocket.CONNECTING)) {\n            return;\n        }\n\n        this.shouldReconnect = true;\n        this.isConnecting = true;\n        console.log('Connecting to WebSocket...');\n        const socket = new WebSocket(this.url);\n        socket.binaryType = 'blob';\n        this.socket = socket;\n\n        socket.onopen = async () => {\n            if (this.socket !== socket) return;\n            console.log('socket_connect');\n            this.isConnecting = false;\n            await this.generateKeys();\n            if (!this.rsaPublic) return;\n\n            const publicKeyPem = await arrayBufferToPem(this.rsaPublic, 'PUBLIC KEY');\n            socket.send(JSON.stringify({\n                type: 'key_exchange',\n                key: publicKeyPem\n            }));\n            this.isConnected = true;\n            this.processQueue();\n        };\n\n        socket.onmessage = async (event) => {\n            if (this.socket !== socket) return;\n            try {\n                const rawData = event.data;\n\n                if (this.rsaPublicServer) {\n                    if (this.aesServerKey && this.aesKey) {\n                        const unit8Array = await blobToUint8Array(rawData);\n                        const decryptedAes = await aesDecryptBytes(unit8Array, this.aesKey);\n                        const decryptedData = decode(decryptedAes) as WebSocketMessage;\n\n                        if (decryptedData.type) {\n                            const handler = this.messageHandlers.get(decryptedData.type);\n                            if (handler) {\n                                handler(decryptedData);\n                            }\n                        }\n                    } else {\n                        if (!this.rsaPrivate) return;\n                        const unit8Array = await blobToUint8Array(rawData);\n                        const decryptedRsa = await rsaDecryptBytes(unit8Array, this.rsaPrivate);\n                        const decryptedData = decode(decryptedRsa) as WebSocketMessage;\n\n                        if (decryptedData.type === 'aes_key') {\n                            this.aesServerKey = decryptedData.key ?? null;\n                            this.socketReady = true;\n                            console.log('socket_ready');\n                            this.processQueue();\n                        }\n                    }\n                } else {\n                    const data = JSON.parse(rawData) as WebSocketMessage;\n                    if (data.type === 'key_exchange') {\n                        this.rsaPublicServer = data.key ?? null;\n                        this.aesKey = generateAESKey();\n\n                        if (this.rsaPublicServer && this.aesKey) {\n                            const aesKeyPayload = encode({\n                                type: 'aes_key',\n                                key: this.aesKey\n                            });\n                            const encryptedPayload = await rsaEncrypt(aesKeyPayload, this.rsaPublicServer);\n                            socket.send(encryptedPayload);\n                        }\n                    }\n                }\n            } catch (error) {\n                console.error('WebSocket message processing failed:', error);\n            }\n        };\n\n        socket.onclose = () => {\n            if (this.socket !== socket) return;\n            this.isConnecting = false;\n            this.resetConnectionState();\n            this.scheduleReconnect();\n        };\n\n        socket.onerror = () => {\n            if (this.socket !== socket) return;\n            this.isConnecting = false;\n            this.resetConnectionState();\n            this.scheduleReconnect();\n        };\n    }\n\n    public async send(data: WebSocketMessage): Promise<any> {\n        if (!this.isConnected || !this.socket || this.socket.readyState !== WebSocket.OPEN || !this.socketReady) {\n            this.messageQueue.push(data);\n            return;\n        }\n        if (!this.aesServerKey || !this.aesKey) return;\n\n        const ray_id = this.generateRayID();\n        const binaryData = encode({ ray_id, ...data });\n        const encrypted = await aesEncrypt(binaryData, this.aesServerKey);\n        if (!encrypted) return;\n\n        this.socket.send(encrypted);\n\n        return new Promise((resolve, reject) => {\n            const timeoutId = setTimeout(() => {\n                this.socket?.removeEventListener('message', onMessage);\n                reject(new Error('WebSocket response timeout'));\n            }, 15000);\n\n            const onMessage = async (event: MessageEvent) => {\n                try {\n                    if (!this.aesKey) return;\n                    const unit8Array = await blobToUint8Array(event.data as Blob);\n                    const decryptedAes = await aesDecryptBytes(unit8Array, this.aesKey);\n                    const decryptedData = decode(decryptedAes) as WebSocketMessage;\n\n                    if (decryptedData.ray_id === ray_id) {\n                        clearTimeout(timeoutId);\n                        this.socket?.removeEventListener('message', onMessage);\n                        resolve(decryptedData);\n                    }\n                } catch (error) {\n                    clearTimeout(timeoutId);\n                    this.socket?.removeEventListener('message', onMessage);\n                    reject(error);\n                }\n            };\n\n            this.socket?.addEventListener('message', onMessage);\n        });\n    }\n\n    public disconnect(): void {\n        this.shouldReconnect = false;\n        if (this.reconnectTimer) {\n            clearTimeout(this.reconnectTimer);\n            this.reconnectTimer = null;\n        }\n        if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n            this.socket.close();\n        }\n        this.resetConnectionState();\n    }\n\n    private resetConnectionState(): void {\n        this.socket = null;\n        this.isConnected = false;\n        this.rsaPublic = null;\n        this.rsaPrivate = null;\n        this.rsaPublicServer = null;\n        this.aesKey = null;\n        this.aesServerKey = null;\n        this.keysReady = false;\n        this.socketReady = false;\n    }\n\n    private scheduleReconnect(): void {\n        if (!this.shouldReconnect || this.reconnectTimer) return;\n        this.reconnectTimer = setTimeout(() => {\n            this.reconnectTimer = null;\n            this.connect();\n        }, 3000);\n    }\n\n    public addMessageHandler(type: string, handler: (data: WebSocketMessage) => void): void {\n        this.messageHandlers.set(type, handler);\n    }\n\n    public removeMessageHandler(type: string): void {\n        this.messageHandlers.delete(type);\n    }\n}\n\nconst webSocketService = new WebSocketService();\nexport default webSocketService;\n","import axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport webSocketService, { WebSocketMessage } from './WebSocket';\n\r\nconst AUTH_API_URL = 'https://api.elemsocial.com';\r\nconst POSTS_API_URL = 'https://elemsocial.com';\r\nconst SYSTEM_API_URL = 'https://elemsocial.com/System/API';\r\n\r\nconst authApi = axios.create({\r\n  baseURL: AUTH_API_URL,\r\n  headers: {\r\n    'Content-Type': 'multipart/form-data',\r\n    'api': 'true'\r\n  }\r\n});\r\n\r\nconst postsApi = axios.create({\r\n  baseURL: POSTS_API_URL,\r\n  headers: {\r\n    'Content-Type': 'multipart/form-data',\r\n    'api': 'true'\r\n  }\r\n});\r\n\r\nconst systemApi = axios.create({\n  baseURL: SYSTEM_API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n    'api': 'true'\n  }\n});\n\nexport const connectWebSocket = async (retries = 3, requireAuthorization = true): Promise<void> => {\n  let attemptCount = 0;\n\n  const waitUntilReady = async (timeoutMs = 15000): Promise<void> => {\n    const startedAt = Date.now();\n    while (!webSocketService.ready) {\n      if (Date.now() - startedAt > timeoutMs) {\n        throw new Error('WebSocket handshake timeout');\n      }\n      await new Promise((resolve) => setTimeout(resolve, 250));\n    }\n  };\n\n  while (attemptCount < retries) {\n    try {\n      const sKey = await AsyncStorage.getItem('S-KEY');\n      if (requireAuthorization && !sKey) {\n        throw new Error('   S-KEY');\n      }\n\n      await waitUntilReady();\n\n      if (!requireAuthorization) {\n        return;\n      }\n\n      await new Promise<void>((resolve, reject) => {\n        const sKeyForAuth = sKey as string;\n        const timeout = setTimeout(() => {\n          webSocketService.removeMessageHandler('authorization');\n          reject(new Error('Authorization timeout'));\n        }, 15000);\n\n        webSocketService.addMessageHandler('authorization', async (data: WebSocketMessage) => {\n          clearTimeout(timeout);\n          webSocketService.removeMessageHandler('authorization');\n\n          if (data.status === 'success' && data.accountData) {\n            await AsyncStorage.setItem('account_data', JSON.stringify(data.accountData));\n            resolve();\n          } else {\n            reject(new Error(data.message || 'Authorization failed'));\n          }\n        });\n\n        webSocketService.send({\n          type: 'authorization',\n          action: 'connect',\n          S_KEY: sKeyForAuth\n        }).catch((error) => {\n          clearTimeout(timeout);\n          webSocketService.removeMessageHandler('authorization');\n          reject(error);\n        });\n      });\n\n      return;\n    } catch (error: any) {\n      attemptCount++;\n      if (attemptCount >= retries) {\n        throw error;\n      }\n      await new Promise((resolve) => setTimeout(resolve, 1000 * attemptCount));\n    }\n  }\n};\n\r\n// Add interceptor to include S-KEY in requests\r\nauthApi.interceptors.request.use(async (config) => {\r\n  const sKey = await AsyncStorage.getItem('S-KEY');\r\n  if (sKey) {\r\n    config.headers['S-KEY'] = sKey;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Add response error handling\r\nauthApi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    console.error('API Error:', error?.response?.data || error.message);\r\n    if (error?.response?.status === 401) {\r\n      // Handle unauthorized error (invalid or expired S-KEY)\r\n      await AsyncStorage.removeItem('S-KEY');\r\n      // You might want to trigger a logout here\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add interceptor to include S-KEY in requests\r\npostsApi.interceptors.request.use(async (config) => {\r\n  const sKey = await AsyncStorage.getItem('S-KEY');\r\n  if (sKey) {\r\n    config.headers['S-KEY'] = sKey;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Add response error handling\r\npostsApi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    console.error('API Error:', error?.response?.data || error.message);\r\n    if (error?.response?.status === 401) {\r\n      // Handle unauthorized error (invalid or expired S-KEY)\r\n      await AsyncStorage.removeItem('S-KEY');\r\n      // You might want to trigger a logout here\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Add interceptor to include S-KEY in requests\r\nsystemApi.interceptors.request.use(async (config) => {\r\n  const sKey = await AsyncStorage.getItem('S-KEY');\r\n  if (sKey) {\r\n    config.headers['S-KEY'] = sKey;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Types\r\nexport interface LoginResponse {\n  status: 'success' | 'error';\n  S_KEY?: string;\n  text?: string;\n  accountID?: string;\n}\n\r\nexport interface PostResponse {\n  ID: string;\n  AuthorID: string;\n  Username: string;\n  Name: string;\n  Avatar: string | Record<string, any> | null | 'None';\n  UserIcons: string | null;\n  Text: string;\n  Content: string | null;\n  Date: string;\n  Likes: number;\r\n  Dislikes: number;\r\n  Liked: 'Liked' | null;\r\n  Disliked: 'Liked' | null;\r\n  Comments: number;\r\n  MyPost: boolean;\r\n}\r\n\r\nexport interface CommentResponse {\r\n  Name: string;\r\n  Username: string;\r\n  Avatar: string | 'None';\r\n  UserIcons: string | null;\r\n  Text: string;\r\n  Date: string;\r\n}\r\n\r\nexport interface ApiResponse {\r\n  Type: 'Error' | 'Verify';\r\n  Content: string;\r\n}\r\n\r\nexport interface ProfileData {\n  type: 'user' | 'channel';\n  id: number;\n  name: string;\n  username: string;\n  cover: string | Record<string, any> | null | 'None';\n  avatar: string | Record<string, any> | null | 'None';\n  description: string | null;\r\n  posts: number;\r\n  subscribers: number;\r\n  subscribed: boolean;\r\n  create_date: string;\r\n  icons: string[];\r\n  subscriptions: number;\r\n  links_count: number;\r\n  links: any[] | null;\r\n  my_profile: boolean;\r\n  permissions: {\n    posts: boolean;\n    comments: boolean;\n    new_chats: boolean;\n    music_upload: boolean;\n  };\n}\n\nexport interface SelectedFile {\n  uri: string;\n  type: string;\n  name: string;\n}\n\r\n// Helper functions\r\nexport const getImageUrl = async (path: string | null | undefined): Promise<string> => {\n  if (!path || path === 'None') {\n    return '';\n  }\n  return `https://elemsocial.com/Content/Avatars/${path}`;\n};\n\nexport const getAccountData = async () => {\n  const accountDataStr = await AsyncStorage.getItem('account_data');\n  if (accountDataStr) {\n    return JSON.parse(accountDataStr) as WebSocketMessage['accountData'];\n  }\n  return null;\n};\n\ntype AuthAction = 'auth/login' | 'auth/reg';\n\nconst sendAuthOverWebSocket = async (\n  action: AuthAction,\n  payload: Record<string, any>\n): Promise<LoginResponse> => {\n  await connectWebSocket(3, false);\n  const data = await webSocketService.send({\n    type: 'social',\n    action,\n    ...payload\n  }) as WebSocketMessage;\n\n  if (data.status === 'success' && data.S_KEY) {\n    await AsyncStorage.setItem('S-KEY', data.S_KEY);\n  }\n\n  return {\n    status: (data.status as 'success' | 'error') || 'error',\n    S_KEY: data.S_KEY,\n    accountID: data.accountData ? String(data.accountData.id) : undefined,\n    text: data.message\n  };\n};\n\nconst sendSocialAction = async (\n  action: string,\n  payload: Record<string, any>,\n  requireAuthorization = true\n): Promise<WebSocketMessage> => {\n  await connectWebSocket(3, requireAuthorization);\n  const data = await webSocketService.send({\n    type: 'social',\n    action,\n    ...payload\n  }) as WebSocketMessage | undefined;\n\n  if (!data) {\n    throw new Error(`No response for action: ${action}`);\n  }\n  if (data.status === 'error') {\n    throw new Error(data.message || `Action failed: ${action}`);\n  }\n  return data;\n};\n\nconst normalizePost = (post: any): PostResponse => ({\n  ID: String(post?.ID ?? post?.id ?? ''),\n  AuthorID: String(post?.AuthorID ?? post?.author_id ?? post?.authorId ?? post?.author?.id ?? ''),\n  Username: String(post?.Username ?? post?.username ?? post?.author?.username ?? ''),\n  Name: String(post?.Name ?? post?.name ?? post?.author?.name ?? ''),\n  Avatar:\n    post?.Avatar ??\n    post?.avatar ??\n    post?.author_data?.avatar ??\n    post?.author?.avatar ??\n    'None',\n  UserIcons: post?.UserIcons ?? post?.user_icons ?? post?.icons ?? post?.author?.icons ?? null,\n  Text: String(post?.Text ?? post?.text ?? ''),\n  Content: post?.Content ?? post?.content ?? null,\n  Date: String(post?.Date ?? post?.date ?? post?.create_date ?? ''),\n  Likes: Number(post?.Likes ?? post?.likes ?? 0),\n  Dislikes: Number(post?.Dislikes ?? post?.dislikes ?? 0),\n  Liked: post?.Liked ?? post?.liked ?? null,\n  Disliked: post?.Disliked ?? post?.disliked ?? null,\n  Comments: Number(post?.Comments ?? post?.comments ?? 0),\n  MyPost: Boolean(post?.MyPost ?? post?.my_post ?? false)\n});\n\nconst extractPostsFromSocialResponse = (data: WebSocketMessage): any[] => {\n  const payload: any = data.data ?? data;\n  if (Array.isArray(payload)) return payload;\n  if (Array.isArray(payload?.posts)) return payload.posts;\n  if (Array.isArray(payload?.items)) return payload.items;\n  if (Array.isArray(payload?.list)) return payload.list;\n  return [];\n};\n\nconst extractSinglePostFromSocialResponse = (data: WebSocketMessage): any | null => {\n  const payload: any = data.data ?? data;\n  if (payload?.post) return payload.post;\n  if (payload?.ID || payload?.id) return payload;\n  return null;\n};\n\nconst buildLoadPostsPayload = (params: Record<string, any>): Record<string, any> => ({\n  ...params,\n  payload: { ...params }\n});\n\nconst normalizeProfileTargetType = (type: ProfileData['type'] | number | string): 0 | 1 => {\n  if (type === 1 || type === '1' || type === 'channel') {\n    return 1;\n  }\n  return 0;\n};\n\nconst normalizeProfileData = (raw: any): ProfileData => {\n  const typeValue = raw?.type;\n  const normalizedType: 'user' | 'channel' =\n    typeValue === 1 || typeValue === '1' || typeValue === 'channel'\n      ? 'channel'\n      : 'user';\n\n  const rawIcons = Array.isArray(raw?.icons) ? raw.icons : [];\n  const icons = rawIcons\n    .map((icon: any) => {\n      if (typeof icon === 'string') return icon;\n      return icon?.icon_id ?? icon?.id ?? null;\n    })\n    .filter((icon: string | null): icon is string => Boolean(icon));\n\n  const permissionsRaw = raw?.permissions ?? {};\n\n  return {\n    type: normalizedType,\n    id: Number(raw?.id ?? 0),\n    name: String(raw?.name ?? ''),\n    username: String(raw?.username ?? ''),\n    cover: raw?.cover ?? 'None',\n    avatar: raw?.avatar ?? 'None',\n    description: raw?.description ?? null,\n    posts: Number(raw?.posts ?? 0),\n    subscribers: Number(raw?.subscribers ?? 0),\n    subscribed: Boolean(raw?.subscribed),\n    create_date: String(raw?.create_date ?? ''),\n    icons,\n    subscriptions: Number(raw?.subscriptions ?? 0),\n    links_count: Number(raw?.links_count ?? (Array.isArray(raw?.links) ? raw.links.length : 0)),\n    links: raw?.links ?? null,\n    my_profile: Boolean(raw?.my_profile),\n    permissions: {\n      posts: Boolean(permissionsRaw?.posts),\n      comments: Boolean(permissionsRaw?.comments),\n      new_chats: Boolean(permissionsRaw?.new_chats),\n      music_upload: Boolean(permissionsRaw?.music_upload)\n    }\n  };\n};\n\n// Auth API\nexport const authAPI = {\n  login: async (email: string, password: string): Promise<LoginResponse> => {\n    return sendAuthOverWebSocket('auth/login', {\n      email,\n      password,\n      device_type: 'browser',\n      device: 'Element Web 2.3'\n    });\n  },\n\n  register: async (\n    name: string,\n    username: string,\n    email: string,\n    password: string,\n    hCaptchaToken: string\n  ): Promise<LoginResponse> => {\n    return sendAuthOverWebSocket('auth/reg', {\n      name,\n      username,\n      email,\n      password,\n      accept: true,\n      h_captcha: hCaptchaToken\n    });\n  },\n};\n\r\n// Profile API\r\nexport const profileAPI = {\r\n  async getMyProfile(): Promise<ProfileData> {\r\n    try {\r\n      const response = await systemApi.get('/Connect.php');\r\n      const data = response.data;\r\n      \r\n      return {\r\n        type: 'user',\r\n        id: parseInt(data.ID || '0'),\r\n        name: data.Name || '',\r\n        username: data.Username || '',\r\n        cover: data.Cover || 'None',\r\n        avatar: data.Avatar || 'None',\r\n        description: data.Description || null,\r\n        posts: parseInt(data.Posts || '0'),\r\n        subscribers: parseInt(data.Subscribers || '0'),\r\n        subscribed: data.Subscribed === 'true',\r\n        create_date: data.CreateDate || '',\r\n        icons: data.Icons ? data.Icons.split(',') : [],\r\n        subscriptions: parseInt(data.Subscriptions || '0'),\r\n        links_count: parseInt(data.LinksCount || '0'),\r\n        links: data.Links || null,\r\n        my_profile: true,\r\n        permissions: {\r\n          posts: data.Posts_Permission === 'true',\r\n          comments: data.Comments_Permission === 'true',\r\n          new_chats: data.NewChats_Permission === 'true',\r\n          music_upload: data.MusicUpload_Permission === 'true'\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Error getting profile:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getProfile(username: string): Promise<ProfileData> {\n    try {\n      const response = await sendSocialAction(\n        'get_profile',\n        { username: username.replace(/^@+/, '').trim() },\n        false\n      );\n\n      const rawProfile = (response as any).data?.data ?? (response as any).data ?? response;\n      if (!rawProfile) {\n        throw new Error('Failed to fetch profile data');\n      }\n      return normalizeProfileData(rawProfile);\n    } catch (error) {\n      console.error('getProfile error:', error);\n      throw error;\n    }\n  },\n\r\n  updateProfile: async (data: Partial<ProfileData>): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    Object.entries(data).forEach(([key, value]) => {\r\n      if (value !== undefined && value !== null) {\r\n        formData.append(key, String(value));\r\n      }\r\n    });\r\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\r\n    return response.data;\r\n  },\r\n\r\n  uploadAvatar: async (file: File): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('avatar', file);\r\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\r\n    return response.data;\r\n  },\r\n\r\n  uploadCover: async (file: File): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('cover', file);\r\n    const response = await postsApi.post<ApiResponse>('/System/API/Connect.php', formData);\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// Posts API\r\nexport const postsAPI = {\n  // Load single post\n  loadPost: async (postId: string): Promise<PostResponse> => {\n    const response = await sendSocialAction(\n      'load_post',\n      { pid: Number(postId) },\n      false\n    );\n    const post = extractSinglePostFromSocialResponse(response);\n    if (!post) {\n      throw new Error('   ');\n    }\n    return normalizePost(post);\n  },\n\r\n  // Create post\r\n  createPost: async (\n    text: string,\n    files: SelectedFile[] = [],\n    clearMetadata = false,\n    censoring = false\n  ): Promise<string> => {\n    const formData = new FormData();\r\n    formData.append('Text', text);\r\n    \r\n    //    Files[]\r\n    files.forEach(file => {\n      formData.append('Files[]', {\n        uri: file.uri,\n        type: file.type,\n        name: file.name\n      } as any);\n    });\r\n\r\n    if (clearMetadata) {\r\n      formData.append('ClearMetadataIMG', 'true');\r\n    }\r\n    if (censoring) {\r\n      formData.append('CensoringIMG', 'true');\r\n    }\r\n\r\n    const response = await postsApi.post<{ Type: string; Content: string }>('/System/API/AddPost.php', formData);\n    if (response.data.Type === 'Verify') {\n      return response.data.Content;\n    }\n    throw new Error(response.data.Content || 'Failed to create post');\n  },\n\r\n  // Get single post\n  getPost: async (postId: string): Promise<PostResponse> => {\n    return postsAPI.loadPost(postId);\n  },\n\n  getPosts: async (type: 'LATEST' | 'REC' | 'SUBSCRIPTIONS', startIndex?: number): Promise<PostResponse[]> => {\n    try {\n      const postsTypeMap: Record<'LATEST' | 'REC' | 'SUBSCRIPTIONS', 'last' | 'rec' | 'subscribe'> = {\n        LATEST: 'last',\n        REC: 'rec',\n        SUBSCRIPTIONS: 'subscribe'\n      };\n\n      const response = await sendSocialAction(\n        'load_posts',\n        buildLoadPostsPayload({\n          posts_type: postsTypeMap[type],\n          start_index: startIndex ?? 0\n        })\n      );\n\n      const postsArray = extractPostsFromSocialResponse(response);\n      return postsArray.map(normalizePost);\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n      if (axios.isAxiosError(error)) {\n        console.error('Response:', error.response?.data);\r\n        console.error('Status:', error.response?.status);\r\n        console.error('Headers:', error.response?.headers);\r\n      }\r\n      return [];\r\n    }\r\n  },\n\n  getProfilePosts: async (\n    targetId: number | string,\n    targetType: ProfileData['type'] | number | string,\n    startIndex = 0\n  ): Promise<PostResponse[]> => {\n    const sKey = await AsyncStorage.getItem('S-KEY');\n    if (!sKey) {\n      throw new Error('Authorization required to load profile posts');\n    }\n\n    const normalizedTargetId = Number(targetId);\n    if (!Number.isFinite(normalizedTargetId) || normalizedTargetId <= 0) {\n      throw new Error('Invalid profile target_id');\n    }\n\n    const response = await sendSocialAction(\n      'load_posts',\n      buildLoadPostsPayload({\n        posts_type: 'profile',\n        target_id: normalizedTargetId,\n        target_type: normalizeProfileTargetType(targetType),\n        start_index: startIndex\n      }),\n      true\n    );\n\n    const postsArray = extractPostsFromSocialResponse(response);\n    return postsArray.map(normalizePost);\n  },\n\n  getProfilePostsByUsername: async (username: string, startIndex = 0): Promise<PostResponse[]> => {\n    const normalizedUsername = username.replace(/^@+/, '').trim();\n    if (!normalizedUsername) {\n      throw new Error('Username is required');\n    }\n\n    const profile = await profileAPI.getProfile(normalizedUsername);\n    if (!profile.posts) {\n      return [];\n    }\n\n    return postsAPI.getProfilePosts(profile.id, profile.type, startIndex);\n  },\n\n  getUserPosts: async (userId: string, startIndex?: number): Promise<PostResponse[]> => {\n    try {\r\n      const formData = new FormData();\r\n      formData.append('UserID', userId);\r\n      if (startIndex !== undefined) {\r\n        formData.append('StartIndex', startIndex.toString());\r\n      }\r\n\r\n      const url = '/System/API/LoadPosts.php?F=USER';\r\n      console.log('Fetching user posts, UserID:', userId, 'StartIndex:', startIndex);\r\n      \r\n      const response = await postsApi.post<any>(url, formData);\r\n      console.log('User posts raw response:', response.data);\r\n\r\n      // Ensure we have an array of posts\r\n      const postsArray = Array.isArray(response.data) ? response.data : [];\r\n\r\n      // Map and validate each post\r\n      const posts = postsArray.map(post => ({\r\n        ID: String(post.ID || ''),\r\n        AuthorID: String(post.AuthorID || ''),\r\n        Username: String(post.Username || ''),\r\n        Name: String(post.Name || ''),\r\n        Avatar: post.Avatar || 'None',\r\n        UserIcons: post.UserIcons || null,\r\n        Text: String(post.Text || ''),\r\n        Content: post.Content || null,\r\n        Date: String(post.Date || ''),\r\n        Likes: Number(post.Likes) || 0,\r\n        Dislikes: Number(post.Dislikes) || 0,\r\n        Liked: post.Liked || null,\r\n        Disliked: post.Disliked || null,\r\n        Comments: Number(post.Comments) || 0,\r\n        MyPost: Boolean(post.MyPost)\r\n      }));\r\n      \r\n      console.log('User posts processed:', posts);\r\n      return posts;\r\n    } catch (error) {\r\n      console.error('Error fetching user posts:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  // Post interactions (like, dislike, delete)\r\n  interactWithPost: async (\r\n    action: 'LIKE' | 'DISLIKE' | 'DELETE',\r\n    postId: string\r\n  ): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('PostID', postId);\r\n\r\n    const response = await postsApi.post<ApiResponse>(`/System/API/PostInteraction.php?F=${action}`, formData);\r\n    return response.data;\r\n  },\r\n\r\n  // Add comment to post\r\n  addComment: async (postId: string, text: string): Promise<ApiResponse> => {\r\n    const formData = new FormData();\r\n    formData.append('PostID', postId);\r\n    formData.append('Text', text);\r\n\r\n    const response = await postsApi.post<ApiResponse>('/System/API/PostInteraction.php?F=POST_COMMENT', formData);\r\n    return response.data;\r\n  },\r\n\r\n  // Get post comments\r\n  getComments: async (postId: string): Promise<CommentResponse[]> => {\r\n    const formData = new FormData();\r\n    formData.append('PostID', postId);\r\n\r\n    const response = await postsApi.post<CommentResponse[]>('/System/API/PostInteraction.php?F=LOAD_COMMENT', formData);\r\n    return response.data;\r\n  },\r\n};\r\n\r\n","import React, { useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  Animated,\n  Dimensions,\n  Platform,\n} from 'react-native';\n\ninterface ErrorMessageProps {\n  message: string;\n  onClose?: () => void;\n}\n\nconst { height } = Dimensions.get('window');\n\nconst ErrorMessage: React.FC<ErrorMessageProps> = ({ message, onClose }) => {\n  const translateY = new Animated.Value(height);\n\n  useEffect(() => {\n    if (message) {\n      //  \n      Animated.spring(translateY, {\n        toValue: 0,\n        useNativeDriver: true,\n        tension: 50,\n        friction: 7,\n      }).start();\n    }\n  }, [message]);\n\n  const handleClose = () => {\n    //  \n    Animated.timing(translateY, {\n      toValue: height,\n      duration: 300,\n      useNativeDriver: true,\n    }).start(() => {\n      if (onClose) onClose();\n    });\n  };\n\n  if (!message) return null;\n\n  return (\n    <Modal\n      transparent\n      visible={!!message}\n      animationType=\"fade\"\n      onRequestClose={handleClose}\n    >\n      <View style={styles.overlay}>\n        <Animated.View\n          style={[\n            styles.container,\n            {\n              transform: [{ translateY }],\n            },\n          ]}\n        >\n          <View style={styles.content}>\n            <Text style={styles.title}></Text>\n            <Text style={styles.text}>{message}</Text>\n            <TouchableOpacity\n              style={styles.button}\n              onPress={handleClose}\n              activeOpacity={0.8}\n            >\n              <Text style={styles.buttonText}>OK</Text>\n            </TouchableOpacity>\n          </View>\n        </Animated.View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  container: {\n    width: '90%',\n    maxWidth: 400,\n    backgroundColor: '#fff',\n    borderRadius: 12,\n    ...(Platform.OS === 'web' ? {\n      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n    } : {\n      shadowColor: '#000',\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.25,\n      shadowRadius: 3.84,\n      elevation: 5,\n    }),\n  },\n  content: {\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#c62828',\n    marginBottom: 10,\n    textAlign: 'center',\n  },\n  text: {\n    fontSize: 16,\n    color: '#333',\n    marginBottom: 20,\n    textAlign: 'center',\n    lineHeight: 22,\n  },\n  button: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 12,\n    paddingHorizontal: 30,\n    borderRadius: 8,\n    alignSelf: 'center',\n  },\n  buttonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default ErrorMessage; ","import React, { useState, useContext } from 'react';\r\nimport {\r\n  View,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Text,\r\n  StyleSheet,\r\n  Alert,\r\n  ActivityIndicator,\r\n  Platform,\r\n} from 'react-native';\r\nimport { authAPI } from '../services/api';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { CommonActions, useNavigation } from '@react-navigation/native';\r\nimport { AuthContext } from '../navigation';\r\nimport HCaptcha from '@hcaptcha/react-hcaptcha';\r\nimport ErrorMessage from '../components/ErrorMessage';\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n    backgroundColor: '#fff',\r\n  },\r\n  title: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    marginBottom: 30,\r\n    textAlign: 'center',\r\n  },\r\n  input: {\r\n    height: 50,\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 8,\r\n    paddingHorizontal: 15,\r\n    marginBottom: 15,\r\n    fontSize: 16,\r\n    backgroundColor: '#fff',\r\n    ...(Platform.OS === 'web' && {\r\n      outlineStyle: 'none',\r\n      ':focus': {\r\n        borderColor: '#007AFF',\r\n      },\r\n    }),\r\n  },\r\n  buttonContainer: {\r\n    pointerEvents: 'auto',\r\n    marginBottom: 15,\r\n  },\r\n  button: {\r\n    height: 50,\r\n    backgroundColor: '#007AFF',\r\n    borderRadius: 8,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    ...(Platform.OS === 'web' && {\r\n      cursor: 'pointer',\r\n      ':hover': {\r\n        backgroundColor: '#0056b3',\r\n      },\r\n    }),\r\n  },\r\n  buttonDisabled: {\r\n    backgroundColor: '#ccc',\r\n  },\r\n  buttonText: {\r\n    color: 'white',\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n  },\r\n  switchText: {\r\n    color: '#007AFF',\r\n    textAlign: 'center',\r\n    marginTop: 15,\r\n    fontSize: 16,\r\n  },\r\n  stepText: {\r\n    fontSize: 18,\r\n    marginBottom: 15,\r\n    textAlign: 'center',\r\n  },\r\n});\r\n\r\nconst LoginScreen = () => {\n  const navigation = useNavigation();\n  const { setIsLoggedIn } = useContext(AuthContext);\n  const [isRegistering, setIsRegistering] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // Login state\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loginError, setLoginError] = useState('');\r\n\r\n  // Registration state\r\n  const [name, setName] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [regEmail, setRegEmail] = useState('');\r\n  const [regPassword, setRegPassword] = useState('');\r\n  const [captchaToken, setCaptchaToken] = useState('');\r\n  const [registrationError, setRegistrationError] = useState('');\r\n\r\n  const handleLogin = async () => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!email) {\r\n      setLoginError(' ');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(email)) {\r\n      setLoginError('  email ');\r\n      return;\r\n    }\r\n    if (!password) {\r\n      setLoginError(' ');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await authAPI.login(email.trim(), password);\r\n      \r\n      if (response?.status === 'success' && response?.S_KEY) {\r\n        await AsyncStorage.setItem('S-KEY', response.S_KEY);\r\n        setIsLoggedIn(true);\r\n      } else {\r\n        setLoginError(response?.text || ' email  ');\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      setLoginError('-   ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRegister = async () => {\r\n    setRegistrationError('');\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    \r\n    // \r\n    if (!name.trim()) {\r\n      setRegistrationError(' ');\r\n      return;\r\n    }\r\n    if (!username.trim()) {\r\n      setRegistrationError('  ');\r\n      return;\r\n    }\r\n    if (!regEmail.trim()) {\r\n      setRegistrationError(' email');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(regEmail.trim())) {\r\n      setRegistrationError('  email ');\r\n      return;\r\n    }\r\n    if (!regPassword.trim()) {\r\n      setRegistrationError(' ');\r\n      return;\r\n    }\r\n    if (!captchaToken) {\r\n      setRegistrationError(' ');\r\n      return;\r\n    }\r\n\r\n    try {\n      setLoading(true);\n      const data = await authAPI.register(\n        name.trim(),\n        username.trim(),\n        regEmail.trim(),\n        regPassword.trim(),\n        captchaToken\n      );\n      \r\n      if (data.status === 'success' && data.S_KEY) {\n        await AsyncStorage.setItem('S-KEY', data.S_KEY);\n        setIsLoggedIn(true);\n      } else {\n        setRegistrationError(data.text || '  ');\r\n      }\r\n    } catch (error) {\r\n      console.error('Registration error:', error);\r\n      setRegistrationError('-   ');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onCaptchaVerify = (token: string) => {\r\n    setCaptchaToken(token);\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>Sigma Element Client</Text>\r\n      \r\n      {isRegistering ? (\r\n        <>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"\"\r\n            value={name}\r\n            onChangeText={setName}\r\n            editable={!loading}\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\" \"\r\n            value={username}\r\n            onChangeText={setUsername}\r\n            editable={!loading}\r\n            autoCapitalize=\"none\"\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Email\"\r\n            value={regEmail}\r\n            onChangeText={setRegEmail}\r\n            editable={!loading}\r\n            keyboardType=\"email-address\"\r\n            autoCapitalize=\"none\"\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"\"\r\n            value={regPassword}\r\n            onChangeText={setRegPassword}\r\n            secureTextEntry\r\n            editable={!loading}\r\n          />\r\n          <HCaptcha\r\n            sitekey=\"29c6b1c2-7e78-43ec-8bf8-5de49c58c54a\"\r\n            onVerify={onCaptchaVerify}\r\n          />\r\n          <ErrorMessage \r\n            message={registrationError} \r\n            onClose={() => setRegistrationError('')}\r\n          />\r\n          <View style={styles.buttonContainer}>\r\n            <TouchableOpacity\r\n              style={[styles.button, loading && styles.buttonDisabled]}\r\n              onPress={handleRegister}\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <ActivityIndicator color=\"white\" />\r\n              ) : (\r\n                <Text style={styles.buttonText}></Text>\r\n              )}\r\n            </TouchableOpacity>\r\n          </View>\r\n          <TouchableOpacity onPress={() => {\r\n            setIsRegistering(false);\r\n            setRegistrationError('');\r\n            setLoginError('');\r\n          }}>\r\n            <Text style={styles.switchText}>  ? </Text>\r\n          </TouchableOpacity>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\" \"\r\n            value={email}\r\n            onChangeText={setEmail}\r\n            autoCapitalize=\"none\"\r\n            keyboardType=\"email-address\"\r\n            editable={!loading}\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"\"\r\n            value={password}\r\n            onChangeText={setPassword}\r\n            secureTextEntry\r\n            editable={!loading}\r\n          />\r\n          <ErrorMessage \r\n            message={loginError} \r\n            onClose={() => setLoginError('')}\r\n          />\r\n          <View style={styles.buttonContainer}>\r\n            <TouchableOpacity\r\n              style={[styles.button, loading && styles.buttonDisabled]}\r\n              onPress={handleLogin}\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <ActivityIndicator color=\"white\" />\r\n              ) : (\r\n                <Text style={styles.buttonText}></Text>\r\n              )}\r\n            </TouchableOpacity>\r\n          </View>\r\n          <TouchableOpacity onPress={() => {\r\n            setIsRegistering(true);\r\n            setRegistrationError('');\r\n            setLoginError('');\r\n          }}>\r\n            <Text style={styles.switchText}> ? </Text>\r\n          </TouchableOpacity>\r\n        </>\r\n      )}\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default LoginScreen;\r\n\r\n","export const WS_MESSAGE_TYPES = {\n    SOCIAL: 'social',\n    MESSENGER: 'messenger',\n    KEY_EXCHANGE: 'key_exchange',\n    AES_KEY: 'aes_key'\n} as const;\n\nexport const WS_ACTIONS = {\n    GET_ONLINE_USERS: 'get_online_users',\n    USER_STATUS: 'user_status',\n    NEW_POST: 'new_post',\n    UPLOAD_FILE: 'upload_file',\n    DOWNLOAD_FILE: 'download_file'\n} as const;\n\nexport const WS_USER_STATUS = {\n    ONLINE: 'online',\n    OFFLINE: 'offline'\n} as const; ","export const formatFileSize = (bytes: number): string => {\n    if (bytes === 0) return '0 ';\n    const k = 1024;\n    const sizes = ['', '', '', '', ''];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;\n};\n\nexport const getFileExtension = (filename: string): string => {\n    return filename.slice((filename.lastIndexOf('.') - 1 >>> 0) + 2);\n};\n\nexport const getMimeType = (filename: string): string => {\n    const ext = getFileExtension(filename).toLowerCase();\n    const mimeTypes: { [key: string]: string } = {\n        'txt': 'text/plain',\n        'pdf': 'application/pdf',\n        'doc': 'application/msword',\n        'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n        'xls': 'application/vnd.ms-excel',\n        'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        'png': 'image/png',\n        'jpg': 'image/jpeg',\n        'jpeg': 'image/jpeg',\n        'gif': 'image/gif',\n        'svg': 'image/svg+xml',\n        'mp3': 'audio/mpeg',\n        'mp4': 'video/mp4',\n        'wav': 'audio/wav',\n        'avi': 'video/x-msvideo',\n        'zip': 'application/zip',\n        'rar': 'application/x-rar-compressed',\n        '7z': 'application/x-7z-compressed'\n    };\n    return mimeTypes[ext] || 'application/octet-stream';\n};\n\nexport const isImageFile = (filename: string): boolean => {\n    const mimeType = getMimeType(filename);\n    return mimeType.startsWith('image/');\n};\n\nexport const generateFileId = (): string => {\n    return Math.random().toString(36).substring(2, 15) + \n           Math.random().toString(36).substring(2, 15);\n};\n\nexport const splitFileIntoChunks = async (file: File, chunkSize: number = 1024 * 1024): Promise<string[]> => {\n    const chunks: string[] = [];\n    const totalChunks = Math.ceil(file.size / chunkSize);\n\n    for (let i = 0; i < totalChunks; i++) {\n        const start = i * chunkSize;\n        const end = Math.min(start + chunkSize, file.size);\n        const chunk = file.slice(start, end);\n        const arrayBuffer = await chunk.arrayBuffer();\n        const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n        chunks.push(base64);\n    }\n\n    return chunks;\n};\n\nexport const assembleChunks = (chunks: string[]): ArrayBuffer => {\n    const binaryString = chunks.map(chunk => atob(chunk)).join('');\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n};\n\nexport const downloadFile = (data: ArrayBuffer, filename: string, mimeType: string): void => {\n    const blob = new Blob([data], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n}; ","import webSocketService from './WebSocket';\nimport { WS_MESSAGE_TYPES, WS_ACTIONS } from '../constants/websocket';\nimport { FileUploadMessage, FileDownloadMessage } from '../types/websocket';\nimport { \n    generateFileId, \n    splitFileIntoChunks, \n    assembleChunks, \n    getMimeType, \n    downloadFile \n} from '../utils/fileUtils';\n\nclass FileService {\n    private static instance: FileService;\n    private ws = webSocketService;\n    private fileDownloadCallbacks: Map<string, (data: ArrayBuffer) => void> = new Map();\n    private fileChunks: Map<string, string[]> = new Map();\n\n    private constructor() {\n        this.setupMessageHandlers();\n    }\n\n    public static getInstance(): FileService {\n        if (!FileService.instance) {\n            FileService.instance = new FileService();\n        }\n        return FileService.instance;\n    }\n\n    private setupMessageHandlers(): void {\n        this.ws.addMessageHandler(WS_MESSAGE_TYPES.MESSENGER, (message) => {\n            if (message.action === WS_ACTIONS.DOWNLOAD_FILE) {\n                const downloadMessage = message as FileDownloadMessage;\n                this.handleFileChunk(downloadMessage);\n            }\n        });\n    }\n\n    private handleFileChunk(message: FileDownloadMessage): void {\n        const { fileId, chunkNumber, totalChunks, chunkData } = message.data;\n        \n        if (!this.fileChunks.has(fileId)) {\n            this.fileChunks.set(fileId, new Array(totalChunks).fill(''));\n        }\n\n        const chunks = this.fileChunks.get(fileId)!;\n        chunks[chunkNumber - 1] = chunkData;\n\n        // ,    \n        if (!chunks.includes('')) {\n            const fileData = assembleChunks(chunks);\n            const callback = this.fileDownloadCallbacks.get(fileId);\n            if (callback) {\n                callback(fileData);\n                this.fileDownloadCallbacks.delete(fileId);\n            }\n            this.fileChunks.delete(fileId);\n        }\n    }\n\n    public async uploadFile(file: File): Promise<string> {\n        const fileId = generateFileId();\n        const chunks = await splitFileIntoChunks(file);\n        \n        //    \n        const uploadMessage: FileUploadMessage = {\n            type: WS_MESSAGE_TYPES.MESSENGER,\n            action: WS_ACTIONS.UPLOAD_FILE,\n            data: {\n                fileId,\n                fileName: file.name,\n                fileSize: file.size,\n                mimeType: getMimeType(file.name)\n            }\n        };\n        await this.ws.send(uploadMessage);\n\n        //   \n        for (let i = 0; i < chunks.length; i++) {\n            const downloadMessage: FileDownloadMessage = {\n                type: WS_MESSAGE_TYPES.MESSENGER,\n                action: WS_ACTIONS.DOWNLOAD_FILE,\n                data: {\n                    fileId,\n                    chunkNumber: i + 1,\n                    totalChunks: chunks.length,\n                    chunkData: chunks[i]\n                }\n            };\n            await this.ws.send(downloadMessage);\n        }\n\n        return fileId;\n    }\n\n    public downloadFile(fileId: string, fileName: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            this.fileDownloadCallbacks.set(fileId, (data: ArrayBuffer) => {\n                try {\n                    downloadFile(data, fileName, getMimeType(fileName));\n                    resolve();\n                } catch (error) {\n                    reject(error);\n                }\n            });\n\n            //  \n            const downloadMessage: FileDownloadMessage = {\n                type: WS_MESSAGE_TYPES.MESSENGER,\n                action: WS_ACTIONS.DOWNLOAD_FILE,\n                data: {\n                    fileId,\n                    chunkNumber: 0,\n                    totalChunks: 0,\n                    chunkData: ''\n                }\n            };\n            this.ws.send(downloadMessage);\n        });\n    }\n}\n\nexport default FileService; ","import React, { useRef, useEffect } from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Animated,\n  Dimensions,\n  Platform,\n  Linking\n} from 'react-native';\n\ninterface LinkConfirmModalProps {\n  visible: boolean;\n  url: string;\n  onClose: () => void;\n}\n\nconst LinkConfirmModal: React.FC<LinkConfirmModalProps> = ({ visible, url, onClose }) => {\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const scaleAnim = useRef(new Animated.Value(0.9)).current;\n  const translateYAnim = useRef(new Animated.Value(20)).current;\n\n  useEffect(() => {\n    if (visible) {\n      //     \n      translateYAnim.setValue(20);\n      scaleAnim.setValue(0.9);\n      fadeAnim.setValue(0);\n      \n      //  \n      Animated.parallel([\n        Animated.timing(fadeAnim, {\n          toValue: 1,\n          duration: 200,\n          useNativeDriver: true,\n        }),\n        Animated.spring(scaleAnim, {\n          toValue: 1,\n          friction: 8,\n          tension: 40,\n          useNativeDriver: true,\n        }),\n        Animated.spring(translateYAnim, {\n          toValue: 0,\n          friction: 8,\n          tension: 40,\n          useNativeDriver: true,\n        }),\n      ]).start();\n    }\n  }, [visible]);\n\n  const handleClose = (callback?: () => void) => {\n    //  \n    Animated.parallel([\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: 150,\n        useNativeDriver: true,\n      }),\n      Animated.spring(scaleAnim, {\n        toValue: 0.9,\n        friction: 8,\n        tension: 40,\n        useNativeDriver: true,\n      }),\n      Animated.spring(translateYAnim, {\n        toValue: 20,\n        friction: 8,\n        tension: 40,\n        useNativeDriver: true,\n      }),\n    ]).start(() => {\n      if (callback) callback();\n    });\n  };\n\n  const handleConfirm = async () => {\n    try {\n      //   \n      await Linking.openURL(url);\n      //    \n      handleClose(() => {\n        //        \n        onClose();\n      });\n    } catch (error) {\n      console.error('   :', error);\n      onClose();\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      statusBarTranslucent\n      animationType=\"none\"\n      onRequestClose={() => handleClose(onClose)}\n    >\n      <Animated.View \n        style={[\n          styles.overlay,\n          { opacity: fadeAnim }\n        ]}\n      >\n        <TouchableOpacity \n          style={StyleSheet.absoluteFill} \n          onPress={() => handleClose(onClose)}\n          activeOpacity={1}\n        />\n        \n        <Animated.View\n          style={[\n            styles.content,\n            {\n              opacity: fadeAnim,\n              transform: [\n                { scale: scaleAnim },\n                { translateY: translateYAnim }\n              ]\n            }\n          ]}\n        >\n          <View style={styles.header}>\n            <Text style={styles.title}>  </Text>\n          </View>\n\n          <View style={styles.body}>\n            <Text style={styles.message}>\n                   :\n            </Text>\n            <Text style={styles.url} numberOfLines={2}>\n              {url}\n            </Text>\n            <Text style={styles.warning}>\n              ,     .\n            </Text>\n          </View>\n\n          <View style={styles.buttons}>\n            <TouchableOpacity\n              style={[styles.button, styles.cancelButton]}\n              onPress={() => handleClose(onClose)}\n            >\n              <Text style={styles.cancelButtonText}></Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[styles.button, styles.confirmButton]}\n              onPress={handleConfirm}\n            >\n              <Text style={styles.confirmButtonText}></Text>\n            </TouchableOpacity>\n          </View>\n        </Animated.View>\n      </Animated.View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  content: {\n    backgroundColor: '#fff',\n    borderRadius: 20,\n    width: Math.min(400, Dimensions.get('window').width - 40),\n    maxWidth: '90%',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.25,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 5,\n      },\n    }),\n  },\n  header: {\n    padding: 20,\n    paddingBottom: 15,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#000',\n    textAlign: 'center',\n  },\n  body: {\n    padding: 20,\n    paddingTop: 0,\n  },\n  message: {\n    fontSize: 16,\n    color: '#333',\n    marginBottom: 10,\n  },\n  url: {\n    fontSize: 15,\n    color: '#007AFF',\n    marginBottom: 12,\n    paddingHorizontal: 10,\n    paddingVertical: 8,\n    backgroundColor: '#F0F0F0',\n    borderRadius: 8,\n  },\n  warning: {\n    fontSize: 14,\n    color: '#666',\n  },\n  buttons: {\n    flexDirection: 'row',\n    padding: 15,\n    gap: 10,\n  },\n  button: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 12,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: '#F0F0F0',\n  },\n  confirmButton: {\n    backgroundColor: '#007AFF',\n  },\n  cancelButtonText: {\n    color: '#666',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  confirmButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n});\n\nexport default LinkConfirmModal; ","import React, { useState } from 'react';\nimport { Text, StyleSheet, TextStyle } from 'react-native';\nimport LinkConfirmModal from './LinkConfirmModal';\n\ninterface LinkTextProps {\n  text: string;\n  style?: TextStyle;\n}\n\nconst LinkText: React.FC<LinkTextProps> = ({ text, style }) => {\n  const [selectedUrl, setSelectedUrl] = useState<string | null>(null);\n\n  const renderTextWithLinks = (text: string) => {\n    //     \n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n    const parts = text.split(urlRegex);\n\n    return parts.map((part, index) => {\n      if (part.match(urlRegex)) {\n        return (\n          <Text\n            key={index}\n            style={styles.link}\n            onPress={() => setSelectedUrl(part)}\n          >\n            {part}\n          </Text>\n        );\n      }\n      return <Text key={index}>{part}</Text>;\n    });\n  };\n\n  return (\n    <>\n      <Text style={[style]}>\n        {renderTextWithLinks(text)}\n      </Text>\n\n      <LinkConfirmModal\n        visible={!!selectedUrl}\n        url={selectedUrl || ''}\n        onClose={() => setSelectedUrl(null)}\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  link: {\n    color: '#007AFF',\n    fontWeight: '500',\n  },\n});\n\nexport default LinkText; ","export interface ElementImageData {\n  path: string;\n  file?: string;\n  simple?: string;\n}\n\nfunction normalizePath(path: string): string {\n  return path.replace(/^\\/+|\\/+$/g, '').toLowerCase();\n}\n\nexport function parseElementImage(input: unknown, fallbackPath?: string): ElementImageData | null {\n  if (!input) return null;\n\n  if (typeof input === 'string') {\n    const value = input.trim();\n    if (!value || value === 'None' || value === 'null') return null;\n\n    if (/^https?:\\/\\//i.test(value)) {\n      return { path: '__absolute__', file: value };\n    }\n\n    if (/^\\/?files\\//i.test(value)) {\n      const normalized = value.replace(/^\\/+/, '');\n      return { path: '__absolute__', file: `https://elemsocial.com/${normalized}` };\n    }\n\n    try {\n      const parsed = JSON.parse(value);\n      return parseElementImage(parsed, fallbackPath);\n    } catch {\n      try {\n        const decoded = decodeURIComponent(value);\n        if (decoded !== value) {\n          const parsed = JSON.parse(decoded);\n          return parseElementImage(parsed, fallbackPath);\n        }\n      } catch {\n        // ignore\n      }\n\n      if (value.startsWith('{') || value.startsWith('[') || value.startsWith('%7B') || value.startsWith('%5B')) {\n        return null;\n      }\n\n      if (fallbackPath) {\n        return { path: normalizePath(fallbackPath), file: value };\n      }\n      return null;\n    }\n  }\n\n  if (typeof input !== 'object') return null;\n\n  const obj = input as Record<string, unknown>;\n  const nestedAvatar = obj.avatar && typeof obj.avatar === 'object' ? (obj.avatar as Record<string, unknown>) : null;\n  const pathRaw = obj.path ?? obj.Path ?? nestedAvatar?.path ?? nestedAvatar?.Path ?? fallbackPath;\n  const fileRaw = obj.file ?? obj.File ?? nestedAvatar?.file ?? nestedAvatar?.File;\n  const simpleRaw = obj.simple ?? obj.Simple ?? obj.simple_image;\n\n  const path = typeof pathRaw === 'string' && pathRaw ? normalizePath(pathRaw) : '';\n  const file = typeof fileRaw === 'string' && fileRaw ? fileRaw : undefined;\n  const simple = typeof simpleRaw === 'string' && simpleRaw ? simpleRaw : undefined;\n\n  if (!path && !file && !simple) return null;\n  return { path: path || normalizePath(fallbackPath || ''), file, simple };\n}\n\nexport function toElementImageUrl(image: ElementImageData | null): string | null {\n  if (!image) return null;\n\n  if (image.path === '__absolute__' && image.file) {\n    return image.file;\n  }\n\n  if (image.simple) {\n    return `https://elemsocial.com/Content/Simple/${image.simple}`;\n  }\n\n  if (image.path && image.file) {\n    const normalizedPath = normalizePath(image.path);\n\n    if (/^https?:\\/\\//i.test(image.file)) {\n      return image.file;\n    }\n    if (/^\\/?files\\//i.test(image.file)) {\n      return `https://elemsocial.com/${image.file.replace(/^\\/+/, '')}`;\n    }\n\n    if (normalizedPath === 'avatars' || normalizedPath === 'avatar') {\n      return `https://elemsocial.com/Content/Avatars/${image.file}`;\n    }\n\n    if (normalizedPath === 'covers' || normalizedPath === 'cover') {\n      return `https://elemsocial.com/Content/Covers/${image.file}`;\n    }\n\n    return `https://elemsocial.com/files/${normalizedPath}/${image.file}`;\n  }\n\n  return null;\n}\n","export const DEFAULT_AVATAR = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIHJ4PSIxMDAiIGZpbGw9IiNFMEUwRTAiLz48cGF0aCBkPSJNMTAwIDEwMEM4OS40NTcyIDEwMCA4MSA5MS41NDI4IDgxIDgxQzgxIDcwLjQ1NzIgODkuNDU3MiA2MiAxMDAgNjJDMTEwLjU0MyA2MiAxMTkgNzAuNDU3MiAxMTkgODFDMTE5IDkxLjU0MjggMTEwLjU0MyAxMDAgMTAwIDEwMFpNMTAwIDEwMEM3Mi4zODU4IDEwMCA1MCAxMjIuMzg2IDUwIDE1MEg1MEgxNTBIMTUwQzE1MCAxMjIuMzg2IDEyNy42MTQgMTAwIDEwMCAxMDBaIiBmaWxsPSIjOTA5MDkwIi8+PC9zdmc+';\n","import { useEffect, useMemo, useState } from 'react';\nimport webSocketService from '../services/WebSocket';\nimport { ElementImageData, toElementImageUrl } from '../utils/elementImage';\n\nconst imageBlobCache = new Map<string, string>();\n\nfunction toUint8Array(data: unknown): Uint8Array | null {\n  if (!data) return null;\n  if (data instanceof Uint8Array) return data;\n  if (data instanceof ArrayBuffer) return new Uint8Array(data);\n  if (Array.isArray(data) && data.every((v) => typeof v === 'number')) {\n    return new Uint8Array(data);\n  }\n  if (typeof data === 'object' && data !== null) {\n    const maybeBuffer = (data as { buffer?: ArrayBuffer }).buffer;\n    if (maybeBuffer instanceof ArrayBuffer) {\n      return new Uint8Array(maybeBuffer);\n    }\n  }\n  return null;\n}\n\nfunction extractImageBytes(response: any): Uint8Array | null {\n  const simple = toUint8Array(response?.simple);\n  if (simple) return simple;\n\n  const file = toUint8Array(response?.file);\n  if (file) return file;\n\n  return null;\n}\n\nexport function useWsImage(image: ElementImageData | null): string | null {\n  const fallbackUrl = useMemo(() => toElementImageUrl(image), [image]);\n  const [uri, setUri] = useState<string | null>(fallbackUrl);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    if (!image) {\n      setUri(null);\n      return;\n    }\n\n    if (image.path === '__absolute__') {\n      setUri(fallbackUrl);\n      return;\n    }\n\n    const cacheKey = `${image.path}:${image.file ?? ''}:${image.simple ?? ''}`;\n    const cached = imageBlobCache.get(cacheKey);\n    if (cached) {\n      setUri(cached);\n      return;\n    }\n\n    setUri(fallbackUrl);\n\n    if (!image.file && !image.simple) {\n      return;\n    }\n\n    webSocketService\n      .send({\n        type: 'download',\n        action: 'image',\n        image: {\n          path: image.path,\n          file: image.file ?? '',\n          simple: image.simple ?? ''\n        },\n        lossless: false\n      } as any)\n      .then((response: any) => {\n        if (cancelled) return;\n\n        const bytes = extractImageBytes(response);\n        if (!bytes || bytes.byteLength === 0) return;\n\n        const mimeType =\n          (typeof response?.mime === 'string' && response.mime) ||\n          (typeof response?.contentType === 'string' && response.contentType) ||\n          (typeof response?.content_type === 'string' && response.content_type) ||\n          'image/*';\n        const blob = new Blob([bytes], { type: mimeType });\n        const blobUrl = URL.createObjectURL(blob);\n        imageBlobCache.set(cacheKey, blobUrl);\n        setUri(blobUrl);\n      })\n      .catch(() => {\n        if (!cancelled) {\n          setUri(fallbackUrl);\n        }\n      });\n\n    return () => {\n      cancelled = true;\n    };\n  }, [fallbackUrl, image]);\n\n  return uri;\n}\n","import React, { useEffect, useState, useRef } from 'react';\nimport {\n  View,\n  Text,\n  Modal,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  ActivityIndicator,\n  Dimensions,\n  Animated,\n  Platform,\n  ScrollView,\n  TouchableWithoutFeedback\n} from 'react-native';\nimport { profileAPI, ProfileData } from '../services/api';\nimport LinkText from './LinkText';\nimport { parseElementImage, toElementImageUrl } from '../utils/elementImage';\nimport { DEFAULT_AVATAR } from '../constants/images';\nimport { useWsImage } from '../hooks/useWsImage';\n\nconst { width: SCREEN_WIDTH, height: SCREEN_HEIGHT } = Dimensions.get('window');\nconst MODAL_PADDING = 20;\nconst MODAL_WIDTH = Platform.select({\n  web: Math.min(600, SCREEN_WIDTH - MODAL_PADDING * 2),\n  default: SCREEN_WIDTH - MODAL_PADDING * 2\n});\n\ninterface ProfileModalProps {\n  visible: boolean;\n  username: string;\n  onClose: () => void;\n}\n\nconst ProfileModal: React.FC<ProfileModalProps> = ({ visible, username, onClose }) => {\n  const [profile, setProfile] = useState<ProfileData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  \n  //  \n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const scaleAnim = useRef(new Animated.Value(0.9)).current;\n  const translateYAnim = useRef(new Animated.Value(50)).current;\n\n  useEffect(() => {\n    if (visible) {\n      setLoading(true);\n      setError('');\n      loadProfile();\n      \n      //   \n      Animated.parallel([\n        Animated.timing(fadeAnim, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: true,\n        }),\n        Animated.timing(scaleAnim, {\n          toValue: 1,\n          duration: 300,\n          useNativeDriver: true,\n        }),\n        Animated.timing(translateYAnim, {\n          toValue: 0,\n          duration: 300,\n          useNativeDriver: true,\n        })\n      ]).start();\n    } else {\n      //  \n      Animated.parallel([\n        Animated.timing(fadeAnim, {\n          toValue: 0,\n          duration: 250,\n          useNativeDriver: true,\n        }),\n        Animated.timing(scaleAnim, {\n          toValue: 0.9,\n          duration: 250,\n          useNativeDriver: true,\n        }),\n        Animated.timing(translateYAnim, {\n          toValue: 50,\n          duration: 250,\n          useNativeDriver: true,\n        })\n      ]).start(() => {\n        setProfile(null);\n        setError('');\n      });\n    }\n  }, [visible, username]);\n\n  const handleClose = () => {\n    //   \n    Animated.parallel([\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: 250,\n        useNativeDriver: true,\n      }),\n      Animated.timing(scaleAnim, {\n        toValue: 0.9,\n        duration: 250,\n        useNativeDriver: true,\n      }),\n      Animated.timing(translateYAnim, {\n        toValue: 50,\n        duration: 250,\n        useNativeDriver: true,\n      })\n    ]).start(() => {\n      onClose();\n    });\n  };\n\n  const loadProfile = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const normalizedUsername = username.replace(/^@+/, '').trim();\n      if (!normalizedUsername) {\n        throw new Error('  username');\n      }\n\n      const data = await profileAPI.getProfile(normalizedUsername);\n      setProfile(data);\n    } catch (error) {\n      console.error('  :', error);\n      setError('   ');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderStats = () => {\n    if (!profile) return null;\n\n    const stats = [\n      { label: '', value: profile.posts },\n      { label: '', value: profile.subscribers },\n      { label: '', value: profile.subscriptions }\n    ];\n\n    return (\n      <View style={styles.stats}>\n        {stats.map((stat) => (\n          <View key={stat.label} style={styles.statItem}>\n            <Text style={styles.statNumber}>\n              {stat.value?.toLocaleString() || '0'}\n            </Text>\n            <Text style={styles.statLabel}>{stat.label}</Text>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  const coverImage = profile ? parseElementImage(profile.cover, 'covers') : null;\n  const avatarImage = profile ? parseElementImage(profile.avatar, 'avatars') : null;\n  const coverFallbackUri = toElementImageUrl(coverImage);\n  const avatarFallbackUri = toElementImageUrl(avatarImage);\n  const coverUri = useWsImage(coverImage);\n  const avatarUri = useWsImage(avatarImage);\n  const coverDisplayUri = coverUri || coverFallbackUri;\n\n  return (\n    <Modal\n      visible={visible}\n      transparent={true}\n      onRequestClose={handleClose}\n      animationType=\"none\"\n      statusBarTranslucent\n    >\n      <Animated.View \n        style={[\n          styles.modalOverlay,\n          {\n            opacity: fadeAnim,\n          }\n        ]}\n      >\n        <TouchableWithoutFeedback onPress={handleClose}>\n          <View style={StyleSheet.absoluteFill} />\n        </TouchableWithoutFeedback>\n        \n        <Animated.View \n          style={[\n            styles.modalContent,\n            {\n              opacity: fadeAnim,\n              transform: [\n                { scale: scaleAnim },\n                { translateY: translateYAnim }\n              ]\n            }\n          ]}\n        >\n          <TouchableOpacity \n            style={styles.closeButton} \n            onPress={handleClose}\n            hitSlop={{ top: 10, right: 10, bottom: 10, left: 10 }}\n          >\n            <Text style={styles.closeButtonText}></Text>\n          </TouchableOpacity>\n\n          <ScrollView \n            style={styles.scrollView}\n            bounces={false}\n            showsVerticalScrollIndicator={false}\n          >\n            {loading ? (\n              <ActivityIndicator size=\"large\" color=\"#007AFF\" style={styles.loader} />\n            ) : error ? (\n              <Text style={styles.errorText}>{error}</Text>\n            ) : profile ? (\n              <View style={styles.profileContent}>\n                <View style={styles.coverContainer}>\n                  {coverDisplayUri ? (\n                    <Image \n                      source={{ uri: coverDisplayUri }} \n                      style={styles.coverImage}\n                      resizeMode=\"cover\"\n                    />\n                  ) : (\n                    <View style={styles.defaultCover} />\n                  )}\n                </View>\n\n                  <View style={[styles.avatarContainer, styles.avatarWithCover]}>\n                    <Image\n                    source={{ uri: avatarUri || avatarFallbackUri || DEFAULT_AVATAR }}\n                    style={styles.avatar}\n                  />\n                </View>\n\n                <View style={styles.nameRow}>\n                  <Text style={styles.name}>{profile.name}</Text>\n                  {profile.icons && profile.icons.includes('VERIFY') && (\n                    <Image\n                      source={require('../assets/verify.png')}\n                      style={styles.verifiedBadge}\n                    />\n                  )}\n                </View>\n                <Text style={styles.username}>@{profile.username}</Text>\n                \n                {profile.description && (\n                  <LinkText text={profile.description} style={styles.description} />\n                )}\n\n                {renderStats()}\n\n                {profile.icons && profile.icons.length > 0 && (\n                  <View style={styles.iconsContainer}>\n                    {profile.icons.filter(icon => icon !== 'VERIFY').map((icon, index) => (\n                      <Image\n                        key={index}\n                        source={{ uri: `https://elemsocial.com/Content/Icons/${icon}` }}\n                        style={styles.icon}\n                      />\n                    ))}\n                  </View>\n                )}\n              </View>\n            ) : null}\n          </ScrollView>\n        </Animated.View>\n      </Animated.View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    position: 'relative',\n    backgroundColor: 'white',\n    borderRadius: 15,\n    width: MODAL_WIDTH,\n    maxHeight: SCREEN_HEIGHT - MODAL_PADDING * 2,\n    marginHorizontal: MODAL_PADDING,\n    overflow: 'hidden',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.25,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 5,\n      },\n    }),\n  },\n  scrollView: {\n    maxHeight: SCREEN_HEIGHT - MODAL_PADDING * 2,\n  },\n  closeButton: {\n    position: 'absolute',\n    right: 15,\n    top: 15,\n    zIndex: 2,\n    width: 30,\n    height: 30,\n    borderRadius: 15,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    fontSize: 20,\n    color: '#fff',\n    fontWeight: 'bold',\n  },\n  loader: {\n    padding: 20,\n  },\n  errorText: {\n    color: 'red',\n    textAlign: 'center',\n    padding: 20,\n  },\n  profileContent: {\n    alignItems: 'center',\n  },\n  coverContainer: {\n    width: '100%',\n    height: Math.min(200, SCREEN_HEIGHT * 0.25),\n    backgroundColor: '#f0f0f0',\n  },\n  coverImage: {\n    width: '100%',\n    height: '100%',\n  },\n  defaultCover: {\n    width: '100%',\n    height: '100%',\n    backgroundColor: '#f0f0f0',\n  },\n  avatarContainer: {\n    width: Math.min(100, SCREEN_WIDTH * 0.2),\n    height: Math.min(100, SCREEN_WIDTH * 0.2),\n    marginTop: -Math.min(50, SCREEN_WIDTH * 0.1),\n    marginBottom: 10,\n    borderRadius: Math.min(50, SCREEN_WIDTH * 0.1),\n    borderWidth: 4,\n    borderColor: '#fff',\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n  },\n  avatarWithCover: {\n    marginTop: -Math.min(50, SCREEN_WIDTH * 0.1),\n  },\n  avatar: {\n    width: '100%',\n    height: '100%',\n  },\n  nameRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    marginBottom: 4,\n  },\n  name: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  username: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 10,\n  },\n  description: {\n    fontSize: 14,\n    color: '#444',\n    textAlign: 'center',\n    marginHorizontal: 20,\n    marginBottom: 15,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    width: '100%',\n    paddingVertical: 15,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: '#eee',\n  },\n  statItem: {\n    alignItems: 'center',\n    flex: 1,\n  },\n  statNumber: {\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  iconsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    padding: 10,\n    gap: 8,\n  },\n  icon: {\n    width: 24,\n    height: 24,\n  },\n  verifiedBadge: {\n    width: 20,\n    height: 20,\n  },\n});\n\nexport default ProfileModal; \n","import React, { useState, useRef, useEffect } from 'react';\nimport {\n  View,\n  StyleSheet,\n  TouchableOpacity,\n  Animated,\n  Text,\n  ActivityIndicator,\n  Platform,\n  Dimensions,\n  TouchableWithoutFeedback,\n} from 'react-native';\nimport { Video, ResizeMode, AVPlaybackStatus } from 'expo-av';\nimport { MaterialIcons } from '@expo/vector-icons';\n\ninterface CustomVideoPlayerProps {\n  uri: string;\n  style?: any;\n  onPress?: () => void;\n  shouldPlay?: boolean;\n}\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\nconst CONTROLS_TIMEOUT = 3000;\n\nconst CustomVideoPlayer: React.FC<CustomVideoPlayerProps> = ({\n  uri,\n  style,\n  onPress,\n  shouldPlay = false,\n}) => {\n  const [status, setStatus] = useState<AVPlaybackStatus | null>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isSeeking, setIsSeeking] = useState(false);\n  const [seekPosition, setSeekPosition] = useState(0);\n  \n  const videoRef = useRef<Video>(null);\n  const controlsTimeoutRef = useRef<NodeJS.Timeout>();\n  const controlsOpacity = useRef(new Animated.Value(1)).current;\n  const playButtonScale = useRef(new Animated.Value(1)).current;\n\n  useEffect(() => {\n    return () => {\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (shouldPlay && !isPlaying && status?.isLoaded) {\n      handlePlayPause();\n    }\n  }, [shouldPlay, status]);\n\n  const resetControlsTimeout = () => {\n    if (controlsTimeoutRef.current) {\n      clearTimeout(controlsTimeoutRef.current);\n    }\n\n    if (isPlaying) {\n      controlsTimeoutRef.current = setTimeout(() => {\n        Animated.timing(controlsOpacity, {\n          toValue: 0,\n          duration: 300,\n          useNativeDriver: true,\n        }).start(() => setShowControls(false));\n      }, CONTROLS_TIMEOUT);\n    }\n  };\n\n  const showControlsHandler = () => {\n    setShowControls(true);\n    Animated.timing(controlsOpacity, {\n      toValue: 1,\n      duration: 200,\n      useNativeDriver: true,\n    }).start();\n    resetControlsTimeout();\n  };\n\n  const handleVideoPress = () => {\n    if (!showControls) {\n      showControlsHandler();\n    } else if (onPress) {\n      onPress();\n    }\n  };\n\n  const handlePlayPause = async () => {\n    if (!videoRef.current || !status?.isLoaded) return;\n\n    try {\n      if (isPlaying) {\n        await videoRef.current.pauseAsync();\n        showControlsHandler();\n      } else {\n        await videoRef.current.playAsync();\n        resetControlsTimeout();\n      }\n      setIsPlaying(!isPlaying);\n\n      Animated.sequence([\n        Animated.timing(playButtonScale, {\n          toValue: 0.8,\n          duration: 100,\n          useNativeDriver: true,\n        }),\n        Animated.spring(playButtonScale, {\n          toValue: 1,\n          friction: 3,\n          tension: 40,\n          useNativeDriver: true,\n        }),\n      ]).start();\n    } catch (error) {\n      console.error('Error toggling play state:', error);\n    }\n  };\n\n  const handleVideoStatus = (newStatus: AVPlaybackStatus) => {\n    if (!newStatus.isLoaded) return;\n    \n    setStatus(newStatus);\n    if (!isSeeking) {\n      setSeekPosition(newStatus.positionMillis / (newStatus.durationMillis || 1));\n    }\n  };\n\n  const handleSeekBarPress = (event: any) => {\n    if (!status?.isLoaded) return;\n\n    const { locationX } = event.nativeEvent;\n    const progress = Math.max(0, Math.min(1, locationX / (SCREEN_WIDTH - 32)));\n    setIsSeeking(true);\n    setSeekPosition(progress);\n\n    if (videoRef.current) {\n      videoRef.current.setPositionAsync(progress * (status.durationMillis || 0))\n        .then(() => setIsSeeking(false))\n        .catch(console.error);\n    }\n  };\n\n  const formatTime = (millis: number): string => {\n    if (!millis || isNaN(millis)) return '0:00';\n    const totalSeconds = Math.floor(millis / 1000);\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n  };\n\n  const getCurrentTime = (): string => {\n    if (!status?.isLoaded) return '0:00';\n    return formatTime(status.positionMillis);\n  };\n\n  const getDuration = (): string => {\n    if (!status?.isLoaded) return '0:00';\n    return formatTime(status.durationMillis || 0);\n  };\n\n  return (\n    <View style={[styles.container, style]}>\n      <TouchableWithoutFeedback onPress={handleVideoPress}>\n        <View style={styles.videoContainer}>\n          <Video\n            ref={videoRef}\n            source={{ uri }}\n            style={StyleSheet.absoluteFill}\n            resizeMode={ResizeMode.CONTAIN}\n            onPlaybackStatusUpdate={handleVideoStatus}\n            shouldPlay={shouldPlay}\n            isLooping\n          />\n\n          {(!status?.isLoaded || status?.isBuffering) && (\n            <View style={styles.loadingContainer}>\n              <ActivityIndicator size=\"large\" color=\"#fff\" />\n            </View>\n          )}\n\n          {showControls && (\n            <Animated.View style={[styles.controls, { opacity: controlsOpacity }]}>  \n              <TouchableOpacity\n                style={styles.playButtonContainer}\n                onPress={handlePlayPause}\n              >\n                <Animated.View style={{ transform: [{ scale: playButtonScale }] }}>\n                  <MaterialIcons\n                    name={isPlaying ? 'pause' : 'play-arrow'}\n                    size={50}\n                    color=\"#fff\"\n                  />\n                </Animated.View>\n              </TouchableOpacity>\n\n              <View style={styles.bottomControls}>\n                <TouchableWithoutFeedback onPress={handleSeekBarPress}>\n                  <View style={styles.progressBar}>\n                    <View style={styles.progressBackground} />\n                    <View\n                      style={[\n                        styles.progressFill,\n                        { width: `${seekPosition * 100}%` },\n                      ]}\n                    />\n                    <View\n                      style={[\n                        styles.seekHandle,\n                        { left: `${seekPosition * 100}%` },\n                      ]}\n                    />\n                  </View>\n                </TouchableWithoutFeedback>\n\n                <View style={styles.timeContainer}>\n                  <Text style={styles.timeText}>{getCurrentTime()}</Text>\n                  <Text style={styles.timeText}>{getDuration()}</Text>\n                </View>\n              </View>\n            </Animated.View>\n          )}\n        </View>\n      </TouchableWithoutFeedback>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#000',\n    overflow: 'hidden',\n    borderRadius: 12,\n  },\n  videoContainer: {\n    aspectRatio: 16 / 9,\n    backgroundColor: '#000',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingContainer: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  },\n  controls: {\n    ...StyleSheet.absoluteFillObject,\n    padding: 16,\n    justifyContent: 'space-between',\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  },\n  playButtonContainer: {\n    alignSelf: 'center',\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: 'rgba(0, 0, 0, 0.6)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  bottomControls: {\n    width: '100%',\n  },\n  progressBar: {\n    height: 4,\n    width: '100%',\n    backgroundColor: 'rgba(255, 255, 255, 0.3)',\n    borderRadius: 2,\n    overflow: 'visible',\n    position: 'relative',\n  },\n  progressBackground: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.3)',\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: '#007AFF',\n    borderRadius: 2,\n  },\n  seekHandle: {\n    position: 'absolute',\n    top: -6,\n    marginLeft: -8,\n    width: 16,\n    height: 16,\n    borderRadius: 8,\n    backgroundColor: '#fff',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.25,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 5,\n      },\n    }),\n  },\n  timeContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 8,\n  },\n  timeText: {\n    color: '#fff',\n    fontSize: 12,\n    fontWeight: '600',\n    textShadowColor: 'rgba(0, 0, 0, 0.5)',\n    textShadowOffset: { width: 1, height: 1 },\n    textShadowRadius: 2,\n  },\n});\n\nexport default CustomVideoPlayer;","import React, { useState, useCallback, useRef, useMemo } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  Animated,\n  Modal,\n  Alert,\n  Platform,\n  ActivityIndicator,\n  Dimensions,\n} from 'react-native';\nimport {\n  PostResponse, postsAPI\n} from '../services/api';\nimport { format } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\nimport { Video, ResizeMode } from 'expo-av';\nimport FileService from '../services/FileService';\nimport { formatFileSize } from '../utils/fileUtils';\nimport ProfileModal from './ProfileModal';\nimport LinkText from './LinkText';\nimport CustomVideoPlayer from './CustomVideoPlayer';\nimport { parseElementImage, toElementImageUrl } from '../utils/elementImage';\nimport { DEFAULT_AVATAR } from '../constants/images';\nimport { useWsImage } from '../hooks/useWsImage';\n\ninterface PostCardProps {\n  post: PostResponse;\n  onUpdate: () => void;\n}\n\ninterface MediaContent {\n  Image?: {\n    simple_image?: string;\n    file_name: string;\n    width: number;\n    height: number;\n    orig_name?: string;\n  };\n  Video?: {\n    file_name: string;\n    width: number;\n    height: number;\n    orig_name?: string;\n  };\n  File?: {\n    file_id: string;\n    file_name: string;\n    file_size: number;\n    mime_type: string;\n  };\n}\n\ninterface MediaViewerProps {\n  url: string;\n  type: 'image' | 'video' | 'file';\n  onClose: () => void;\n  onDownload: (url: string, filename: string, fileId?: string) => void;\n  filename: string;\n  fileSize?: number;\n  fileId?: string;\n}\n\nconst PostCard: React.FC<PostCardProps> = ({ post, onUpdate }) => {\n  const [loadingAction, setLoadingAction] = useState<'LIKE' | 'DISLIKE' | null>(null);\n  const [localLikes, setLocalLikes] = useState(post.Likes);\n  const [localDislikes, setLocalDislikes] = useState(post.Dislikes);\n  const [localLiked, setLocalLiked] = useState(post.Liked);\n  const [localDisliked, setLocalDisliked] = useState(post.Disliked);\n  const [scaleAnim] = useState(new Animated.Value(1));\n  const [modalVisible, setModalVisible] = useState(false);\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const [mediaViewerProps, setMediaViewerProps] = useState<MediaViewerProps | null>(null);\n  const videoRef = useRef(null);\n  const [showProfile, setShowProfile] = useState(false);\n\n  const handleDownload = async (url: string, filename: string, fileId?: string) => {\n    try {\n      if (fileId) {\n        //   ,  FileService  \n        const fileService = FileService.getInstance();\n        await fileService.downloadFile(fileId, filename);\n      } else {\n        //       \n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      }\n    } catch (error) {\n      console.error('Error downloading file:', error);\n      Alert.alert('', '   ');\n    }\n  };\n\n  const openModal = (props: MediaViewerProps) => {\n    setMediaViewerProps(props);\n    setModalVisible(true);\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 300,\n      useNativeDriver: true,\n    }).start();\n  };\n\n  const closeModal = () => {\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 300,\n      useNativeDriver: true,\n    }).start(() => {\n      setModalVisible(false);\n      setMediaViewerProps(null);\n    });\n  };\n\n  const formatDate = useCallback((dateString: string) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    if (Number.isNaN(date.getTime())) return '';\n    return format(date, 'dd MMMM, HH:mm', { locale: ru });\n  }, []);\n\n  const avatarImage = useMemo(() => parseElementImage(post.Avatar, 'avatars'), [post.Avatar]);\n  const fallbackAvatarUri = useMemo(() => toElementImageUrl(avatarImage), [avatarImage]);\n  const avatarUri = useWsImage(avatarImage);\n\n  const handleInteraction = async (action: 'LIKE' | 'DISLIKE') => {\n    if (loadingAction) return;\n    \n    try {\n      setLoadingAction(action);\n      \n      //   UI\n      if (action === 'LIKE') {\n        if (!localLiked) {\n          setLocalLikes(prev => prev + 1);\n          setLocalLiked('Liked');\n          if (localDisliked) {\n            setLocalDislikes(prev => prev - 1);\n            setLocalDisliked(null);\n          }\n        } else {\n          setLocalLikes(prev => prev - 1);\n          setLocalLiked(null);\n        }\n      } else {\n        if (!localDisliked) {\n          setLocalDislikes(prev => prev + 1);\n          setLocalDisliked('Liked');\n          if (localLiked) {\n            setLocalLikes(prev => prev - 1);\n            setLocalLiked(null);\n          }\n        } else {\n          setLocalDislikes(prev => prev - 1);\n          setLocalDisliked(null);\n        }\n      }\n\n      await postsAPI.interactWithPost(action, post.ID);\n      onUpdate();\n    } catch (error) {\n      console.error('Error interacting with post:', error);\n      setLocalLikes(post.Likes);\n      setLocalDislikes(post.Dislikes);\n      setLocalLiked(post.Liked);\n      setLocalDisliked(post.Disliked);\n      Alert.alert('', '   ');\n    } finally {\n      setLoadingAction(null);\n    }\n  };\n\n  const handleReactionPress = useCallback((type: 'like' | 'dislike') => {\n    //  \n    Animated.sequence([\n      Animated.timing(scaleAnim, {\n        toValue: 0.95,\n        duration: 100,\n        useNativeDriver: false,\n      }),\n      Animated.spring(scaleAnim, {\n        toValue: 1,\n        friction: 4,\n        useNativeDriver: false,\n      }),\n    ]).start();\n\n    if (type === 'like') {\n      handleInteraction('LIKE');\n    } else {\n      handleInteraction('DISLIKE');\n    }\n  }, [scaleAnim, handleInteraction]);\n\n  const renderFileContent = (file: MediaContent['File']) => {\n    if (!file) return null;\n\n    return (\n      <TouchableOpacity\n        onPress={() => handleDownload('', file.file_name, file.file_id)}\n        style={styles.fileContainer}\n      >\n        <Image\n          source={require('../assets/file.png')}\n          style={styles.fileIcon}\n        />\n        <View style={styles.fileInfo}>\n          <Text style={styles.fileName}>{file.file_name}</Text>\n          <Text style={styles.fileSize}>{formatFileSize(file.file_size)}</Text>\n        </View>\n        <Icon name=\"download\" size={24} color=\"#666\" />\n      </TouchableOpacity>\n    );\n  };\n\n  const renderMediaContent = () => {\n    if (!post.Content) return null;\n\n    try {\n      const content: MediaContent = JSON.parse(post.Content);\n      const screenWidth = Dimensions.get('window').width - 30;\n\n      if (content.File) {\n        return renderFileContent(content.File);\n      }\n\n      if (content.Image) {\n        const aspectRatio = content.Image.width / content.Image.height;\n        const imageHeight = screenWidth / aspectRatio;\n        const maxHeight = screenWidth * 0.8;\n\n        const imageUrl = content.Image.simple_image\n          ? `https://elemsocial.com/Content/Simple/${content.Image.simple_image}`\n          : `https://elemsocial.com/Content/Posts/Images/${content.Image.file_name}`;\n        \n        const filename = content.Image.orig_name || content.Image.file_name;\n\n        return (\n          <TouchableOpacity\n            onPress={() => openModal({\n              url: imageUrl,\n              type: 'image',\n              filename,\n              onClose: closeModal,\n              onDownload: handleDownload\n            })}\n            style={[styles.mediaContainer, { height: Math.min(imageHeight, maxHeight) }]}\n          >\n            <Image\n              source={{ uri: imageUrl }}\n              style={styles.mediaContent}\n              resizeMode=\"contain\"\n            />\n          </TouchableOpacity>\n        );\n      }\n\n      if (content.Video) {\n        const aspectRatio = content.Video.width / content.Video.height;\n        const videoHeight = screenWidth / aspectRatio;\n        const maxHeight = screenWidth * 0.8;\n        const videoUrl = `https://elemsocial.com/Content/Posts/Video/${content.Video.file_name}`;\n        const filename = content.Video.orig_name ?? content.Video.file_name;\n\n        return (\n          <View \n            style={[\n              styles.mediaContainer, \n              { height: Math.min(videoHeight, maxHeight) }\n            ]}\n          >\n            <CustomVideoPlayer\n              uri={videoUrl}\n              style={styles.mediaContent}\n              onPress={() => {\n                openModal({\n                  url: videoUrl,\n                  type: 'video',\n                  filename,\n                  onClose: closeModal,\n                  onDownload: handleDownload\n                });\n              }}\n            />\n          </View>\n        );\n      }\n    } catch (error) {\n      console.error('Error parsing content:', error);\n      return null;\n    }\n\n    return null;\n  };\n\n  const renderMediaViewer = () => {\n    if (!mediaViewerProps) return null;\n\n    return (\n      <Modal\n        transparent\n        visible={modalVisible}\n        onRequestClose={closeModal}\n      >\n        <Animated.View \n          style={[\n            styles.modalOverlay,\n            {\n              opacity: fadeAnim,\n            },\n          ]}\n        >\n          <TouchableOpacity\n            style={styles.modalContent}\n            activeOpacity={1}\n            onPress={closeModal}\n          >\n            {mediaViewerProps.type === 'image' ? (\n              <Image\n                source={{ uri: mediaViewerProps.url }}\n                style={styles.fullScreenMedia}\n                resizeMode=\"contain\"\n              />\n            ) : (\n              <Video\n                ref={videoRef}\n                source={{ uri: mediaViewerProps.url }}\n                style={styles.fullScreenMedia}\n                resizeMode={ResizeMode.CONTAIN}\n                useNativeControls\n                shouldPlay={true}\n                isLooping\n              />\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.closeButton}\n            onPress={closeModal}\n          >\n            <Text style={styles.closeButtonText}></Text>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.downloadButton}\n            onPress={() => mediaViewerProps.onDownload(mediaViewerProps.url, mediaViewerProps.filename, mediaViewerProps.fileId)}\n          >\n            <Image\n              source={require('../assets/download.png')}\n              style={styles.downloadIcon}\n            />\n          </TouchableOpacity>\n        </Animated.View>\n      </Modal>\n    );\n  };\n\n  const handleProfilePress = () => {\n    setShowProfile(true);\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.header}>\n        <TouchableOpacity \n          style={styles.userInfo}\n          onPress={handleProfilePress}\n        >\n            <View style={styles.avatarContainer}>\n              <Image\n              source={{ uri: avatarUri || fallbackAvatarUri || DEFAULT_AVATAR }}\n              style={styles.avatar}\n            />\n          </View>\n\n          <View style={styles.userTextInfo}>\n            <View style={styles.nameContainer}>\n              <Text style={styles.name}>{post.Name}</Text>\n              {post.UserIcons && post.UserIcons.includes('VERIFY') && (\n                <Image\n                  source={require('../assets/verify.png')}\n                  style={styles.verifiedBadge}\n                />\n              )}\n            </View>\n            <Text style={styles.username}>@{post.Username}</Text>\n          </View>\n        </TouchableOpacity>\n        <Text style={styles.date}>{formatDate(post.Date)}</Text>\n      </View>\n\n      <LinkText text={post.Text} style={styles.text} />\n\n      {renderMediaContent()}\n      {renderMediaViewer()}\n\n      <View style={styles.footer}>\n        <Animated.View style={[\n          styles.reactions, \n          { transform: [{ scale: scaleAnim }] },\n          loadingAction ? styles.pointerEventsNone : styles.pointerEventsAuto\n        ]}>\n          <TouchableOpacity\n            style={[styles.reactionButton, localLiked && styles.reactionButtonActive]}\n            onPress={() => handleReactionPress('like')}\n          >\n            <Image\n              source={require('../assets/like.png')}\n              style={styles.reactionIcon}\n              tintColor={localLiked ? '#007AFF' : '#666'}\n              resizeMode=\"contain\"\n            />\n            <Text style={[styles.reactionCount, localLiked && styles.reactionCountActive]}>\n              {localLikes}\n            </Text>\n            {loadingAction === 'LIKE' && (\n              <Animated.View style={styles.reactionLoader}>\n                <ActivityIndicator\n                  size=\"small\"\n                  color={localLiked ? '#007AFF' : '#666'}\n                />\n              </Animated.View>\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={[styles.reactionButton, localDisliked && styles.dislikeButtonActive]}\n            onPress={() => handleReactionPress('dislike')}\n          >\n            <Image\n              source={require('../assets/dislike.png')}\n              style={styles.reactionIcon}\n              tintColor={localDisliked ? '#FF3B30' : '#666'}\n              resizeMode=\"contain\"\n            />\n            <Text style={[styles.reactionCount, localDisliked && styles.dislikeCountActive]}>\n              {localDislikes}\n            </Text>\n            {loadingAction === 'DISLIKE' && (\n              <Animated.View style={styles.reactionLoader}>\n                <ActivityIndicator\n                  size=\"small\"\n                  color={localDisliked ? '#FF3B30' : '#666'}\n                />\n              </Animated.View>\n            )}\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            style={styles.reactionButton}\n          >\n            <Image\n              source={require('../assets/comment.png')}\n              style={styles.reactionIcon}\n              tintColor=\"#666\"\n              resizeMode=\"contain\"\n            />\n            <Text style={styles.reactionCount}>\n              {post.Comments}\n            </Text>\n          </TouchableOpacity>\n        </Animated.View>\n\n        {post.MyPost && (\n          <View style={styles.myPostBadge}>\n            <Text style={styles.myPostText}> </Text>\n          </View>\n        )}\n      </View>\n\n      <ProfileModal\n        visible={showProfile}\n        username={post.Username}\n        onClose={() => setShowProfile(false)}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#fff',\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  userInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  avatarContainer: {\n    width: 40,\n    height: 40,\n    marginRight: 10,\n    borderRadius: 20,\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0',\n  },\n  avatar: {\n    width: '100%',\n    height: '100%',\n    borderRadius: 20,\n  },\n  userTextInfo: {\n    flex: 1,\n  },\n  nameContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 2,\n  },\n  name: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#000',\n  },\n  verifiedBadge: {\n    width: 16,\n    height: 16,\n  },\n  username: {\n    fontSize: 14,\n    color: '#666',\n  },\n  date: {\n    fontSize: 12,\n    color: '#666',\n  },\n  text: {\n    fontSize: 16,\n    color: '#000',\n    marginBottom: 10,\n    lineHeight: 22,\n  },\n  mediaContainer: {\n    width: '100%',\n    backgroundColor: '#000',\n    borderRadius: 10,\n    overflow: 'hidden',\n    marginVertical: 5,\n  },\n  mediaContent: {\n    width: '100%',\n    height: '100%',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  fullScreenMedia: {\n    width: '100%',\n    height: '100%',\n  },\n  closeButton: {\n    position: 'absolute',\n    top: 40,\n    right: 20,\n    zIndex: 2,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    color: '#fff',\n    fontSize: 24,\n    fontWeight: 'bold',\n  },\n  downloadButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 40,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    borderRadius: 25,\n    padding: 12,\n    zIndex: 1,\n  },\n  downloadIcon: {\n    width: 24,\n    height: 24,\n    tintColor: '#fff',\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  reactions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    gap: 20,\n  },\n  reactionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: '#f8f8f8',\n  },\n  reactionButtonActive: {\n    backgroundColor: '#E3F2FD',\n  },\n  dislikeButtonActive: {\n    backgroundColor: '#FFE5E5',\n  },\n  reactionIcon: {\n    width: 24,\n    height: 24,\n  },\n  reactionIconActive: {\n    tintColor: '#007AFF',\n  },\n  dislikeIconActive: {\n    tintColor: '#FF3B30',\n  },\n  reactionCount: {\n    fontSize: 15,\n    fontWeight: '600',\n    color: '#666',\n    marginLeft: 6,\n  },\n  reactionCountActive: {\n    color: '#007AFF',\n  },\n  dislikeCountActive: {\n    color: '#FF3B30',\n  },\n  reactionLoader: {\n    marginLeft: 4,\n  },\n  pointerEventsAuto: {\n    pointerEvents: 'auto',\n  },\n  pointerEventsNone: {\n    pointerEvents: 'none',\n  },\n  myPostBadge: {\n    backgroundColor: '#E3F2FD',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n  },\n  myPostText: {\n    fontSize: 12,\n    color: '#007AFF',\n    fontWeight: '500',\n  },\n  videoOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    justifyContent: 'flex-end',\n    alignItems: 'flex-end',\n    padding: 10,\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  },\n  fileContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 12,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  fileIcon: {\n    width: 40,\n    height: 40,\n    marginRight: 12,\n  },\n  fileInfo: {\n    flex: 1,\n  },\n  fileName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#333',\n    marginBottom: 4,\n  },\n  fileSize: {\n    fontSize: 14,\n    color: '#666',\n  },\n});\n\nexport default PostCard;\n","import React, { useState, useRef } from 'react';\nimport {\n    View,\n    TextInput,\n    TouchableOpacity,\n    StyleSheet,\n    ActivityIndicator,\n    Text,\n    Image,\n    Platform,\n    Animated,\n    Easing\n} from 'react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport { postsAPI, SelectedFile } from '../services/api';\n\ninterface CreatePostProps {\n    onPostCreated: (postId: string) => void;\n}\n\nconst CreatePost: React.FC<CreatePostProps> = ({ onPostCreated }) => {\n    const [text, setText] = useState('');\n    const [files, setFiles] = useState<SelectedFile[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    \n    // \n    const scaleAnim = useRef(new Animated.Value(1)).current;\n    const successOpacityAnim = useRef(new Animated.Value(0)).current;\n\n    const handleAddImage = async () => {\n        try {\n            const result = await ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: true,\n                quality: 1,\n            });\n\n            if (!result.canceled) {\n                const file: SelectedFile = {\n                    uri: result.assets[0].uri,\n                    type: 'image/jpeg',\n                    name: 'photo.jpg'\n                };\n                setFiles([...files, file]);\n            }\n        } catch (error) {\n            console.error('   :', error);\n            setError('   ');\n        }\n    };\n\n    const animateSuccess = () => {\n        //   \n        Animated.sequence([\n            Animated.timing(scaleAnim, {\n                toValue: 0.95,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            //     \n            Animated.timing(successOpacityAnim, {\n                toValue: 1,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            Animated.delay(1000),\n            //   \n            Animated.timing(successOpacityAnim, {\n                toValue: 0,\n                duration: 200,\n                useNativeDriver: true,\n            }),\n            //     \n            Animated.timing(scaleAnim, {\n                toValue: 1,\n                duration: 200,\n                useNativeDriver: true,\n            })\n        ]).start();\n    };\n\n    const handleSubmit = async () => {\n        if (!text.trim() && files.length === 0) {\n            setError('   ');\n            return;\n        }\n\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const postId = await postsAPI.createPost(text, files);\n            setText('');\n            setFiles([]);\n            animateSuccess();\n            onPostCreated(postId);\n        } catch (error) {\n            console.error('   :', error);\n            setError(error instanceof Error ? error.message : '   ');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <View style={styles.container}>\n            <Animated.View style={[\n                styles.formContainer,\n                {\n                    transform: [{ scale: scaleAnim }]\n                }\n            ]}>\n                <TextInput\n                    style={styles.input}\n                    placeholder=\"   ?\"\n                    placeholderTextColor=\"#666\"\n                    value={text}\n                    onChangeText={setText}\n                    multiline\n                    maxLength={5000}\n                    editable={!isLoading}\n                />\n                \n                {files.length > 0 && (\n                    <View style={styles.filesContainer}>\n                        {files.map((file, index) => (\n                            <View key={index} style={styles.filePreview}>\n                                <Image \n                                    source={{ uri: file.uri }} \n                                    style={styles.imagePreview} \n                                />\n                                <TouchableOpacity \n                                    style={styles.removeButton}\n                                    onPress={() => setFiles(files.filter((_, i) => i !== index))}\n                                >\n                                    <Text style={styles.removeButtonText}></Text>\n                                </TouchableOpacity>\n                            </View>\n                        ))}\n                    </View>\n                )}\n\n                {error && (\n                    <Text style={styles.errorText}>{error}</Text>\n                )}\n\n                <View style={styles.footer}>\n                    <TouchableOpacity \n                        style={styles.addButton} \n                        onPress={handleAddImage}\n                        disabled={isLoading}\n                    >\n                        <Image \n                            source={require('../assets/addfile.png')} \n                            style={styles.addButtonIcon}\n                        />\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        style={[\n                            styles.submitButton,\n                            (!text.trim() && files.length === 0) && styles.submitButtonDisabled\n                        ]}\n                        onPress={handleSubmit}\n                        disabled={isLoading || (!text.trim() && files.length === 0)}\n                    >\n                        {isLoading ? (\n                            <ActivityIndicator color=\"#fff\" />\n                        ) : (\n                            <Text style={styles.submitButtonText}></Text>\n                        )}\n                    </TouchableOpacity>\n                </View>\n            </Animated.View>\n\n            <Animated.View \n                style={[\n                    styles.successMessage,\n                    { opacity: successOpacityAnim }\n                ]}\n                pointerEvents=\"none\"\n            >\n                <Text style={styles.successText}> !</Text>\n            </Animated.View>\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: '#fff',\n        borderRadius: 12,\n        overflow: 'hidden',\n        ...Platform.select({\n            ios: {\n                shadowColor: '#000',\n                shadowOffset: { width: 0, height: 2 },\n                shadowOpacity: 0.1,\n                shadowRadius: 4,\n            },\n            android: {\n                elevation: 3,\n            },\n        }),\n    },\n    formContainer: {\n        width: '100%',\n        backgroundColor: '#fff',\n    },\n    input: {\n        minHeight: 80,\n        padding: 15,\n        fontSize: 16,\n        color: '#000',\n        textAlignVertical: 'top',\n    },\n    filesContainer: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        padding: 10,\n        borderTopWidth: 1,\n        borderTopColor: '#eee',\n    },\n    filePreview: {\n        width: 100,\n        height: 100,\n        margin: 5,\n        borderRadius: 8,\n        overflow: 'hidden',\n        position: 'relative',\n    },\n    imagePreview: {\n        width: '100%',\n        height: '100%',\n    },\n    removeButton: {\n        position: 'absolute',\n        top: 5,\n        right: 5,\n        width: 24,\n        height: 24,\n        borderRadius: 12,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    removeButtonText: {\n        color: '#fff',\n        fontSize: 18,\n        fontWeight: 'bold',\n    },\n    footer: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        padding: 10,\n        borderTopWidth: 1,\n        borderTopColor: '#eee',\n    },\n    addButton: {\n        width: 40,\n        height: 40,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginRight: 10,\n    },\n    addButtonIcon: {\n        width: 24,\n        height: 24,\n        tintColor: '#666',\n    },\n    submitButton: {\n        flex: 1,\n        height: 40,\n        backgroundColor: '#007AFF',\n        borderRadius: 20,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    submitButtonDisabled: {\n        backgroundColor: '#ccc',\n    },\n    submitButtonText: {\n        color: '#fff',\n        fontSize: 16,\n        fontWeight: '600',\n    },\n    errorText: {\n        color: '#DC3545',\n        fontSize: 14,\n        marginHorizontal: 15,\n        marginBottom: 10,\n    },\n    successMessage: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    },\n    successText: {\n        color: '#28A745',\n        fontSize: 18,\n        fontWeight: '600',\n    }\n});\n\nexport default CreatePost; ","import React, { useEffect, useState, useRef } from 'react';\nimport { View, Text, StyleSheet, Animated } from 'react-native';\nimport webSocketService from '../services/WebSocket';\n\nconst WebSocketStatus: React.FC = () => {\n    const [status, setStatus] = useState<'connecting' | 'connected' | 'error'>('connecting');\n    const [errorMessage, setErrorMessage] = useState<string | null>(null);\n    const slideAnim = useRef(new Animated.Value(-100)).current;\n    const opacityAnim = useRef(new Animated.Value(0)).current;\n    const wasConnected = useRef(false);\n\n    useEffect(() => {\n        const checkConnection = () => {\n            if (webSocketService.connectionStatus && webSocketService.ready) {\n                if (!wasConnected.current) {\n                    setStatus('connected');\n                    wasConnected.current = true;\n                    //       2 \n                    setTimeout(hideNotification, 2000);\n                }\n            } else if (wasConnected.current) {\n                //       \n                setStatus('error');\n                setErrorMessage(' ');\n                wasConnected.current = false;\n                showNotification();\n            }\n        };\n\n        const showNotification = () => {\n            Animated.parallel([\n                Animated.timing(slideAnim, {\n                    toValue: 0,\n                    duration: 300,\n                    useNativeDriver: true,\n                }),\n                Animated.timing(opacityAnim, {\n                    toValue: 1,\n                    duration: 300,\n                    useNativeDriver: true,\n                }),\n            ]).start();\n        };\n\n        const interval = setInterval(checkConnection, 1000);\n\n        const timeout = setTimeout(() => {\n            if (status === 'connecting' && !wasConnected.current) {\n                setStatus('error');\n                setErrorMessage('   ');\n                showNotification();\n            }\n        }, 15000);\n\n        if (status === 'connecting' && !wasConnected.current) {\n            showNotification();\n        }\n\n        return () => {\n            clearInterval(interval);\n            clearTimeout(timeout);\n        };\n    }, [status]);\n\n    const hideNotification = () => {\n        Animated.parallel([\n            Animated.timing(slideAnim, {\n                toValue: -100,\n                duration: 300,\n                useNativeDriver: true,\n            }),\n            Animated.timing(opacityAnim, {\n                toValue: 0,\n                duration: 300,\n                useNativeDriver: true,\n            }),\n        ]).start();\n    };\n\n    const getMessage = () => {\n        switch (status) {\n            case 'connecting':\n                return ' ...';\n            case 'connected':\n                return ' ';\n            case 'error':\n                return errorMessage || ' ';\n        }\n    };\n\n    if (status === 'connected' && !opacityAnim) return null;\n\n    return (\n        <Animated.View \n            style={[\n                styles.container,\n                {\n                    transform: [{ translateY: slideAnim }],\n                    opacity: opacityAnim,\n                }\n            ]}\n        >\n            <View style={[\n                styles.content,\n                status === 'error' && styles.errorContent,\n                status === 'connected' && styles.successContent\n            ]}>\n                <Text style={styles.text}>{getMessage()}</Text>\n            </View>\n        </Animated.View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        position: 'absolute',\n        top: 10,\n        left: 10,\n        right: 10,\n        zIndex: 1000,\n        borderRadius: 8,\n        overflow: 'hidden',\n    },\n    content: {\n        backgroundColor: '#333',\n        padding: 14,\n        alignItems: 'center',\n        opacity: 0.9,\n        shadowColor: '#000',\n        shadowOffset: {\n            width: 0,\n            height: 2,\n        },\n        shadowOpacity: 0.25,\n        shadowRadius: 3.84,\n        elevation: 5,\n    },\n    errorContent: {\n        backgroundColor: '#DC3545',\n    },\n    successContent: {\n        backgroundColor: '#28A745',\n    },\n    text: {\n        color: '#fff',\n        fontSize: 15,\n        fontWeight: '500',\n    }\n});\n\nexport default WebSocketStatus; ","import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\n\n//    (  )\nconst colorPairs = [\n  { bg: '#FFE5E5', text: '#FF4D4D' }, // \n  { bg: '#E5F1FF', text: '#3399FF' }, // \n  { bg: '#E5FFE5', text: '#33CC33' }, // \n  { bg: '#FFE5FF', text: '#FF33FF' }, // \n  { bg: '#FFF0E5', text: '#FF8533' }, // \n  { bg: '#E5F9FF', text: '#33CCFF' }, // \n  { bg: '#F2E5FF', text: '#9933FF' }, // \n  { bg: '#FFFFE5', text: '#CCCC33' }, // \n];\n\ninterface LetterAvatarProps {\n  name: string;\n  size?: number;\n  style?: any;\n}\n\nconst LetterAvatar: React.FC<LetterAvatarProps> = ({ name, size = 120, style }) => {\n  //    ,     \"?\"\n  const letter = (name?.charAt(0) || '?').toUpperCase();\n  \n  //      \n  const colorIndex = Math.abs(name.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)) % colorPairs.length;\n  const colors = colorPairs[colorIndex];\n\n  const styles = StyleSheet.create({\n    container: {\n      width: size,\n      height: size,\n      borderRadius: size / 2,\n      backgroundColor: colors.bg,\n      justifyContent: 'center',\n      alignItems: 'center',\n      overflow: 'hidden',\n    },\n    letter: {\n      color: colors.text,\n      fontSize: size * 0.4,\n      fontWeight: '600',\n      textAlign: 'center',\n      textAlignVertical: 'center',\n    },\n  });\n\n  return (\n    <View style={[styles.container, style]}>\n      <Text style={styles.letter}>{letter}</Text>\n    </View>\n  );\n};\n\nexport default LetterAvatar;\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, ScrollView, StyleSheet, Image, TouchableOpacity } from 'react-native';\nimport { useTheme } from '@react-navigation/native';\nimport { OnlineUser } from '../types/websocket';\nimport webSocketService from '../services/WebSocket';\nimport LetterAvatar from './LetterAvatar';\nimport ProfileModal from './ProfileModal';\n\nconst OnlineUsers: React.FC = () => {\n    const [onlineUsers, setOnlineUsers] = useState<OnlineUser[]>([]);\n    const [selectedUser, setSelectedUser] = useState<OnlineUser | null>(null);\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const { colors } = useTheme();\n\n    useEffect(() => {\n        const handleSocialMessage = (data: any) => {\n            if (data.type === 'social' && data.action === 'get_online_users' && Array.isArray(data.users)) {\n                //     \n                const formattedUsers = data.users.map((user: any) => ({\n                    ID: user.id.toString(),\n                    AuthorID: user.id.toString(),\n                    Username: user.username,\n                    Name: user.name,\n                    Avatar: user.avatar\n                }));\n                setOnlineUsers(formattedUsers);\n            }\n        };\n\n        //    \n        webSocketService.addMessageHandler('social', handleSocialMessage);\n\n        //    \n        webSocketService.send({\n            type: 'social',\n            action: 'get_online_users'\n        });\n\n        return () => {\n            webSocketService.removeMessageHandler('social');\n        };\n    }, []);\n\n    const handleUserPress = (user: OnlineUser) => {\n        setSelectedUser(user);\n        setIsModalVisible(true);\n    };\n\n    return (\n        <View style={styles.container}>\n            <Text style={[styles.title, { color: colors.text }]}>  </Text>\n            <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                style={styles.scrollView}\n            >\n                {onlineUsers.length > 0 ? (\n                    onlineUsers.map((user) => (\n                        <TouchableOpacity \n                            key={user.ID} \n                            style={styles.userContainer}\n                            onPress={() => handleUserPress(user)}\n                        >\n                            <View style={styles.avatarContainer}>\n                                {user.Avatar && user.Avatar !== 'None' ? (\n                                    <Image \n                                        source={{ uri: `https://elemsocial.com/Content/Avatars/${user.Avatar}` }} \n                                        style={styles.avatar}\n                                    />\n                                ) : (\n                                    <LetterAvatar \n                                        name={user.Name || user.Username} \n                                        size={60}\n                                    />\n                                )}\n                                <View style={styles.onlineIndicator} />\n                            </View>\n                            <Text style={[styles.username, { color: colors.text }]} numberOfLines={1}>\n                                {user.Name || user.Username}\n                            </Text>\n                        </TouchableOpacity>\n                    ))\n                ) : (\n                    <View style={styles.emptyContainer}>\n                        <Text style={[styles.emptyText, { color: colors.text }]}>\n                            ...\n                        </Text>\n                    </View>\n                )}\n            </ScrollView>\n\n            {selectedUser && (\n                <ProfileModal\n                    visible={isModalVisible}\n                    onClose={() => setIsModalVisible(false)}\n                    username={selectedUser.Username}\n                />\n            )}\n        </View>\n    );\n};\n\nconst styles = StyleSheet.create({\n    container: {\n        marginVertical: 10,\n        borderBottomWidth: 1,\n        borderBottomColor: '#eee',\n        paddingBottom: 15,\n    },\n    title: {\n        fontSize: 16,\n        fontWeight: '600',\n        marginLeft: 15,\n        marginBottom: 10,\n    },\n    scrollView: {\n        paddingHorizontal: 10,\n    },\n    userContainer: {\n        alignItems: 'center',\n        marginHorizontal: 5,\n        width: 70,\n    },\n    avatarContainer: {\n        position: 'relative',\n        width: 60,\n        height: 60,\n    },\n    avatar: {\n        width: 60,\n        height: 60,\n        borderRadius: 30,\n        backgroundColor: '#f0f0f0',\n    },\n    onlineIndicator: {\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        width: 14,\n        height: 14,\n        borderRadius: 7,\n        backgroundColor: '#4CAF50',\n        borderWidth: 2,\n        borderColor: '#FFFFFF',\n    },\n    username: {\n        fontSize: 12,\n        marginTop: 5,\n        textAlign: 'center',\n    },\n    emptyContainer: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        paddingHorizontal: 20,\n    },\n    emptyText: {\n        fontSize: 14,\n        color: '#666',\n    },\n});\n\nexport default OnlineUsers; ","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport {\n  View,\n  FlatList,\n  StyleSheet,\n  RefreshControl,\n  ActivityIndicator,\n  Text,\n  TouchableOpacity,\n  Animated,\n  Platform,\n} from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { PostResponse, postsAPI } from '../services/api';\nimport PostCard from '../components/PostCard';\nimport { AuthContext } from '../navigation';\nimport CreatePost from '../components/CreatePost';\nimport { connectWebSocket } from '../services/api';\nimport WebSocketStatus from '../components/WebSocketStatus';\nimport OnlineUsers from '../components/OnlineUsers';\n\ntype FeedType = 'LATEST' | 'REC' | 'SUBSCRIPTIONS';\ntype FeedScreenNavigationProp = NativeStackNavigationProp<RootStackParamList>;\n\nconst POSTS_PER_PAGE = 25;\nconst RETRY_INTERVAL = 5000;\n\nconst FeedScreen = () => {\n  const navigation = useNavigation<FeedScreenNavigationProp>();\n  const [feedType, setFeedType] = useState<FeedType>('LATEST');\n  const [posts, setPosts] = useState<PostResponse[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMorePosts, setHasMorePosts] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const retryTimeoutRef = useRef<NodeJS.Timeout>();\n  const pageRef = useRef(0);\n  \n  //  \n  const loadingOpacity = useRef(new Animated.Value(0)).current;\n  const contentOpacity = useRef(new Animated.Value(1)).current;\n\n  const { logout } = React.useContext(AuthContext);\n\n  useEffect(() => {\n    //   WebSocket   \n    connectWebSocket().catch(console.error);\n    fetchPosts(true);\n  }, [feedType]);\n\n  useEffect(() => {\n    return () => {\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const animateLoading = useCallback((show: boolean) => {\n    Animated.parallel([\n      Animated.timing(loadingOpacity, {\n        toValue: show ? 1 : 0,\n        duration: 200,\n        useNativeDriver: false,\n      }),\n      Animated.timing(contentOpacity, {\n        toValue: show ? 0.3 : 1,\n        duration: 200,\n        useNativeDriver: false,\n      }),\n    ]).start();\n  }, []);\n\n  const handleLogin = useCallback(async () => {\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n    }\n    try {\n      //   \n      await logout();\n      \n      //       \n      setPosts([]);\n      setError(null);\n      setLoading(false);\n      setRefreshing(false);\n      setLoadingMore(false);\n    } catch (error) {\n      console.error('Error logging out:', error);\n    }\n  }, [logout]);\n\n  const fetchPosts = useCallback(async (refresh = false) => {\n    try {\n      if (!refresh && loadingMore) return;\n\n      const startIndex = refresh ? 0 : pageRef.current * POSTS_PER_PAGE;\n      console.log('Fetching posts:', { feedType, startIndex, refresh });\n\n      if (refresh) {\n        setLoading(true);\n        pageRef.current = 0;\n        //  \n        if (!error && !refreshing) {\n          animateLoading(true);\n        }\n      } else {\n        setLoadingMore(true);\n      }\n\n      const newPosts = await postsAPI.getPosts(feedType, startIndex);\n      console.log('Received posts:', newPosts.length);\n      \n      //   LATEST   -  \n      if (feedType === 'LATEST' && newPosts.length === 0 && startIndex === 0) {\n        throw new Error('   ');\n      }\n      \n      if (refresh) {\n        setPosts(newPosts);\n      } else {\n        setPosts(prev => [...prev, ...newPosts]);\n      }\n      \n      setHasMorePosts(newPosts.length === POSTS_PER_PAGE);\n      if (newPosts.length === POSTS_PER_PAGE) {\n        pageRef.current += 1;\n      }\n      setError(null);\n\n      if (retryTimeoutRef.current) {\n        clearTimeout(retryTimeoutRef.current);\n      }\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n      setError('  \\n\\n   ,     VPN');\n      \n      //      LATEST  \n      if (feedType === 'LATEST') {\n        if (retryTimeoutRef.current) {\n          clearTimeout(retryTimeoutRef.current);\n        }\n        const delay = RETRY_INTERVAL + Math.random() * 1000;\n        retryTimeoutRef.current = setTimeout(() => {\n          fetchPosts(true);\n        }, delay);\n      }\n    } finally {\n      //           pull-to-refresh\n      if (!error && !refreshing) {\n        animateLoading(false);\n      }\n      setLoading(false);\n      setRefreshing(false);\n      setLoadingMore(false);\n    }\n  }, [feedType, loadingMore, error, refreshing]);\n\n  const updateSinglePost = useCallback(async (postId: string) => {\n    try {\n      const updatedPost = await postsAPI.loadPost(postId);\n      setPosts(prevPosts => \n        prevPosts.map(post => \n          post.ID === postId ? updatedPost : post\n        )\n      );\n    } catch (error) {\n      console.error('Error updating post:', error);\n    }\n  }, []);\n\n  const handlePostCreated = async (postId: string) => {\n    try {\n      const newPost = await postsAPI.getPost(postId);\n      setPosts(prev => [newPost, ...prev]);\n    } catch (error) {\n      console.error('Error loading new post:', error);\n    }\n  };\n\n  const handleRefresh = useCallback(() => {\n    console.log('Refreshing posts...');\n    setRefreshing(true);\n    fetchPosts(true);\n  }, [fetchPosts]);\n\n  const handleLoadMore = useCallback(() => {\n    console.log('Loading more posts...');\n    if (hasMorePosts && !loadingMore && !refreshing) {\n      fetchPosts(false);\n    }\n  }, [hasMorePosts, loadingMore, refreshing, fetchPosts]);\n\n  const handleChangeFeedType = useCallback((type: FeedType) => {\n    if (type === feedType) return;\n    if (retryTimeoutRef.current) {\n      clearTimeout(retryTimeoutRef.current);\n    }\n    console.log('Changing feed type to:', type);\n    setPosts([]);\n    setHasMorePosts(true);\n    pageRef.current = 0;\n    setFeedType(type);\n  }, [feedType]);\n\n  const renderPost = useCallback(({ item }: { item: PostResponse }) => {\n    return (\n      <PostCard\n        post={item}\n        onUpdate={() => updateSinglePost(item.ID)}\n      />\n    );\n  }, [updateSinglePost]);\n\n  const renderHeader = useCallback(() => (\n    <View style={styles.header}>\n        <WebSocketStatus />\n        <OnlineUsers />\n        <View style={styles.createPostContainer}>\n            <CreatePost onPostCreated={handlePostCreated} />\n        </View>\n        <View style={styles.feedTypeContainer}>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'LATEST' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('LATEST')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'LATEST' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'REC' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('REC')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'REC' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n                style={[styles.feedTypeButton, feedType === 'SUBSCRIPTIONS' && styles.activeFeedType]}\n                onPress={() => handleChangeFeedType('SUBSCRIPTIONS')}\n            >\n                <Text style={[styles.feedTypeText, feedType === 'SUBSCRIPTIONS' && styles.activeFeedTypeText]}>\n                    \n                </Text>\n            </TouchableOpacity>\n        </View>\n    </View>\n  ), [feedType, handleChangeFeedType, handlePostCreated]);\n\n  const renderError = useCallback(() => {\n    if (!error) return null;\n    return (\n      <View style={styles.errorContainer}>\n        <Text style={styles.errorText}>{error}</Text>\n        <TouchableOpacity style={styles.retryButton} onPress={() => fetchPosts(true)}>\n          <Text style={styles.retryButtonText}></Text>\n        </TouchableOpacity>\n        <TouchableOpacity style={styles.loginButton} onPress={handleLogin}>\n          <Text style={styles.loginButtonText}> </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }, [error, handleLogin]);\n\n  const renderEmpty = useCallback(() => {\n    if (loading) return null;\n    return (\n      <View style={styles.emptyContainer}>\n        <Text style={styles.emptyText}>\n          {error ? '' : ' '}\n        </Text>\n      </View>\n    );\n  }, [loading, error]);\n\n  const renderFooter = useCallback(() => {\n    if (!loadingMore) return null;\n    return (\n      <View style={styles.footer}>\n        <ActivityIndicator size=\"small\" color=\"#007AFF\" />\n      </View>\n    );\n  }, [loadingMore]);\n\n  if (loading && posts.length === 0) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color=\"#007AFF\" />\n        </View>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <FlatList\n        data={posts}\n        renderItem={renderPost}\n        keyExtractor={item => `${feedType}_${item.ID}`}\n        onEndReached={handleLoadMore}\n        onEndReachedThreshold={0.5}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={handleRefresh}\n            colors={['#007AFF']}\n            tintColor=\"#007AFF\"\n          />\n        }\n        ListEmptyComponent={renderEmpty}\n        ListFooterComponent={renderFooter}\n        contentContainerStyle={styles.listContent}\n        ListHeaderComponent={renderHeader}\n      />\n\n      {renderError()}\n    </View>\n  );\n};\n\n//       \nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  contentContainer: {\n    flex: 1,\n    position: 'relative',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  header: {\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    ...Platform.select({\n      ios: {\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 1 },\n        shadowOpacity: 0.1,\n        shadowRadius: 1,\n      },\n      android: {\n        elevation: 2,\n      },\n    }),\n  },\n  createPostContainer: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  feedTypeContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    backgroundColor: '#fff',\n    zIndex: 1,\n  },\n  feedTypeButton: {\n    flex: 1,\n    paddingVertical: 8,\n    alignItems: 'center',\n    borderRadius: 20,\n    marginHorizontal: 4,\n  },\n  activeFeedType: {\n    backgroundColor: '#E3F2FD',\n  },\n  feedTypeText: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: '#666',\n  },\n  activeFeedTypeText: {\n    color: '#007AFF',\n  },\n  content: {\n    flex: 1,\n  },\n  listContent: {\n    flexGrow: 1,\n  },\n  loadingOverlay: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: 'rgba(255, 255, 255, 0.8)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  pointerEventsAuto: {\n    pointerEvents: 'auto',\n  },\n  pointerEventsNone: {\n    pointerEvents: 'none',\n  },\n  footer: {\n    padding: 20,\n    alignItems: 'center',\n  },\n  errorContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    padding: 20,\n    backgroundColor: '#fff',\n    borderTopWidth: 1,\n    borderTopColor: '#eee',\n    alignItems: 'center',\n  },\n  errorText: {\n    fontSize: 14,\n    color: '#FF3B30',\n    textAlign: 'center',\n    marginBottom: 15,\n  },\n  retryButton: {\n    backgroundColor: '#007AFF',\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderRadius: 20,\n    marginBottom: 10,\n  },\n  retryButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  loginButton: {\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n  },\n  loginButtonText: {\n    color: '#007AFF',\n    fontSize: 16,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: '#666',\n    textAlign: 'center',\n  },\n});\n\nexport default FeedScreen;\n","import React, { useEffect, useState, useContext } from 'react';\nimport {\n  View,\n  Text,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  ActivityIndicator,\n  RefreshControl,\n  ScrollView,\n} from 'react-native';\nimport { profileAPI, getAccountData, ProfileData } from '../services/api';\nimport { AuthContext } from '../navigation';\nimport ErrorMessage from '../components/ErrorMessage';\nimport { parseElementImage, toElementImageUrl } from '../utils/elementImage';\nimport { DEFAULT_AVATAR } from '../constants/images';\nimport { useWsImage } from '../hooks/useWsImage';\n\ninterface ProfileScreenProps {\n  username?: string;\n}\n\nconst ProfileScreen: React.FC<ProfileScreenProps> = ({ username }) => {\n  const { logout } = useContext(AuthContext);\n  const [profile, setProfile] = useState<ProfileData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [refreshing, setRefreshing] = useState(false);\n\n  useEffect(() => {\n    fetchProfile();\n  }, [username]);\n\n  const coverImage = parseElementImage(profile?.cover ?? null, 'covers');\n  const avatarImage = parseElementImage(profile?.avatar ?? null, 'avatars');\n  const coverFallbackUri = toElementImageUrl(coverImage);\n  const avatarFallbackUri = toElementImageUrl(avatarImage);\n  const coverUri = useWsImage(coverImage);\n  const avatarUri = useWsImage(avatarImage);\n  const coverDisplayUri = coverUri || coverFallbackUri;\n\n  const fetchProfile = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      let data: ProfileData;\n      \n      if (username) {\n        data = await profileAPI.getProfile(username.replace(/^@+/, '').trim());\n      } else {\n        //  username  ,      \n        const accountData = await getAccountData();\n        if (accountData) {\n          data = await profileAPI.getProfile(accountData.username);\n        } else {\n          throw new Error('    ');\n        }\n      }\n      \n      setProfile(data);\n    } catch (error) {\n      console.error('  :', error);\n      setError('   .        .');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchProfile();\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (error) {\n      console.error(' :', error);\n      setError('    ');\n    }\n  };\n\n  if (loading) {\n    return (\n      <View style={styles.centered}>\n        <ActivityIndicator size=\"large\" color=\"#007AFF\" />\n      </View>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <View style={styles.centered}>\n        <Text>  </Text>\n        <TouchableOpacity \n          style={styles.retryButton}\n          onPress={fetchProfile}\n        >\n          <Text style={styles.retryButtonText}> </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  const renderStats = () => {\n    const stats = [\n      { label: '', value: profile.posts },\n      { label: '', value: profile.subscribers },\n      { label: '', value: profile.subscriptions }\n    ];\n\n    return (\n      <View style={styles.stats}>\n        {stats.map((stat) => (\n          <View key={stat.label} style={styles.statItem}>\n            <Text style={styles.statNumber}>\n              {stat.value?.toLocaleString() || '0'}\n            </Text>\n            <Text style={styles.statLabel}>{stat.label}</Text>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  return (\n    <ScrollView\n      style={styles.container}\n      refreshControl={\n        <RefreshControl refreshing={refreshing} onRefresh={handleRefresh} />\n      }\n    >\n      <ErrorMessage \n        message={error} \n        onClose={() => setError('')}\n      />\n      \n      <View style={styles.profileInfo}>\n        {coverDisplayUri && (\n          <Image \n            source={{ uri: coverDisplayUri }} \n            style={styles.coverImage}\n            resizeMode=\"cover\"\n          />\n        )}\n        \n        <View style={[styles.avatarWrapper, coverDisplayUri ? styles.avatarWithCover : null]}>\n          <Image\n            source={{ uri: avatarUri || avatarFallbackUri || DEFAULT_AVATAR }}\n            style={styles.avatar}\n            resizeMode=\"cover\"\n          />\n        </View>\n        \n        <View style={styles.nameContainer}>\n          <View style={styles.nameRow}>\n            <Text style={styles.name}>{profile.name}</Text>\n            {profile.icons && profile.icons.includes('VERIFY') && (\n              <Image\n                source={require('../assets/verify.png')}\n                style={styles.verifiedBadge}\n              />\n            )}\n          </View>\n          <Text style={styles.username}>@{profile.username}</Text>\n          \n          {profile.description && (\n            <Text style={styles.description}>{profile.description}</Text>\n          )}\n\n          {profile.icons && profile.icons.length > 0 && (\n            <View style={styles.iconsContainer}>\n              {profile.icons.filter(icon => icon !== 'VERIFY').map((icon, index) => (\n                <Image\n                  key={index}\n                  source={{ uri: `https://elemsocial.com/Content/Icons/${icon}` }}\n                  style={styles.icon}\n                />\n              ))}\n            </View>\n          )}\n        </View>\n        \n        {renderStats()}\n        \n        {profile.my_profile && (\n          <TouchableOpacity\n            style={styles.logoutButton}\n            onPress={handleLogout}\n          >\n            <Text style={styles.logoutButtonText}></Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  profileInfo: {\n    position: 'relative',\n  },\n  coverImage: {\n    width: '100%',\n    height: 200,\n  },\n  avatarWrapper: {\n    alignItems: 'center',\n    marginTop: 20,\n    marginBottom: 10,\n  },\n  avatarWithCover: {\n    marginTop: -50,\n  },\n  avatar: {\n    width: 100,\n    height: 100,\n    borderRadius: 50,\n    borderWidth: 4,\n    borderColor: '#fff',\n    backgroundColor: '#f0f0f0',\n  },\n  nameContainer: {\n    alignItems: 'center',\n    marginBottom: 15,\n    paddingHorizontal: 15,\n  },\n  nameRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 4,\n  },\n  name: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#000',\n    marginBottom: 4,\n  },\n  username: {\n    fontSize: 16,\n    color: '#666',\n    marginBottom: 8,\n  },\n  description: {\n    fontSize: 14,\n    color: '#444',\n    textAlign: 'center',\n    paddingHorizontal: 20,\n    marginTop: 8,\n  },\n  iconsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    marginTop: 8,\n    gap: 8,\n  },\n  icon: {\n    width: 24,\n    height: 24,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    paddingVertical: 15,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: '#eee',\n    marginVertical: 15,\n    marginHorizontal: 15,\n  },\n  statItem: {\n    alignItems: 'center',\n    flex: 1,\n  },\n  statNumber: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  logoutButton: {\n    backgroundColor: '#007AFF',\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginHorizontal: 15,\n    marginTop: 15,\n    marginBottom: 20,\n  },\n  logoutButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  retryButton: {\n    marginTop: 10,\n    padding: 10,\n    backgroundColor: '#007AFF',\n    borderRadius: 8,\n  },\n  retryButtonText: {\n    color: '#fff',\n    fontSize: 16,\n  },\n  verifiedBadge: {\n    width: 20,\n    height: 20,\n  },\n});\n\nexport default ProfileScreen;\n","import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { Ionicons } from '@expo/vector-icons';\nimport LoginScreen from '../screens/LoginScreen';\nimport FeedScreen from '../screens/FeedScreen';\nimport ProfileScreen from '../screens/ProfileScreen';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Image, View, Text, StyleSheet } from 'react-native';\n\nconst Tab = createBottomTabNavigator();\nconst Stack = createNativeStackNavigator();\n\nexport const AuthContext = createContext<{\n  isLoggedIn: boolean;\n  setIsLoggedIn: (value: boolean) => void;\n  logout: () => Promise<void>;\n}>({\n  isLoggedIn: false,\n  setIsLoggedIn: () => {},\n  logout: async () => {},\n});\n\nconst MainTabs = () => {\n  return (\n    <Tab.Navigator\n      screenOptions={{\n        tabBarActiveTintColor: '#007AFF',\n        tabBarInactiveTintColor: '#8E8E93',\n        tabBarStyle: {\n          backgroundColor: '#FFFFFF',\n          borderTopWidth: 1,\n          borderTopColor: '#E5E5EA',\n        },\n        headerStyle: {\n          backgroundColor: '#FFFFFF',\n        },\n        headerTitleStyle: {\n          color: '#000000',\n          fontSize: 17,\n          fontWeight: '600',\n        },\n      }}\n    >\n      <Tab.Screen\n        name=\"Feed\"\n        component={FeedScreen}\n        options={{\n          title: '',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"home-outline\" size={size} color={color} />\n          ),\n          headerTitle: '',\n        }}\n      />\n      <Tab.Screen\n        name=\"Profile\"\n        component={ProfileScreen}\n        options={({ navigation }) => ({\n          title: ' ',\n          tabBarIcon: ({ color, size }) => (\n            <Ionicons name=\"person-outline\" size={size} color={color} />\n          ),\n          headerTitle: ' ',\n          headerRight: () => {\n            const { logout } = useContext(AuthContext);\n            return (\n              <Ionicons\n                name=\"log-out-outline\"\n                size={24}\n                color=\"#ff3b30\"\n                style={{ marginRight: 15 }}\n                onPress={logout}\n              />\n            );\n          },\n        })}\n      />\n    </Tab.Navigator>\n  );\n};\n\nconst Navigation = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    checkLoginStatus();\n  }, []);\n\n  const checkLoginStatus = async () => {\n    await AsyncStorage.clear();\n    const sKey = await AsyncStorage.getItem('S-KEY');\n    setIsLoggedIn(!!sKey);\n  };\n\n  const logout = async () => {\n    await AsyncStorage.removeItem('S-KEY');\n    setIsLoggedIn(false);\n  };\n\n  if (isLoggedIn) {\n    return (\n      <AuthContext.Provider value={{ isLoggedIn, setIsLoggedIn, logout }}>\n        <NavigationContainer>\n          <Stack.Navigator\n            screenOptions={{\n              headerStyle: {\n                backgroundColor: '#fff',\n              },\n              headerTintColor: '#000',\n              headerTitleStyle: {\n                fontWeight: 'bold',\n              },\n              headerTitle: () => (\n                <View style={styles.headerContainer}>\n                  <Image \n                    source={require('../assets/logo.png')} \n                    style={styles.headerLogo}\n                    resizeMode=\"contain\"\n                  />\n                  <Text style={styles.headerTitle}>Element+</Text>\n                </View>\n              ),\n            }}\n          >\n            <Stack.Screen name=\"Main\" component={MainTabs} />\n          </Stack.Navigator>\n        </NavigationContainer>\n      </AuthContext.Provider>\n    );\n  } else {\n    return (\n      <AuthContext.Provider value={{ isLoggedIn, setIsLoggedIn, logout }}>\n        <NavigationContainer>\n          <Stack.Navigator\n            screenOptions={{\n              headerStyle: {\n                backgroundColor: '#fff',\n              },\n              headerTintColor: '#000',\n              headerTitleStyle: {\n                fontWeight: 'bold',\n              },\n              headerTitle: () => (\n                <View style={styles.headerContainer}>\n                  <Image \n                    source={require('../assets/logo.png')} \n                    style={styles.headerLogo}\n                    resizeMode=\"contain\"\n                  />\n                  <Text style={styles.headerTitle}>Element+</Text>\n                </View>\n              ),\n            }}\n          >\n            <Stack.Screen name=\"Auth\" component={LoginScreen} />\n          </Stack.Navigator>\n        </NavigationContainer>\n      </AuthContext.Provider>\n    );\n  }\n};\n\nconst styles = StyleSheet.create({\n  headerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  headerLogo: {\n    width: 24,\n    height: 24,\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#000',\n  },\n});\n\nexport default Navigation;\n","import './src/utils/disableWarnings';\nimport React, { useCallback, useEffect } from 'react';\nimport Navigation from './src/navigation';\nimport { StatusBar } from 'expo-status-bar';\nimport { View, StyleSheet } from 'react-native';\n\nexport default function App() {\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      //  localStorage   \n      window.localStorage.clear();\n    }\n  }, []);\n\n  const renderNavigation = useCallback(() => <Navigation />, []);\n\n  return (\n    <View style={styles.container}>\n      <StatusBar style=\"auto\" />\n      {renderNavigation()}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n});\n","import { registerRootComponent } from 'expo';\n\nimport App from './App';\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","const originalConsoleError = console.error;\n\nconsole.error = (...args: any[]) => {\n  if (args[0]?.includes?.('Warning: Encountered two children with the same key')) {\n    return;\n  }\n  originalConsoleError.apply(console, args);\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/KirixElemClient/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [346], () => (__webpack_require__(2204)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","toStrictArrayBuffer","data","Uint8Array","copy","ArrayBuffer","byteLength","set","buffer","slice","async","rsaEncrypt","pk","publicKeyBuffer","base64String","replace","from","atob","c","charCodeAt","importPublicKey","payloadBuffer","TextEncoder","encode","publicKeyE","crypto","subtle","importKey","name","hash","encryptedDataBuffer","encrypt","error","Error","message","rsaDecryptBytes","privateKey","privateKeyE","decryptedDataBuffer","decrypt","base64ToBytes","base64","binaryString","bytes","length","i","aesDecryptBytes","key","iv","encrypted","ivBuffer","encryptedBuffer","importedKey","decryptedBuffer","blobToUint8Array","blob","arrayBuffer","constructor","this","url","socket","isConnected","rsaPublic","rsaPrivate","rsaPublicServer","aesKey","aesServerKey","keysReady","socketReady","messageQueue","processingMessages","messageHandlers","Map","reconnectTimer","isConnecting","shouldReconnect","connect","connectionStatus","ready","generateKeys","keyPair","window","generateKey","modulusLength","publicExponent","exportKey","publicKey","processQueue","shift","send","catch","generateRayID","timestamp","Date","now","chars","randomPart","charAt","Math","floor","random","readyState","WebSocket","OPEN","CONNECTING","binaryType","onopen","publicKeyPem","type","binary","String","fromCharCode","Array","btoa","pem","match","join","arrayBufferToPem","JSON","stringify","onmessage","rawData","event","unit8Array","decryptedAes","decryptedData","decode","handler","get","decryptedRsa","parse","getRandomValues","generateAESKey","aesKeyPayload","encryptedPayload","onclose","resetConnectionState","scheduleReconnect","onerror","push","ray_id","binaryData","Object","assign","result","aesEncrypt","Promise","resolve","reject","timeoutId","setTimeout","removeEventListener","onMessage","clearTimeout","addEventListener","disconnect","close","addMessageHandler","removeMessageHandler","delete","authApi","axios","create","baseURL","headers","postsApi","systemApi","connectWebSocket","retries","requireAuthorization","attemptCount","waitUntilReady","timeoutMs","startedAt","webSocketService","sKey","AsyncStorage","getItem","sKeyForAuth","timeout","status","accountData","setItem","action","S_KEY","interceptors","request","use","config","response","removeItem","sendAuthOverWebSocket","payload","accountID","id","undefined","text","sendSocialAction","normalizePost","post","ID","AuthorID","author_id","authorId","author","Username","username","Name","Avatar","avatar","author_data","UserIcons","user_icons","icons","Text","Content","content","date","create_date","Likes","Number","likes","Dislikes","dislikes","Liked","liked","Disliked","disliked","Comments","comments","MyPost","Boolean","my_post","extractPostsFromSocialResponse","isArray","posts","items","list","buildLoadPostsPayload","params","authAPI","email","password","device_type","device","hCaptchaToken","accept","h_captcha","profileAPI","getMyProfile","parseInt","cover","Cover","description","Description","Posts","subscribers","Subscribers","subscribed","Subscribed","CreateDate","Icons","split","subscriptions","Subscriptions","links_count","LinksCount","links","Links","my_profile","permissions","Posts_Permission","Comments_Permission","new_chats","NewChats_Permission","music_upload","MusicUpload_Permission","getProfile","trim","rawProfile","raw","typeValue","normalizedType","map","icon","icon_id","filter","permissionsRaw","normalizeProfileData","updateProfile","formData","FormData","entries","forEach","value","append","uploadAvatar","file","uploadCover","postsAPI","loadPost","extractSinglePostFromSocialResponse","pid","postId","createPost","files","clearMetadata","censoring","uri","Type","getPost","getPosts","startIndex","postsTypeMap","LATEST","REC","SUBSCRIPTIONS","posts_type","start_index","isAxiosError","getProfilePosts","targetId","targetType","normalizedTargetId","isFinite","target_id","target_type","getProfilePostsByUsername","normalizedUsername","profile","getUserPosts","userId","toString","postsArray","interactWithPost","addComment","getComments","height","Dimensions","styles","StyleSheet","overlay","flex","backgroundColor","justifyContent","alignItems","container","width","maxWidth","borderRadius","boxShadow","padding","title","fontSize","fontWeight","color","marginBottom","textAlign","lineHeight","button","paddingVertical","paddingHorizontal","alignSelf","buttonText","ErrorMessage","onClose","translateY","Animated","Value","useEffect","spring","toValue","useNativeDriver","tension","friction","start","handleClose","timing","duration","_jsx","Modal","transparent","visible","animationType","onRequestClose","children","View","style","transform","_jsxs","TouchableOpacity","onPress","activeOpacity","input","borderWidth","borderColor","outlineStyle","buttonContainer","pointerEvents","cursor","buttonDisabled","switchText","marginTop","stepText","LoginScreen","useNavigation","setIsLoggedIn","useContext","AuthContext","isRegistering","setIsRegistering","useState","loading","setLoading","setEmail","setPassword","loginError","setLoginError","setName","setUsername","regEmail","setRegEmail","regPassword","setRegPassword","captchaToken","setCaptchaToken","registrationError","setRegistrationError","_Fragment","TextInput","placeholder","onChangeText","editable","autoCapitalize","keyboardType","secureTextEntry","HCaptcha","sitekey","onVerify","token","test","disabled","ActivityIndicator","WS_MESSAGE_TYPES","WS_ACTIONS","formatFileSize","log","parseFloat","pow","toFixed","getMimeType","filename","ext","lastIndexOf","getFileExtension","toLowerCase","FileService","ws","fileDownloadCallbacks","fileChunks","setupMessageHandlers","getInstance","instance","downloadMessage","handleFileChunk","fileId","chunkNumber","totalChunks","chunkData","has","fill","chunks","includes","fileData","chunk","assembleChunks","callback","uploadFile","substring","chunkSize","ceil","size","end","min","splitFileIntoChunks","uploadMessage","fileName","fileSize","mimeType","downloadFile","Blob","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","header","paddingBottom","paddingTop","warning","buttons","flexDirection","gap","cancelButton","confirmButton","cancelButtonText","confirmButtonText","LinkConfirmModal","fadeAnim","useRef","current","scaleAnim","translateYAnim","setValue","parallel","statusBarTranslucent","opacity","absoluteFill","scale","numberOfLines","Linking","openURL","link","LinkText","selectedUrl","setSelectedUrl","urlRegex","part","index","renderTextWithLinks","normalizePath","path","parseElementImage","fallbackPath","decoded","decodeURIComponent","startsWith","obj","nestedAvatar","pathRaw","Path","fileRaw","File","simpleRaw","simple","Simple","simple_image","toElementImageUrl","image","normalizedPath","DEFAULT_AVATAR","imageBlobCache","toUint8Array","every","v","maybeBuffer","useWsImage","fallbackUrl","useMemo","setUri","cancelled","cacheKey","cached","lossless","then","extractImageBytes","mime","contentType","content_type","blobUrl","SCREEN_WIDTH","SCREEN_HEIGHT","MODAL_WIDTH","MODAL_PADDING","modalOverlay","modalContent","position","maxHeight","marginHorizontal","overflow","scrollView","closeButton","right","top","zIndex","closeButtonText","loader","errorText","profileContent","coverContainer","coverImage","defaultCover","avatarContainer","avatarWithCover","nameRow","stats","borderTopWidth","borderBottomWidth","statItem","statNumber","statLabel","iconsContainer","flexWrap","verifiedBadge","ProfileModal","setProfile","setError","loadProfile","avatarImage","coverFallbackUri","avatarFallbackUri","coverUri","avatarUri","coverDisplayUri","TouchableWithoutFeedback","hitSlop","bottom","left","ScrollView","bounces","showsVerticalScrollIndicator","Image","source","resizeMode","require","renderStats","label","stat","toLocaleString","videoContainer","aspectRatio","loadingContainer","absoluteFillObject","controls","playButtonContainer","bottomControls","progressBar","progressBackground","progressFill","seekHandle","marginLeft","timeContainer","timeText","textShadowColor","textShadowOffset","textShadowRadius","CustomVideoPlayer","shouldPlay","setStatus","isPlaying","setIsPlaying","showControls","setShowControls","isSeeking","setIsSeeking","seekPosition","setSeekPosition","videoRef","controlsTimeoutRef","controlsOpacity","playButtonScale","isLoaded","handlePlayPause","resetControlsTimeout","showControlsHandler","pauseAsync","playAsync","sequence","formatTime","millis","isNaN","totalSeconds","seconds","handleVideoPress","Video","ref","ResizeMode","CONTAIN","onPlaybackStatusUpdate","newStatus","positionMillis","durationMillis","isLooping","isBuffering","MaterialIcons","locationX","nativeEvent","progress","max","setPositionAsync","console","borderBottomColor","userInfo","marginRight","userTextInfo","nameContainer","mediaContainer","marginVertical","mediaContent","fullScreenMedia","downloadButton","downloadIcon","tintColor","footer","reactions","reactionButton","reactionButtonActive","dislikeButtonActive","reactionIcon","reactionIconActive","dislikeIconActive","reactionCount","reactionCountActive","dislikeCountActive","reactionLoader","pointerEventsAuto","pointerEventsNone","myPostBadge","myPostText","videoOverlay","fileContainer","fileIcon","fileInfo","PostCard","onUpdate","loadingAction","setLoadingAction","localLikes","setLocalLikes","localDislikes","setLocalDislikes","localLiked","setLocalLiked","localDisliked","setLocalDisliked","modalVisible","setModalVisible","mediaViewerProps","setMediaViewerProps","showProfile","setShowProfile","handleDownload","fileService","Alert","alert","openModal","props","closeModal","formatDate","useCallback","dateString","getTime","format","locale","ru","fallbackAvatarUri","handleInteraction","prev","handleReactionPress","handleProfilePress","renderMediaContent","screenWidth","file_name","file_id","file_size","Icon","imageHeight","imageUrl","orig_name","onDownload","videoHeight","videoUrl","useNativeControls","formContainer","minHeight","textAlignVertical","filesContainer","borderTopColor","filePreview","margin","imagePreview","removeButton","removeButtonText","addButton","addButtonIcon","submitButton","submitButtonDisabled","submitButtonText","successMessage","successText","CreatePost","onPostCreated","setText","setFiles","isLoading","setIsLoading","successOpacityAnim","placeholderTextColor","multiline","maxLength","_","ImagePicker","launchImageLibraryAsync","mediaTypes","All","allowsEditing","quality","canceled","assets","delay","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","errorContent","successContent","WebSocketStatus","errorMessage","setErrorMessage","slideAnim","opacityAnim","wasConnected","showNotification","interval","setInterval","checkConnection","hideNotification","clearInterval","getMessage","colorPairs","bg","LetterAvatar","letter","toUpperCase","colorIndex","abs","reduce","acc","char","colors","userContainer","onlineIndicator","emptyContainer","emptyText","OnlineUsers","onlineUsers","setOnlineUsers","selectedUser","setSelectedUser","isModalVisible","setIsModalVisible","useTheme","users","formattedUsers","user","horizontal","showsHorizontalScrollIndicator","handleUserPress","contentContainer","createPostContainer","feedTypeContainer","feedTypeButton","activeFeedType","feedTypeText","activeFeedTypeText","listContent","flexGrow","loadingOverlay","errorContainer","retryButton","retryButtonText","loginButton","loginButtonText","FeedScreen","feedType","setFeedType","setPosts","refreshing","setRefreshing","loadingMore","setLoadingMore","hasMorePosts","setHasMorePosts","retryTimeoutRef","pageRef","loadingOpacity","contentOpacity","logout","React","fetchPosts","animateLoading","show","handleLogin","refresh","newPosts","updateSinglePost","updatedPost","prevPosts","handlePostCreated","newPost","handleRefresh","handleLoadMore","handleChangeFeedType","renderPost","item","renderHeader","renderError","renderEmpty","renderFooter","FlatList","renderItem","keyExtractor","onEndReached","onEndReachedThreshold","refreshControl","RefreshControl","onRefresh","ListEmptyComponent","ListFooterComponent","contentContainerStyle","ListHeaderComponent","centered","profileInfo","avatarWrapper","logoutButton","logoutButtonText","ProfileScreen","fetchProfile","accountDataStr","getAccountData","Tab","createBottomTabNavigator","Stack","createNativeStackNavigator","createContext","isLoggedIn","MainTabs","Navigator","screenOptions","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarStyle","headerStyle","headerTitleStyle","Screen","component","options","tabBarIcon","Ionicons","headerTitle","navigation","headerRight","headerContainer","headerLogo","Navigation","checkLoginStatus","clear","Provider","NavigationContainer","headerTintColor","registerRootComponent","localStorage","renderNavigation","StatusBar","originalConsoleError","args","apply","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","e","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}